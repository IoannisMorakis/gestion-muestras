"use strict";(self.webpackChunkgestion_muestras=self.webpackChunkgestion_muestras||[]).push([[179],{3661:(ge,D,N)=>{function L(n){return"function"==typeof n}function B(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const U=B(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function R(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class j{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(L(r))try{r()}catch(o){e=o instanceof U?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{z(o)}catch(s){e=e??[],s instanceof U?e=[...e,...s.errors]:e.push(s)}}if(e)throw new U(e)}}add(e){var t;if(e&&e!==this)if(this.closed)z(e);else{if(e instanceof j){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&R(t,e)}remove(e){const{_finalizers:t}=this;t&&R(t,e),e instanceof j&&e._removeParent(this)}}j.EMPTY=(()=>{const n=new j;return n.closed=!0,n})();const G=j.EMPTY;function P(n){return n instanceof j||n&&"closed"in n&&L(n.remove)&&L(n.add)&&L(n.unsubscribe)}function z(n){L(n)?n():n.unsubscribe()}const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},f={setTimeout(n,e,...t){const{delegate:r}=f;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=f;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function g(n){f.setTimeout(()=>{const{onUnhandledError:e}=T;if(!e)throw n;e(n)})}function v(){}const y=O("C",void 0,void 0);function O(n,e,t){return{kind:n,value:e,error:t}}let K=null;function te(n){if(T.useDeprecatedSynchronousErrorHandling){const e=!K;if(e&&(K={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=K;if(K=null,t)throw r}}else n()}class bt extends j{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,P(e)&&e.add(this)):this.destination=Wt}static create(e,t,r){return new vs(e,t,r)}next(e){this.isStopped?Ct(function A(n){return O("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ct(function E(n){return O("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ct(y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yr=Function.prototype.bind;function di(n,e){return Yr.call(n,e)}class Ia{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ws(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ws(r)}else ws(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ws(t)}}}class vs extends bt{constructor(e,t,r){let i;if(super(),L(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&T.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&di(e.next,o),error:e.error&&di(e.error,o),complete:e.complete&&di(e.complete,o)}):i=e}this.destination=new Ia(i)}}function ws(n){T.useDeprecatedSynchronousErrorHandling?function ce(n){T.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=n)}(n):g(n)}function Ct(n,e){const{onStoppedNotification:t}=T;t&&f.setTimeout(()=>t(n,e))}const Wt={closed:!0,next:v,error:function ze(n){throw n},complete:v},vt="function"==typeof Symbol&&Symbol.observable||"@@observable";function tt(n){return n}function Np(n){return 0===n.length?tt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let jt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function xG(n){return n&&n instanceof bt||function AG(n){return n&&L(n.next)&&L(n.error)&&L(n.complete)}(n)&&P(n)}(t)?t:new vs(t,r,i);return te(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=vO(r))((i,o)=>{const s=new vs({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[vt](){return this}pipe(...t){return Np(t)(this)}toPromise(t){return new(t=vO(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function vO(n){var e;return null!==(e=n??T.Promise)&&void 0!==e?e:Promise}const SG=B(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Qi=(()=>{class n extends jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new wO(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new SG}next(t){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?G:(this.currentObservers=null,o.push(t),new j(()=>{this.currentObservers=null,R(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new jt;return t.source=this,t}}return n.create=(e,t)=>new wO(e,t),n})();class wO extends Qi{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:G}}class Nr extends Qi{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function bO(n){return L(n?.lift)}function On(n){return e=>{if(bO(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function En(n,e,t,r,i){return new MG(n,e,t,r,i)}class MG extends bt{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Et(n,e){return On((t,r)=>{let i=0;t.subscribe(En(r,o=>{r.next(n.call(e,o,i++))}))})}function Qv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function bs(n){return this instanceof bs?(this.v=n,this):new bs(n)}function TO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Xv(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const DO=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function AO(n){return L(n?.then)}function xO(n){return L(n[vt])}function SO(n){return Symbol.asyncIterator&&L(n?.[Symbol.asyncIterator])}function MO(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const OO=function XG(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function PO(n){return L(n?.[OO])}function kO(n){return function IO(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(p){return new Promise(function(w,I){o.push([h,p,w,I])>1||a(h,p)})})}function a(h,p){try{!function c(h){h.value instanceof bs?Promise.resolve(h.value.v).then(u,l):d(o[0][2],h)}(r[h](p))}catch(w){d(o[0][3],w)}}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,p){h(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield bs(t.read());if(i)return yield bs(void 0);yield yield bs(r)}}finally{t.releaseLock()}})}function NO(n){return L(n?.getReader)}function hi(n){if(n instanceof jt)return n;if(null!=n){if(xO(n))return function JG(n){return new jt(e=>{const t=n[vt]();if(L(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(DO(n))return function ZG(n){return new jt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(AO(n))return function e8(n){return new jt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,g)})}(n);if(SO(n))return RO(n);if(PO(n))return function t8(n){return new jt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(NO(n))return function n8(n){return RO(kO(n))}(n)}throw MO(n)}function RO(n){return new jt(e=>{(function r8(n,e){var t,r,i,o;return function CO(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=TO(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ro(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Gn(n,e,t=1/0){return L(e)?Gn((r,i)=>Et((o,s)=>e(r,o,i,s))(hi(n(r,i))),t):("number"==typeof e&&(t=e),On((r,i)=>function i8(n,e,t,r,i,o,s,a){const c=[];let u=0,l=0,d=!1;const h=()=>{d&&!c.length&&!u&&e.complete()},p=I=>u<r?w(I):c.push(I),w=I=>{o&&e.next(I),u++;let x=!1;hi(t(I,l++)).subscribe(En(e,k=>{i?.(k),o?p(k):e.next(k)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){const k=c.shift();s?Ro(e,s,()=>w(k)):w(k)}h()}catch(k){e.error(k)}}))};return n.subscribe(En(e,p,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function Vc(n=1/0){return Gn(tt,n)}const Yi=new jt(n=>n.complete());function Jv(n){return n[n.length-1]}function FO(n){return L(Jv(n))?n.pop():void 0}function Zl(n){return function s8(n){return n&&L(n.schedule)}(Jv(n))?n.pop():void 0}function Rp(n,e=0){return On((t,r)=>{t.subscribe(En(r,i=>Ro(r,n,()=>r.next(i),e),()=>Ro(r,n,()=>r.complete(),e),i=>Ro(r,n,()=>r.error(i),e)))})}function Fp(n,e=0){return On((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function LO(n,e){if(!n)throw new Error("Iterable cannot be null");return new jt(t=>{Ro(t,e,()=>{const r=n[Symbol.asyncIterator]();Ro(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Pn(n,e){return e?function f8(n,e){if(null!=n){if(xO(n))return function c8(n,e){return hi(n).pipe(Fp(e),Rp(e))}(n,e);if(DO(n))return function l8(n,e){return new jt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(AO(n))return function u8(n,e){return hi(n).pipe(Fp(e),Rp(e))}(n,e);if(SO(n))return LO(n,e);if(PO(n))return function d8(n,e){return new jt(t=>{let r;return Ro(t,e,()=>{r=n[OO](),Ro(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}(n,e);if(NO(n))return function h8(n,e){return LO(kO(n),e)}(n,e)}throw MO(n)}(n,e):hi(n)}function be(...n){return Pn(n,Zl(n))}function VO(n={}){const{connector:e=(()=>new Qi),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),s=c=void 0,l=d=!1},w=()=>{const I=s;p(),I?.unsubscribe()};return On((I,x)=>{u++,!d&&!l&&h();const k=c=c??e();x.add(()=>{u--,0===u&&!d&&!l&&(a=Zv(w,i))}),k.subscribe(x),!s&&u>0&&(s=new vs({next:M=>k.next(M),error:M=>{d=!0,h(),a=Zv(p,t,M),k.error(M)},complete:()=>{l=!0,h(),a=Zv(p,r),k.complete()}}),hi(I).subscribe(s))})(o)}}function Zv(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new vs({next:()=>{r.unsubscribe(),n()}});return hi(e(...t)).subscribe(r)}function Xi(n,e){return On((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(En(r,c=>{i?.unsubscribe();let u=0;const l=o++;hi(n(c,l)).subscribe(i=En(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function m8(n,e){return n===e}function ft(n){for(let e in n)if(n[e]===ft)return e;throw Error("Could not find renamed property on target object.")}function Lp(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function In(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(In).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function e0(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const _8=ft({__forward_ref__:ft});function At(n){return n.__forward_ref__=At,n.toString=function(){return In(this())},n}function Ce(n){return t0(n)?n():n}function t0(n){return"function"==typeof n&&n.hasOwnProperty(_8)&&n.__forward_ref__===At}function n0(n){return n&&!!n.\u0275providers}const UO="https://g.co/ng/security#xss";class X extends Error{constructor(e,t){super(function Vp(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function De(n){return"string"==typeof n?n:null==n?"":String(n)}function Up(n,e){throw new X(-201,!1)}function fi(n,e){null==n&&function ot(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function _e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bp(n){return BO(n,jp)||BO(n,$O)}function BO(n,e){return n.hasOwnProperty(e)?n[e]:null}function jO(n){return n&&(n.hasOwnProperty(r0)||n.hasOwnProperty(T8))?n[r0]:null}const jp=ft({\u0275prov:ft}),r0=ft({\u0275inj:ft}),$O=ft({ngInjectableDef:ft}),T8=ft({ngInjectorDef:ft});var Le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Le||{});let o0;function Rr(n){const e=o0;return o0=n,e}function HO(n,e,t){const r=Bp(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Le.Optional?null:void 0!==e?e:void Up(In(n))}const It=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ed={},s0="__NG_DI_FLAG__",$p="ngTempTokenPath",A8=/\n/gm,GO="__source";let Uc;function Cs(n){const e=Uc;return Uc=n,e}function M8(n,e=Le.Default){if(void 0===Uc)throw new X(-203,!1);return null===Uc?HO(n,void 0,e):Uc.get(n,e&Le.Optional?null:void 0,e)}function me(n,e=Le.Default){return(function zO(){return o0}()||M8)(Ce(n),e)}function de(n,e=Le.Default){return me(n,zp(e))}function zp(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function a0(n){const e=[];for(let t=0;t<n.length;t++){const r=Ce(n[t]);if(Array.isArray(r)){if(0===r.length)throw new X(900,!1);let i,o=Le.Default;for(let s=0;s<r.length;s++){const a=r[s],c=O8(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function td(n,e){return n[s0]=e,n.prototype[s0]=e,n}function O8(n){return n[s0]}function Fo(n){return{toString:n}.toString()}var Hp=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Hp||{}),xi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(xi||{});const Ji={},nt=[],Gp=ft({\u0275cmp:ft}),c0=ft({\u0275dir:ft}),u0=ft({\u0275pipe:ft}),WO=ft({\u0275mod:ft}),Lo=ft({\u0275fac:ft}),nd=ft({__NG_ELEMENT_ID__:ft}),KO=ft({__NG_ENV_ID__:ft});function QO(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function l0(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];XO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function YO(n){return 3===n||4===n||6===n}function XO(n){return 64===n.charCodeAt(0)}function rd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||JO(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function JO(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const ZO="ng-template";function N8(n,e,t){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const s=n[r++];if(t&&"class"===o&&-1!==QO(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function eP(n){return 4===n.type&&n.value!==ZO}function R8(n,e,t){return e===(4!==n.type||t?n.value:ZO)}function F8(n,e,t){let r=4;const i=n.attrs||[],o=function U8(n){for(let e=0;e<n.length;e++)if(YO(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!R8(n,c,t)||""===c&&1===e.length){if(Si(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!N8(n.attrs,u,t)){if(Si(r))return!1;s=!0}continue}const d=L8(8&r?"class":c,i,eP(n),t);if(-1===d){if(Si(r))return!1;s=!0;continue}if(""!==u){let h;h=d>o?"":i[d+1].toLowerCase();const p=8&r?h:null;if(p&&-1!==QO(p,u,0)||2&r&&u!==h){if(Si(r))return!1;s=!0}}}}else{if(!s&&!Si(r)&&!Si(c))return!1;if(s&&Si(c))continue;s=!1,r=c|1&r}}return Si(r)||s}function Si(n){return 0==(1&n)}function L8(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function B8(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function tP(n,e,t=!1){for(let r=0;r<e.length;r++)if(F8(n,e[r],t))return!0;return!1}function nP(n,e){return n?":not("+e.trim()+")":e}function $8(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Si(s)&&(e+=nP(o,i),i=""),r=s,o=o||!Si(r);t++}return""!==i&&(e+=nP(o,i)),e}function He(n){return Fo(()=>{const e=iP(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Hp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xi.Emulated,styles:n.styles||nt,_:null,schemas:n.schemas||null,tView:null,id:""};oP(t);const r=n.dependencies;return t.directiveDefs=qp(r,!1),t.pipeDefs=qp(r,!0),t.id=function Y8(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function q8(n){return st(n)||ar(n)}function W8(n){return null!==n}function Kt(n){return Fo(()=>({type:n.type,bootstrap:n.bootstrap||nt,declarations:n.declarations||nt,imports:n.imports||nt,exports:n.exports||nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function rP(n,e){if(null==n)return Ji;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}function we(n){return Fo(()=>{const e=iP(n);return oP(e),e})}function st(n){return n[Gp]||null}function ar(n){return n[c0]||null}function Lr(n){return n[u0]||null}function Jr(n,e){const t=n[WO]||null;if(!t&&!0===e)throw new Error(`Type ${In(n)} does not have '\u0275mod' property.`);return t}function iP(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ji,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rP(n.inputs,e),outputs:rP(n.outputs)}}function oP(n){n.features?.forEach(e=>e(n))}function qp(n,e){if(!n)return null;const t=e?Lr:q8;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(W8)}const Tn=0,se=1,Se=2,Qt=3,Mi=4,id=5,cr=6,jc=7,an=8,$c=9,Da=10,Me=11,od=12,sP=13,zc=14,cn=15,sd=16,Hc=17,Zi=18,ad=19,aP=20,Es=21,Vo=22,Wp=23,Kp=24,$e=25,d0=1,cP=2,eo=7,Gc=9,ur=11;function Zr(n){return Array.isArray(n)&&"object"==typeof n[d0]}function Vr(n){return Array.isArray(n)&&!0===n[d0]}function h0(n){return 0!=(4&n.flags)}function Aa(n){return n.componentOffset>-1}function Yp(n){return 1==(1&n.flags)}function Oi(n){return!!n.template}function f0(n){return 0!=(512&n[Se])}function xa(n,e){return n.hasOwnProperty(Lo)?n[Lo]:null}let n7=It.WeakRef??class t7{constructor(e){this.ref=e}deref(){return this.ref}},i7=0,to=null,Xp=!1;function kn(n){const e=to;return to=n,e}class fP{constructor(){this.id=i7++,this.ref=function r7(n){return new n7(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,t]of this.producers){const r=t.producerNode.deref();if(null!=r&&t.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(t.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Xp;Xp=!0;try{for(const[t,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(t),i?.producers.delete(this.id))}}finally{Xp=e}}producerAccessed(){if(Xp)throw new Error("");if(null===to)return;let e=to.producers.get(this.id);void 0===e?(e={consumerNode:to.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:to.trackingVersion},to.producers.set(this.id,e),this.consumers.set(to.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=to.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==to?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let pP=null;const mP=()=>{};class c7 extends fP{constructor(e,t,r){super(),this.watch=e,this.schedule=t,this.dirty=!1,this.cleanupFn=mP,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=kn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=mP,this.watch(this.registerOnCleanup)}finally{kn(e)}}cleanup(){this.cleanupFn()}}class u7{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function pi(){return _P}function _P(n){return n.type.prototype.ngOnChanges&&(n.setInput=d7),l7}function l7(){const n=vP(this),e=n?.current;if(e){const t=n.previous;if(t===Ji)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function d7(n,e,t,r){const i=this.declaredInputs[t],o=vP(n)||function h7(n,e){return n[yP]=e}(n,{previous:Ji,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new u7(c&&c.currentValue,e,a===Ji),n[r]=e}pi.ngInherit=!0;const yP="__ngSimpleChanges__";function vP(n){return n[yP]||null}const no=function(n,e,t){};function Rt(n){for(;Array.isArray(n);)n=n[Tn];return n}function eg(n,e){return Rt(e[n])}function Ur(n,e){return Rt(e[n.index])}function CP(n,e){return n.data[e]}function ei(n,e){const t=e[n];return Zr(t)?t:t[Tn]}function Is(n,e){return null==e?null:n[e]}function EP(n){n[Hc]=0}function v7(n){1024&n[Se]||(n[Se]|=1024,TP(n,1))}function IP(n){1024&n[Se]&&(n[Se]&=-1025,TP(n,-1))}function TP(n,e){let t=n[Qt];if(null===t)return;t[id]+=e;let r=t;for(t=t[Qt];null!==t&&(1===e&&1===r[id]||-1===e&&0===r[id]);)t[id]+=e,r=t,t=t[Qt]}const ve={lFrame:FP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xP(){return ve.bindingsEnabled}function W(){return ve.lFrame.lView}function Xe(){return ve.lFrame.tView}function Ge(n){return ve.lFrame.contextLView=n,n[an]}function qe(n){return ve.lFrame.contextLView=null,n}function qn(){let n=SP();for(;null!==n&&64===n.type;)n=n.parent;return n}function SP(){return ve.lFrame.currentTNode}function ro(n,e){const t=ve.lFrame;t.currentTNode=n,t.isParent=e}function v0(){return ve.lFrame.isParent}function Kc(){return ve.lFrame.bindingIndex++}function O7(n,e){const t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,b0(e)}function b0(n){ve.lFrame.currentDirectiveIndex=n}function kP(){return ve.lFrame.currentQueryIndex}function E0(n){ve.lFrame.currentQueryIndex=n}function k7(n){const e=n[se];return 2===e.type?e.declTNode:1===e.type?n[cr]:null}function NP(n,e,t){if(t&Le.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Le.Host||(i=k7(o),null===i||(o=o[zc],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ve.lFrame=RP();return r.currentTNode=e,r.lView=n,!0}function I0(n){const e=RP(),t=n[se];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function RP(){const n=ve.lFrame,e=null===n?null:n.child;return null===e?FP(n):e}function FP(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function LP(){const n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const VP=LP;function T0(){const n=LP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Er(){return ve.lFrame.selectedIndex}function Sa(n){ve.lFrame.selectedIndex=n}function D0(){ve.lFrame.currentNamespace="svg"}let jP=!0;function tg(){return jP}function Ts(n){jP=n}function ng(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=l&&(n.destroyHooks??=[]).push(t,l)}}function rg(n,e,t){$P(n,e,3,t)}function ig(n,e,t,r){(3&n[Se])===t&&$P(n,e,t,r)}function A0(n,e){let t=n[Se];(3&t)===e&&(t&=8191,t+=1,n[Se]=t)}function $P(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Hc]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Hc]+=65536),(a<o||-1==o)&&(U7(n,t,e,c),n[Hc]=(4294901760&n[Hc])+c+2),c++}function zP(n,e){no(4,n,e);const t=kn(null);try{e.call(n)}finally{kn(t),no(5,n,e)}}function U7(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[Se]>>13<n[Hc]>>16&&(3&n[Se])===e&&(n[Se]+=8192,zP(a,o)):zP(a,o)}const Qc=-1;class ld{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function HP(n){return n!==Qc}function og(n){return 32767&n}function sg(n,e){let t=function z7(n){return n>>16}(n),r=e;for(;t>0;)r=r[zc],t--;return r}let S0=!0;function ag(n){const e=S0;return S0=n,e}const GP=255,qP=5;let H7=0;const io={};function cg(n,e){const t=WP(n,e);if(-1!==t)return t;const r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,M0(r.data,n),M0(e,null),M0(r.blueprint,null));const i=O0(n,e),o=n.injectorIndex;if(HP(i)){const s=og(i),a=sg(i,e),c=a[se].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function M0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function WP(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function O0(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=ek(i),null===r)return Qc;if(t++,i=i[zc],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Qc}function P0(n,e,t){!function G7(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(nd)&&(r=t[nd]),null==r&&(r=t[nd]=H7++);const i=r&GP;e.data[n+(i>>qP)]|=1<<i}(n,e,t)}function KP(n,e,t){if(t&Le.Optional||void 0!==n)return n;Up()}function QP(n,e,t,r){if(t&Le.Optional&&void 0===r&&(r=null),!(t&(Le.Self|Le.Host))){const i=n[$c],o=Rr(void 0);try{return i?i.get(e,r,t&Le.Optional):HO(e,r,t&Le.Optional)}finally{Rr(o)}}return KP(r,0,t)}function YP(n,e,t,r=Le.Default,i){if(null!==n){if(2048&e[Se]&&!(r&Le.Self)){const s=function Y7(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Se]&&!(512&s[Se]);){const a=XP(o,s,t,r|Le.Self,io);if(a!==io)return a;let c=o.parent;if(!c){const u=s[aP];if(u){const l=u.get(t,io,r);if(l!==io)return l}c=ek(s),s=s[zc]}o=c}return i}(n,e,t,r,io);if(s!==io)return s}const o=XP(n,e,t,r,io);if(o!==io)return o}return QP(e,t,r,i)}function XP(n,e,t,r,i){const o=function K7(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(nd)?n[nd]:void 0;return"number"==typeof e?e>=0?e&GP:Q7:e}(t);if("function"==typeof o){if(!NP(e,n,r))return r&Le.Host?KP(i,0,r):QP(e,t,r,i);try{const s=o(r);if(null!=s||r&Le.Optional)return s;Up()}finally{VP()}}else if("number"==typeof o){let s=null,a=WP(n,e),c=Qc,u=r&Le.Host?e[cn][cr]:null;for((-1===a||r&Le.SkipSelf)&&(c=-1===a?O0(n,e):e[a+8],c!==Qc&&ZP(r,!1)?(s=e[se],a=og(c),e=sg(c,e)):a=-1);-1!==a;){const l=e[se];if(JP(o,a,l.data)){const d=W7(a,e,t,s,r,u);if(d!==io)return d}c=e[a+8],c!==Qc&&ZP(r,e[se].data[a+8]===u)&&JP(o,a,e)?(s=l,a=og(c),e=sg(c,e)):a=-1}}return i}function W7(n,e,t,r,i,o){const s=e[se],a=s.data[n+8],l=ug(a,s,t,null==r?Aa(a)&&S0:r!=s&&0!=(3&a.type),i&Le.Host&&o===a);return null!==l?Ma(e,s,l,a):io}function ug(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,l=o>>20,h=i?a+l:n.directiveEnd;for(let p=r?a:a+l;p<h;p++){const w=s[p];if(p<c&&t===w||p>=c&&w.type===t)return p}if(i){const p=s[c];if(p&&Oi(p)&&p.type===t)return c}return null}function Ma(n,e,t,r){let i=n[t];const o=e.data;if(function B7(n){return n instanceof ld}(i)){const s=i;s.resolving&&function y8(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,`Circular dependency in DI detected for ${n}${t}`)}(function lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():De(n)}(o[t]));const a=ag(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Rr(s.injectImpl):null;NP(n,r,Le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function V7(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=_P(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==c&&Rr(c),ag(a),s.resolving=!1,VP()}}return i}function JP(n,e,t){return!!(t[e+(n>>qP)]&1<<n)}function ZP(n,e){return!(n&Le.Self||n&Le.Host&&e)}class Yc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return YP(this._tNode,this._lView,e,zp(r),t)}}function Q7(){return new Yc(qn(),W())}function Wn(n){return Fo(()=>{const e=n.prototype.constructor,t=e[Lo]||k0(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Lo]||k0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function k0(n){return t0(n)?()=>{const e=k0(Ce(n));return e&&e()}:xa(n)}function ek(n){const e=n[se],t=e.type;return 2===t?e.declTNode:1===t?n[cr]:null}const Jc="__parameters__";function eu(n,e,t){return Fo(()=>{const r=function N0(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,l){const d=c.hasOwnProperty(Jc)?c[Jc]:Object.defineProperty(c,Jc,{value:[]})[Jc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function hd(n,e){n.forEach(t=>Array.isArray(t)?hd(t,e):e(t))}function nk(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function dg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ti(n,e,t){let r=nu(n,e);return r>=0?n[1|r]=t:(r=~r,function rq(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function R0(n,e){const t=nu(n,e);if(t>=0)return n[1|t]}function nu(n,e){return function rk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Xt=td(eu("Optional"),8),fg=td(eu("SkipSelf"),4);function yg(n){return 128==(128&n.flags)}var Ds=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ds||{});const B0=new Map;let Aq=0;const $0="__ngContext__";function lr(n,e){Zr(e)?(n[$0]=e[ad],function Sq(n){B0.set(n[ad],n)}(e)):n[$0]=e}let z0;function H0(n,e){return z0(n,e)}function md(n){const e=n[Qt];return Vr(e)?e[Qt]:e}function Ek(n){return Tk(n[od])}function Ik(n){return Tk(n[Mi])}function Tk(n){for(;null!==n&&!Vr(n);)n=n[Mi];return n}function ou(n,e,t,r,i){if(null!=r){let o,s=!1;Vr(r)?o=r:Zr(r)&&(s=!0,r=r[Tn]);const a=Rt(r);0===n&&null!==t?null==i?Mk(e,t,a):Oa(e,t,a,i||null,!0):1===n&&null!==t?Oa(e,t,a,i||null,!0):2===n?function Ig(n,e,t){const r=Cg(n,e);r&&function Kq(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function Xq(n,e,t,r,i){const o=t[eo];o!==Rt(t)&&ou(e,n,r,o,i);for(let a=ur;a<t.length;a++){const c=t[a];yd(c[se],c,n,e,r,o)}}(e,n,o,t,i)}}function bg(n,e,t){return n.createElement(e,t)}function Ak(n,e){const t=n[Gc],r=t.indexOf(e);IP(e),t.splice(r,1)}function q0(n,e){if(n.length<=ur)return;const t=ur+e,r=n[t];if(r){const i=r[sd];null!==i&&i!==n&&Ak(i,r),e>0&&(n[t-1][Mi]=r[Mi]);const o=dg(n,ur+e);!function Bq(n,e){yd(n,e,e[Me],2,null,null),e[Tn]=null,e[cr]=null}(r[se],r);const s=o[Zi];null!==s&&s.detachView(o[se]),r[Qt]=null,r[Mi]=null,r[Se]&=-129}return r}function xk(n,e){if(!(256&e[Se])){const t=e[Me];e[Wp]?.destroy(),e[Kp]?.destroy(),t.destroyNode&&yd(n,e,t,3,null,null),function zq(n){let e=n[od];if(!e)return W0(n[se],n);for(;e;){let t=null;if(Zr(e))t=e[od];else{const r=e[ur];r&&(t=r)}if(!t){for(;e&&!e[Mi]&&e!==n;)Zr(e)&&W0(e[se],e),e=e[Qt];null===e&&(e=n),Zr(e)&&W0(e[se],e),t=e&&e[Mi]}e=t}}(e)}}function W0(n,e){if(!(256&e[Se])){e[Se]&=-129,e[Se]|=256,function Wq(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ld)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];no(4,a,c);try{c.call(a)}finally{no(5,a,c)}}else{no(4,i,o);try{o.call(i)}finally{no(5,i,o)}}}}}(n,e),function qq(n,e){const t=n.cleanup,r=e[jc];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[jc]=null);const i=e[Es];if(null!==i){e[Es]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[se].type&&e[Me].destroy();const t=e[sd];if(null!==t&&Vr(e[Qt])){t!==e[Qt]&&Ak(t,e);const r=e[Zi];null!==r&&r.detachView(n)}!function Mq(n){B0.delete(n[ad])}(e)}}function K0(n,e,t){return function Sk(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Tn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===xi.None||o===xi.Emulated)return null}return Ur(r,t)}}(n,e.parent,t)}function Oa(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Mk(n,e,t){n.appendChild(e,t)}function Ok(n,e,t,r,i){null!==r?Oa(n,e,t,r,i):Mk(n,e,t)}function Cg(n,e){return n.parentNode(e)}let Q0,Z0,Nk=function kk(n,e,t){return 40&n.type?Ur(n,t):null};function Eg(n,e,t,r){const i=K0(n,r,e),o=e[Me],a=function Pk(n,e,t){return Nk(n,e,t)}(r.parent||e[cr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ok(o,i,t[c],a,!1);else Ok(o,i,t,a,!1);void 0!==Q0&&Q0(o,r,e,t,i)}function _d(n,e){if(null!==e){const t=e.type;if(3&t)return Ur(e,n);if(4&t)return Y0(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return _d(n,r);{const i=n[e.index];return Vr(i)?Y0(-1,i):Rt(i)}}if(32&t)return H0(e,n)()||Rt(n[e.index]);{const r=Fk(n,e);return null!==r?Array.isArray(r)?r[0]:_d(md(n[cn]),r):_d(n,e.next)}}return null}function Fk(n,e){return null!==e?n[cn][cr].projection[e.projection]:null}function Y0(n,e){const t=ur+n+1;if(t<e.length){const r=e[t],i=r[se].firstChild;if(null!==i)return _d(r,i)}return e[eo]}function X0(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&lr(Rt(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)X0(n,e,t.child,r,i,o,!1),ou(e,n,i,a,o);else if(32&c){const u=H0(t,r);let l;for(;l=u();)ou(e,n,i,l,o);ou(e,n,i,a,o)}else 16&c?Vk(n,e,r,t,i,o):ou(e,n,i,a,o);t=s?t.projectionNext:t.next}}function yd(n,e,t,r,i,o){X0(t,r,n.firstChild,e,i,o,!1)}function Vk(n,e,t,r,i,o){const s=t[cn],c=s[cr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)ou(e,n,i,c[u],o);else{let u=c;const l=s[Qt];yg(r)&&(u.flags|=128),X0(n,e,u,l,i,o,!0)}}function Uk(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Bk(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&l0(n,e,r),null!==i&&Uk(n,e,i),null!==o&&function Zq(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}class Hk{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UO})`}}function As(n){return n instanceof Hk?n.changingThisBreaksApplicationSecurity:n}const fW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var au=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(au||{});function ow(n){const e=function Cd(){const n=W();return n&&n[Da].sanitizer}();return e?e.sanitize(au.URL,n)||"":function wd(n,e){const t=function uW(n){return n instanceof Hk&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${UO})`)}return t===e}(n,"URL")?As(n):function tw(n){return(n=String(n)).match(fW)?n:"unsafe:"+n}(De(n))}class le{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=_e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ed=new le("ENVIRONMENT_INITIALIZER"),Zk=new le("INJECTOR",-1),eN=new le("INJECTOR_DEF_TYPES");class tN{get(e,t=ed){if(t===ed){const r=new Error(`NullInjectorError: No provider for ${In(e)}!`);throw r.name="NullInjectorError",r}return t}}function DW(...n){return{\u0275providers:rN(0,n),\u0275fromNgModule:!0}}function rN(n,...e){const t=[],r=new Set;let i;return hd(e,o=>{const s=o;sw(s,t,[],r)&&(i||=[],i.push(s))}),void 0!==i&&iN(i,t),t}function iN(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];aw(i,o=>{e.push(o)})}}function sw(n,e,t,r){if(!(n=Ce(n)))return!1;let i=null,o=jO(n);const s=!o&&st(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=jO(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)sw(u,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{hd(o.imports,l=>{sw(l,e,t,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&iN(u,e)}if(!a){const u=xa(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:nt},{provide:eN,useValue:i,multi:!0},{provide:Ed,useValue:()=>me(i),multi:!0})}const c=o.providers;null==c||a||aw(c,l=>{e.push(l)})}}return i!==n&&void 0!==n.providers}function aw(n,e){for(let t of n)n0(t)&&(t=t.\u0275providers),Array.isArray(t)?aw(t,e):e(t)}const AW=ft({provide:String,useValue:ft});function cw(n){return null!==n&&"object"==typeof n&&AW in n}function Pa(n){return"function"==typeof n}const uw=new le("Set Injector scope."),xg={},SW={};let lw;function Sg(){return void 0===lw&&(lw=new tN),lw}class $o{}class dw extends $o{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fw(e,s=>this.processProvider(s)),this.records.set(Zk,cu(void 0,this)),i.has("environment")&&this.records.set($o,cu(void 0,this));const o=this.records.get(uw);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(eN.multi,nt,Le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Cs(this),r=Rr(void 0);try{return e()}finally{Cs(t),Rr(r)}}get(e,t=ed,r=Le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KO))return e[KO](this);r=zp(r);const i=Cs(this),o=Rr(void 0);try{if(!(r&Le.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function NW(n){return"function"==typeof n||"object"==typeof n&&n instanceof le}(e)&&Bp(e);a=c&&this.injectableDefInScope(c)?cu(hw(e),xg):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Le.Self?Sg():this.parent).get(e,t=r&Le.Optional&&t===ed?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[$p]=s[$p]||[]).unshift(In(e)),i)throw s;return function P8(n,e,t,r){const i=n[$p];throw e[GO]&&i.unshift(e[GO]),n.message=function k8(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=In(e);if(Array.isArray(e))i=e.map(In).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):In(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(A8,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[$p]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Rr(o),Cs(i)}}resolveInjectorInitializers(){const e=Cs(this),t=Rr(void 0);try{const r=this.get(Ed.multi,nt,Le.Self);for(const i of r)i()}finally{Cs(e),Rr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(In(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){let t=Pa(e=Ce(e))?e:Ce(e&&e.provide);const r=function OW(n){return cw(n)?cu(void 0,n.useValue):cu(aN(n),xg)}(e);if(Pa(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=cu(void 0,xg,!0),i.factory=()=>a0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===xg&&(t.value=SW,t.value=t.factory()),"object"==typeof t.value&&t.value&&function kW(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ce(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function hw(n){const e=Bp(n),t=null!==e?e.factory:xa(n);if(null!==t)return t;if(n instanceof le)throw new X(204,!1);if(n instanceof Function)return function MW(n){const e=n.length;if(e>0)throw function fd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new X(204,!1);const t=function I8(n){return n&&(n[jp]||n[$O])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new X(204,!1)}function aN(n,e,t){let r;if(Pa(n)){const i=Ce(n);return xa(i)||hw(i)}if(cw(n))r=()=>Ce(n.useValue);else if(function sN(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...a0(n.deps||[]));else if(function oN(n){return!(!n||!n.useExisting)}(n))r=()=>me(Ce(n.useExisting));else{const i=Ce(n&&(n.useClass||n.provide));if(!function PW(n){return!!n.deps}(n))return xa(i)||hw(i);r=()=>new i(...a0(n.deps))}return r}function cu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function fw(n,e){for(const t of n)Array.isArray(t)?fw(t,e):t&&n0(t)?fw(t.\u0275providers,e):e(t)}const Mg=new le("AppId",{providedIn:"root",factory:()=>RW}),RW="ng",cN=new le("Platform Initializer"),xs=new le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uN=new le("CSP nonce",{providedIn:"root",factory:()=>function vd(){if(void 0!==Z0)return Z0;if(typeof document<"u")return document;throw new X(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let dN=(n,e)=>null;function hN(n,e){return dN(n,e)}class HW{}class gN{}class qW{resolveComponentFactory(e){throw function GW(n){const e=Error(`No component factory found for ${In(n)}.`);return e.ngComponent=n,e}(e)}}let Rg=(()=>{class n{}return n.NULL=new qW,n})();function WW(){return lu(qn(),W())}function lu(n,e){return new jr(Ur(n,e))}let jr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=WW,n})();function KW(n){return n instanceof jr?n.nativeElement:n}class _N{}let Pi=(()=>{class n{constructor(){this.destroyNode=null}}return n.__NG_ELEMENT_ID__=()=>function QW(){const n=W(),t=ei(qn().index,n);return(Zr(t)?t:n)[Me]}(),n})(),YW=(()=>{class n{}return n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>null}),n})();class du{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yN=new du("16.1.6"),Iw={};function Dd(n){for(;n;){n[Se]|=64;const e=md(n);if(f0(n)&&!e)return n;n=e}return null}function Tw(n){return n.ngOriginalError}class ka{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Tw(e);for(;t&&Tw(t);)t=Tw(t);return t||null}}const bN=new le("",{providedIn:"root",factory:()=>!1});function zo(n){return n instanceof Function?n():n}class DN extends fP{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Dd(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,t,r){const i=kn(this);this.trackingVersion++;try{e(t,r)}finally{kn(i)}}destroy(){this.trackingVersion++}}let Lg=null;function AN(){return Lg??=new DN,Lg}function xN(n,e){return n[e]??AN()}function SN(n,e){const t=AN();t.hasReadASignal&&(n[e]=Lg,t.lView=n,Lg=new DN)}const Oe={};function H(n){MN(Xe(),W(),Er()+n,!1)}function MN(n,e,t,r){if(!r)if(3==(3&e[Se])){const o=n.preOrderCheckHooks;null!==o&&rg(e,o,t)}else{const o=n.preOrderHooks;null!==o&&ig(e,o,0,t)}Sa(t)}function NN(n,e=null,t=null,r){const i=RN(n,e,t,r);return i.resolveInjectorInitializers(),i}function RN(n,e=null,t=null,r,i=new Set){const o=[t||nt,DW(n)];return r=r||("object"==typeof n?void 0:In(n)),new dw(o,e||Sg(),r||null,i)}let Ir=(()=>{class n{static create(t,r){if(Array.isArray(t))return NN({name:""},r,t,"");{const i=t.name??"";return NN({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=ed,n.NULL=new tN,n.\u0275prov=_e({token:n,providedIn:"any",factory:()=>me(Zk)}),n.__NG_ELEMENT_ID__=-1,n})();function S(n,e=Le.Default){const t=W();return null===t?me(n,e):YP(qn(),t,Ce(n),e)}function Vg(n,e,t,r,i,o,s,a,c,u,l){const d=e.blueprint.slice();return d[Tn]=i,d[Se]=140|r,(null!==u||n&&2048&n[Se])&&(d[Se]|=2048),EP(d),d[Qt]=d[zc]=n,d[an]=t,d[Da]=s||n&&n[Da],d[Me]=a||n&&n[Me],d[$c]=c||n&&n[$c]||null,d[cr]=o,d[ad]=function xq(){return Aq++}(),d[Vo]=l,d[aP]=u,d[cn]=2==e.type?n[cn]:d,d}function fu(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Dw(n,e,t,r,i){const o=SP(),s=v0(),c=n.data[e]=function _K(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function Wc(){return null!==ve.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,r,i),function M7(){return ve.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function ud(){const n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ro(o,!0),o}function Ad(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function LN(n,e,t,r,i){const o=xN(e,Wp),s=Er(),a=2&r;try{if(Sa(-1),a&&e.length>$e&&MN(n,e,$e,!1),no(a?2:0,i),a)o.runInContext(t,r,i);else{const u=kn(null);try{t(r,i)}finally{kn(u)}}}finally{a&&null===e[Wp]&&SN(e,Wp),Sa(s),no(a?3:1,i)}}function Aw(n,e,t){if(h0(e)){const r=kn(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{kn(r)}}}function xw(n,e,t){xP()&&(function IK(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;Aa(t)&&function OK(n,e,t){const r=Ur(e,n),i=VN(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Ug(n,Vg(n,i,null,s,r,e,null,n[Da].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||cg(t,e),lr(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],u=Ma(e,n,a,t);lr(u,e),null!==s&&PK(0,a-i,u,c,0,s),Oi(c)&&(ei(t.index,e)[an]=Ma(e,n,a,t))}}(n,e,t,Ur(t,e)),64==(64&t.flags)&&zN(n,e,t))}function Sw(n,e,t=Ur){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function VN(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Mw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Mw(n,e,t,r,i,o,s,a,c,u,l){const d=$e+r,h=d+i,p=function dK(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Oe);return t}(d,h),w="function"==typeof u?u():u;return p[se]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:l}}let UN=n=>null;function BN(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?jN(t,e,i,o):r.hasOwnProperty(i)&&jN(t,e,r[i],o)}return t}function jN(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Ow(n,e,t,r){if(xP()){const i=null===r?null:{"":-1},o=function DK(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(tP(e,s.selectors,!1))if(r||(r=[]),Oi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Pw(n,e,a.length)}else r.unshift(s),Pw(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&$N(n,e,t,s,i,a),i&&function AK(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new X(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=rd(t.mergedAttrs,t.attrs)}function $N(n,e,t,r,i,o){for(let u=0;u<r.length;u++)P0(cg(t,e),n,r[u].type);!function SK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Ad(n,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];t.mergedAttrs=rd(t.mergedAttrs,l.hostAttrs),MK(n,t,e,c,l),xK(c,l,i),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function yK(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<i;l++){const d=o[l],h=t?t.get(d):null,w=h?h.outputs:null;c=BN(d.inputs,l,c,h?h.inputs:null),u=BN(d.outputs,l,u,w);const I=null===c||null===s||eP(e)?null:kK(c,l,s);a.push(I)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,o)}function zN(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function P7(){return ve.lFrame.currentDirectiveIndex}();try{Sa(o);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];b0(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&TK(c,u)}}finally{Sa(-1),b0(s)}}function TK(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Pw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function xK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oi(e)&&(t[""]=n)}}function MK(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=xa(i.type)),s=new ld(o,Oi(i),S);n.blueprint[r]=s,t[r]=s,function CK(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function EK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Ad(n,t,i.hostVars,Oe),i)}function PK(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)HN(r,t,s[a++],s[a++],s[a++])}function HN(n,e,t,r,i){const o=kn(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{kn(o)}}function kK(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function GN(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function qN(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const s=n.data[o];E0(t[r]),s.contentQueries(2,e[o],o)}}}function Ug(n,e){return n[od]?n[sP][Mi]=e:n[od]=e,n[sP]=e,e}function Nw(n,e,t){E0(0);const r=kn(null);try{e(n,t)}finally{kn(r)}}function WN(n){return n[jc]||(n[jc]=[])}function KN(n){return n.cleanup||(n.cleanup=[])}function YN(n,e){const t=n[$c],r=t?t.get(ka,null):null;r&&r.handleError(e)}function Rw(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];HN(n.data[s],e[s],r,a,i)}}function NK(n,e){const t=ei(e,n),r=t[se];!function RK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Tn];null!==i&&null===t[Vo]&&(t[Vo]=hN(i,t[$c])),Fw(r,t,t[an])}function Fw(n,e,t){I0(e);try{const r=n.viewQuery;null!==r&&Nw(1,r,t);const i=n.template;null!==i&&LN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qN(n,e),n.staticViewQueries&&Nw(2,n.viewQuery,t);const o=n.components;null!==o&&function FK(n,e){for(let t=0;t<e.length;t++)NK(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Se]&=-5,T0()}}let XN=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const o=typeof Zone>"u"?null:Zone.current,s=new c7(t,u=>{this.all.has(u)&&this.queue.set(u,o)},i);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}}return n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>new n}),n})();function Bg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=e0(i,a):2==o&&(r=e0(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function xd(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(Rt(o)),Vr(o)){for(let a=ur;a<o.length;a++){const c=o[a],u=c[se].firstChild;null!==u&&xd(c[se],c,u,r)}o[eo]!==o[Tn]&&r.push(o[eo])}const s=t.type;if(8&s)xd(n,e,t.child,r);else if(32&s){const a=H0(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Fk(e,t);if(Array.isArray(a))r.push(...a);else{const c=md(e[cn]);xd(c[se],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function jg(n,e,t,r=!0){const i=e[Da].rendererFactory;i.begin&&i.begin();try{JN(n,e,n.template,t)}catch(s){throw r&&YN(e,s),s}finally{i.end&&i.end(),e[Da].effectManager?.flush()}}function JN(n,e,t,r){const i=e[Se];if(256!=(256&i)){e[Da].effectManager?.flush(),I0(e);try{EP(e),function OP(n){return ve.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&LN(n,e,t,2,r);const s=3==(3&i);if(s){const u=n.preOrderCheckHooks;null!==u&&rg(e,u,null)}else{const u=n.preOrderHooks;null!==u&&ig(e,u,0,null),A0(e,0)}if(function jK(n){for(let e=Ek(n);null!==e;e=Ik(e)){if(!e[cP])continue;const t=e[Gc];for(let r=0;r<t.length;r++){v7(t[r])}}}(e),ZN(e,2),null!==n.contentQueries&&qN(n,e),s){const u=n.contentCheckHooks;null!==u&&rg(e,u)}else{const u=n.contentHooks;null!==u&&ig(e,u,1),A0(e,1)}!function lK(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=xN(e,Kp);try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)Sa(~o);else{const s=o,a=t[++i],c=t[++i];O7(a,s),r.runInContext(c,2,e[s])}}}finally{null===e[Kp]&&SN(e,Kp),Sa(-1)}}(n,e);const a=n.components;null!==a&&tR(e,a,0);const c=n.viewQuery;if(null!==c&&Nw(2,c,r),s){const u=n.viewCheckHooks;null!==u&&rg(e,u)}else{const u=n.viewHooks;null!==u&&ig(e,u,2),A0(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Se]&=-73,IP(e)}finally{T0()}}}function ZN(n,e){for(let t=Ek(n);null!==t;t=Ik(t))for(let r=ur;r<t.length;r++)eR(t[r],e)}function $K(n,e,t){eR(ei(e,n),t)}function eR(n,e){if(!function _7(n){return 128==(128&n[Se])}(n))return;const t=n[se];if(80&n[Se]&&0===e||1024&n[Se]||2===e)JN(t,n,t.template,n[an]);else if(n[id]>0){ZN(n,1);const i=n[se].components;null!==i&&tR(n,i,1)}}function tR(n,e,t){for(let r=0;r<e.length;r++)$K(n,e[r],t)}class Sd{get rootNodes(){const e=this._lView,t=e[se];return xd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return 256==(256&this._lView[Se])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Qt];if(Vr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(q0(e,r),dg(t,r))}this._attachedToViewContainer=!1}xk(this._lView[se],this._lView)}onDestroy(e){!function DP(n,e){if(256==(256&n[Se]))throw new X(911,!1);null===n[Es]&&(n[Es]=[]),n[Es].push(e)}(this._lView,e)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Se]&=-129}reattach(){this._lView[Se]|=128}detectChanges(){jg(this._lView[se],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $q(n,e){yd(n,e,e[Me],2,null,null)}(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e}}class zK extends Sd{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;jg(e[se],e,e[an],!1)}checkNoChanges(){}get context(){return null}}class nR extends Rg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=st(e);return new Md(t,this.ngModule)}}function rR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class GK{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=zp(r);const i=this.injector.get(e,Iw,r);return i!==Iw||t===Iw?i:this.parentInjector.get(e,t,r)}}class Md extends gN{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=rR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return rR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function z8(n){return n.map($8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof $o?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new GK(e,o):e,a=s.get(_N,null);if(null===a)throw new X(407,!1);const l={rendererFactory:a,sanitizer:s.get(YW,null),effectManager:s.get(XN,null)},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?function hK(n,e,t,r){const o=r.get(bN,!1)||t===xi.ShadowDom,s=n.selectRootElement(e,o);return function fK(n){UN(n)}(s),s}(d,r,this.componentDef.encapsulation,s):bg(d,h,function HK(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),x=this.componentDef.signals?4608:this.componentDef.onPush?576:528,k=Mw(0,null,null,1,0,null,null,null,null,null,null),M=Vg(null,k,null,x,null,null,l,d,s,null,null);let $,J;I0(M);try{const ae=this.componentDef;let ye,Nt=null;ae.findHostDirectiveDefs?(ye=[],Nt=new Map,ae.findHostDirectiveDefs(ae,ye,Nt),ye.push(ae)):ye=[ae];const Cn=function WK(n,e){const t=n[se],r=$e;return n[r]=e,fu(t,r,2,"#host",null)}(M,p),Ai=function KK(n,e,t,r,i,o,s){const a=i[se];!function QK(n,e,t,r){for(const i of n)e.mergedAttrs=rd(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Bg(e,e.mergedAttrs,!0),null!==t&&Bk(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=hN(e,i[$c]));const u=o.rendererFactory.createRenderer(e,t);let l=16;t.signals?l=4096:t.onPush&&(l=64);const d=Vg(i,VN(t),null,l,i[n.index],n,o,u,null,null,c);return a.firstCreatePass&&Pw(a,n,r.length-1),Ug(i,d),i[n.index]=d}(Cn,p,ae,ye,M,l,d);J=CP(k,$e),p&&function XK(n,e,t,r){if(r)l0(n,t,["ng-version",yN.full]);else{const{attrs:i,classes:o}=function H8(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Si(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&l0(n,t,i),o&&o.length>0&&Uk(n,t,o.join(" "))}}(d,ae,p,r),void 0!==t&&function JK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(J,this.ngContentSelectors,t),$=function YK(n,e,t,r,i,o){const s=qn(),a=i[se],c=Ur(s,i);$N(a,i,s,t,null,r);for(let l=0;l<t.length;l++)lr(Ma(i,a,s.directiveStart+l,s),i);zN(a,i,s),c&&lr(c,i);const u=Ma(i,a,s.directiveStart+s.componentOffset,s);if(n[an]=i[an]=u,null!==o)for(const l of o)l(u,e);return Aw(a,s,n),u}(Ai,ae,ye,Nt,M,[ZK]),Fw(k,M,null)}finally{T0()}return new qK(this.componentType,$,lu(J,M),M,J)}}class qK extends HW{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new zK(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;Rw(o[se],o,i,e,t),this.previousInputValues.set(e,t),Dd(ei(this._tNode.index,o))}}get injector(){return new Yc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function ZK(){const n=qn();ng(W()[se],n)}function pt(n){let e=function iR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=$g(n.inputs),s.inputTransforms=$g(n.inputTransforms),s.declaredInputs=$g(n.declaredInputs),s.outputs=$g(n.outputs);const a=i.hostBindings;a&&rQ(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&tQ(n,c),u&&nQ(n,u),Lp(n.inputs,i.inputs),Lp(n.declaredInputs,i.declaredInputs),Lp(n.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Lp(s.inputTransforms,i.inputTransforms)),Oi(i)&&i.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===pt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function eQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=rd(i.hostAttrs,t=rd(t,i.hostAttrs))}}(r)}function $g(n){return n===Ji?{}:n===nt?[]:n}function tQ(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function nQ(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function rQ(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function zg(n){return!!function Lw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function dr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ri(n,e,t,r,i,o,s,a){const c=W(),u=Xe(),l=n+$e,d=u.firstCreatePass?function xQ(n,e,t,r,i,o,s,a,c){const u=e.consts,l=fu(e,n,4,s||null,Is(u,a));Ow(e,t,l,Is(u,c)),ng(e,l);const d=l.tView=Mw(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,t,r,i,o,s):u.data[l];ro(d,!1);const h=bR(u,c,d,n);tg()&&Eg(u,c,h,d),lr(h,c),Ug(c,c[l]=GN(h,c,h,d)),Yp(d)&&xw(u,c,d),null!=s&&Sw(c,d,a)}let bR=function CR(n,e,t,r){return Ts(!0),e[Me].createComment("")};function Kn(n){return function qc(n,e){return n[e]}(function S7(){return ve.lFrame.contextLView}(),$e+n)}function Ae(n,e,t){const r=W();return dr(r,Kc(),e)&&function ni(n,e,t,r,i,o,s,a){const c=Ur(e,t);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(Rw(n,t,l,r,i),Aa(e)&&function wK(n,e){const t=ei(e,n);16&t[Se]||(t[Se]|=64)}(t,e.index)):3&e.type&&(r=function vK(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}(Xe(),function Yt(){const n=ve.lFrame;return CP(n.tView,n.selectedIndex)}(),r,n,e,r[Me],t,!1),Ae}function zw(n,e,t,r,i){const s=i?"class":"style";Rw(n,t,e.inputs[s],s,r)}function _(n,e,t,r){const i=W(),o=Xe(),s=$e+n,a=i[Me],c=o.firstCreatePass?function PQ(n,e,t,r,i,o){const s=e.consts,c=fu(e,n,2,r,Is(s,i));return Ow(e,t,c,Is(s,o)),null!==c.attrs&&Bg(c,c.attrs,!1),null!==c.mergedAttrs&&Bg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,t,r):o.data[s],u=ER(o,i,c,a,e,n);i[s]=u;const l=Yp(c);return ro(c,!0),Bk(a,u,c),32!=(32&c.flags)&&tg()&&Eg(o,i,u,c),0===function b7(){return ve.lFrame.elementDepthCount}()&&lr(u,i),function C7(){ve.lFrame.elementDepthCount++}(),l&&(xw(o,i,c),Aw(o,c,i)),null!==r&&Sw(i,c),_}function m(){let n=qn();v0()?function w0(){ve.lFrame.isParent=!1}():(n=n.parent,ro(n,!1));const e=n;(function I7(n){return ve.skipHydrationRootTNode===n})(e)&&function x7(){ve.skipHydrationRootTNode=null}(),function E7(){ve.lFrame.elementDepthCount--}();const t=Xe();return t.firstCreatePass&&(ng(t,n),h0(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function j7(n){return 0!=(8&n.flags)}(e)&&zw(t,e,W(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $7(n){return 0!=(16&n.flags)}(e)&&zw(t,e,W(),e.stylesWithoutHost,!1),m}function Z(n,e,t,r){return _(n,e,t,r),m(),Z}let ER=(n,e,t,r,i,o)=>(Ts(!0),bg(r,i,function BP(){return ve.lFrame.currentNamespace}()));function xt(){return W()}function Rd(n){return!!n&&"function"==typeof n.then}function DR(n){return!!n&&"function"==typeof n.subscribe}function q(n,e,t,r){const i=W(),o=Xe(),s=qn();return function xR(n,e,t,r,i,o,s){const a=Yp(r),u=n.firstCreatePass&&KN(n),l=e[an],d=WN(e);let h=!0;if(3&r.type||s){const I=Ur(r,e),x=s?s(I):I,k=d.length,M=s?J=>s(Rt(J[r.index])):r.index;let $=null;if(!s&&a&&($=function VQ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[jc],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==$)($.__ngLastListenerFn__||$).__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,h=!1;else{o=MR(r,e,l,o,!1);const J=t.listen(x,i,o);d.push(o,J),u&&u.push(i,M,k,k+1)}}else o=MR(r,e,l,o,!1);const p=r.outputs;let w;if(h&&null!==p&&(w=p[i])){const I=w.length;if(I)for(let x=0;x<I;x+=2){const ae=e[w[x]][w[x+1]].subscribe(o),ye=d.length;d.push(o,ae),u&&u.push(i,r.index,ye,-(ye+1))}}}(o,i,i[Me],s,n,e,r),q}function SR(n,e,t,r){try{return no(6,e,t),!1!==t(r)}catch(i){return YN(n,i),!1}finally{no(7,e,t)}}function MR(n,e,t,r,i){return function o(s){if(s===Function)return r;Dd(n.componentOffset>-1?ei(n.index,e):e);let c=SR(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)c=SR(e,t,u,s)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}function un(n=1){return function N7(n){return(ve.lFrame.contextLView=function R7(n,e){for(;n>0;)e=e[zc],n--;return e}(n,ve.lFrame.contextLView))[an]}(n)}function Kg(n,e){return n<<17|e<<2}function Ss(n){return n>>17&32767}function Ww(n){return 2|n}function Ra(n){return(131068&n)>>2}function Kw(n,e){return-131069&n|e<<2}function Qw(n){return 1|n}function BR(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Ss(o):Ra(o),c=!1;for(;0!==a&&(!1===c||s);){const l=n[a+1];WQ(n[a],e)&&(c=!0,n[a+1]=r?Qw(l):Ww(l)),a=r?Ss(l):Ra(l)}c&&(n[t+1]=r?Ww(o):Qw(o))}function WQ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&nu(n,e)>=0}function Fd(n,e){return function ki(n,e,t,r){const i=W(),o=Xe(),s=function Bo(n){const e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function QR(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Er()],s=function KR(n,e){return e>=n.expandoStartIndex}(n,t);(function ZR(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function nY(n,e,t,r){const i=function C0(n){const e=ve.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Ld(t=Yw(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=Yw(i,n,e,t,r),null===o){let c=function rY(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ra(r))return n[Ss(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=Yw(null,n,e,c[1],r),c=Ld(c,e.attrs,r),function iY(n,e,t,r){n[Ss(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function oY(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ld(r,n[o].hostAttrs,t);return Ld(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function GQ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ss(s),c=Ra(s);n[r]=t;let l,u=!1;if(Array.isArray(t)?(l=t[1],(null===l||nu(t,l)>0)&&(u=!0)):l=t,i)if(0!==c){const h=Ss(n[a+1]);n[r+1]=Kg(h,a),0!==h&&(n[h+1]=Kw(n[h+1],r)),n[a+1]=function zQ(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Kg(a,0),0!==a&&(n[a+1]=Kw(n[a+1],r)),a=r;else n[r+1]=Kg(c,0),0===a?a=r:n[c+1]=Kw(n[c+1],r),c=r;u&&(n[r+1]=Ww(n[r+1])),BR(n,l,r,!0),BR(n,l,r,!1),function qQ(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&nu(o,e)>=0&&(t[r+1]=Qw(t[r+1]))}(e,l,n,r,o),s=Kg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==Oe&&dr(i,s,e)&&function XR(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],l=function HQ(n){return 1==(1&n)}(u)?JR(c,e,t,i,Ra(u),s):void 0;Qg(l)||(Qg(o)||function $Q(n){return 2==(2&n)}(u)&&(o=JR(c,null,t,i,a,s)),function Jq(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Ds.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ds.Important),n.setStyle(t,r,i,o))}}(r,s,eg(Er(),t),i,o))}(o,o.data[Er()],i,i[Me],n,i[s+1]=function uY(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=In(As(n)))),n}(e,t),r,s)}(n,e,null,!0),Fd}function Yw(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ld(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Ld(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ti(n,s,!!t||e[++o]))}return void 0===n?null:n}function JR(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let h=t[i+1];h===Oe&&(h=d?nt:void 0);let p=d?R0(h,r):l===r?h:void 0;if(u&&!Qg(p)&&(p=R0(c,r)),Qg(p)&&(a=p,s))return a;const w=n[i+1];i=s?Ss(w):Ra(w)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=R0(c,r))}return a}function Qg(n){return void 0!==n}function b(n,e=""){const t=W(),r=Xe(),i=n+$e,o=r.firstCreatePass?fu(r,i,1,e,null):r.data[i],s=e2(r,t,o,e,n);t[i]=s,tg()&&Eg(r,t,s,o),ro(o,!1)}let e2=(n,e,t,r,i)=>(Ts(!0),function wg(n,e){return n.createText(e)}(e[Me],r));function Ee(n){return Ve("",n,""),Ee}function Ve(n,e,t){const r=W(),i=function gu(n,e,t,r){return dr(n,Kc(),t)?e+De(t)+r:Oe}(r,n,e,t);return i!==Oe&&function Ho(n,e,t){const r=eg(e,n);!function Dk(n,e,t){n.setValue(e,t)}(n[Me],r,t)}(r,Er(),i),Ve}const Tu="en-US";let C2=Tu;function Zw(n,e,t,r,i){if(n=Ce(n),Array.isArray(n))for(let o=0;o<n.length;o++)Zw(n[o],e,t,r,i);else{const o=Xe(),s=W();let a=Pa(n)?n:Ce(n.provide),c=aN(n);const u=qn(),l=1048575&u.providerIndexes,d=u.directiveStart,h=u.providerIndexes>>20;if(Pa(n)||!n.multi){const p=new ld(c,i,S),w=tb(a,e,i?l:l+h,d);-1===w?(P0(cg(u,s),o,a),eb(o,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(p),s.push(p)):(t[w]=p,s[w]=p)}else{const p=tb(a,e,l+h,d),w=tb(a,e,l,l+h),x=w>=0&&t[w];if(i&&!x||!i&&!(p>=0&&t[p])){P0(cg(u,s),o,a);const k=function SX(n,e,t,r,i){const o=new ld(n,t,S);return o.multi=[],o.index=e,o.componentProviders=0,W2(o,i,r&&!t),o}(i?xX:AX,t.length,i,r,c);!i&&x&&(t[w].providerFactory=k),eb(o,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(k),s.push(k)}else eb(o,n,p>-1?p:w,W2(t[i?w:p],c,!i&&r));!i&&r&&x&&t[w].componentProviders++}}}function eb(n,e,t,r){const i=Pa(e),o=function xW(n){return!!n.useClass}(e);if(i||o){const c=(o?Ce(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=u.indexOf(t);-1===l?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function W2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function tb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function AX(n,e,t,r){return nb(this.multi,[])}function xX(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ma(t,t[se],this.providerFactory.index,r);o=a.slice(0,s),nb(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],nb(i,o);return o}function nb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function zt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function DX(n,e,t){const r=Xe();if(r.firstCreatePass){const i=Oi(n);Zw(t,r.data,r.blueprint,i,!0),Zw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Du{}class K2{}class rb extends Du{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nR(this);const i=Jr(e);this._bootstrapComponents=zo(i.bootstrap),this._r3Injector=RN(e,t,[{provide:Du,useValue:this},{provide:Rg,useValue:this.componentFactoryResolver},...r],In(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ib extends K2{constructor(e){super(),this.moduleType=e}create(e){return new rb(this.moduleType,e,[])}}class Q2 extends Du{constructor(e){super(),this.componentFactoryResolver=new nR(this),this.instance=null;const t=new dw([...e.providers,{provide:Du,useValue:this},{provide:Rg,useValue:this.componentFactoryResolver}],e.parent||Sg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ob(n,e,t=null){return new Q2({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let PX=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=rN(0,t.type),i=r.length>0?ob([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=_e({token:n,providedIn:"environment",factory:()=>new n(me($o))}),n})();function Y2(n){n.getStandaloneInjector=e=>e.get(PX).getOrCreateStandaloneInjector(n)}function ab(n){return e=>{setTimeout(n,void 0,e)}}const et=class iJ extends Qi{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=ab(o),i&&(i=ab(i)),s&&(s=ab(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof j&&e.add(a),a}};function oJ(){return this._results[Symbol.iterator]()}class cb{get changes(){return this._changes||(this._changes=new et)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=cb.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=oJ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function gi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function tq(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Go=(()=>{class n{}return n.__NG_ELEMENT_ID__=cJ,n})();const sJ=Go,aJ=class extends sJ{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t,null)}createEmbeddedViewImpl(e,t,r){const s=this._declarationTContainer.tView,a=Vg(this._declarationLView,s,e,4096&this._declarationLView[Se]?4096:16,null,s.declTNode,null,null,null,t||null,r||null);a[sd]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[Zi];return null!==u&&(a[Zi]=u.createEmbeddedView(s)),Fw(s,a,e),new Sd(a)}};function cJ(){return em(qn(),W())}function em(n,e){return 4&n.type?new aJ(e,n,lu(n,e)):null}let Ri=(()=>{class n{}return n.__NG_ELEMENT_ID__=gJ,n})();function gJ(){return fF(qn(),W())}const mJ=Ri,dF=class extends mJ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return lu(this._hostTNode,this._hostLView)}get injector(){return new Yc(this._hostTNode,this._hostLView)}get parentInjector(){const e=O0(this._hostTNode,this._hostLView);if(HP(e)){const t=sg(e,this._hostLView),r=og(e);return new Yc(t[se].data[r+8],t)}return new Yc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=hF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ur}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,o){const s=e&&!function dd(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}const c=s?e:new Md(st(e)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const x=(s?u:this.parentInjector).get($o,null);x&&(o=x)}st(c.componentType??{});const p=c.create(u,i,null,o);return this.insertImpl(p.hostView,a,false),p}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView,o=i[se];if(function y7(n){return Vr(n[Qt])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[Qt],l=new dF(u,u[cr],u[Qt]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;if(function Hq(n,e,t,r){const i=ur+r,o=t.length;r>0&&(t[i-1][Mi]=e),r<o-ur?(e[Mi]=t[i],nk(t,ur+r,e)):(t.push(e),e[Mi]=null),e[Qt]=t;const s=e[sd];null!==s&&t!==s&&function Gq(n,e){const t=n[Gc];e[cn]!==e[Qt][Qt][cn]&&(n[cP]=!0),null===t?n[Gc]=[e]:t.push(e)}(s,e);const a=e[Zi];null!==a&&a.insertView(n),e[Se]|=128}(o,i,a,s),!r){const c=Y0(s,a),u=i[Me],l=Cg(u,a[eo]);null!==l&&function jq(n,e,t,r,i,o){r[Tn]=i,r[cr]=e,yd(n,r,t,1,i,o)}(o,a[cr],u,i,l,c)}return e.attachToViewContainerRef(),nk(lb(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=hF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=q0(this._lContainer,t);r&&(dg(lb(this._lContainer),t),xk(r[se],r))}detach(e){const t=this._adjustIndex(e,-1),r=q0(this._lContainer,t);return r&&null!=dg(lb(this._lContainer),t)?new Sd(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hF(n){return n[8]}function lb(n){return n[8]||(n[8]=[])}function fF(n,e){let t;const r=e[n.index];return Vr(r)?t=r:(t=GN(r,e,null,n),e[n.index]=t,Ug(e,t)),pF(t,e,n,r),new dF(t,n,e)}let pF=function gF(n,e,t,r){if(n[eo])return;let i;i=8&t.type?Rt(r):function _J(n,e){const t=n[Me],r=t.createComment(""),i=Ur(e,n);return Oa(t,Cg(t,i),r,function Qq(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[eo]=i};class db{constructor(e){this.queryList=e,this.matches=null}clone(){return new db(this.queryList)}setDirty(){this.queryList.setDirty()}}class hb{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new hb(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==bF(e,t).matches&&this.queries[t].setDirty()}}class mF{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class fb{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new fb(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class pb{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new pb(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,wJ(t,o)),this.matchTNodeWithReadOption(e,t,ug(t,e,o,!1,!1))}else r===Go?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ug(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===jr||i===Ri||i===Go&&4&t.type)this.addMatch(t.index,-2);else{const o=ug(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function wJ(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function CJ(n,e,t,r){return-1===t?function bJ(n,e){return 11&n.type?lu(n,e):4&n.type?em(n,e):null}(e,n):-2===t?function EJ(n,e,t){return t===jr?lu(e,n):t===Go?em(e,n):t===Ri?fF(e,n):void 0}(n,e,r):Ma(n,n[se],t,e)}function _F(n,e,t,r){const i=e[Zi].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const u=s[c];a.push(u<0?null:CJ(e,o[u],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function gb(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=_F(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],l=e[-c];for(let d=ur;d<l.length;d++){const h=l[d];h[sd]===h[Qt]&&gb(h[se],h,u,r)}if(null!==l[Gc]){const d=l[Gc];for(let h=0;h<d.length;h++){const p=d[h];gb(p[se],p,u,r)}}}}}return r}function Qn(n){const e=W(),t=Xe(),r=kP();E0(r+1);const i=bF(t,r);if(n.dirty&&function m7(n){return 4==(4&n[Se])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?gb(t,e,r,[]):_F(t,e,i,r);n.reset(o,KW),n.notifyOnChanges()}return!0}return!1}function hr(n,e,t){const r=Xe();r.firstCreatePass&&(function wF(n,e,t){null===n.queries&&(n.queries=new fb),n.queries.track(new pb(e,t))}(r,new mF(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function vF(n,e,t){const r=new cb(4==(4&t));(function mK(n,e,t,r){const i=WN(e);i.push(t),n.firstCreatePass&&KN(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Zi]&&(e[Zi]=new hb),e[Zi].queries.push(new db(r))}(r,W(),e)}function Yn(){return function IJ(n,e){return n[Zi].queries[e].queryList}(W(),kP())}function bF(n,e){return n.queries.getByIndex(e)}const bb=new le("Application Initializer");let Cb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=de(bb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(Rd(o))t.push(o);else if(DR(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const qo=new le("LocaleId",{providedIn:"root",factory:()=>de(qo,Le.Optional|Le.SkipSelf)||function WJ(){return typeof $localize<"u"&&$localize.locale||Tu}()});let UF=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Nr(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YJ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let BF=(()=>{class n{compileModuleSync(t){return new ib(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=zo(Jr(t).declarations).reduce((s,a)=>{const c=st(a);return c&&s.push(new Md(c)),s},[]);return new YJ(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zF(...n){}class gt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ZJ(){const n="function"==typeof It.requestAnimationFrame;let e=It[n?"requestAnimationFrame":"setTimeout"],t=It[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function nZ(n){const e=()=>{!function tZ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(It,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ib(n),n.isCheckStableRunning=!0,Eb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ib(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return HF(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),GF(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return HF(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),GF(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Ib(n),Eb(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gt.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(gt.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,eZ,zF,zF);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const eZ={};function Eb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ib(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function HF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function GF(n){n._nesting--,Eb(n)}class rZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const qF=new le("",{providedIn:"root",factory:WF});function WF(){const n=de(gt);let e=!0;return function p8(...n){const e=Zl(n),t=function a8(n,e){return"number"==typeof Jv(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?hi(r[0]):Vc(t)(Pn(r,e)):Yi}(new jt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new jt(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{gt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=n.onUnstable.subscribe(()=>{gt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(VO()))}const KF=new le(""),nm=new le("");let Ab,Tb=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ab||(function iZ(n){Ab=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(me(gt),me(Db),me(nm))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),Db=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Ab?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ms=null;const QF=new le("AllowMultipleToken"),xb=new le("PlatformDestroyListeners"),Sb=new le("appBootstrapListener");class XF{constructor(e,t){this.name=e,this.token=t}}function ZF(n,e,t=[]){const r=`Platform: ${e}`,i=new le(r);return(o=[])=>{let s=Mb();if(!s||s.injector.get(QF,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function aZ(n){if(Ms&&!Ms.get(QF,!1))throw new X(400,!1);(function YF(){!function s7(n){pP=n}(()=>{throw new X(600,!1)})})(),Ms=n;const e=n.get(tL);(function JF(n){n.get(cN,null)?.forEach(t=>t())})(n)}(function eL(n=[],e){return Ir.create({name:e,providers:[{provide:uw,useValue:"platform"},{provide:xb,useValue:new Set([()=>Ms=null])},...n]})}(a,r))}return function uZ(n){const e=Mb();if(!e)throw new X(401,!1);return e}()}}function Mb(){return Ms?.get(tL)??null}let tL=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function lZ(n="zone.js",e){return"noop"===n?new rZ:"zone.js"===n?new gt(e):n}(r?.ngZone,function nL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function OX(n,e,t){return new rb(n,e,t)}(t.moduleType,this.injector,function aL(n){return[{provide:gt,useFactory:n},{provide:Ed,multi:!0,useFactory:()=>{const e=de(hZ,{optional:!0});return()=>e.initialize()}},{provide:sL,useFactory:dZ},{provide:qF,useFactory:WF}]}(()=>i)),s=o.injector.get(ka,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{rm(this._modules,o),a.unsubscribe()})}),function rL(n,e,t){try{const r=t();return Rd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Cb);return a.runInitializers(),a.donePromise.then(()=>(function E2(n){fi(n,"Expected localeId to be defined"),"string"==typeof n&&(C2=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(qo,Tu)||Tu),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=iL({},r);return function oZ(n,e,t){const r=new ib(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Su);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new X(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(xb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(me(Ir))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function iL(n,e){return Array.isArray(e)?e.reduce(iL,n):{...n,...e}}let Su=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=de(sL),this.zoneIsStable=de(qF),this.componentTypes=[],this.components=[],this.isStable=de(UF).hasPendingTasks.pipe(Xi(t=>t?be(!1):this.zoneIsStable),function g8(n,e=tt){return n=n??m8,On((t,r)=>{let i,o=!0;t.subscribe(En(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}(),VO()),this._injector=de($o)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof gN;if(!this._injector.get(Cb).done)throw!i&&function Bc(n){const e=st(n)||ar(n)||Lr(n);return null!==e&&e.standalone}(t),new X(405,!1);let s;s=i?t:this._injector.get(Rg).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function sZ(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Du),u=s.create(Ir.NULL,[],r||s.selector,a),l=u.location.nativeElement,d=u.injector.get(KF,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),rm(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;rm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(Sb,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const sL=new le("",{providedIn:"root",factory:()=>de(ka).handleError.bind(void 0)});function dZ(){const n=de(gt),e=de(ka);return t=>n.runOutsideAngular(()=>e.handleError(t))}let hZ=(()=>{class n{constructor(){this.zone=de(gt),this.applicationRef=de(Su)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let im=(()=>{class n{}return n.__NG_ELEMENT_ID__=pZ,n})();function pZ(n){return function gZ(n,e,t){if(Aa(n)&&!t){const r=ei(n.index,e);return new Sd(r,r)}return 47&n.type?new Sd(e[cn],e):null}(qn(),W(),16==(16&n))}class dL{constructor(){}supports(e){return zg(e)}create(e){return new bZ(e)}}const wZ=(n,e)=>e;class bZ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wZ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<fL(r,i,o)?t:r,a=fL(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){const p=h<o.length?o[h]:o[h]=0,w=p+h;l<=w&&w<u&&(o[h]=p+1)}o[s.previousIndex]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!zg(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function lQ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new CZ(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new hL),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class CZ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EZ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class hL{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new EZ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fL(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function gL(){return new am([new dL])}let am=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||gL()),deps:[[n,new fg,new Xt]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new X(901,!1)}}return n.\u0275prov=_e({token:n,providedIn:"root",factory:gL}),n})();const xZ=ZF(null,"core",[]);let SZ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(me(Su))},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({}),n})();let Lb=null;function Os(){return Lb}class jZ{}const _i=new le("DocumentToken");let Vb=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return de(zZ)},providedIn:"platform"}),n})();const $Z=new le("Location Initialized");let zZ=(()=>{class n extends Vb{constructor(){super(),this._doc=de(_i),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Os().getBaseHref(this._doc)}onPopState(t){const r=Os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function Ub(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function EL(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wo(n){return n&&"?"!==n[0]?"?"+n:n}let Ps=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return de(TL)},providedIn:"root"}),n})();const IL=new le("appBaseHref");let TL=(()=>{class n extends Ps{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??de(_i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ub(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Wo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Wo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Wo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(me(Vb),me(IL,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DL=(()=>{class n extends Ps{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ub(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Wo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Wo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(me(Vb),me(IL,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),Bb=(()=>{class n{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function qZ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(EL(AL(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wo(r))}normalize(t){return n.stripTrailingSlash(function GZ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,AL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Wo,n.joinWithSlash=Ub,n.stripTrailingSlash=EL,n.\u0275fac=function(t){return new(t||n)(me(Ps))},n.\u0275prov=_e({token:n,factory:function(){return function HZ(){return new Bb(me(Ps))}()},providedIn:"root"}),n})();function AL(n){return n.replace(/\/index.html$/,"")}class kee{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new kee(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),VL(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{VL(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(S(Ri),S(Go),S(am))},n.\u0275dir=we({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function VL(n,e){n.context.$implicit=e.item}let UL=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Nee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(S(Ri),S(Go))},n.\u0275dir=we({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Nee{constructor(){this.$implicit=null,this.ngIf=null}}function BL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${In(e)}'.`)}let Qd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({}),n})();function HL(n){return"server"===n}let cte=(()=>{class n{}return n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>new ute(me(_i),window)}),n})();class ute{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function lte(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=GL(this.window.history)||GL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function GL(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Nte extends jZ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rC extends Nte{static makeCurrent(){!function BZ(n){Lb||(Lb=n)}(new rC)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Rte(){return Xd=Xd||document.querySelector("base"),Xd?Xd.getAttribute("href"):null}();return null==t?null:function Fte(n){bm=bm||document.createElement("a"),bm.setAttribute("href",n);const e=bm.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Xd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Mee(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let bm,Xd=null,Vte=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const iC=new le("EventManagerPlugins");let YL=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(me(iC),me(gt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class XL{constructor(e){this._doc=e}}const oC="ng-app-id";let JL=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=HL(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${oC}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(oC),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(oC,this.appId),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(me(_i),me(Mg),me(uN,8),me(xs))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const sC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},aC=/%COMP%/g,$te=new le("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function eV(n,e){return e.map(t=>t.replace(aC,n))}let tV=(()=>{class n{constructor(t,r,i,o,s,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=HL(a),this.defaultRenderer=new cC(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xi.ShadowDom&&(r={...r,encapsulation:xi.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof rV?i.applyToHost(t):i instanceof uC&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case xi.Emulated:o=new rV(c,u,r,this.appId,l,s,a,d);break;case xi.ShadowDom:return new qte(c,u,t,r,s,a,this.nonce,d);default:o=new uC(c,u,r,l,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(me(YL),me(JL),me(Mg),me($te),me(_i),me(xs),me(gt),me(uN))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class cC{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(nV(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(nV(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=sC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=sC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ds.DashCase|Ds.Important)?e.style.setProperty(t,r,i&Ds.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ds.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Os().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function nV(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qte extends cC{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=eV(i.id,i.styles);for(const l of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uC extends cC{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?eV(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class rV extends uC{constructor(e,t,r,i,o,s,a,c){const u=i+"-"+r.id;super(e,t,r,o,s,a,c,u),this.contentAttr=function zte(n){return"_ngcontent-%COMP%".replace(aC,n)}(u),this.hostAttr=function Hte(n){return"_nghost-%COMP%".replace(aC,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Wte=(()=>{class n extends XL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(me(_i))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const iV=["alt","control","meta","shift"],Kte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yte=(()=>{class n extends XL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Os().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),iV.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Kte[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),iV.forEach(s=>{s!==i&&(0,Qte[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(me(_i))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const sV=[{provide:xs,useValue:"browser"},{provide:cN,useValue:function Xte(){rC.makeCurrent()},multi:!0},{provide:_i,useFactory:function Zte(){return function rW(n){Z0=n}(document),document},deps:[]}],ene=ZF(xZ,"browser",sV),tne=new le(""),aV=[{provide:nm,useClass:class Lte{addToWindow(e){It.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new X(5103,!1);return o},It.getAllAngularTestabilities=()=>e.getAllTestabilities(),It.getAllAngularRootElements=()=>e.getAllRootElements(),It.frameworkStabilizers||(It.frameworkStabilizers=[]),It.frameworkStabilizers.push(r=>{const i=It.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Os().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:KF,useClass:Tb,deps:[gt,Db,nm]},{provide:Tb,useClass:Tb,deps:[gt,Db,nm]}],cV=[{provide:uw,useValue:"root"},{provide:ka,useFactory:function Jte(){return new ka},deps:[]},{provide:iC,useClass:Wte,multi:!0,deps:[_i,gt,xs]},{provide:iC,useClass:Yte,multi:!0,deps:[_i]},tV,JL,YL,{provide:_N,useExisting:tV},{provide:class dte{},useClass:Vte,deps:[]},[]];let nne=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Mg,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(me(tne,12))},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[...cV,...aV],imports:[Qd,SZ]}),n})(),uV=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(me(_i))},n.\u0275prov=_e({token:n,factory:function(t){let r=null;return r=t?new t:function ine(){return new uV(me(_i))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const{isArray:une}=Array,{getPrototypeOf:lne,prototype:dne,keys:hne}=Object;function fV(n){if(1===n.length){const e=n[0];if(une(e))return{args:e,keys:null};if(function fne(n){return n&&"object"==typeof n&&lne(n)===dne}(e)){const t=hne(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:pne}=Array;function pV(n){return Et(e=>function gne(n,e){return pne(e)?n(...e):n(e)}(n,e))}function gV(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let mV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(S(Pi),S(jr))},n.\u0275dir=we({type:n}),n})(),Va=(()=>{class n extends mV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Wn(n)))(r||n)}}(),n.\u0275dir=we({type:n,features:[pt]}),n})();const lo=new le("NgValueAccessor"),yne={provide:lo,useExisting:At(()=>bi),multi:!0},wne=new le("CompositionEventMode");let bi=(()=>{class n extends mV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vne(){const n=Os()?Os().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(S(Pi),S(jr),S(wne,8))},n.\u0275dir=we({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&q("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[zt([yne]),pt]}),n})();const fr=new le("NgValidators"),Rs=new le("NgAsyncValidators");function AV(n){return null!=n}function xV(n){return Rd(n)?Pn(n):n}function SV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function MV(n,e){return e.map(t=>t(n))}function OV(n){return n.map(e=>function Cne(n){return!n.validate}(e)?e:t=>e.validate(t))}function dC(n){return null!=n?function PV(n){if(!n)return null;const e=n.filter(AV);return 0==e.length?null:function(t){return SV(MV(t,e))}}(OV(n)):null}function hC(n){return null!=n?function kV(n){if(!n)return null;const e=n.filter(AV);return 0==e.length?null:function(t){return function mne(...n){const e=FO(n),{args:t,keys:r}=fV(n),i=new jt(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let l=0;l<s;l++){let d=!1;hi(t[l]).subscribe(En(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?gV(r,a):a),o.complete())}))}});return e?i.pipe(pV(e)):i}(MV(t,e).map(xV)).pipe(Et(SV))}}(OV(n)):null}function NV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fC(n){return n?Array.isArray(n)?n:[n]:[]}function Em(n,e){return Array.isArray(n)?n.includes(e):n===e}function LV(n,e){const t=fC(e);return fC(n).forEach(i=>{Em(t,i)||t.push(i)}),t}function VV(n,e){return fC(e).filter(t=>!Em(n,t))}class UV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xr extends UV{get formDirective(){return null}get path(){return null}}class Fs extends UV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class BV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ho=(()=>{class n extends BV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(S(Fs,2))},n.\u0275dir=we({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Fd("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[pt]}),n})(),zr=(()=>{class n extends BV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(S(xr,10))},n.\u0275dir=we({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Fd("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[pt]}),n})();const Jd="VALID",Tm="INVALID",Pu="PENDING",Zd="DISABLED";function mC(n){return(Dm(n)?n.validators:n)||null}function _C(n,e){return(Dm(e)?e.asyncValidators:n)||null}function Dm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jd}get invalid(){return this.status===Tm}get pending(){return this.status==Pu}get disabled(){return this.status===Zd}get enabled(){return this.status!==Zd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VV(e,this._rawAsyncValidators))}hasValidator(e){return Em(this._rawValidators,e)}hasAsyncValidator(e){return Em(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jd||this.status===Pu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zd:Jd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pu,this._hasOwnPendingAsyncValidator=!0;const t=xV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Zd:this.errors?Tm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pu)?Pu:this._anyControlsHaveStatus(Tm)?Tm:Jd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Dne(n){return Array.isArray(n)?dC(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ane(n){return Array.isArray(n)?hC(n):n||null}(this._rawAsyncValidators)}}class yC extends HV{constructor(e,t,r){super(mC(t),_C(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function zV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new X(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function $V(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ku=new le("CallSetDisabledState",{providedIn:"root",factory:()=>Am}),Am="always";function eh(n,e,t=Am){vC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Mne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&GV(n,e)})}(n,e),function Pne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function One(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&GV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Sne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Mm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vC(n,e){const t=function RV(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(NV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function FV(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(NV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Mm(e._rawValidators,i),Mm(e._rawAsyncValidators,i)}function GV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Lne={provide:xr,useExisting:At(()=>pr)},th=(()=>Promise.resolve())();let pr=(()=>{class n extends xr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new et,this.form=new yC({},dC(t),hC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){th.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),eh(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){th.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){th.then(()=>{const r=this._findContainer(t.path),i=new yC({});(function qV(n,e){vC(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){th.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){th.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function WV(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(S(fr,10),S(Rs,10),S(ku,8))},n.\u0275dir=we({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&q("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zt([Lne]),pt]}),n})();function KV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const YV=class extends HV{constructor(e=null,t,r){super(mC(t),_C(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=QV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){QV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Bne={provide:Fs,useExisting:At(()=>Ui)},ZV=(()=>Promise.resolve())();let Ui=(()=>{class n extends Fs{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new YV,this._registered=!1,this.name="",this.update=new et,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function CC(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===bi?t=o:function Rne(n){return Object.getPrototypeOf(n.constructor)===Va}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function bC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){eh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ZV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&function Mu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);ZV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function xm(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(S(xr,9),S(fr,10),S(Rs,10),S(lo,10),S(im,8),S(ku,8))},n.\u0275dir=we({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zt([Bne]),pt,pi]}),n})(),Hr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=we({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),t3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({}),n})();const Yne={provide:lo,useExisting:At(()=>DC),multi:!0};function c3(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let DC=(()=>{class n extends Va{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=c3(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Xne(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Wn(n)))(r||n)}}(),n.\u0275dir=we({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&q("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zt([Yne]),pt]}),n})(),nh=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(c3(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(S(jr),S(Pi),S(DC,9))},n.\u0275dir=we({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Jne={provide:lo,useExisting:At(()=>AC),multi:!0};function u3(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let AC=(()=>{class n extends Va{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const u=this._getOptionValue(s[a].value);i.push(u)}}else{const s=r.options;for(let a=0;a<s.length;a++){const c=s[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Zne(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Wn(n)))(r||n)}}(),n.\u0275dir=we({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&q("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zt([Jne]),pt]}),n})(),rh=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(u3(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(u3(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(S(jr),S(Pi),S(AC,9))},n.\u0275dir=we({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),cre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[t3]}),n})(),Pm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ku,useValue:t.callSetDisabledState??Am}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[cre]}),n})();function SC(...n){const e=Zl(n),t=FO(n),{args:r,keys:i}=fV(n);if(0===r.length)return Pn([],e);const o=new jt(function dre(n,e,t=tt){return r=>{v3(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)v3(e,()=>{const u=Pn(n[c],e);let l=!1;u.subscribe(En(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>gV(i,s):tt));return t?o.pipe(pV(t)):o}function v3(n,e,t){n?Ro(t,n,e):e()}const km=B(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function MC(...n){return function hre(){return Vc(1)}()(Pn(n,Zl(n)))}function w3(n){return new jt(e=>{hi(n()).subscribe(e)})}function ih(n,e){const t=L(n)?n:()=>n,r=i=>i.error(t());return new jt(e?i=>e.schedule(r,0,i):r)}function OC(){return On((n,e)=>{let t=null;n._refCount++;const r=En(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class b3 extends jt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,bO(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new j;const t=this.getSubject();e.add(this.source.subscribe(En(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=j.EMPTY)}return e}refCount(){return OC()(this)}}function Nu(n){return n<=0?()=>Yi:On((e,t)=>{let r=0;e.subscribe(En(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ls(n,e){return On((t,r)=>{let i=0;t.subscribe(En(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Nm(n){return On((e,t)=>{let r=!1;e.subscribe(En(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function C3(n=pre){return On((e,t)=>{let r=!1;e.subscribe(En(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function pre(){return new km}function Ba(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ls((i,o)=>n(i,o,r)):tt,Nu(1),t?Nm(e):C3(()=>new km))}function oh(n,e){return L(e)?Gn(n,e,1):Gn(n,1)}function gr(n,e,t){const r=L(n)||e||t?{next:n,error:e,complete:t}:n;return r?On((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(En(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):tt}function ja(n){return On((e,t)=>{let o,r=null,i=!1;r=e.subscribe(En(t,void 0,void 0,s=>{o=hi(n(s,ja(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function PC(n){return n<=0?()=>Yi:On((e,t)=>{let r=[];e.subscribe(En(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kC(n){return On((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ne="primary",sh=Symbol("RouteTitle");class vre{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ru(n){return new vre(n)}function wre(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!E3(n[i],e[i]))return!1;return!0}function E3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function I3(n){return n.length>0?n[n.length-1]:null}function Vs(n){return function lre(n){return!!n&&(n instanceof jt||L(n.lift)&&L(n.subscribe))}(n)?n:Rd(n)?Pn(Promise.resolve(n)):be(n)}const Cre={exact:function A3(n,e,t){if(!$a(n.segments,e.segments)||!Rm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!A3(n.children[r],e.children[r],t))return!1;return!0},subset:x3},T3={exact:function Ere(n,e){return fo(n,e)},subset:function Ire(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>E3(n[t],e[t]))},ignored:()=>!0};function D3(n,e,t){return Cre[t.paths](n.root,e.root,t.matrixParams)&&T3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function x3(n,e,t){return S3(n,e,e.segments,t)}function S3(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!$a(i,t)||e.hasChildren()||!Rm(i,t,r))}if(n.segments.length===t.length){if(!$a(n.segments,t)||!Rm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!x3(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!($a(n.segments,i)&&Rm(n.segments,i,r)&&n.children[Ne])&&S3(n.children[Ne],e,o,r)}}function Rm(n,e,t){return e.every((r,i)=>T3[t](n[i].parameters,r.parameters))}class Fu{constructor(e=new mt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ru(this.queryParams)),this._queryParamMap}toString(){return Are.serialize(this)}}class mt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fm(this)}}class ah{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ru(this.parameters)),this._parameterMap}toString(){return P3(this)}}function $a(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ch=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return new NC},providedIn:"root"}),n})();class NC{parse(e){const t=new Vre(e);return new Fu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uh(e.root,!0)}`,r=function Mre(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Lm(t)}=${Lm(i)}`).join("&"):`${Lm(t)}=${Lm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function xre(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Are=new NC;function Fm(n){return n.segments.map(e=>P3(e)).join("/")}function uh(n,e){if(!n.hasChildren())return Fm(n);if(e){const t=n.children[Ne]?uh(n.children[Ne],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ne&&r.push(`${i}:${uh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dre(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ne&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ne&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ne?[uh(n.children[Ne],!1)]:[`${i}:${uh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ne]?`${Fm(n)}/${t[0]}`:`${Fm(n)}/(${t.join("//")})`}}function M3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lm(n){return M3(n).replace(/%3B/gi,";")}function RC(n){return M3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vm(n){return decodeURIComponent(n)}function O3(n){return Vm(n.replace(/\+/g,"%20"))}function P3(n){return`${RC(n.path)}${function Sre(n){return Object.keys(n).map(e=>`;${RC(e)}=${RC(n[e])}`).join("")}(n.parameters)}`}const Ore=/^[^\/()?;#]+/;function FC(n){const e=n.match(Ore);return e?e[0]:""}const Pre=/^[^\/()?;=#]+/,Nre=/^[^=?&#]+/,Fre=/^[^&#]+/;class Vre{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ne]=new mt(e,t)),r}parseSegment(){const e=FC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new ah(Vm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function kre(n){const e=n.match(Pre);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=FC(this.remaining);i&&(r=i,this.capture(r))}e[Vm(t)]=Vm(r)}parseQueryParam(e){const t=function Rre(n){const e=n.match(Nre);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Lre(n){const e=n.match(Fre);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=O3(t),o=O3(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=FC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ne);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[Ne]:new mt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}}function k3(n){return n.segments.length>0?new mt([],{[Ne]:n}):n}function N3(n){const e={};for(const r of Object.keys(n.children)){const o=N3(n.children[r]);if(r===Ne&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Ure(n){if(1===n.numberOfChildren&&n.children[Ne]){const e=n.children[Ne];return new mt(n.segments.concat(e.segments),e.children)}return n}(new mt(n.segments,e))}function za(n){return n instanceof Fu}function R3(n){let e;const i=k3(function t(o){const s={};for(const c of o.children){const u=t(c);s[c.outlet]=u}const a=new mt(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function F3(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return LC(i,i,i,t,r);const o=function jre(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new V3(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new V3(t,e,r)}(e);if(o.toRoot())return LC(i,i,new mt([],{}),t,r);const s=function $re(n,e,t){if(n.isAbsolute)return new Bm(e,!0,0);if(!t)return new Bm(e,!1,NaN);if(null===t.parent)return new Bm(t,!0,0);const r=Um(n.commands[0])?0:1;return function zre(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Bm(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?dh(s.segmentGroup,s.index,o.commands):U3(s.segmentGroup,s.index,o.commands);return LC(i,s.segmentGroup,a,t,r)}function Um(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lh(n){return"object"==typeof n&&null!=n&&n.outlets}function LC(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=n===e?t:L3(n,e,t);const a=k3(N3(s));return new Fu(a,o,i)}function L3(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:L3(o,e,t)}),new mt(n.segments,r)}class V3{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Um(r[0]))throw new X(4003,!1);const i=r.find(lh);if(i&&i!==I3(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bm{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function U3(n,e,t){if(n||(n=new mt([],{})),0===n.segments.length&&n.hasChildren())return dh(n,e,t);const r=function Gre(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(lh(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!j3(c,u,s))return o;r+=2}else{if(!j3(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new mt(n.segments.slice(0,r.pathIndex),{});return o.children[Ne]=new mt(n.segments.slice(r.pathIndex),n.children),dh(o,0,i)}return r.match&&0===i.length?new mt(n.segments,{}):r.match&&!n.hasChildren()?VC(n,e,t):r.match?dh(n,0,i):VC(n,e,t)}function dh(n,e,t){if(0===t.length)return new mt(n.segments,{});{const r=function Hre(n){return lh(n[0])?n[0].outlets:{[Ne]:n}}(t),i={};if(!r[Ne]&&n.children[Ne]&&1===n.numberOfChildren&&0===n.children[Ne].segments.length){const o=dh(n.children[Ne],e,t);return new mt(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=U3(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new mt(n.segments,i)}}function VC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(lh(o)){const c=qre(o.outlets);return new mt(r,c)}if(0===i&&Um(t[0])){r.push(new ah(n.segments[e].path,B3(t[0]))),i++;continue}const s=lh(o)?o.outlets[Ne]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Um(a)?(r.push(new ah(s,B3(a))),i+=2):(r.push(new ah(s,{})),i++)}return new mt(r,{})}function qre(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=VC(new mt([],{}),0,r))}),e}function B3(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function j3(n,e,t){return n==t.path&&fo(e,t.parameters)}const hh="imperative";class po{constructor(e,t){this.id=e,this.url=t}}class UC extends po{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ha extends po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jm extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fh extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class BC extends po{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wre extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kre extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qre extends po{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yre extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xre extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jre{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zre{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eie{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tie{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nie{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rie{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $3{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class iie{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ph,this.attachRef=null}}let ph=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iie,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class z3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$C(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $C(e,this._root).map(t=>t.value)}}function jC(n,e){if(n===e.value)return e;for(const t of e.children){const r=jC(n,t);if(r)return r}return null}function $C(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$C(n,t);if(r.length)return r.unshift(e),r}return[]}class Yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Lu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class H3 extends z3{constructor(e,t){super(e),this.snapshot=t,zC(this,e)}toString(){return this.snapshot.toString()}}function G3(n,e){const t=function oie(n,e){const s=new $m([],{},{},"",{},Ne,e,null,{});return new W3("",new Yo(s,[]))}(0,e),r=new Nr([new ah("",{})]),i=new Nr({}),o=new Nr({}),s=new Nr({}),a=new Nr(""),c=new dt(r,i,s,a,o,Ne,e,t.root);return c.snapshot=t.root,new H3(new Yo(c,[]),t)}class dt{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Et(u=>u[sh]))??be(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Et(e=>Ru(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Et(e=>Ru(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function q3(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function sie(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $m{get title(){return this.data?.[sh]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ru(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ru(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class W3 extends z3{constructor(e,t){super(t),this.url=e,zC(this,t)}toString(){return K3(this._root)}}function zC(n,e){e.value._routerState=n,e.children.forEach(t=>zC(n,t))}function K3(n){const e=n.children.length>0?` { ${n.children.map(K3).join(", ")} } `:"";return`${n.value}${e}`}function HC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),fo(e.params,t.params)||n.paramsSubject.next(t.params),function bre(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),fo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function GC(n,e){const t=fo(n.params,e.params)&&function Tre(n,e){return $a(n,e)&&n.every((t,r)=>fo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||GC(n.parent,e.parent))}let Vu=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ne,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=de(ph),this.location=de(Ri),this.changeDetector=de(im),this.environmentInjector=de($o),this.inputBinder=de(zm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new aie(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=we({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[pi]}),n})();class aie{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dt?this.route:e===ph?this.childContexts:this.parent.get(e,t)}}const zm=new le("");let Q3=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=SC([r.queryParams,r.params,r.data]).pipe(Xi(([o,s,a],c)=>(a={...o,...s,...a},0===c?be(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function UZ(n){const e=st(n);if(!e)return null;const t=new Md(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();function gh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function uie(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gh(n,r,i);return gh(n,r)})}(n,e,t);return new Yo(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gh(n,a)),s}}const r=function lie(n){return new dt(new Nr(n.url),new Nr(n.params),new Nr(n.queryParams),new Nr(n.fragment),new Nr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>gh(n,o));return new Yo(r,i)}}const qC="ngNavigationCancelingError";function Y3(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=za(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=X3(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function X3(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function J3(n){return Z3(n)&&za(n.url)}function Z3(n){return n&&n[qC]}let eU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=He({type:n,selectors:[["ng-component"]],standalone:!0,features:[Y2],decls:1,vars:0,template:function(t,r){1&t&&Z(0,"router-outlet")},dependencies:[Vu],encapsulation:2}),n})();function WC(n){const e=n.children&&n.children.map(WC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=eU),t}function Bi(n){return n.outlet||Ne}function mh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _ie{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),HC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Lu(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Lu(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Lu(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Lu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new rie(o.value.snapshot))}),e.children.length&&this.forwardEvent(new tie(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(HC(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),HC(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=mh(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class tU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hm{constructor(e,t){this.component=e,this.route=t}}function yie(n,e,t){const r=n._root;return _h(r,e?e._root:null,t,[r.value])}function Uu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function E8(n){return null!==Bp(n)}(n)?e.get(n):n:r}function _h(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Lu(e);return n.children.forEach(s=>{(function wie(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function bie(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!$a(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$a(n.url,e.url)||!fo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!GC(n,e)||!fo(n.queryParams,e.queryParams);default:return!GC(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new tU(r)):(o.data=s.data,o._resolvedData=s._resolvedData),_h(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hm(a.outlet.component,s))}else s&&yh(e,a,i),i.canActivateChecks.push(new tU(r)),_h(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yh(a,t.getContext(s),i)),i}function yh(n,e,t){const r=Lu(n),i=n.value;Object.entries(r).forEach(([o,s])=>{yh(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Hm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vh(n){return"function"==typeof n}function nU(n){return n instanceof km||"EmptyError"===n?.name}const Gm=Symbol("INITIAL_VALUE");function Bu(){return Xi(n=>SC(n.map(e=>e.pipe(Nu(1),function fre(...n){const e=Zl(n);return On((t,r)=>{(e?MC(n,t,e):MC(n,t)).subscribe(r)})}(Gm)))).pipe(Et(e=>{for(const t of e)if(!0!==t){if(t===Gm)return Gm;if(!1===t||t instanceof Fu)return t}return!0}),Ls(e=>e!==Gm),Nu(1)))}function rU(n){return function kr(...n){return Np(n)}(gr(e=>{if(za(e))throw Y3(0,e)}),Et(e=>!0===e))}class qm{constructor(e){this.segmentGroup=e||null}}class iU{constructor(e){this.urlTree=e}}function ju(n){return ih(new qm(n))}function oU(n){return ih(new iU(n))}class jie{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new X(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return be(r);if(i.numberOfChildren>1||!i.children[Ne])return ih(new X(4e3,!1));i=i.children[Ne]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Fu(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new mt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const KC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $ie(n,e,t,r,i){const o=QC(n,e,t);return o.matched?(r=function die(n,e){return n.providers&&!n._injector&&(n._injector=ob(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Vie(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?be(i.map(s=>{const a=Uu(s,n);return Vs(function Aie(n){return n&&vh(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Bu(),rU()):be(!0)}(r,e,t).pipe(Et(s=>!0===s?o:{...KC}))):be(o)}function QC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...KC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wre)(t,n,e);if(!i)return{...KC};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sU(n,e,t,r){return t.length>0&&function Gie(n,e,t){return t.some(r=>Wm(n,e,r)&&Bi(r)!==Ne)}(n,t,r)?{segmentGroup:new mt(e,Hie(r,new mt(t,n.children))),slicedSegments:[]}:0===t.length&&function qie(n,e,t){return t.some(r=>Wm(n,e,r))}(n,t,r)?{segmentGroup:new mt(n.segments,zie(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new mt(n.segments,n.children),slicedSegments:t}}function zie(n,e,t,r,i){const o={};for(const s of r)if(Wm(n,t,s)&&!i[Bi(s)]){const a=new mt([],{});o[Bi(s)]=a}return{...i,...o}}function Hie(n,e){const t={};t[Ne]=e;for(const r of n)if(""===r.path&&Bi(r)!==Ne){const i=new mt([],{});t[Bi(r)]=i}return t}function Wm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Yie{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new jie(this.urlSerializer,this.urlTree)}noMatchError(e){return new X(4002,!1)}recognize(){const e=sU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ne).pipe(ja(t=>{if(t instanceof iU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof qm?this.noMatchError(t):t}),Et(t=>{const r=new $m([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ne,this.rootComponentType,null,{}),i=new Yo(r,t),o=new W3("",i),s=function Bre(n,e,t=null,r=null){return F3(R3(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ne).pipe(ja(r=>{throw r instanceof qm?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=q3(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Pn(i).pipe(oh(o=>{const s=r.children[o],a=function gie(n,e){const t=n.filter(r=>Bi(r)===e);return t.push(...n.filter(r=>Bi(r)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),function mre(n,e){return On(function gre(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(En(s,l=>{const d=u++;c=a?n(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),Nm(null),function _re(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ls((i,o)=>n(i,o,r)):tt,PC(1),t?Nm(e):C3(()=>new km))}(),Gn(o=>{if(null===o)return ju(r);const s=aU(o);return function Xie(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}(s),be(s)}))}processSegment(e,t,r,i,o,s){return Pn(t).pipe(oh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(ja(c=>{if(c instanceof qm)return be(null);throw c}))),Ba(a=>!!a),ja(a=>{if(nU(a))return function Kie(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?be([]):ju(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return function Wie(n,e,t,r){return!!(Bi(n)===r||r!==Ne&&Wm(e,t,n))&&("**"===n.path||QC(e,n,t).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):ju(i):ju(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oU(o):this.applyRedirects.lineralizeSegments(r,o).pipe(Gn(s=>{const a=new mt(s,{});return this.processSegment(e,t,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=QC(t,i,o);if(!a)return ju(t);const d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return i.redirectTo.startsWith("/")?oU(d):this.applyRedirects.lineralizeSegments(i,d).pipe(Gn(h=>this.processSegment(e,r,t,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a;if("**"===r.path){const c=i.length>0?I3(i).parameters:{};a=be({snapshot:new $m(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cU(r),Bi(r),r.component??r._loadedComponent??null,r,uU(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=$ie(t,r,i,e).pipe(Et(({matched:c,consumedSegments:u,remainingSegments:l,parameters:d})=>c?{snapshot:new $m(u,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cU(r),Bi(r),r.component??r._loadedComponent??null,r,uU(r)),consumedSegments:u,remainingSegments:l}:null));return a.pipe(Xi(c=>null===c?ju(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Xi(({routes:u})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:p}=c,{segmentGroup:w,slicedSegments:I}=sU(t,h,p,u);if(0===I.length&&w.hasChildren())return this.processChildren(l,u,w).pipe(Et(k=>null===k?null:[new Yo(d,k)]));if(0===u.length&&0===I.length)return be([new Yo(d,[])]);const x=Bi(r)===o;return this.processSegment(l,u,w,I,x?Ne:o,!0).pipe(Et(k=>[new Yo(d,k)]))}))))}getChildConfig(e,t,r){return t.children?be({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?be({routes:t._loadedRoutes,injector:t._loadedInjector}):function Lie(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?be(!0):be(i.map(s=>{const a=Uu(s,n);return Vs(function Eie(n){return n&&vh(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Bu(),rU())}(e,t,r).pipe(Gn(i=>i?this.configLoader.loadChildren(e,t).pipe(gr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Bie(n){return ih(X3(!1,3))}())):be({routes:[],injector:e})}}function Jie(n){const e=n.value.routeConfig;return e&&""===e.path}function aU(n){const e=[],t=new Set;for(const r of n){if(!Jie(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=aU(r.children);e.push(new Yo(r.value,i))}return e.filter(r=>!t.has(r))}function cU(n){return n.data||{}}function uU(n){return n.resolve||{}}function lU(n){return"string"==typeof n.title||null===n.title}function YC(n){return Xi(e=>{const t=n(e);return t?Pn(t).pipe(Et(()=>e)):be(e)})}const $u=new le("ROUTES");let XC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=de(BF)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return be(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Vs(t.loadComponent()).pipe(Et(dU),gr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),kC(()=>{this.componentLoaders.delete(t)})),i=new b3(r,()=>new Qi).pipe(OC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return be({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Et(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,u;return Array.isArray(a)?u=a:(c=a.create(t).injector,u=c.get($u,[],Le.Self|Le.Optional).flat()),{routes:u.map(WC),injector:c}}),kC(()=>{this.childrenLoaders.delete(r)})),s=new b3(o,()=>new Qi).pipe(OC());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Vs(t()).pipe(Et(dU),Gn(r=>r instanceof K2||Array.isArray(r)?be(r):Pn(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dU(n){return function ooe(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Km=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qi,this.configLoader=de(XC),this.environmentInjector=de($o),this.urlSerializer=de(ch),this.rootContexts=de(ph),this.inputBindingEnabled=null!==de(zm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>be(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Zre(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Jre(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Nr({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hh,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ls(r=>0!==r.id),Et(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Xi(r=>{let i=!1,o=!1;return be(r).pipe(gr(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xi(s=>{const a=t.browserUrlTree.toString(),c=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!c&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const l="";return this.events.next(new fh(s.id,t.serializeUrl(r.rawUrl),l,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),Yi}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return hU(s.source)&&(t.browserUrlTree=s.extractedUrl),be(s).pipe(Xi(l=>{const d=this.transitions?.getValue();return this.events.next(new UC(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Yi:Promise.resolve(l)}),function Zie(n,e,t,r,i,o){return Gn(s=>function Qie(n,e,t,r,i,o,s="emptyOnly"){return new Yie(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Et(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),gr(l=>{if(r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);t.setBrowserUrl(h,l)}t.browserUrlTree=l.urlAfterRedirects}const d=new Wre(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(c&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:l,extractedUrl:d,source:h,restoredState:p,extras:w}=s,I=new UC(l,this.urlSerializer.serialize(d),h,p);this.events.next(I);const x=G3(0,this.rootComponentType).snapshot;return be(r={...s,targetSnapshot:x,urlAfterRedirects:d,extras:{...w,skipLocationChange:!1,replaceUrl:!1}})}{const l="";return this.events.next(new fh(s.id,t.serializeUrl(r.extractedUrl),l,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),Yi}}),gr(s=>{const a=new Kre(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Et(s=>r={...s,guards:yie(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function Sie(n,e){return Gn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?be({...t,guardsResult:!0}):function Mie(n,e,t,r){return Pn(n).pipe(Gn(i=>function Fie(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?be(o.map(a=>{const c=mh(e)??i,u=Uu(a,c);return Vs(function Die(n){return n&&vh(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(Ba())})).pipe(Bu()):be(!0)}(i.component,i.route,t,e,r)),Ba(i=>!0!==i,!0))}(s,r,i,n).pipe(Gn(a=>a&&function Cie(n){return"boolean"==typeof n}(a)?function Oie(n,e,t,r){return Pn(e).pipe(oh(i=>MC(function kie(n,e){return null!==n&&e&&e(new eie(n)),be(!0)}(i.route.parent,r),function Pie(n,e){return null!==n&&e&&e(new nie(n)),be(!0)}(i.route,r),function Rie(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function vie(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>w3(()=>be(s.guards.map(c=>{const u=mh(s.node)??t,l=Uu(c,u);return Vs(function Tie(n){return n&&vh(n.canActivateChild)}(l)?l.canActivateChild(r,n):u.runInContext(()=>l(r,n))).pipe(Ba())})).pipe(Bu())));return be(o).pipe(Bu())}(n,i.path,t),function Nie(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return be(!0);const i=r.map(o=>w3(()=>{const s=mh(e)??t,a=Uu(o,s);return Vs(function Iie(n){return n&&vh(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Ba())}));return be(i).pipe(Bu())}(n,i.route,t))),Ba(i=>!0!==i,!0))}(r,o,n,e):be(a)),Et(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),gr(s=>{if(r.guardsResult=s.guardsResult,za(s.guardsResult))throw Y3(0,s.guardsResult);const a=new Qre(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ls(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),YC(s=>{if(s.guards.canActivateChecks.length)return be(s).pipe(gr(a=>{const c=new Yre(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Xi(a=>{let c=!1;return be(a).pipe(function eoe(n,e){return Gn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return be(t);let o=0;return Pn(i).pipe(oh(s=>function toe(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!lU(i)&&(o[sh]=i.title),function noe(n,e,t,r){const i=function roe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return be({});const o={};return Pn(i).pipe(Gn(s=>function ioe(n,e,t,r){const i=mh(e)??r,o=Uu(n,i);return Vs(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Ba(),gr(a=>{o[s]=a}))),PC(1),function yre(n){return Et(()=>n)}(o),ja(s=>nU(s)?Yi:ih(s)))}(o,n,e,r).pipe(Et(s=>(n._resolvedData=s,n.data=q3(n,t).resolve,i&&lU(i)&&(n.data[sh]=i.title),null)))}(s.route,r,n,e)),gr(()=>o++),PC(1),Gn(s=>o===i.length?be(t):Yi))})}(t.paramsInheritanceStrategy,this.environmentInjector),gr({next:()=>c=!0,complete:()=>{c||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),gr(a=>{const c=new Xre(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),YC(s=>{const a=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(gr(l=>{c.component=l}),Et(()=>{})));for(const l of c.children)u.push(...a(l));return u};return SC(a(s.targetSnapshot.root)).pipe(Nm(),Nu(1))}),YC(()=>this.afterPreactivation()),Et(s=>{const a=function cie(n,e,t){const r=gh(n,e._root,t?t._root:void 0);return new H3(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),gr(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t,r)=>Et(i=>(new _ie(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Nu(1),gr({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ha(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),kC(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ja(s=>{if(o=!0,Z3(s)){J3(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new jm(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),J3(s)){const c=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||hU(r.source)};t.scheduleNavigation(c,hh,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new BC(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(c){r.reject(c)}}return Yi}))}))}cancelNavigationTransition(t,r,i){const o=new jm(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hU(n){return n!==hh}let fU=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ne);return r}getResolvedTitleForRoute(t){return t.data[sh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return de(soe)},providedIn:"root"}),n})(),soe=(()=>{class n extends fU{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(me(uV))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return de(uoe)},providedIn:"root"}),n})();class coe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let uoe=(()=>{class n extends coe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Wn(n)))(r||n)}}(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qm=new le("",{providedIn:"root",factory:()=>({})});let loe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return de(doe)},providedIn:"root"}),n})(),doe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var wh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(wh||{});function pU(n,e){n.events.pipe(Ls(t=>t instanceof Ha||t instanceof jm||t instanceof BC||t instanceof fh),Et(t=>t instanceof Ha||t instanceof fh?wh.COMPLETE:t instanceof jm&&(0===t.code||1===t.code)?wh.REDIRECTING:wh.FAILED),Ls(t=>t!==wh.REDIRECTING),Nu(1)).subscribe(()=>{e()})}function hoe(n){throw n}function foe(n,e,t){return e.parse("/")}const poe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},goe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pe=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=de(VF),this.isNgZoneEnabled=!1,this.options=de(Qm,{optional:!0})||{},this.pendingTasks=de(UF),this.errorHandler=this.options.errorHandler||hoe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||foe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=de(loe),this.routeReuseStrategy=de(aoe),this.titleStrategy=de(fU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=de($u,{optional:!0})?.flat()??[],this.navigationTransitions=de(Km),this.urlSerializer=de(ch),this.location=de(Bb),this.componentInputBindingEnabled=!!de(zm,{optional:!0}),this.isNgZoneEnabled=de(gt)instanceof gt&&gt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=G3(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),hh,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(WC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...o};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}null!==l&&(l=this.removeEmptyProps(l));try{d=R3(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return F3(d,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=za(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,hh,null,r)}navigate(t,r={skipLocationChange:!1}){return function moe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new X(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...poe}:!1===r?{...goe}:r,za(t))return D3(this.currentUrlTree,t,i);const o=this.parseUrl(t);return D3(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,h)=>{a=d,c=h});const l=this.pendingTasks.add();return pU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gU{}let voe=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ls(t=>t instanceof Ha),oh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=ob(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Pn(i).pipe(Vc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):be(null);const o=i.pipe(Gn(s=>null===s?be(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Pn([o,this.loader.loadComponent(r)]).pipe(Vc()):o})}}return n.\u0275fac=function(t){return new(t||n)(me(Pe),me(BF),me($o),me(gU),me(XC))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZC=new le("");let mU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof UC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ha?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $3&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $3(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function FN(){throw new Error("invalid")}()},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();function Xo(n,e){return{\u0275kind:n,\u0275providers:e}}function yU(){const n=de(Ir);return e=>{const t=n.get(Su);if(e!==t.components[0])return;const r=n.get(Pe),i=n.get(vU);1===n.get(eE)&&r.initialNavigation(),n.get(wU,null,Le.Optional)?.setUpPreloading(),n.get(ZC,null,Le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const vU=new le("",{factory:()=>new Qi}),eE=new le("",{providedIn:"root",factory:()=>1}),wU=new le("");function Eoe(n){return Xo(0,[{provide:wU,useExisting:voe},{provide:gU,useExisting:n}])}const bU=new le("ROUTER_FORROOT_GUARD"),Toe=[Bb,{provide:ch,useClass:NC},Pe,ph,{provide:dt,useFactory:function _U(n){return n.routerState.root},deps:[Pe]},XC,[]];function Doe(){return new XF("Router",Pe)}let ji=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Toe,[],{provide:$u,multi:!0,useValue:t},{provide:bU,useFactory:Moe,deps:[[Pe,new Xt,new fg]]},{provide:Qm,useValue:r||{}},r?.useHash?{provide:Ps,useClass:DL}:{provide:Ps,useClass:TL},{provide:ZC,useFactory:()=>{const n=de(cte),e=de(gt),t=de(Qm),r=de(Km),i=de(ch);return t.scrollOffset&&n.setOffset(t.scrollOffset),new mU(i,r,n,e,t)}},r?.preloadingStrategy?Eoe(r.preloadingStrategy).\u0275providers:[],{provide:XF,multi:!0,useFactory:Doe},r?.initialNavigation?Ooe(r):[],r?.bindToComponentInputs?Xo(8,[Q3,{provide:zm,useExisting:Q3}]).\u0275providers:[],[{provide:CU,useFactory:yU},{provide:Sb,multi:!0,useExisting:CU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:$u,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(me(bU,8))},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({}),n})();function Moe(n){return"guarded"}function Ooe(n){return["disabled"===n.initialNavigation?Xo(3,[{provide:bb,multi:!0,useFactory:()=>{const e=de(Pe);return()=>{e.setUpLocationChangeListener()}}},{provide:eE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Xo(2,[{provide:eE,useValue:0},{provide:bb,multi:!0,deps:[Ir],useFactory:e=>{const t=e.get($Z,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Pe),o=e.get(vU);pU(i,()=>{r(!0)}),e.get(Km).afterPreactivation=()=>(r(!0),o.closed?be(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const CU=new le("");function EU(n,e,t,r,i,o,s){try{var a=n[o](s),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function C(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(c){EU(o,r,i,s,a,"next",c)}function a(c){EU(o,r,i,s,a,"throw",c)}s(void 0)})}}const re=function(n,e){if(!n)throw zu(e)},zu=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},IU=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Ym={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0;let h=(15&a)<<2|u>>6,p=63&u;c||(p=64,s||(h=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IU(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==d)throw new Noe;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Noe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TU=function(n){const e=IU(n);return Ym.encodeByteArray(e,!0)},Xm=function(n){return TU(n).replace(/\./g,"")},Jm=function(n){try{return Ym.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Roe(n){return DU(void 0,n)}function DU(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Foe(t)||(n[t]=DU(n[t],e[t]));return n}function Foe(n){return"__proto__"!==n}const Zm=()=>{try{return function Loe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Jm(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},AU=n=>{var e,t;return null===(t=null===(e=Zm())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},nE=n=>{const e=AU(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xU=()=>{var n;return null===(n=Zm())||void 0===n?void 0:n.config},SU=n=>{var e;return null===(e=Zm())||void 0===e?void 0:e[`_${n}`]};class Hu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function MU(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Xm(JSON.stringify({alg:"none",type:"JWT"})),Xm(JSON.stringify(s)),""].join(".")}function hn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function iE(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function OU(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Us(){try{return"object"==typeof indexedDB}catch{return!1}}function bh(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}function oE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ci extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function Goe(n,e){return n.replace(qoe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Ci(i,`${this.serviceName}: ${s} (${i}).`,r)}}const qoe=/\{\$([^}]+)}/g;function Ch(n){return JSON.parse(n)}function Xn(n){return JSON.stringify(n)}const e_=function(n){let e={},t={},r={},i="";try{const o=n.split(".");e=Ch(Jm(o[0])||""),t=Ch(Jm(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Zo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Gu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function sE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function t_(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function n_(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(PU(o)&&PU(s)){if(!n_(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function PU(n){return null!==n&&"object"==typeof n}function Eh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ih(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Th(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Qoe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let u,l,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^o&(s^a),l=1518500249):(u=o^s^a,l=1859775393):d<60?(u=o&s|a&(o|s),l=2400959708):(u=o^s^a,l=3395469782);const h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}class Xoe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Joe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=aE),void 0===i.error&&(i.error=aE),void 0===i.complete&&(i.complete=aE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aE(){}const i_=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e},ese=1e3,tse=2,nse=144e5,rse=.5;function cE(n,e=ese,t=tse){const r=e*Math.pow(t,n),i=Math.round(rse*r*(Math.random()-.5)*2);return Math.min(nse,r+i)}function Ht(n){return n&&n._delegate?n._delegate:n}class Nn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ga="[DEFAULT]";class ose{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Hu;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function ase(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ga})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return C(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ga){return this.instances.has(e)}getOptions(e=Ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ga?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Ga){return this.component?this.component.multipleInstances?e:Ga:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class cse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ose(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const uE=[];var Qe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Qe||{});const kU={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},use=Qe.INFO,lse={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},dse=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=lse[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class qa{constructor(e){this.name=e,this._logLevel=use,this._logHandler=dse,this._userLogHandler=null,uE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?kU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const hse=(n,e)=>e.some(t=>n instanceof t);let NU,RU;const FU=new WeakMap,lE=new WeakMap,LU=new WeakMap,dE=new WeakMap,hE=new WeakMap;let fE={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return lE.get(n);if("objectStoreNames"===e)return n.objectStoreNames||LU.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function vse(n){return"function"==typeof n?function yse(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pse(){return RU||(RU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(pE(this),e),Bs(FU.get(this))}:function(...e){return Bs(n.apply(pE(this),e))}:function(e,...t){const r=n.call(pE(this),e,...t);return LU.set(r,e.sort?e.sort():[e]),Bs(r)}}(n):(n instanceof IDBTransaction&&function mse(n){if(lE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});lE.set(n,e)}(n),hse(n,function fse(){return NU||(NU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,fE):n)}function Bs(n){if(n instanceof IDBRequest)return function gse(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Bs(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&FU.set(t,n)}).catch(()=>{}),hE.set(e,n),e}(n);if(dE.has(n))return dE.get(n);const e=vse(n);return e!==n&&(dE.set(n,e),hE.set(e,n)),e}const pE=n=>hE.get(n),bse=["get","getKey","getAll","getAllKeys","count"],Cse=["put","add","delete","clear"],gE=new Map;function VU(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(gE.get(e))return gE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Cse.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!bse.includes(t))return;const o=function(){var s=C(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return gE.set(e,o),o}!function _se(n){fE=n(fE)}(n=>({...n,get:(e,t,r)=>VU(e,t)||n.get(e,t,r),has:(e,t)=>!!VU(e,t)||n.has(e,t)}));class Ese{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Ise(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const mE="@firebase/app",Wa=new qa("@firebase/app"),o_="[DEFAULT]",Yse={[mE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ka=new Map,s_=new Map;function Xse(n,e){try{n.container.addComponent(e)}catch(t){Wa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jn(n){const e=n.name;if(s_.has(e))return Wa.debug(`There were multiple attempts to register component ${e}.`),!1;s_.set(e,n);for(const t of Ka.values())Xse(t,n);return!0}function js(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const es=new go("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zse{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}const $s="9.23.0";function BU(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:o_,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw es.create("bad-app-name",{appName:String(i)});if(t||(t=xU()),!t)throw es.create("no-options");const o=Ka.get(i);if(o){if(n_(t,o.options)&&n_(r,o.config))return o;throw es.create("duplicate-app",{appName:i})}const s=new cse(i);for(const c of s_.values())s.addComponent(c);const a=new Zse(t,r,s);return Ka.set(i,a),a}function Dh(n=o_){const e=Ka.get(n);if(!e&&n===o_&&xU())return BU();if(!e)throw es.create("no-app",{appName:n});return e}function jU(){return Array.from(Ka.values())}function wt(n,e,t){var r;let i=null!==(r=Yse[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Wa.warn(a.join(" "))}Jn(new Nn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const eae="firebase-heartbeat-database",tae=1,Ah="firebase-heartbeat-store";let yE=null;function $U(){return yE||(yE=function wse(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=Bs(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Bs(s.result),c.oldVersion,c.newVersion,Bs(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}(eae,tae,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ah)}}).catch(n=>{throw es.create("idb-open",{originalErrorMessage:n.message})})),yE}function vE(){return(vE=C(function*(n){try{return yield(yield $U()).transaction(Ah).objectStore(Ah).get(HU(n))}catch(e){if(e instanceof Ci)Wa.warn(e.message);else{const t=es.create("idb-get",{originalErrorMessage:e?.message});Wa.warn(t.message)}}})).apply(this,arguments)}function zU(n,e){return wE.apply(this,arguments)}function wE(){return(wE=C(function*(n,e){try{const r=(yield $U()).transaction(Ah,"readwrite");yield r.objectStore(Ah).put(e,HU(n)),yield r.done}catch(t){if(t instanceof Ci)Wa.warn(t.message);else{const r=es.create("idb-set",{originalErrorMessage:t?.message});Wa.warn(r.message)}}})).apply(this,arguments)}function HU(n){return`${n.name}!${n.options.appId}`}class oae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aae(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return C(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=GU();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return C(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=GU(),{heartbeatsToSend:r,unsentEntries:i}=function sae(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),qU(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),qU(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=Xm(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function GU(){return(new Date).toISOString().substring(0,10)}class aae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(function*(){return!!Us()&&bh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return C(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function nae(n){return vE.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return C(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return zU(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return C(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return zU(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function qU(n){return Xm(JSON.stringify({version:2,heartbeats:n})).length}!function cae(n){Jn(new Nn("platform-logger",e=>new Ese(e),"PRIVATE")),Jn(new Nn("heartbeat",e=>new oae(e),"PRIVATE")),wt(mE,"0.9.13",n),wt(mE,"0.9.13","esm2017"),wt("fire-js","")}(""),wt("firebase","9.23.0","app");const dae=(n,e)=>e.some(t=>n instanceof t);let WU,KU;const QU=new WeakMap,bE=new WeakMap,YU=new WeakMap,CE=new WeakMap,EE=new WeakMap;let IE={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return bE.get(n);if("objectStoreNames"===e)return n.objectStoreNames||YU.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function yae(n){return"function"==typeof n?function _ae(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fae(){return KU||(KU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(TE(this),e),zs(QU.get(this))}:function(...e){return zs(n.apply(TE(this),e))}:function(e,...t){const r=n.call(TE(this),e,...t);return YU.set(r,e.sort?e.sort():[e]),zs(r)}}(n):(n instanceof IDBTransaction&&function gae(n){if(bE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});bE.set(n,e)}(n),dae(n,function hae(){return WU||(WU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,IE):n)}function zs(n){if(n instanceof IDBRequest)return function pae(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(zs(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&QU.set(t,n)}).catch(()=>{}),EE.set(e,n),e}(n);if(CE.has(n))return CE.get(n);const e=yae(n);return e!==n&&(CE.set(n,e),EE.set(e,n)),e}const TE=n=>EE.get(n),wae=["get","getKey","getAll","getAllKeys","count"],bae=["put","add","delete","clear"],DE=new Map;function XU(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(DE.get(e))return DE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=bae.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!wae.includes(t))return;const o=function(){var s=C(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return DE.set(e,o),o}!function mae(n){IE=n(IE)}(n=>({...n,get:(e,t,r)=>XU(e,t)||n.get(e,t,r),has:(e,t)=>!!XU(e,t)||n.has(e,t)}));const JU="@firebase/installations",AE="0.6.4",ZU=1e4,e4=`w:${AE}`,t4="FIS_v2",Cae="https://firebaseinstallations.googleapis.com/v1",Eae=36e5,ts=new go("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function n4(n){return n instanceof Ci&&n.code.includes("request-failed")}function xE({projectId:n}){return`${Cae}/projects/${n}/installations`}function r4(n){return{token:n.token,requestStatus:2,expiresIn:Aae(n.expiresIn),creationTime:Date.now()}}function SE(n,e){return ME.apply(this,arguments)}function ME(){return(ME=C(function*(n,e){const r=(yield e.json()).error;return ts.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function i4({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function OE(n){return PE.apply(this,arguments)}function PE(){return(PE=C(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Aae(n){return Number(n.replace("s","000"))}function kE(){return(kE=C(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=xE(n),i=i4(n),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:t4,appId:n.appId,sdkVersion:e4})},c=yield OE(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:r4(u.authToken)}}throw yield SE("Create Installation",c)})).apply(this,arguments)}function s4(n){return new Promise(e=>{setTimeout(e,n)})}const Oae=/^[cdef][\w-]{21}$/,NE="";function Pae(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function kae(n){return function Mae(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Oae.test(t)?t:NE}catch{return NE}}function qu(n){return`${n.appName}!${n.appId}`}const Wu=new Map;function a4(n,e){const t=qu(n);c4(t,e),function Fae(n,e){const t=function u4(){return!Qa&&"BroadcastChannel"in self&&(Qa=new BroadcastChannel("[Firebase] FID Change"),Qa.onmessage=n=>{c4(n.data.key,n.data.fid)}),Qa}();t&&t.postMessage({key:n,fid:e}),function l4(){0===Wu.size&&Qa&&(Qa.close(),Qa=null)}()}(t,e)}function c4(n,e){const t=Wu.get(n);if(t)for(const r of t)r(e)}let Qa=null;const Lae="firebase-installations-database",Vae=1,Ya="firebase-installations-store";let RE=null;function FE(){return RE||(RE=function vae(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=zs(s);return r&&s.addEventListener("upgradeneeded",c=>{r(zs(s.result),c.oldVersion,c.newVersion,zs(s.transaction))}),t&&s.addEventListener("blocked",()=>t()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(Lae,Vae,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ya)}})),RE}function a_(n,e){return LE.apply(this,arguments)}function LE(){return(LE=C(function*(n,e){const t=qu(n),i=(yield FE()).transaction(Ya,"readwrite"),o=i.objectStore(Ya),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&a4(n,e.fid),e})).apply(this,arguments)}function VE(n){return UE.apply(this,arguments)}function UE(){return(UE=C(function*(n){const e=qu(n),r=(yield FE()).transaction(Ya,"readwrite");yield r.objectStore(Ya).delete(e),yield r.done})).apply(this,arguments)}function xh(n,e){return BE.apply(this,arguments)}function BE(){return(BE=C(function*(n,e){const t=qu(n),i=(yield FE()).transaction(Ya,"readwrite"),o=i.objectStore(Ya),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&a4(n,a.fid),a})).apply(this,arguments)}function jE(n){return $E.apply(this,arguments)}function $E(){return $E=C(function*(n){let e;const t=yield xh(n.appConfig,r=>{const i=function Uae(n){return h4(n||{fid:Pae(),registrationStatus:0})}(r),o=function Bae(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ts.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function jae(n,e){return zE.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:$ae(n)}:{installationEntry:e}}(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===NE?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),$E.apply(this,arguments)}function zE(){return zE=C(function*(n,e){try{const t=yield function Sae(n,e){return kE.apply(this,arguments)}(n,e);return a_(n.appConfig,t)}catch(t){throw n4(t)&&409===t.customData.serverCode?yield VE(n.appConfig):yield a_(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),zE.apply(this,arguments)}function $ae(n){return HE.apply(this,arguments)}function HE(){return(HE=C(function*(n){let e=yield d4(n.appConfig);for(;1===e.registrationStatus;)yield s4(100),e=yield d4(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield jE(n);return r||t}return e})).apply(this,arguments)}function d4(n){return xh(n,e=>{if(!e)throw ts.create("installation-not-found");return h4(e)})}function h4(n){return function zae(n){return 1===n.registrationStatus&&n.registrationTime+ZU<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function GE(){return(GE=C(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Gae(n,{fid:e}){return`${xE(n)}/${e}/authTokens:generate`}(n,t),i=function o4(n,{refreshToken:e}){const t=i4(n);return t.append("Authorization",function xae(n){return`${t4} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:e4,appId:n.appId}})},c=yield OE(()=>fetch(r,a));if(c.ok)return r4(yield c.json());throw yield SE("Generate Auth Token",c)})).apply(this,arguments)}function qE(n){return WE.apply(this,arguments)}function WE(){return WE=C(function*(n,e=!1){let t;const r=yield xh(n.appConfig,o=>{if(!p4(o))throw ts.create("not-registered");const s=o.authToken;if(!e&&function Kae(n){return 2===n.requestStatus&&!function Qae(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Eae}(n)}(s))return o;if(1===s.requestStatus)return t=function qae(n,e){return KE.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw ts.create("app-offline");const a=function Yae(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function Wae(n,e){return QE.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),WE.apply(this,arguments)}function KE(){return(KE=C(function*(n,e){let t=yield f4(n.appConfig);for(;1===t.authToken.requestStatus;)yield s4(100),t=yield f4(n.appConfig);const r=t.authToken;return 0===r.requestStatus?qE(n,e):r})).apply(this,arguments)}function f4(n){return xh(n,e=>{if(!p4(e))throw ts.create("not-registered");return function Xae(n){return 1===n.requestStatus&&n.requestTime+ZU<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function QE(){return QE=C(function*(n,e){try{const t=yield function Hae(n,e){return GE.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield a_(n.appConfig,r),t}catch(t){if(!n4(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield a_(n.appConfig,r)}else yield VE(n.appConfig);throw t}}),QE.apply(this,arguments)}function p4(n){return void 0!==n&&2===n.registrationStatus}function YE(){return(YE=C(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield jE(e);return r?r.catch(console.error):qE(e).catch(console.error),t.fid})).apply(this,arguments)}function XE(){return XE=C(function*(n,e=!1){const t=n;return yield function ece(n){return JE.apply(this,arguments)}(t),(yield qE(t,e)).token}),XE.apply(this,arguments)}function JE(){return(JE=C(function*(n){const{registrationPromise:e}=yield jE(n);e&&(yield e)})).apply(this,arguments)}function t1(n){return ts.create("missing-app-config-values",{valueName:n})}const g4="installations",oce=n=>{const e=n.getProvider("app").getImmediate(),t=function rce(n){if(!n||!n.options)throw t1("App Configuration");if(!n.name)throw t1("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw t1(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:js(e,"heartbeat"),_delete:()=>Promise.resolve()}},sce=n=>{const t=js(n.getProvider("app").getImmediate(),g4).getImmediate();return{getId:()=>function Jae(n){return YE.apply(this,arguments)}(t),getToken:i=>function Zae(n){return XE.apply(this,arguments)}(t,i)}};(function ace(){Jn(new Nn(g4,oce,"PUBLIC")),Jn(new Nn("installations-internal",sce,"PRIVATE"))})(),wt(JU,AE),wt(JU,AE,"esm2017");const n1="@firebase/remote-config",Gr=new go("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yce{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return C(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(t.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function vce(n=navigator){return n.languages&&n.languages[0]||n.language}class wce{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){var t=this;return C(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:vce()},u={method:"POST",headers:a,body:JSON.stringify(c)},l=fetch(s,u),d=new Promise((k,M)=>{e.signal.addEventListener(()=>{const $=new Error("The operation was aborted.");$.name="AbortError",M($)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(k){let M="fetch-client-network";throw"AbortError"===k?.name&&(M="fetch-timeout"),Gr.create(M,{originalErrorMessage:k?.message})}let p=h.status;const w=h.headers.get("ETag")||void 0;let I,x;if(200===h.status){let k;try{k=yield h.json()}catch(M){throw Gr.create("fetch-client-parse",{originalErrorMessage:M?.message})}I=k.entries,x=k.state}if("INSTANCE_STATE_UNSPECIFIED"===x?p=500:"NO_CHANGE"===x?p=304:("NO_TEMPLATE"===x||"EMPTY_CONFIG"===x)&&(I={}),304!==p&&200!==p)throw Gr.create("fetch-status",{httpStatus:p});return{status:p,eTag:w,config:I}})()}}class Ece{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return C(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return C(function*(){yield function bce(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Gr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const o=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),o}catch(o){if(!function Cce(n){if(!(n instanceof Ci&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o))throw o;const s={throttleEndTimeMillis:Date.now()+cE(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(s),i.attemptFetch(e,s)}})()}}class Dce{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function u_(n,e){const t=n.target.error||void 0;return Gr.create(e,{originalErrorMessage:t&&t?.message})}const Xa="app_namespace_store";class Mce{constructor(e,t,r,i=function Sce(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(u_(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xa,{keyPath:"compositeKey"})}}catch(t){e(Gr.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return C(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Xa],"readonly").objectStore(Xa),c=t.createCompositeKey(e);try{const u=a.get(c);u.onerror=l=>{o(u_(l,"storage-get"))},u.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(u){o(Gr.create("storage-get",{originalErrorMessage:u?.message}))}})})()}set(e,t){var r=this;return C(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([Xa],"readwrite").objectStore(Xa),u=r.createCompositeKey(e);try{const l=c.put({compositeKey:u,value:t});l.onerror=d=>{s(u_(d,"storage-set"))},l.onsuccess=()=>{o()}}catch(l){s(Gr.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var t=this;return C(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Xa],"readwrite").objectStore(Xa),c=t.createCompositeKey(e);try{const u=a.delete(c);u.onerror=l=>{o(u_(l,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){o(Gr.create("storage-delete",{originalErrorMessage:u?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Oce{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return C(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield t;o&&(e.lastFetchStatus=o);const s=yield r;s&&(e.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function kce(){return a1.apply(this,arguments)}function a1(){return(a1=C(function*(){if(!Us())return!1;try{return yield bh()}catch{return!1}})).apply(this,arguments)}!function Pce(){Jn(new Nn("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gr.create("registration-window");if(!Us())throw Gr.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw Gr.create("registration-project-id");if(!s)throw Gr.create("registration-api-key");if(!a)throw Gr.create("registration-app-id");const c=new Mce(a,r.name,t=t||"firebase"),u=new Oce(c),l=new qa(n1);l.logLevel=Qe.ERROR;const d=new wce(i,$s,t,o,s,a),h=new Ece(d,c),p=new yce(h,c,u,l),w=new Dce(r,p,u,c,l);return function gce(n){const e=Ht(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(w),w},"PUBLIC").setMultipleInstances(!0)),wt(n1,"0.4.4"),wt(n1,"0.4.4","esm2017")}();const Nce=(n,e)=>e.some(t=>n instanceof t);let v4,w4;const b4=new WeakMap,c1=new WeakMap,C4=new WeakMap,u1=new WeakMap,l1=new WeakMap;let d1={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return c1.get(n);if("objectStoreNames"===e)return n.objectStoreNames||C4.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ns(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function jce(n){return"function"==typeof n?function Bce(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fce(){return w4||(w4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(h1(this),e),ns(b4.get(this))}:function(...e){return ns(n.apply(h1(this),e))}:function(e,...t){const r=n.call(h1(this),e,...t);return C4.set(r,e.sort?e.sort():[e]),ns(r)}}(n):(n instanceof IDBTransaction&&function Vce(n){if(c1.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});c1.set(n,e)}(n),Nce(n,function Rce(){return v4||(v4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,d1):n)}function ns(n){if(n instanceof IDBRequest)return function Lce(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ns(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&b4.set(t,n)}).catch(()=>{}),l1.set(e,n),e}(n);if(u1.has(n))return u1.get(n);const e=jce(n);return e!==n&&(u1.set(n,e),l1.set(e,n)),e}const h1=n=>l1.get(n);function E4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=ns(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ns(s.result),c.oldVersion,c.newVersion,ns(s.transaction))}),t&&s.addEventListener("blocked",()=>t()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function f1(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),ns(t).then(()=>{})}const $ce=["get","getKey","getAll","getAllKeys","count"],zce=["put","add","delete","clear"],p1=new Map;function I4(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(p1.get(e))return p1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=zce.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$ce.includes(t))return;const o=function(){var s=C(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return p1.set(e,o),o}!function Uce(n){d1=n(d1)}(n=>({...n,get:(e,t,r)=>I4(e,t)||n.get(e,t,r),has:(e,t)=>!!I4(e,t)||n.has(e,t)}));const Hce="/firebase-messaging-sw.js",Gce="/firebase-cloud-messaging-push-scope",T4="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qce="https://fcmregistrations.googleapis.com/v1",D4="google.c.a.c_id",Wce="google.c.a.c_l",Kce="google.c.a.ts";var l_=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(l_||{});function rs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xce(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const g1="fcm_token_details_db",Jce=5,A4="fcm_token_object_Store";function m1(){return m1=C(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(g1))return null;let e=null;return(yield E4(g1,Jce,{upgrade:(r=C(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(A4))return;const u=a.objectStore(A4),l=yield u.index("fcmSenderId").get(n);if(yield u.clear(),l)if(2===o){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:rs(d.vapidKey)}}}else if(3===o){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:rs(d.auth),p256dh:rs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:rs(d.vapidKey)}}}else if(4===o){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:rs(d.auth),p256dh:rs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:rs(d.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield f1(g1),yield f1("fcm_vapid_details_db"),yield f1("undefined"),function eue(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),m1.apply(this,arguments)}const tue="firebase-messaging-database",nue=1,Ja="firebase-messaging-store";let _1=null;function y1(){return _1||(_1=E4(tue,nue,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ja)}})),_1}function x4(n){return v1.apply(this,arguments)}function v1(){return v1=C(function*(n){const e=E1(n),r=yield(yield y1()).transaction(Ja).objectStore(Ja).get(e);if(r)return r;{const i=yield function Zce(n){return m1.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield w1(n,i),i}}),v1.apply(this,arguments)}function w1(n,e){return b1.apply(this,arguments)}function b1(){return(b1=C(function*(n,e){const t=E1(n),i=(yield y1()).transaction(Ja,"readwrite");return yield i.objectStore(Ja).put(e,t),yield i.done,e})).apply(this,arguments)}function C1(){return(C1=C(function*(n){const e=E1(n),r=(yield y1()).transaction(Ja,"readwrite");yield r.objectStore(Ja).delete(e),yield r.done})).apply(this,arguments)}function E1({appConfig:n}){return n.appId}const Zn=new go("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oue(n,e){return I1.apply(this,arguments)}function I1(){return(I1=C(function*(n,e){const t=yield x1(n),r=M4(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(A1(n.appConfig),i)).json()}catch(s){throw Zn.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error)throw Zn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Zn.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function T1(){return(T1=C(function*(n,e){const t=yield x1(n),r=M4(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${A1(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw Zn.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error)throw Zn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Zn.create("token-update-no-token");return o.token})).apply(this,arguments)}function S4(n,e){return D1.apply(this,arguments)}function D1(){return(D1=C(function*(n,e){const r={method:"DELETE",headers:yield x1(n)};try{const o=yield(yield fetch(`${A1(n.appConfig)}/${e}`,r)).json();if(o.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw Zn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function A1({projectId:n}){return`${qce}/projects/${n}/registrations`}function x1(n){return S1.apply(this,arguments)}function S1(){return(S1=C(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function M4({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==T4&&(i.web.applicationPubKey=r),i}const aue=6048e5;function M1(){return M1=C(function*(n){const e=yield function lue(n,e){return N1.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:rs(e.getKey("auth")),p256dh:rs(e.getKey("p256dh"))},r=yield x4(n.firebaseDependencies);if(r){if(function due(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+aue?function uue(n,e){return P1.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield S4(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return P4(n.firebaseDependencies,t)}return P4(n.firebaseDependencies,t)}),M1.apply(this,arguments)}function O1(){return O1=C(function*(n){const e=yield x4(n.firebaseDependencies);e&&(yield S4(n.firebaseDependencies,e.token),yield function rue(n){return C1.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),O1.apply(this,arguments)}function P1(){return P1=C(function*(n,e){try{const t=yield function sue(n,e){return T1.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield w1(n.firebaseDependencies,r),t}catch(t){throw yield function O4(n){return O1.apply(this,arguments)}(n),t}}),P1.apply(this,arguments)}function P4(n,e){return k1.apply(this,arguments)}function k1(){return(k1=C(function*(n,e){const r={token:yield oue(n,e),createTime:Date.now(),subscriptionOptions:e};return yield w1(n,r),r.token})).apply(this,arguments)}function N1(){return(N1=C(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xce(e)})})).apply(this,arguments)}function k4(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function hue(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}(e,n),function fue(n,e){e.data&&(n.data=e.data)}(e,n),function pue(n,e){var t,r,i,o,s;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;a&&(n.fcmOptions.link=a);const c=null===(s=e.fcmOptions)||void 0===s?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(e,n),e}function N4(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function R1(n){return Zn.create("missing-app-config-values",{valueName:n})}N4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),N4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _ue{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function mue(n){if(!n||!n.options)throw R1("App Configuration Object");if(!n.name)throw R1("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw R1(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function F1(){return(F1=C(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(Hce,{scope:Gce}),n.swRegistration.update().catch(()=>{})}catch(e){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function L1(){return(L1=C(function*(n,e){if(!e&&!n.swRegistration&&(yield function R4(n){return F1.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function V1(){return(V1=C(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=T4)})).apply(this,arguments)}function U1(){return U1=C(function*(n,e){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield function vue(n,e){return V1.apply(this,arguments)}(n,e?.vapidKey),yield function yue(n,e){return L1.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function cue(n){return M1.apply(this,arguments)}(n)}),U1.apply(this,arguments)}function B1(){return(B1=C(function*(n,e,t){const r=function bue(n){switch(n){case l_.NOTIFICATION_CLICKED:return"notification_open";case l_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[D4],message_name:t[Wce],message_time:t[Kce],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function j1(){return j1=C(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===l_.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(k4(t)):n.onMessageHandler.next(k4(t)));const r=t.data;(function gue(n){return"object"==typeof n&&!!n&&D4 in n})(r)&&"1"===r["google.c.a.e"]&&(yield function wue(n,e,t){return B1.apply(this,arguments)}(n,t.messageType,r))}),j1.apply(this,arguments)}const L4="@firebase/messaging",Eue=n=>{const e=new _ue(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Cue(n,e){return j1.apply(this,arguments)}(e,t)),e},Iue=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function F4(n,e){return U1.apply(this,arguments)}(e,r)}};function U4(){return $1.apply(this,arguments)}function $1(){return($1=C(function*(){try{yield bh()}catch{return!1}return typeof window<"u"&&Us()&&oE()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tue(){Jn(new Nn("messaging",Eue,"PUBLIC")),Jn(new Nn("messaging-internal",Iue,"PRIVATE")),wt(L4,"0.12.4"),wt(L4,"0.12.4","esm2017")}();const d_="analytics",xue="firebase_id",Sue="origin",Mue=6e4,Oue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",G1="https://www.googletagmanager.com/gtag/js",Rn=new qa("@firebase/analytics"),Sr=new go("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function kue(n){if(!n.startsWith(G1)){const e=Sr.create("invalid-gtag-resource",{gtagURL:n});return Rn.warn(e.message),""}return n}function B4(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function q1(){return(q1=C(function*(n,e,t,r,i,o){const s=r[i];try{if(s)yield e[s];else{const c=(yield B4(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Rn.error(a)}n("config",i,o)})).apply(this,arguments)}function W1(){return(W1=C(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield B4(t);for(const c of s){const u=a.find(d=>d.measurementId===c),l=u&&e[u.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Rn.error(o)}})).apply(this,arguments)}const $ue=30,j4=new class Hue{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Gue(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function K1(){return(K1=C(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Gue(r)},o=Oue.replace("{app-id}",t),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw Sr.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function Q1(){return(Q1=C(function*(n,e=j4,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Sr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Sr.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Yue;return setTimeout(C(function*(){a.abort()}),void 0!==t?t:Mue),$4({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function $4(n,e,t){return Y1.apply(this,arguments)}function Y1(){return Y1=C(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=j4){var o;const{appId:s,measurementId:a}=n;try{yield function Kue(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Sr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const c=yield function que(n){return K1.apply(this,arguments)}(n);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!function Que(n){if(!(n instanceof Ci&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(s),a)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw c}const l=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?cE(t,i.intervalMillis,$ue):cE(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:t+1};return i.setThrottleMetadata(s,d),Rn.debug(`Calling attemptFetch again in ${l} millis`),$4(n,d,r,i)}}),Y1.apply(this,arguments)}class Yue{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let X1,iI;function J1(){return(J1=C(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function oI(){return(oI=C(function*(){if(!Us())return Rn.warn(Sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield bh()}catch(n){return Rn.warn(Sr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function sI(){return sI=C(function*(n,e,t,r,i,o,s){var a;const c=function Wue(n){return Q1.apply(this,arguments)}(n);c.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Rn.error(p)),e.push(c);const u=function rle(){return oI.apply(this,arguments)}().then(p=>{if(p)return r.getId()}),[l,d]=yield Promise.all([c,u]);(function jue(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(G1)&&t.src.includes(n))return t;return null})(o)||function Rue(n,e){const t=function Nue(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:kue}),r=document.createElement("script"),i=`${G1}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,l.measurementId),iI&&(i("consent","default",iI),function z4(n){iI=n}(void 0)),i("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h[Sue]="firebase",h.update=!0,null!=d&&(h[xue]=d),i("config",l.measurementId,h),X1&&(i("set",X1),function H4(n){X1=n}(void 0)),l.measurementId}),sI.apply(this,arguments)}class ole{constructor(e){this.app=e}_delete(){return delete mo[this.app.options.appId],Promise.resolve()}}let mo={},G4=[];const q4={};let K4,_o,h_="dataLayer",aI=!1;function ale(n,e,t){!function sle(){const n=[];if(iE()&&n.push("This is a browser extension environment."),oE()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Sr.create("invalid-analytics-context",{errorInfo:e});Rn.warn(t.message)}}();const r=n.options.appId;if(!r)throw Sr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Sr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mo[r])throw Sr.create("already-exists",{id:r});if(!aI){!function Fue(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(h_);const{wrappedGtag:o,gtagCore:s}=function Bue(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function Uue(n,e,t,r){function o(){return o=C(function*(s,...a){try{if("event"===s){const[c,u]=a;yield function Vue(n,e,t,r,i){return W1.apply(this,arguments)}(n,e,t,c,u)}else if("config"===s){const[c,u]=a;yield function Lue(n,e,t,r,i,o){return q1.apply(this,arguments)}(n,e,t,r,c,u)}else if("consent"===s){const[c]=a;n("consent","update",c)}else if("get"===s){const[c,u,l]=a;n("get",c,u,l)}else if("set"===s){const[c]=a;n("set",c)}else n(s,...a)}catch(c){Rn.error(c)}}),o.apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(mo,G4,q4,h_,"gtag");_o=o,K4=s,aI=!0}return mo[r]=function ile(n,e,t,r,i,o,s){return sI.apply(this,arguments)}(n,G4,q4,e,K4,h_,t),new ole(n)}function ule(){return cI.apply(this,arguments)}function cI(){return(cI=C(function*(){if(iE()||!oE()||!Us())return!1;try{return yield bh()}catch{return!1}})).apply(this,arguments)}const Q4="@firebase/analytics";!function dle(){Jn(new Nn(d_,(e,{options:t})=>ale(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Jn(new Nn("analytics-internal",function n(e){try{const t=e.getProvider(d_).getImmediate();return{logEvent:(r,i,o)=>function lle(n,e,t,r){n=Ht(n),function Xue(n,e,t,r,i){return J1.apply(this,arguments)}(_o,mo[n.app.options.appId],e,t,r).catch(i=>Rn.error(i))}(t,r,i,o)}}catch(t){throw Sr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),wt(Q4,"0.10.0"),wt(Q4,"0.10.0","esm2017")}();class hle extends j{constructor(e,t){super()}schedule(e,t=0){return this}}const f_={setInterval(n,e,...t){const{delegate:r}=f_;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=f_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class X4 extends hle{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return f_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&f_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,R(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const J4={now:()=>(J4.delegate||Date).now(),delegate:void 0};class Sh{constructor(e,t=Sh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Sh.now=J4.now;class Z4 extends Sh{constructor(e,t=Sh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const gle=new class ple extends Z4{}(class fle extends X4{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),mle=new Z4(X4),Ku=new du("7.6.1"),lI="__angularfire_symbol__analyticsIsSupportedValue",dI="__angularfire_symbol__analyticsIsSupported",hI="__angularfire_symbol__remoteConfigIsSupportedValue",fI="__angularfire_symbol__remoteConfigIsSupported",pI="__angularfire_symbol__messagingIsSupportedValue",gI="__angularfire_symbol__messagingIsSupported";function Mh(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[dI]||(globalThis[dI]=ule().then(n=>globalThis[lI]=n).catch(()=>globalThis[lI]=!1)),globalThis[gI]||(globalThis[gI]=U4().then(n=>globalThis[pI]=n).catch(()=>globalThis[pI]=!1)),globalThis[fI]||(globalThis[fI]=kce().then(n=>globalThis[hI]=n).catch(()=>globalThis[hI]=!1));const Oh=(n,e)=>{const t=e?[e]:jU(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function Qu(){}class eB{constructor(e,t=gle){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class _le{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qu,{},Qu,Qu)),t.pipe(gr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ph=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new eB(Zone.current)),this.insideAngular=t.run(()=>new eB(Zone.current,mle)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(me(gt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Za(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ec(n){return Za().ngZone.run(()=>n())}function vle(n){return Za(),function wle(n){return function(t){return(t=t.lift(new _le(n.ngZone))).pipe(Fp(n.outsideAngular),Rp(n.insideAngular))}}(Za())(n)}const ble=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ec(()=>n.apply(void 0,r))},xn=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||(t=ec(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qu,{},Qu,Qu)))),r[o]=ble(r[o],t));const i=function yle(n){return Za().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof jt){const o=Za();return i.pipe(Fp(o.outsideAngular),Rp(o.insideAngular))}return ec(()=>i)}return i instanceof jt?i.pipe(vle):i instanceof Promise?ec(()=>new Promise((o,s)=>i.then(a=>ec(()=>o(a)),a=>ec(()=>s(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ec(()=>i)};class Hs{constructor(e){return e}}class kh{constructor(){return jU()}}const _I=new le("angularfire2._apps"),Ele={provide:Hs,useFactory:function Cle(n){return n&&1===n.length?n[0]:new Hs(Dh())},deps:[[new Xt,_I]]},Ile={provide:kh,deps:[[new Xt,_I]]};function Tle(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Hs(r)}}let Dle=(()=>{class n{constructor(t){wt("angularfire",Ku.full,"core"),wt("angularfire",Ku.full,"app"),wt("angular",yN.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(me(xs))},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[Ele,Ile]}),n})();function Ale(n,...e){return{ngModule:Dle,providers:[{provide:_I,useFactory:Tle(n),multi:!0,deps:[gt,Ir,Ph,...e]}]}}const xle=xn(BU,!0),yI=new Map,tB={activated:!1,tokenObservers:[]},Sle={initialized:!1,enabled:!1};function tn(n){return yI.get(n)||Object.assign({},tB)}function p_(){return Sle}const vI="https://content-firebaseappcheck.googleapis.com/v1",kle="exchangeDebugToken",nB={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Rle{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return C(function*(){t.stop();try{t.pending=new Hu,yield function Fle(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Hu,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const er=new go("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wI(n){if(!tn(n).activated)throw er.create("use-before-activation",{appName:n.name})}function __(n,e){return CI.apply(this,arguments)}function CI(){return(CI=C(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=yield fetch(n,o)}catch(d){throw er.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==s.status)throw er.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(d){throw er.create("fetch-parse-error",{originalErrorMessage:d?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw er.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function rB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vI}/projects/${t}/apps/${r}:${kle}?key=${i}`,body:{debug_token:e}}}const Ble="firebase-app-check-database",jle=1,Nh="firebase-app-check-store";let y_=null;function EI(){return(EI=C(function*(n,e){const r=(yield function oB(){return y_||(y_=new Promise((n,e)=>{try{const t=indexedDB.open(Ble,jle);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(er.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Nh,{keyPath:"compositeKey"})}}catch(t){e(er.create("storage-open",{originalErrorMessage:t?.message}))}}),y_)}()).transaction(Nh,"readwrite"),o=r.objectStore(Nh).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(er.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const Rh=new qa("@firebase/app-check");function DI(n,e){return Us()?function zle(n,e){return function sB(n,e){return EI.apply(this,arguments)}(function cB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xI(){return p_().enabled}function SI(){return MI.apply(this,arguments)}function MI(){return(MI=C(function*(){const n=p_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Qle={error:"UNKNOWN_ERROR"};function Yle(n){return Ym.encodeString(JSON.stringify(n),!1)}function v_(n){return OI.apply(this,arguments)}function OI(){return(OI=C(function*(n,e=!1){const t=n.app;wI(t);const r=tn(t);let o,i=r.token;if(i&&!Yu(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(Yu(c)?i=c:yield DI(t,void 0))}if(!e&&i&&Yu(i))return{token:i.token};let a,s=!1;if(xI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=__(rB(t,yield SI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const c=yield r.exchangeTokenPromise;return yield DI(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield tn(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?Rh.warn(c.message):Rh.error(c),o=c}return i?o?a=Yu(i)?{token:i.token,internalError:o}:hB(o):(a={token:i.token},r.token=i,yield DI(t,i)):a=hB(o),s&&function dB(n,e){const t=tn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,a),a})).apply(this,arguments)}function uB(n){return PI.apply(this,arguments)}function PI(){return(PI=C(function*(n){const e=n.app;wI(e);const{provider:t}=tn(e);if(xI()){const r=yield SI(),{token:i}=yield __(rB(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function NI(n,e){const t=tn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lB(n){const{app:e}=n,t=tn(e);let r=t.tokenRefresher;r||(r=function Xle(n){const{app:e}=n;return new Rle(C(function*(){let r;if(r=tn(e).token?yield v_(n,!0):yield v_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=tn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},nB.RETRIAL_MIN_WAIT,nB.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yu(n){return n.expireTimeMillis-Date.now()>0}function hB(n){return{token:Yle(Qle),error:n}}class Jle{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=tn(this.app);for(const t of e)NI(this.app,t.next);return Promise.resolve()}}const wB="app-check-internal";!function hde(){Jn(new Nn("app-check",n=>function Zle(n,e){return new Jle(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wB).initialize()})),Jn(new Nn(wB,n=>function ede(n){return{getToken:e=>v_(n,e),getLimitedUseToken:()=>uB(n),addTokenListener:e=>function kI(n,e,t,r){const{app:i}=n,o=tn(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Yu(o.token)){const a=o.token;Promise.resolve().then(()=>{t({token:a.token}),lB(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lB(n))}(n,"INTERNAL",e),removeTokenListener:e=>NI(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),wt("@firebase/app-check","0.8.0")}();class Fh{constructor(){return Oh("app-check")}}typeof window<"u"&&window;const _de=function CB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},EB=new go("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),b_=new qa("@firebase/auth");function C_(n,...e){b_.logLevel<=Qe.ERROR&&b_.error(`Auth (${$s}): ${n}`,...e)}function qr(n,...e){throw UI(n,...e)}function yo(n,...e){return UI(n,...e)}function UI(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return EB.create(n,...e)}function ee(n,e,...t){if(!n)throw UI(e,...t)}function vo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw C_(e),new Error(e)}function Gs(n,e){n||vo(e)}function Lh(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function TB(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Vh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gs(t>e,"Short delay should be less than long delay!"),this.isMobile=rE()||OU()}get(){return function vde(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function BI(){return"http:"===TB()||"https:"===TB()}()||iE()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jI(n,e){Gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class DB{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Cde=new Vh(3e4,6e4);function Jt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function nn(n,e,t,r){return $I.apply(this,arguments)}function $I(){return($I=C(function*(n,e,t,r,i={}){return AB(n,i,C(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Eh(Object.assign({key:n.config.apiKey},s)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),DB.fetch()(xB(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function AB(n,e,t){return zI.apply(this,arguments)}function zI(){return(zI=C(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},bde),e);try{const i=new Ede(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Uh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Uh(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Uh(n,"email-already-in-use",s);if("USER_DISABLED"===c)throw Uh(n,"user-disabled",s);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw function IB(n,e,t){const r=Object.assign(Object.assign({},_de()),{[e]:t});return new go("auth","Firebase",r).create(e,{appName:n.name})}(n,l,u);qr(n,l)}}catch(i){if(i instanceof Ci)throw i;qr(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function is(n,e,t,r){return HI.apply(this,arguments)}function HI(){return(HI=C(function*(n,e,t,r,i={}){const o=yield nn(n,e,t,r,i);return"mfaPendingCredential"in o&&qr(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function xB(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?jI(n.config,i):`${n.config.apiScheme}://${i}`}class Ede{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yo(this.auth,"network-request-failed")),Cde.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=yo(n,e,r);return i.customData._tokenResponse=t,i}function GI(){return(GI=C(function*(n,e){return nn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function WI(){return(WI=C(function*(n,e){return nn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Bh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function KI(){return(KI=C(function*(n,e=!1){const t=Ht(n),r=yield t.getIdToken(e),i=E_(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Bh(QI(i.auth_time)),issuedAtTime:Bh(QI(i.iat)),expirationTime:Bh(QI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function QI(n){return 1e3*Number(n)}function E_(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return C_("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jm(t);return i?JSON.parse(i):(C_("Failed to decode base64 JWT payload"),null)}catch(i){return C_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function os(n,e){return YI.apply(this,arguments)}function YI(){return(YI=C(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Ci&&function Sde({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Mde{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(C(function*(){yield t.iteration()}),r)}iteration(){var e=this;return C(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class SB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bh(this.lastLoginAt),this.creationTime=Bh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jh(n){return XI.apply(this,arguments)}function XI(){return XI=C(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield os(n,function Dde(n,e){return WI.apply(this,arguments)}(t,{idToken:r}));ee(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function kde(n){return n.map(e=>{var{providerId:t}=e,r=Qv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],a=function Pde(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,s),l=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new SB(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,d)}),XI.apply(this,arguments)}function JI(){return(JI=C(function*(n){const e=Ht(n);yield jh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function ZI(){return(ZI=C(function*(n,e){const t=yield AB(n,{},C(function*(){const r=Eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=xB(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DB.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class $h{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function xde(n){const e=E_(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return C(function*(){return ee(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return C(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Nde(n,e){return ZI.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new $h;return r&&(ee("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(ee("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(ee("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $h,this.toJSON())}_performRefresh(){return vo("not implemented")}}function qs(n,e){ee("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class tc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Qv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mde(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new SB(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return C(function*(){const r=yield os(t,t.stsTokenManager.getToken(t.auth,e));return ee(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Ade(n){return KI.apply(this,arguments)}(this,e)}reload(){return function Ode(n){return JI.apply(this,arguments)}(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new tc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return C(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield jh(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return C(function*(){const t=yield e.getIdToken();return yield os(e,function Ide(n,e){return GI.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,l;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,p=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,w=null!==(s=t.photoURL)&&void 0!==s?s:void 0,I=null!==(a=t.tenantId)&&void 0!==a?a:void 0,x=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,k=null!==(u=t.createdAt)&&void 0!==u?u:void 0,M=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:$,emailVerified:J,isAnonymous:ae,providerData:ye,stsTokenManager:Nt}=t;ee($&&Nt,e,"internal-error");const Cn=$h.fromJSON(this.name,Nt);ee("string"==typeof $,e,"internal-error"),qs(d,e.name),qs(h,e.name),ee("boolean"==typeof J,e,"internal-error"),ee("boolean"==typeof ae,e,"internal-error"),qs(p,e.name),qs(w,e.name),qs(I,e.name),qs(x,e.name),qs(k,e.name),qs(M,e.name);const Ai=new tc({uid:$,auth:e,email:h,emailVerified:J,displayName:d,isAnonymous:ae,photoURL:w,phoneNumber:p,tenantId:I,stsTokenManager:Cn,createdAt:k,lastLoginAt:M});return ye&&Array.isArray(ye)&&(Ai.providerData=ye.map(No=>Object.assign({},No))),x&&(Ai._redirectEventId=x),Ai}static _fromIdTokenResponse(e,t,r=!1){return C(function*(){const i=new $h;i.updateFromServerResponse(t);const o=new tc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jh(o),o})()}}const MB=new Map;function ss(n){Gs(n instanceof Function,"Expected a class definition");let e=MB.get(n);return e?(Gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,MB.set(n,e),e)}const OB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(function*(){return!0})()}_set(t,r){var i=this;return C(function*(){i.storage[t]=r})()}_get(t){var r=this;return C(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return C(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function I_(n,e,t){return`firebase:${n}:${e}:${t}`}class Ju{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=I_(this.userKey,i.apiKey,o),this.fullPersistenceKey=I_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return C(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?tc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return C(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(function*(){if(!t.length)return new Ju(ss(OB),e,r);const i=(yield Promise.all(t.map(function(){var u=C(function*(l){if(yield l._isAvailable())return l});return function(l){return u.apply(this,arguments)}}()))).filter(u=>u);let o=i[0]||ss(OB);const s=I_(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const l=yield u._get(s);if(l){const d=tc._fromJSON(e,l);u!==o&&(a=d),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return o._shouldAllowMigration&&c.length?(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var u=C(function*(l){if(l!==o)try{yield l._remove(s)}catch{}});return function(l){return u.apply(this,arguments)}}())),new Ju(o,e,r)):new Ju(o,e,r)})()}}function PB(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LB(e))return"Blackberry";if(VB(e))return"Webos";if(eT(e))return"Safari";if((e.includes("chrome/")||NB(e))&&!e.includes("edge/"))return"Chrome";if(FB(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function kB(n=hn()){return/firefox\//i.test(n)}function eT(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NB(n=hn()){return/crios\//i.test(n)}function RB(n=hn()){return/iemobile/i.test(n)}function FB(n=hn()){return/android/i.test(n)}function LB(n=hn()){return/blackberry/i.test(n)}function VB(n=hn()){return/webos/i.test(n)}function T_(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UB(n=hn()){return T_(n)||FB(n)||VB(n)||LB(n)||/windows phone/i.test(n)||RB(n)}function BB(n,e=[]){let t;switch(n){case"Browser":t=PB(hn());break;case"Worker":t=`${PB(hn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$s}/${r}`}function jB(n,e){return nT.apply(this,arguments)}function nT(){return(nT=C(function*(n,e){return nn(n,"GET","/v2/recaptchaConfig",Jt(n,e))})).apply(this,arguments)}function zB(n){return void 0!==n&&void 0!==n.enterprise}class HB{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function rT(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=yo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function Ude(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function GB(n){return`__${n}${Math.floor(1e6*Math.random())}`}class qB{constructor(e){this.type="recaptcha-enterprise",this.auth=Fn(e)}verify(e="verify",t=!1){var r=this;return C(function*(){function o(){return o=C(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=C(function*(u,l){jB(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new HB(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(u,l){return c.apply(this,arguments)}}())}),o.apply(this,arguments)}function s(a,c,u){const l=window.grecaptcha;zB(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c("NO_RECAPTCHA")})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function i(a){return o.apply(this,arguments)})(r.auth).then(u=>{if(!t&&zB(window.grecaptcha))s(u,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));rT("https://www.google.com/recaptcha/enterprise.js?render="+u).then(()=>{s(u,a,c)}).catch(l=>{c(l)})}}).catch(u=>{c(u)})})})()}}function Ws(n,e,t){return iT.apply(this,arguments)}function iT(){return(iT=C(function*(n,e,t,r=!1){const i=new qB(n);let o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}const s=Object.assign({},e);return Object.assign(s,r?{captchaResp:o}:{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})).apply(this,arguments)}class zde{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return C(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Hde{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WB(this),this.idTokenSubscription=new WB(this),this.beforeStateQueue=new zde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=ss(t)),this._initializationPromise=this.queue(C(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield Ju.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return C(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return C(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield t.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return ee(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return C(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return C(function*(){try{yield jh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function wde(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return C(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return C(function*(){const r=e?Ht(e):null;return r&&ee(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return C(function*(){if(!r._deleted)return e&&ee(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(C(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return C(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(C(function*(){yield t.assertedPersistence.setPersistence(ss(e))}))}initializeRecaptchaConfig(){var e=this;return C(function*(){const t=yield jB(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new HB(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new qB(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new go("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return C(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return C(function*(){if(!t.redirectPersistenceManager){const r=e&&ss(e)||t._popupRedirectResolver;ee(r,t,"argument-error"),t.redirectPersistenceManager=yield Ju.create(t,[ss(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return C(function*(){var r,i;return t._isInitialized&&(yield t.queue(C(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return C(function*(){if(e===t.currentUser)return t.queue(C(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return C(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return C(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return C(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function yde(n,...e){b_.logLevel<=Qe.WARN&&b_.warn(`Auth (${$s}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Fn(n){return Ht(n)}class WB{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Yoe(n,e){const t=new Xoe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function KB(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QB(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class YB{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vo("not implemented")}_getIdTokenResponse(e){return vo("not implemented")}_linkToIdToken(e,t){return vo("not implemented")}_getReauthenticationResolver(e){return vo("not implemented")}}function JB(n,e){return sT.apply(this,arguments)}function sT(){return(sT=C(function*(n,e){return nn(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function cT(n,e){return uT.apply(this,arguments)}function uT(){return(uT=C(function*(n,e){return is(n,"POST","/v1/accounts:signInWithPassword",Jt(n,e))})).apply(this,arguments)}function _T(){return(_T=C(function*(n,e){return is(n,"POST","/v1/accounts:signInWithEmailLink",Jt(n,e))})).apply(this,arguments)}function yT(){return(yT=C(function*(n,e){return is(n,"POST","/v1/accounts:signInWithEmailLink",Jt(n,e))})).apply(this,arguments)}class zh extends YB{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new zh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new zh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return C(function*(){var r;switch(t.signInMethod){case"password":const i={returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(r=e._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const o=yield Ws(e,i,"signInWithPassword");return cT(e,o)}return cT(e,i).catch(function(){var o=C(function*(s){if("auth/missing-recaptcha-token"===s.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield Ws(e,i,"signInWithPassword");return cT(e,a)}return Promise.reject(s)});return function(s){return o.apply(this,arguments)}}());case"emailLink":return function Zde(n,e){return _T.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:qr(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return C(function*(){switch(r.signInMethod){case"password":return JB(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function ehe(n,e){return yT.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:qr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function as(n,e){return vT.apply(this,arguments)}function vT(){return(vT=C(function*(n,e){return is(n,"POST","/v1/accounts:signInWithIdp",Jt(n,e))})).apply(this,arguments)}class qh{constructor(e){var t,r,i,o,s,a;const c=Ih(Th(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(r=c.oobCode)&&void 0!==r?r:null,d=function ahe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);ee(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function che(n){const e=Ih(Th(n)).link,t=e?Ih(Th(e)).deep_link_id:null,r=Ih(Th(n)).deep_link_id;return(r?Ih(Th(r)).link:null)||r||t||e||n}(e);try{return new qh(t)}catch{return null}}}let ZB=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return zh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=qh.parseLink(r);return ee(i,"argument-error"),zh._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Ks{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class uhe extends Ks{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function x_(n,e){return TT.apply(this,arguments)}function TT(){return(TT=C(function*(n,e){return is(n,"POST","/v1/accounts:signUp",Jt(n,e))})).apply(this,arguments)}class Ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return C(function*(){const o=yield tc._fromIdTokenResponse(e,r,i),s=e5(r);return new Ei({user:o,providerId:s,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return C(function*(){yield e._updateTokensIfNecessary(r,!0);const i=e5(r);return new Ei({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function e5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class S_ extends Ci{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,S_.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new S_(e,t,r,i)}}function t5(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?S_._fromErrorAndOperation(n,o,e,r):o})}function ST(){return(ST=C(function*(n,e,t=!1){const r=yield os(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ei._forOperation(n,"link",r)})).apply(this,arguments)}function OT(){return(OT=C(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const o=yield os(n,t5(r,i,e,n),t);ee(o.idToken,r,"internal-error");const s=E_(o.idToken);ee(s,r,"internal-error");const{sub:a}=s;return ee(n.uid===a,r,"user-mismatch"),Ei._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&qr(r,"user-mismatch"),o}})).apply(this,arguments)}function i5(n,e){return PT.apply(this,arguments)}function PT(){return(PT=C(function*(n,e,t=!1){const r="signIn",i=yield t5(n,r,e),o=yield Ei._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}function NT(){return(NT=C(function*(n,e){return i5(Fn(n),e)})).apply(this,arguments)}function mhe(n,e,t){return WT.apply(this,arguments)}function WT(){return WT=C(function*(n,e,t){var r;const i=Fn(n),o={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"};let s;if(null!==(r=i._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const u=yield Ws(i,o,"signUpPassword");s=x_(i,u)}else s=x_(i,o).catch(function(){var u=C(function*(l){if("auth/missing-recaptcha-token"===l.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=yield Ws(i,o,"signUpPassword");return x_(i,d)}return Promise.reject(l)});return function(l){return u.apply(this,arguments)}}());const a=yield s.catch(u=>Promise.reject(u)),c=yield Ei._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(c.user),c}),WT.apply(this,arguments)}function _he(n,e,t){return function kT(n,e){return NT.apply(this,arguments)}(Ht(n),ZB.credential(e,t))}function Ahe(n,e,t,r){return Ht(n).onAuthStateChanged(e,t,r)}function xhe(n){return Ht(n).signOut()}const O_="__sak";class s5{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(O_,"1"),this.storage.removeItem(O_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fhe=(()=>{class n extends s5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function khe(){const n=hn();return eT(n)||T_(n)}()&&function Lde(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=UB(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Fde(){return function $oe(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return C(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return C(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return C(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),a5=(()=>{class n extends s5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let Vhe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return C(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var d=C(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function Lhe(n){return Promise.all(n.map(function(){var e=C(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function cD(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class Uhe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return C(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const l=cD("",20);o.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(h){const p=h;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(p.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:t},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function vn(){return window}function uD(){return typeof vn().WorkerGlobalScope<"u"&&"function"==typeof vn().importScripts}function lD(){return(lD=C(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const c5="firebaseLocalStorageDb",P_="firebaseLocalStorage",u5="fbase_key";class Kh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function k_(n,e){return n.transaction([P_],e?"readwrite":"readonly").objectStore(P_)}function dD(){const n=indexedDB.open(c5,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(P_,{keyPath:u5})}catch(i){t(i)}}),n.addEventListener("success",C(function*(){const r=n.result;r.objectStoreNames.contains(P_)?e(r):(r.close(),yield function Ghe(){const n=indexedDB.deleteDatabase(c5);return new Kh(n).toPromise()}(),e(yield dD()))}))})}function l5(n,e,t){return hD.apply(this,arguments)}function hD(){return(hD=C(function*(n,e,t){const r=k_(n,!0).put({[u5]:e,value:t});return new Kh(r).toPromise()})).apply(this,arguments)}function fD(){return(fD=C(function*(n,e){const t=k_(n,!1).get(e),r=yield new Kh(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function d5(n,e){const t=k_(n,!0).delete(e);return new Kh(t).toPromise()}const Qhe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return C(function*(){return t.db||(t.db=yield dD()),t.db})()}_withRetries(t){var r=this;return C(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return C(function*(){return uD()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return C(function*(){t.receiver=Vhe._getInstance(function zhe(){return uD()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=C(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=C(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return C(function*(){var r,i;if(t.activeServiceWorker=yield function jhe(){return lD.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Uhe(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return C(function*(){if(r.sender&&r.activeServiceWorker&&function $he(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return C(function*(){try{if(!indexedDB)return!1;const t=yield dD();return yield l5(t,O_,"1"),yield d5(t,O_),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return C(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return C(function*(){return i._withPendingWrite(C(function*(){return yield i._withRetries(o=>l5(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return C(function*(){const i=yield r._withRetries(o=>function qhe(n,e){return fD.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return C(function*(){return r._withPendingWrite(C(function*(){return yield r._withRetries(i=>d5(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return C(function*(){const r=yield t._withRetries(s=>{const a=k_(s,!1).getAll();return new Kh(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(C(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();GB("rcb"),new Vh(3e4,6e4);class CD extends YB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return as(e,this._buildIdpRequest())}_linkToIdToken(e,t){return as(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return as(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dfe(n){return i5(n.auth,new CD(n),n.bypassAuthState)}function hfe(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),function r5(n,e){return OT.apply(this,arguments)}(t,new CD(n),n.bypassAuthState)}function ffe(n){return ED.apply(this,arguments)}function ED(){return(ED=C(function*(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),function xT(n,e){return ST.apply(this,arguments)}(t,new CD(n),n.bypassAuthState)})).apply(this,arguments)}class pfe{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=C(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return C(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void t.reject(a);const u={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(u))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dfe;case"linkViaPopup":case"linkViaRedirect":return ffe;case"reauthViaPopup":case"reauthViaRedirect":return hfe;default:qr(this.auth,"internal-error")}}resolve(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Vh(2e3,1e4);const gfe="pendingRedirect",Qh=new Map;class mfe extends pfe{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return C(function*(){let r=Qh.get(t.auth._key());if(!r){try{const o=(yield function _fe(n,e){return xD.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Qh.set(t.auth._key(),r)}return t.bypassAuthState||Qh.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return C(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return C(function*(){})()}cleanUp(){}}function xD(){return(xD=C(function*(n,e){const t=function p5(n){return I_(gfe,n.config.apiKey,n.name)}(e),r=function f5(n){return ss(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function yfe(n,e){Qh.set(n._key(),e)}function g5(n,e){return RD.apply(this,arguments)}function RD(){return(RD=C(function*(n,e,t=!1){const r=Fn(n),i=function rc(n,e){return e?ss(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),s=yield new mfe(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Efe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Ife(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y5(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!y5(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(yo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_5(e))}saveEventToCache(e){this.cachedEventUids.add(_5(e)),this.lastProcessedEventTime=Date.now()}}function _5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function y5({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function LD(){return(LD=C(function*(n,e={}){return nn(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Dfe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Afe=/^https?/;function VD(){return VD=C(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function Tfe(n){return LD.apply(this,arguments)}(n);for(const t of e)try{if(Sfe(t))return}catch{}qr(n,"unauthorized-domain")}),VD.apply(this,arguments)}function Sfe(n){const e=Lh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!Afe.test(t))return!1;if(Dfe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Mfe=new Vh(3e4,6e4);function v5(){const n=vn().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let R_=null;const kfe=new Vh(5e3,15e3),Nfe="__/auth/iframe",Rfe="emulator/auth/iframe",Ffe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lfe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vfe(n){const e=n.config;ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?jI(e,Rfe):`https://${n.config.authDomain}/${Nfe}`,r={apiKey:e.apiKey,appName:n.name,v:$s},i=Lfe.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Eh(r).slice(1)}`}function UD(){return UD=C(function*(n){const e=yield function Pfe(n){return R_=R_||function Ofe(n){return new Promise((e,t)=>{var r,i,o;function s(){v5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v5(),t(yo(n,"network-request-failed"))},timeout:Mfe.get()})}if(null!==(i=null===(r=vn().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=vn().gapi)||void 0===o||!o.load){const a=GB("iframefcb");return vn()[a]=()=>{gapi.load?s():t(yo(n,"network-request-failed"))},rT(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}s()}}).catch(e=>{throw R_=null,e})}(n),R_}(n),t=vn().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:Vfe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ffe,dontclear:!0},r=>new Promise(function(){var i=C(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=yo(n,"network-request-failed"),c=vn().setTimeout(()=>{s(a)},kfe.get());function u(){vn().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),UD.apply(this,arguments)}const Bfe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class w5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Wfe="__/auth/handler",Kfe="emulator/auth/handler",Qfe=encodeURIComponent("fac");function b5(n,e,t,r,i,o){return BD.apply(this,arguments)}function BD(){return(BD=C(function*(n,e,t,r,i,o){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$s,eventId:i};if(e instanceof Ks){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",sE(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof uhe){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=yield n._getAppCheckToken(),u=c?`#${Qfe}=${encodeURIComponent(c)}`:"";return`${function Yfe({config:n}){return n.emulator?jI(n,Kfe):`https://${n.authDomain}/${Wfe}`}(n)}?${Eh(a).slice(1)}${u}`})).apply(this,arguments)}const jD="webStorageSupport",Jfe=class Xfe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a5,this._completeRedirectFn=g5,this._overrideRedirectResult=yfe}_openPopup(e,t,r,i){var o=this;return C(function*(){var s;Gs(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield b5(e,t,r,Lh(),i);return function Gfe(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Bfe),{width:r.toString(),height:i.toString(),top:o,left:s}),u=hn().toLowerCase();t&&(a=NB(u)?"_blank":t),kB(u)&&(e=e||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((h,[p,w])=>`${h}${p}=${w},`,"");if(function Rde(n=hn()){var e;return T_(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function qfe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new w5(null);const d=window.open(e||"",a,l);ee(d,n,"popup-blocked");try{d.focus()}catch{}return new w5(d)}(e,a,cD())})()}_openRedirect(e,t,r,i){var o=this;return C(function*(){return yield o._originValidation(e),function Bhe(n){vn().location.href=n}(yield b5(e,t,r,Lh(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Gs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return C(function*(){const r=yield function Ufe(n){return UD.apply(this,arguments)}(e),i=new Efe(e);return r.register("authEvent",o=>(ee(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jD,{type:jD},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[jD];void 0!==s&&t(!!s),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function xfe(n){return VD.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UB()||eT()||T_()}};var I5="@firebase/auth";class Zfe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return C(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const rpe=SU("authIdTokenMaxAge")||300;let D5=null;const ipe=n=>function(){var e=C(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>rpe)return;const o=r?.token;D5!==o&&(D5=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function ope(n=Dh()){const e=js(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function Gde(n,e){const t=js(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(n_(t.getOptions(),e??{}))return i;qr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Jfe,persistence:[Qhe,Fhe,a5]}),r=SU("authTokenSyncURL");if(r){const o=ipe(r);(function Dhe(n,e,t){Ht(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function The(n,e,t,r){Ht(n).onIdTokenChanged(e,t,r)}(t,s=>o(s))}const i=AU("auth");return i&&function Wde(n,e,t){const r=Fn(n);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=KB(e),{host:s,port:a}=function Kde(n){const e=KB(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:QB(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:QB(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Qde(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function tpe(n){Jn(new Nn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BB(n)},u=new Hde(r,i,o,c);return function qde(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ss);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jn(new Nn("auth-internal",e=>{const t=Fn(e.getProvider("auth").getImmediate());return new Zfe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wt(I5,"0.23.2",function epe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),wt(I5,"0.23.2","esm2017")}("Browser");class We{constructor(e){return e}}class L_{constructor(){return Oh("auth")}}const zD=new le("angularfire2.auth-instances");function ape(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new We(r)}}const cpe={provide:L_,deps:[[new Xt,zD]]},upe={provide:We,useFactory:function spe(n,e){const t=Mh("auth",n,e);return t&&new We(t)},deps:[[new Xt,zD],Hs]};let lpe=(()=>{class n{constructor(){wt("angularfire",Ku.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[upe,cpe]}),n})();function dpe(n,...e){return{ngModule:lpe,providers:[{provide:zD,useFactory:ape(n),multi:!0,deps:[gt,Ir,Ph,kh,[new Xt,Fh],...e]}]}}const hpe=xn(mhe,!0),ic=xn(ope,!0),el=xn(Ahe,!0),fpe=xn(_he,!0),tr=xn(xhe,!0);let x5=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.title="gestion-muestras"}Login(){this.router.navigate(["/auth/login"])}handleSignOut(){tr(this.auth).then(()=>{}).catch(t=>{console.log("here")})}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(Pe))},n.\u0275cmp=He({type:n,selectors:[["app-auth"]],decls:11,vars:0,consts:[[1,"navbar"],[1,"tituloBox"],[1,"tituloText"],[1,"logoCiens"],[1,"logoUcv"],[1,"homeBox"],[1,"homeText"],[1,"homeLogo"]],template:function(t,r){1&t&&(_(0,"div",0)(1,"div",1)(2,"span",2),b(3,"Gestion de Muestras"),m()(),Z(4,"div",3)(5,"div",4),_(6,"div",5)(7,"span",6),b(8,"Home"),m(),Z(9,"div",7),m()(),Z(10,"router-outlet"))},dependencies:[Vu],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}.homeBox[_ngcontent-%COMP%]{background-color:#3ec28f;border-right:4px solid white;width:20%;height:10%;position:absolute;left:0;top:0%;text-align:center}.homeText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.tituloBox[_ngcontent-%COMP%]{background-color:#3ec28f;width:80%;height:10%;position:absolute;left:20%;top:0%;text-align:center}.tituloText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.logoCiens[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:92%;top:1.5%;background-image:url(image_7.2e20c6c16e8ce206.png);background-repeat:no-repeat;background-size:cover}.logoUcv[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:22%;top:1.5%;background-image:url(logo_ucv_bg2_1.32a61806277cba42.png);background-repeat:no-repeat;background-size:cover}@media only screen and (max-width: 768px){.homeBox[_ngcontent-%COMP%]{background-color:#3ec28f;border-right:4px solid white;width:20%;height:15%;position:absolute;left:0;top:0%}.homeText[_ngcontent-%COMP%]{display:none}.homeLogo[_ngcontent-%COMP%]{position:relative;top:30%;left:25%;width:36px;height:36px;text-align:center;background-image:url(home.a5ce65d54c28e165.png);background-repeat:no-repeat;background-size:cover}.tituloBox[_ngcontent-%COMP%]{background-color:#3ec28f;width:80%;height:15%;position:absolute;left:20%;top:0%;text-align:center}.tituloText[_ngcontent-%COMP%]{color:#fff;line-height:1.6;font-family:Verdana;font-size:32px;letter-spacing:0px}.logoCiens[_ngcontent-%COMP%]{width:31px;height:31px;position:absolute;left:90%;top:1.5%;background-image:url(image_7.2e20c6c16e8ce206.png);background-repeat:no-repeat;background-size:cover}.logoUcv[_ngcontent-%COMP%]{width:31px;height:31px;position:absolute;left:22%;top:1.5%;background-image:url(logo_ucv_bg2_1.32a61806277cba42.png);background-repeat:no-repeat;background-size:cover}}"]}),n})();var oe,ppe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$i={},HD=HD||{},xe=ppe||self;function V_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var GD="closure_uid_"+(1e9*Math.random()>>>0),mpe=0;function _pe(n,e,t){return n.call.apply(n.bind,arguments)}function ype(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function mr(n,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_pe:ype).apply(null,arguments)}function U_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ln(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Qs(){this.s=this.s,this.o=this.o}Qs.prototype.s=!1,Qs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function gpe(n){Object.prototype.hasOwnProperty.call(n,GD)&&n[GD]||(n[GD]=++mpe)}(this)},Qs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S5=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qD(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function M5(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(V_(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let s=0;s<o;s++)n[i+s]=r[s]}else n.push(r)}}function _r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_r.prototype.h=function(){this.defaultPrevented=!0};var wpe=function(){if(!xe.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xe.addEventListener("test",()=>{},e),xe.removeEventListener("test",()=>{},e)}catch{}return n}();function Xh(n){return/^[\s\xa0]*$/.test(n)}function B_(){var n=xe.navigator;return n&&(n=n.userAgent)?n:""}function wo(n){return-1!=B_().indexOf(n)}function WD(n){return WD[" "](n),n}WD[" "]=function(){};var QD,n,Cpe=wo("Opera"),tl=wo("Trident")||wo("MSIE"),O5=wo("Edge"),KD=O5||tl,P5=wo("Gecko")&&!(-1!=B_().toLowerCase().indexOf("webkit")&&!wo("Edge"))&&!(wo("Trident")||wo("MSIE"))&&!wo("Edge"),Epe=-1!=B_().toLowerCase().indexOf("webkit")&&!wo("Edge");function k5(){var n=xe.document;return n?n.documentMode:void 0}e:{var YD="",XD=(n=B_(),P5?/rv:([^\);]+)(\)|;)/.exec(n):O5?/Edge\/([\d\.]+)/.exec(n):tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Epe?/WebKit\/(\S+)/.exec(n):Cpe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(XD&&(YD=XD?XD[1]:""),tl){var JD=k5();if(null!=JD&&JD>parseFloat(YD)){QD=String(JD);break e}}QD=YD}var Ipe=xe.document&&tl&&(k5()||parseInt(QD,10))||void 0;function Jh(n,e){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(P5){e:{try{WD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Tpe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Jh.$.h.call(this)}}Ln(Jh,_r);var Tpe={2:"touch",3:"pen",4:"mouse"};Jh.prototype.h=function(){Jh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zh="closure_listenable_"+(1e6*Math.random()|0),Dpe=0;function Ape(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Dpe,this.fa=this.ia=!1}function j_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function eA(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function R5(n){const e={};for(const t in n)e[t]=n[t];return e}const F5="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L5(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<F5.length;o++)t=F5[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $_(n){this.src=n,this.g={},this.h=0}function tA(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=S5(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(j_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function nA(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}$_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=nA(n,e,r,i);return-1<s?(e=n[s],t||(e.ia=!1)):((e=new Ape(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var rA="closure_lm_"+(1e6*Math.random()|0),iA={};function V5(n,e,t,r,i){if(r&&r.once)return B5(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)V5(n,e[o],t,r,i);return null}return t=cA(t),n&&n[Zh]?n.O(e,t,Yh(r)?!!r.capture:!!r,i):U5(n,e,t,!1,r,i)}function U5(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var s=Yh(i)?!!i.capture:!!i,a=sA(n);if(a||(n[rA]=a=new $_(n)),(t=a.add(e,t,r,s,o)).proxy)return t;if(r=function Spe(){const e=Mpe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wpe||(i=s),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent($5(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function B5(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)B5(n,e[o],t,r,i);return null}return t=cA(t),n&&n[Zh]?n.P(e,t,Yh(r)?!!r.capture:!!r,i):U5(n,e,t,!0,r,i)}function j5(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)j5(n,e[o],t,r,i);else r=Yh(r)?!!r.capture:!!r,t=cA(t),n&&n[Zh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=nA(o=n.g[e],t,r,i))&&(j_(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=sA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=nA(e,t,r,i)),(t=-1<n?e[n]:null)&&oA(t))}function oA(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Zh])tA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($5(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sA(e))?(tA(t,n),0==t.h&&(t.src=null,e[rA]=null)):j_(n)}}}function $5(n){return n in iA?iA[n]:iA[n]="on"+n}function Mpe(n,e){if(n.fa)n=!0;else{e=new Jh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&oA(n),n=t.call(r,e)}return n}function sA(n){return(n=n[rA])instanceof $_?n:null}var aA="__closure_events_fn_"+(1e9*Math.random()>>>0);function cA(n){return"function"==typeof n?n:(n[aA]||(n[aA]=function(e){return n.handleEvent(e)}),n[aA])}function Vn(){Qs.call(this),this.i=new $_(this),this.S=this,this.J=null}function nr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new _r(e,n);else if(e instanceof _r)e.target=e.target||n;else{var i=e;L5(e=new _r(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];i=z_(s,r,!0,e)&&i}if(i=z_(s=e.g=n,r,!0,e)&&i,i=z_(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=z_(s=e.g=t[o],r,!1,e)&&i}function z_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==t){var a=s.listener,c=s.la||s.src;s.ia&&tA(n.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Ln(Vn,Qs),Vn.prototype[Zh]=!0,Vn.prototype.removeEventListener=function(n,e,t,r){j5(this,n,e,t,r)},Vn.prototype.N=function(){if(Vn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)j_(t[r]);delete n.g[e],n.h--}}this.J=null},Vn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uA=xe.JSON.stringify;function Ppe(){var n=lA;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var z5=new class Ope{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Npe,n=>n.reset());class Npe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rpe(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Fpe(n){xe.setTimeout(()=>{throw n},0)}let ef,tf=!1,lA=new class kpe{constructor(){this.h=this.g=null}add(e,t){const r=z5.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},H5=()=>{const n=xe.Promise.resolve(void 0);ef=()=>{n.then(Lpe)}};var Lpe=()=>{for(var n;n=Ppe();){try{n.h.call(n.g)}catch(t){Fpe(t)}var e=z5;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}tf=!1};function H_(n,e){Vn.call(this),this.h=n||1,this.g=e||xe,this.j=mr(this.qb,this),this.l=Date.now()}function dA(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function hA(n,e,t){if("function"==typeof n)t&&(n=mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xe.setTimeout(n,e||0)}function G5(n){n.g=hA(()=>{n.g=null,n.i&&(n.i=!1,G5(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ln(H_,Vn),(oe=H_.prototype).ga=!1,oe.T=null,oe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nr(this,"tick"),this.ga&&(dA(this),this.start()))}},oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},oe.N=function(){H_.$.N.call(this),dA(this),delete this.g};class Vpe extends Qs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:G5(this)}N(){super.N(),this.g&&(xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nf(n){Qs.call(this),this.h=n,this.g={}}Ln(nf,Qs);var q5=[];function W5(n,e,t,r){Array.isArray(t)||(t&&(q5[0]=t.toString()),t=q5);for(var i=0;i<t.length;i++){var o=V5(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function K5(n){eA(n.g,function(e,t){this.g.hasOwnProperty(t)&&oA(e)},n),n.g={}}function G_(){this.g=!0}function nl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $pe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return uA(t)}catch{return e}}(n,t)+(r?" "+r:"")})}nf.prototype.N=function(){nf.$.N.call(this),K5(this)},nf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},G_.prototype.Ea=function(){this.g=!1},G_.prototype.info=function(){};var oc={},Q5=null;function q_(){return Q5=Q5||new Vn}function Y5(n){_r.call(this,oc.Ta,n)}function rf(n){const e=q_();nr(e,new Y5(e))}function X5(n,e){_r.call(this,oc.STAT_EVENT,n),this.stat=e}function Mr(n){const e=q_();nr(e,new X5(e,n))}function J5(n,e){_r.call(this,oc.Ua,n),this.size=e}function sf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xe.setTimeout(function(){n()},e)}oc.Ta="serverreachability",Ln(Y5,_r),oc.STAT_EVENT="statevent",Ln(X5,_r),oc.Ua="timingevent",Ln(J5,_r);var W_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Z5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fA(){}function tj(){}fA.prototype.h=null;var mA,af={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pA(){_r.call(this,"d")}function gA(){_r.call(this,"c")}function K_(){}function cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new nf(this),this.P=zpe,this.V=new H_(n=KD?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nj}function nj(){this.i=null,this.g="",this.h=!1}Ln(pA,_r),Ln(gA,_r),Ln(K_,fA),K_.prototype.g=function(){return new XMLHttpRequest},K_.prototype.i=function(){return{}},mA=new K_;var zpe=45e3,_A={},Q_={};function yA(n,e,t){n.L=1,n.v=Z_(cs(e)),n.s=t,n.S=!0,rj(n,null)}function rj(n,e){n.G=Date.now(),uf(n),n.A=cs(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),fj(t.i,"t",r),n.C=0,t=n.l.J,n.h=new nj,n.g=Lj(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Vpe(mr(n.Pa,n,n.g),n.O)),W5(n.U,n.g,"readystatechange",n.nb),e=n.I?R5(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),rf(),function Upe(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&"type"==d[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.u,n.A,n.m,n.W,n.s)}function ij(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function oj(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Hpe(n,t),i==Q_){4==e&&(n.o=4,Mr(14),r=!1),nl(n.j,n.m,null,"[Incomplete Response]");break}if(i==_A){n.o=4,Mr(15),nl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}nl(n.j,n.m,i,null),vA(n,i)}ij(n)&&i!=Q_&&i!=_A&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Mr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),DA(e),e.M=!0,Mr(11))):(nl(n.j,n.m,t,"[Invalid Chunked Response]"),sc(n),lf(n))}function Hpe(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Q_:(t=Number(e.substring(t,r)),isNaN(t)?_A:(r+=1)+t>e.length?Q_:(e=e.slice(r,r+t),n.C=r+t,e))}function uf(n){n.Y=Date.now()+n.P,sj(n,n.P)}function sj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=sf(mr(n.lb,n),e)}function Y_(n){n.B&&(xe.clearTimeout(n.B),n.B=null)}function lf(n){0==n.l.H||n.J||kj(n.l,n)}function sc(n){Y_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,dA(n.V),K5(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function vA(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||wA(t.i,n)))if(!n.K&&wA(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;oy(t),ry(t)}TA(t),Mr(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=sf(mr(t.ib,t),6e3));if(1>=mj(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else cc(t,11)}else if((n.K||t.g==n)&&oy(t),!Xh(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const l=u[3];null!=l&&(t.ra=l,t.l.info("VER="+t.ra));const d=u[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const p=n.g;if(p){const w=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||-1==w.indexOf("spdy")&&-1==w.indexOf("quic")&&-1==w.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(bA(o,o.h),o.h=null))}if(r.F){const I=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,Ft(r.I,r.F,I))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var s=n;if((r=t).wa=Fj(r,r.J?r.pa:null,r.Y),s.K){_j(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.B&&(Y_(a),uf(a)),r.g=s}else Oj(r);0<t.j.length&&iy(t)}else"stop"!=u[0]&&"close"!=u[0]||cc(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cc(t,7):IA(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}rf()}catch{}}function aj(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(V_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function qpe(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(V_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Gpe(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(V_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(oe=cf.prototype).setTimeout=function(n){this.P=n},oe.nb=function(n){n=n.target;const e=this.M;e&&3==bo(n)?e.l():this.Pa(n)},oe.Pa=function(n){try{if(n==this.g)e:{const l=bo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||KD||this.g&&(this.h.h||this.g.ja()||Tj(this.g)))){this.J||4!=l||7==e||rf(),Y_(this);var t=this.g.da();this.ca=t;t:if(ij(this)){var r=Tj(this.g);n="";var i=r.length,o=4==bo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sc(this),lf(this);var s="";break t}this.h.i=new xe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==t,function Bpe(n,e,t,r,i,o,s){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.W,l,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xh(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.o=3,Mr(12),sc(this),lf(this);break e}nl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vA(this,t)}this.S?(oj(this,l,s),KD&&this.i&&3==l&&(W5(this.U,this.V,"tick",this.mb),this.V.start())):(nl(this.j,this.m,s,null),vA(this,s)),4==l&&sc(this),this.i&&!this.J&&(4==l?kj(this.l,this):(this.i=!1,uf(this)))}else(function lge(n){const e={};n=(n.g&&2<=bo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Xh(n[r]))continue;var t=Rpe(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function xpe(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<s.indexOf("Unknown SID")?(this.o=3,Mr(12)):(this.o=0,Mr(13)),sc(this),lf(this)}}}catch{}},oe.mb=function(){if(this.g){var n=bo(this.g),e=this.g.ja();this.C<e.length&&(Y_(this),oj(this,n,e),this.i&&4!=n&&uf(this))}},oe.cancel=function(){this.J=!0,sc(this)},oe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jpe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(rf(),Mr(17)),sc(this),this.o=2,lf(this)):sj(this,this.Y-n)};var cj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ac(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ac){this.h=n.h,X_(this,n.j),this.s=n.s,this.g=n.g,J_(this,n.m),this.l=n.l;var e=n.i,t=new ff;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uj(this,t),this.o=n.o}else n&&(e=String(n).match(cj))?(this.h=!1,X_(this,e[1]||"",!0),this.s=df(e[2]||""),this.g=df(e[3]||"",!0),J_(this,e[4]),this.l=df(e[5]||"",!0),uj(this,e[6]||"",!0),this.o=df(e[7]||"")):(this.h=!1,this.i=new ff(null,this.h))}function cs(n){return new ac(n)}function X_(n,e,t){n.j=t?df(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function J_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uj(n,e,t){e instanceof ff?(n.i=e,function Zpe(n,e){e&&!n.j&&(Ys(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(dj(this,r),fj(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=hf(e,Xpe)),n.i=new ff(e,n.h))}function Ft(n,e,t){n.i.set(e,t)}function Z_(n){return Ft(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function df(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Kpe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kpe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ac.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hf(e,lj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hf(e,lj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(hf(t,"/"==t.charAt(0)?Ype:Qpe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hf(t,Jpe)),n.join("")};var lj=/[#\/\?@]/g,Qpe=/[#\?:]/g,Ype=/[#\?]/g,Xpe=/[#\?@]/g,Jpe=/#/g;function ff(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ys(n){n.g||(n.g=new Map,n.h=0,n.i&&function Wpe(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function dj(n,e){Ys(n),e=rl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hj(n,e){return Ys(n),e=rl(n,e),n.g.has(e)}function fj(n,e,t){dj(n,e),0<t.length&&(n.i=null,n.g.set(rl(n,e),qD(t)),n.h+=t.length)}function rl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function pj(n){this.l=n||tge,n=xe.PerformanceNavigationTiming?0<(n=xe.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xe.g&&xe.g.Ka&&xe.g.Ka()&&xe.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(oe=ff.prototype).add=function(n,e){Ys(this),this.i=null,n=rl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},oe.forEach=function(n,e){Ys(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},oe.ta=function(){Ys(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},oe.Z=function(n){Ys(this);let e=[];if("string"==typeof n)hj(this,n)&&(e=e.concat(this.g.get(rl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},oe.set=function(n,e){return Ys(this),this.i=null,hj(this,n=rl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},oe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),n.push(i)}}return this.i=n.join("&")};var tge=10;function gj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mj(n){return n.h?1:n.g?n.g.size:0}function wA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bA(n,e){n.g?n.g.add(e):n.h=e}function _j(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function yj(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return qD(n.i)}pj.prototype.cancel=function(){if(this.i=yj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var nge=class{stringify(n){return xe.JSON.stringify(n,void 0)}parse(n){return xe.JSON.parse(n,void 0)}};function rge(){this.g=new nge}function ige(n,e,t){const r=t||"";try{aj(n,function(i,o){let s=i;Yh(i)&&(s=uA(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ey(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function pf(n){this.l=n.fc||null,this.j=n.ob||!1}function ty(n,e){Vn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=CA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ln(pf,fA),pf.prototype.g=function(){return new ty(this.l,this.j)},pf.prototype.i=function(n){return function(){return n}}({}),Ln(ty,Vn);var CA=0;function vj(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function gf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,mf(n)}function mf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(oe=ty.prototype).open=function(n,e){if(this.readyState!=CA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,mf(this)},oe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||xe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gf(this)),this.readyState=CA},oe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,mf(this)),this.g&&(this.readyState=3,mf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xe.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vj(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},oe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?gf(this):mf(this),3==this.readyState&&vj(this)}},oe.Za=function(n){this.g&&(this.response=this.responseText=n,gf(this))},oe.Ya=function(n){this.g&&(this.response=n,gf(this))},oe.ka=function(){this.g&&gf(this)},oe.setRequestHeader=function(n,e){this.v.append(n,e)},oe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},oe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ty.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sge=xe.JSON.parse;function rn(n){Vn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wj,this.L=this.M=!1}Ln(rn,Vn);var wj="",age=/^https?$/i,cge=["POST","PUT"];function bj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cj(n),ny(n)}function Cj(n){n.F||(n.F=!0,nr(n,"complete"),nr(n,"error"))}function Ej(n){if(n.h&&typeof HD<"u"&&(!n.C[1]||4!=bo(n)||2!=n.da()))if(n.v&&4==bo(n))hA(n.La,0,n);else if(nr(n,"readystatechange"),4==bo(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===s){var i=String(n.I).match(cj)[1]||null;!i&&xe.self&&xe.self.location&&(i=xe.self.location.protocol.slice(0,-1)),r=!age.test(i?i.toLowerCase():"")}t=r}if(t)nr(n,"complete"),nr(n,"success");else{n.m=6;try{var o=2<bo(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",Cj(n)}}finally{ny(n)}}}function ny(n,e){if(n.g){Ij(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||nr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Ij(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(xe.clearTimeout(n.A),n.A=null)}function bo(n){return n.g?n.g.readyState:0}function Tj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case wj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Dj(n){let e="";return eA(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function EA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Dj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ft(n,e,t))}function _f(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Aj(n){this.Ga=0,this.j=[],this.l=new G_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_f("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_f("baseRetryDelayMs",5e3,n),this.hb=_f("retryDelaySeedMs",1e4,n),this.eb=_f("forwardChannelMaxRetries",2,n),this.xa=_f("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new pj(n&&n.concurrentRequestLimit),this.Ja=new rge,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function IA(n){if(xj(n),3==n.H){var e=n.W++,t=cs(n.I);if(Ft(t,"SID",n.K),Ft(t,"RID",e),Ft(t,"TYPE","terminate"),yf(n,t),(e=new cf(n,n.l,e)).L=2,e.v=Z_(cs(t)),t=!1,xe.navigator&&xe.navigator.sendBeacon)try{t=xe.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&xe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Lj(e.l,null),e.g.ha(e.v)),e.G=Date.now(),uf(e)}Rj(n)}function ry(n){n.g&&(DA(n),n.g.cancel(),n.g=null)}function xj(n){ry(n),n.u&&(xe.clearTimeout(n.u),n.u=null),oy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xe.clearTimeout(n.m),n.m=null)}function iy(n){if(!gj(n.i)&&!n.m){n.m=!0;var e=n.Na;ef||H5(),tf||(ef(),tf=!0),lA.add(e,n),n.C=0}}function Sj(n,e){var t;t=e?e.m:n.W++;const r=cs(n.I);Ft(r,"SID",n.K),Ft(r,"RID",t),Ft(r,"AID",n.V),yf(n,r),n.o&&n.s&&EA(r,n.o,n.s),t=new cf(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Mj(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),bA(n.i,t),yA(t,r,e)}function yf(n,e){n.na&&eA(n.na,function(t,r){Ft(e,r,t)}),n.h&&aj({},function(t,r){Ft(e,r,t)})}function Mj(n,e,t){t=Math.min(n.j.length,t);var r=n.h?mr(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<t;c++){let u=i[c].g;const l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{ige(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Oj(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ef||H5(),tf||(ef(),tf=!0),lA.add(e,n),n.A=0}}function TA(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=sf(mr(n.Ma,n),Nj(n,n.A)),n.A++,0))}function DA(n){null!=n.B&&(xe.clearTimeout(n.B),n.B=null)}function Pj(n){n.g=new cf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=cs(n.wa);Ft(e,"RID","rpc"),Ft(e,"SID",n.K),Ft(e,"AID",n.V),Ft(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ft(e,"TO",n.qa),Ft(e,"TYPE","xmlhttp"),yf(n,e),n.o&&n.s&&EA(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Z_(cs(e)),t.s=null,t.S=!0,rj(t,n)}function oy(n){null!=n.v&&(xe.clearTimeout(n.v),n.v=null)}function kj(n,e){var t=null;if(n.g==e){oy(n),DA(n),n.g=null;var r=2}else{if(!wA(n.i,e))return;t=e.F,_j(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;nr(r=q_(),new J5(r,t)),iy(n)}else Oj(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function dge(n,e){return!(mj(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=sf(mr(n.Na,n,e),Nj(n,n.C)),n.C++,0)))}(n,e)||2==r&&TA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:cc(n,5);break;case 4:cc(n,10);break;case 3:cc(n,6);break;default:cc(n,2)}}function Nj(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function cc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=mr(n.pb,n);t||(t=new ac("//www.google.com/images/cleardot.gif"),xe.location&&"http"==xe.location.protocol||X_(t,"https"),Z_(t)),function oge(n,e){const t=new G_;if(xe.Image){const r=new Image;r.onload=U_(ey,t,r,"TestLoadImage: loaded",!0,e),r.onerror=U_(ey,t,r,"TestLoadImage: error",!1,e),r.onabort=U_(ey,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=U_(ey,t,r,"TestLoadImage: timeout",!1,e),xe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Mr(2);n.H=0,n.h&&n.h.za(e),Rj(n),xj(n)}function Rj(n){if(n.H=0,n.ma=[],n.h){const e=yj(n.i);(0!=e.length||0!=n.j.length)&&(M5(n.ma,e),M5(n.ma,n.j),n.i.i.length=0,qD(n.j),n.j.length=0),n.h.ya()}}function Fj(n,e,t){var r=t instanceof ac?cs(t):new ac(t);if(""!=r.g)e&&(r.g=e+"."+r.g),J_(r,r.m);else{var i=xe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ac(null);r&&X_(o,r),e&&(o.g=e),i&&J_(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Ft(r,t,e),Ft(r,"VER",n.ra),yf(n,r),r}function Lj(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rn(t&&n.Ha&&!n.va?new pf({ob:!0}):n.va)).Oa(n.J),e}function Vj(){}function sy(){if(tl&&!(10<=Number(Ipe)))throw Error("Environmental error: no available transport.")}function oi(n,e){Vn.call(this),this.g=new Aj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Xh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new il(this)}function Uj(n){pA.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Bj(){gA.call(this),this.status=1}function il(n){this.g=n}function zi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function AA(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],s=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;s=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=t+((s=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function _t(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(oe=rn.prototype).Oa=function(n){this.M=n},oe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mA.g(),this.C=function ej(n){return n.h||(n.h=n.i())}(this.u?this.u:mA),this.g.onreadystatechange=mr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void bj(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=xe.FormData&&n instanceof xe.FormData,!(0<=S5(cge,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ij(this),0<this.B&&((this.L=function uge(n){return tl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.ua,this)):this.A=hA(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){bj(this,o)}},oe.ua=function(){typeof HD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nr(this,"timeout"),this.abort(8))},oe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,nr(this,"complete"),nr(this,"abort"),ny(this))},oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ny(this,!0)),rn.$.N.call(this)},oe.La=function(){this.s||(this.G||this.v||this.l?Ej(this):this.kb())},oe.kb=function(){Ej(this)},oe.isActive=function(){return!!this.g},oe.da=function(){try{return 2<bo(this)?this.g.status:-1}catch{return-1}},oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},oe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sge(e)}},oe.Ia=function(){return this.m},oe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(oe=Aj.prototype).ra=8,oe.H=1,oe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new cf(this,this.l,n);let o=this.s;if(this.U&&(o?(o=R5(o),L5(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Mj(this,i,e),Ft(t=cs(this.I),"RID",n),Ft(t,"CVER",22),this.F&&Ft(t,"X-HTTP-Session-Id",this.F),yf(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(Dj(o)))+"&"+e:this.o&&EA(t,this.o,o)),bA(this.i,i),this.bb&&Ft(t,"TYPE","init"),this.P?(Ft(t,"$req",e),Ft(t,"SID","null"),i.aa=!0,yA(i,t,null)):yA(i,t,e),this.H=2}}else 3==this.H&&(n?Sj(this,n):0==this.j.length||gj(this.i)||Sj(this))},oe.Ma=function(){if(this.u=null,Pj(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=sf(mr(this.jb,this),n)}},oe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mr(10),ry(this),Pj(this))},oe.ib=function(){null!=this.v&&(this.v=null,ry(this),TA(this),Mr(19))},oe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Mr(2)):(this.l.info("Failed to ping google.com"),Mr(1))},oe.isActive=function(){return!!this.h&&this.h.isActive(this)},(oe=Vj.prototype).Ba=function(){},oe.Aa=function(){},oe.za=function(){},oe.ya=function(){},oe.isActive=function(){return!0},oe.Va=function(){},sy.prototype.g=function(n,e){return new oi(n,e)},Ln(oi,Vn),oi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Mr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Fj(n,null,n.Y),iy(n)},oi.prototype.close=function(){IA(this.g)},oi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=uA(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&iy(e)},oi.prototype.N=function(){this.g.h=null,delete this.j,IA(this.g),delete this.g,oi.$.N.call(this)},Ln(Uj,pA),Ln(Bj,gA),Ln(il,Vj),il.prototype.Ba=function(){nr(this.g,"a")},il.prototype.Aa=function(n){nr(this.g,new Uj(n))},il.prototype.za=function(n){nr(this.g,new Bj)},il.prototype.ya=function(){nr(this.g,"b")},Ln(zi,function hge(){this.blockSize=-1}),zi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},zi.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)AA(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){AA(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){AA(this,r),i=0;break}}this.h=i,this.i+=e},zi.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var fge={};function xA(n){return-128<=n&&128>n?function bpe(n,e){var t=fge;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new _t([0|e],0>e?-1:0)}):new _t([0|n],0>n?-1:0)}function Co(n){if(isNaN(n)||!isFinite(n))return ol;if(0>n)return rr(Co(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=SA;return new _t(e,0)}var SA=4294967296,ol=xA(0),MA=xA(1),$j=xA(16777216);function us(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ii(n){return-1==n.h}function rr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new _t(t,~n.h).add(MA)}function ay(n,e){return n.add(rr(e))}function cy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function vf(n,e){this.g=n,this.h=e}function uy(n,e){if(us(e))throw Error("division by zero");if(us(n))return new vf(ol,ol);if(Ii(n))return e=uy(rr(n),e),new vf(rr(e.g),rr(e.h));if(Ii(e))return e=uy(n,rr(e)),new vf(rr(e.g),e.h);if(30<n.g.length){if(Ii(n)||Ii(e))throw Error("slowDivide_ only works with positive integers.");for(var t=MA,r=e;0>=r.X(n);)t=zj(t),r=zj(r);var i=sl(t,1),o=sl(r,1);for(r=sl(r,2),t=sl(t,2);!us(r);){var s=o.add(r);0>=s.X(n)&&(i=i.add(t),o=s),r=sl(r,1),t=sl(t,1)}return e=ay(n,i.R(e)),new vf(i,e)}for(i=ol;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Co(t)).R(e);Ii(s)||0<s.X(n);)s=(o=Co(t-=r)).R(e);us(o)&&(o=MA),i=i.add(o),n=ay(n,s)}return new vf(i,n)}function zj(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new _t(t,n.h)}function sl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new _t(i,n.h)}(oe=_t.prototype).ea=function(){if(Ii(this))return-rr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:SA+r)*e,e*=SA}return n},oe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(us(this))return"0";if(Ii(this))return"-"+rr(this).toString(n);for(var e=Co(Math.pow(n,6)),t=this,r="";;){var i=uy(t,e).g,o=((0<(t=ay(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(us(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},oe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},oe.X=function(n){return Ii(n=ay(this,n))?-1:us(n)?0:1},oe.abs=function(){return Ii(this)?rr(this):this},oe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=s>>>16,t[i]=(s&=65535)<<16|(o&=65535)}return new _t(t,-2147483648&t[t.length-1]?-1:0)},oe.R=function(n){if(us(this)||us(n))return ol;if(Ii(this))return Ii(n)?rr(this).R(rr(n)):rr(rr(this).R(n));if(Ii(n))return rr(this.R(rr(n)));if(0>this.X($j)&&0>n.X($j))return Co(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=n.D(i)>>>16,c=65535&n.D(i);t[2*r+2*i]+=s*c,cy(t,2*r+2*i),t[2*r+2*i+1]+=o*c,cy(t,2*r+2*i+1),t[2*r+2*i+1]+=s*a,cy(t,2*r+2*i+1),t[2*r+2*i+2]+=o*a,cy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new _t(t,0)},oe.gb=function(n){return uy(this,n).h},oe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new _t(t,this.h&n.h)},oe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new _t(t,this.h|n.h)},oe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new _t(t,this.h^n.h)},sy.prototype.createWebChannel=sy.prototype.g,oi.prototype.send=oi.prototype.u,oi.prototype.open=oi.prototype.m,oi.prototype.close=oi.prototype.close,W_.NO_ERROR=0,W_.TIMEOUT=8,W_.HTTP_ERROR=6,Z5.COMPLETE="complete",tj.EventType=af,af.OPEN="a",af.CLOSE="b",af.ERROR="c",af.MESSAGE="d",Vn.prototype.listen=Vn.prototype.O,rn.prototype.listenOnce=rn.prototype.P,rn.prototype.getLastError=rn.prototype.Sa,rn.prototype.getLastErrorCode=rn.prototype.Ia,rn.prototype.getStatus=rn.prototype.da,rn.prototype.getResponseJson=rn.prototype.Wa,rn.prototype.getResponseText=rn.prototype.ja,rn.prototype.send=rn.prototype.ha,rn.prototype.setWithCredentials=rn.prototype.Oa,zi.prototype.digest=zi.prototype.l,zi.prototype.reset=zi.prototype.reset,zi.prototype.update=zi.prototype.j,_t.prototype.add=_t.prototype.add,_t.prototype.multiply=_t.prototype.R,_t.prototype.modulo=_t.prototype.gb,_t.prototype.compare=_t.prototype.X,_t.prototype.toNumber=_t.prototype.ea,_t.prototype.toString=_t.prototype.toString,_t.prototype.getBits=_t.prototype.D,_t.fromNumber=Co,_t.fromString=function jj(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return rr(jj(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Co(Math.pow(e,8)),r=ol,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),s=parseInt(n.substring(i,i+o),e);8>o?(o=Co(Math.pow(e,o)),r=r.R(o).add(Co(s))):r=(r=r.R(t)).add(Co(s))}return r};var pge=$i.createWebChannelTransport=function(){return new sy},gge=$i.getStatEventTarget=function(){return q_()},OA=$i.ErrorCode=W_,mge=$i.EventType=Z5,_ge=$i.Event=oc,Hj=$i.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yge=$i.FetchXmlHttpFactory=pf,ly=$i.WebChannel=tj,vge=$i.XhrIo=rn,wge=$i.Md5=zi,al=$i.Integer=_t;const Gj="@firebase/firestore";class Un{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");let cl="9.23.0";const Xs=new qa("@firebase/firestore");function PA(){return Xs.logLevel}function Y(n,...e){if(Xs.logLevel<=Qe.DEBUG){const t=e.map(kA);Xs.debug(`Firestore (${cl}): ${n}`,...t)}}function fn(n,...e){if(Xs.logLevel<=Qe.ERROR){const t=e.map(kA);Xs.error(`Firestore (${cl}): ${n}`,...t)}}function Hi(n,...e){if(Xs.logLevel<=Qe.WARN){const t=e.map(kA);Xs.warn(`Firestore (${cl}): ${n}`,...t)}}function kA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ue(n="Unexpected state"){const e=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: `+n;throw fn(e),new Error(e)}function he(n,e){n||ue()}function ie(n,e){return n}const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bge{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Un.UNAUTHENTICATED))}shutdown(){}}class Cge{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ege{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let s=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(C(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he("string"==typeof r.accessToken),new qj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return he(null===e||"string"==typeof e),new Un(e)}}class Ige{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Tge{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Ige(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dge{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.T;return this.T=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(he("string"==typeof t.token),this.T=t.token,new Wj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Age(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Kj{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Age(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Ie(n,e){return n<e?-1:n>e?1:0}function ul(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Qj(n){return n+"\0"}class Zt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Zt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Zt(0,0))}static max(){return new fe(new Zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wf{constructor(e,t,r){void 0===t?t=0:t>e.length&&ue(),void 0===r?r=e.length-t:r>e.length-t&&ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Je extends wf{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const xge=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends wf{construct(e,t,r){return new pn(e,t,r)}static isValidIdentifier(e){return xge.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Q(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Q(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Q(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Q(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Je.fromString(e))}static fromName(e){return new ne(Je.fromString(e).popFirst(5))}static empty(){return new ne(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Je.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Je(e.slice()))}}class dy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function NA(n){return n.fields.find(e=>2===e.kind)}function uc(n){return n.fields.filter(e=>2!==e.kind)}dy.UNKNOWN_ID=-1;class hy{constructor(e,t){this.fieldPath=e,this.kind=t}}class bf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bf(0,si.min())}}function Xj(n){return new si(n.readTime,n.key,-1)}class si{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new si(fe.min(),ne.empty(),-1)}static max(){return new si(fe.max(),ne.empty(),-1)}}function RA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ne.comparator(n.documentKey,e.documentKey),0!==t?t:Ie(n.largestBatchId,e.largestBatchId))}const Jj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Js(n){return FA.apply(this,arguments)}function FA(){return FA=C(function*(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==Jj)throw n;Y("LocalStore","Unexpectedly lost primary lease")}),FA.apply(this,arguments)}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,r)=>{t(e)})}static reject(e){return new F((t,r)=>{r(e)})}static waitFor(e){return new F((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next(i=>i?F.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new F((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;t(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new F((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class fy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Sn,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Cf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=LA(r.target.error);this.v.reject(new Cf(e,i))}}static open(e,t,r,i){try{return new fy(t,e.transaction(i,r))}catch(o){throw new Cf(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Y("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pge(t)}}class Gi{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Gi.S(hn())&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Y("SimpleDb","Removing database:",e),lc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Us())return!1;if(Gi.C())return!0;const e=hn(),t=Gi.S(e),r=0<t&&t<10,i=Gi.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return C(function*(){return t.db||(Y("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Cf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new Q(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Q(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Cf(e,a))},o.onupgradeneeded=s=>{Y("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.V.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{Y("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return C(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.$(e);const c=fy.open(o.db,e,s?"readonly":"readwrite",r),u=i(c).next(l=>(c.P(),l)).catch(l=>(c.abort(l),F.reject(l))).toPromise();return u.catch(()=>{}),yield c.R,u}catch(c){const u=c,l="FirebaseError"!==u.name&&a<3;if(Y("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),o.close(),!l)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Oge{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return lc(this.L.delete())}}class Cf extends Q{constructor(e,t){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zs(n){return"IndexedDbTransactionError"===n.name}class Pge{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Y("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lc(r)}add(e){return Y("SimpleDb","ADD",this.store.name,e,e),lc(this.store.add(e))}get(e){return lc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Y("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Y("SimpleDb","DELETE",this.store.name,e),lc(this.store.delete(e))}count(){return Y("SimpleDb","COUNT",this.store.name),lc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new F((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new F((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}J(e,t){Y("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new F((r,i)=>{t.onerror=o=>{const s=LA(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new F((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const c=new Oge(a),u=t(a.primaryKey,a.value,c);if(u instanceof F){const l=u.catch(d=>(c.done(),F.reject(d)));r.push(l)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>F.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lc(n){return new F((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=LA(r.target.error);t(i)}})}let e$=!1;function LA(n){const e=Gi.S(hn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e$||(e$=!0,setTimeout(()=>{throw r},0)),r}}return n}class kge{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Y("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,C(function*(){t.task=null;try{Y("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Zs(r)?Y("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Js(r)}yield t.et(6e4)}))}}class Nge{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return C(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return F.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return Y("IndexBackiller",`Processing collection: ${s}`),this.it(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.rt(i,o)).next(a=>(Y("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=Xj(o);RA(s,r)>0&&(r=s)}),new si(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ai=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ef(n){return null==n}function If(n){return 0===n&&1/n==-1/0}function yr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=n$(e)),e=Rge(n.get(t),e);return n$(e)}function Rge(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function n$(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if(he(e>=2),2===e)return he("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Je.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&ue(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:ue()}o=s+2}return new Je(r)}const r$=["userId","batchId"];function py(n,e){return[n,yr(e)]}function i$(n,e,t){return[n,yr(e),t]}const Fge={},Lge=["prefixPath","collectionGroup","readTime","documentId"],Vge=["prefixPath","collectionGroup","documentId"],Uge=["collectionGroup","readTime","prefixPath","documentId"],Bge=["canonicalId","targetId"],jge=["targetId","path"],$ge=["path","targetId"],zge=["collectionId","parent"],Hge=["indexId","uid"],Gge=["uid","sequenceNumber"],qge=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wge=["indexId","uid","orderedDocumentKey"],Kge=["userId","collectionPath","documentId"],Qge=["userId","collectionPath","largestBatchId"],Yge=["userId","collectionGroup","largestBatchId"],o$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xge=[...o$,"documentOverlays"],s$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a$=s$,Jge=[...a$,"indexConfiguration","indexState","indexEntries"];class VA extends Zj{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Bn(n,e){const t=ie(n);return Gi.M(t.ht,e)}function c$(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function u$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ot{constructor(e,t){this.comparator=e,this.root=t||ir.EMPTY}insert(e,t){return new Ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gy(this.root,e,this.comparator,!1)}getReverseIterator(){return new gy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gy(this.root,e,this.comparator,!0)}}class gy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ir.RED,this.left=i??ir.EMPTY,this.right=o??ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ir(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ir.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1,ir.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ir(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lt{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l$(this.data.getIterator())}getIteratorFrom(e){return new l$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class l${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ll(n){return n.hasNext()?n.getNext():void 0}class Wr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Wr([])}unionWith(e){let t=new Lt(pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class d$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new d$("Invalid base64 string: "+i):i}}(e);return new Mn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const Zge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(n){if(he(!!n),"string"==typeof n){let e=0;const t=Zge.exec(n);if(he(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ls(n){return"string"==typeof n?Mn.fromBase64String(n):Mn.fromUint8Array(n)}function my(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _y(n){const e=n.mapValue.fields.__previous_value__;return my(e)?_y(e):e}function Tf(n){const e=ta(n.mapValue.fields.__local_write_time__.timestampValue);return new Zt(e.seconds,e.nanos)}class eme{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class dc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dc&&e.projectId===this.projectId&&e.database===this.database}}const na={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yy={nullValue:"NULL_VALUE"};function ra(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?my(n)?4:g$(n)?9007199254740991:10:ue()}function Io(n,e){if(n===e)return!0;const t=ra(n);if(t!==ra(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ta(r.timestampValue),s=ta(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ls(n.bytesValue).isEqual(ls(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return on(r.geoPointValue.latitude)===on(i.geoPointValue.latitude)&&on(r.geoPointValue.longitude)===on(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return on(r.integerValue)===on(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=on(r.doubleValue),s=on(i.doubleValue);return o===s?If(o)===If(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return ul(n.arrayValue.values||[],e.arrayValue.values||[],Io);case 10:return function(r,i){const o=r.mapValue.fields||{},s=i.mapValue.fields||{};if(c$(o)!==c$(s))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(void 0===s[a]||!Io(o[a],s[a])))return!1;return!0}(n,e);default:return ue()}var i}function Df(n,e){return void 0!==(n.values||[]).find(t=>Io(t,e))}function ia(n,e){if(n===e)return 0;const t=ra(n),r=ra(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return function(i,o){const s=on(i.integerValue||i.doubleValue),a=on(o.integerValue||o.doubleValue);return s<a?-1:s>a?1:s===a?0:isNaN(s)?isNaN(a)?0:-1:1}(n,e);case 3:return h$(n.timestampValue,e.timestampValue);case 4:return h$(Tf(n),Tf(e));case 5:return Ie(n.stringValue,e.stringValue);case 6:return function(i,o){const s=ls(i),a=ls(o);return s.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const s=i.split("/"),a=o.split("/");for(let c=0;c<s.length&&c<a.length;c++){const u=Ie(s[c],a[c]);if(0!==u)return u}return Ie(s.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const s=Ie(on(i.latitude),on(o.latitude));return 0!==s?s:Ie(on(i.longitude),on(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const s=i.values||[],a=o.values||[];for(let c=0;c<s.length&&c<a.length;++c){const u=ia(s[c],a[c]);if(u)return u}return Ie(s.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===na.mapValue&&o===na.mapValue)return 0;if(i===na.mapValue)return 1;if(o===na.mapValue)return-1;const s=i.fields||{},a=Object.keys(s),c=o.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let l=0;l<a.length&&l<u.length;++l){const d=Ie(a[l],u[l]);if(0!==d)return d;const h=ia(s[a[l]],c[u[l]]);if(0!==h)return h}return Ie(a.length,u.length)}(n.mapValue,e.mapValue);default:throw ue()}}function h$(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ie(n,e);const t=ta(n),r=ta(e),i=Ie(t.seconds,r.seconds);return 0!==i?i:Ie(t.nanos,r.nanos)}function dl(n){return UA(n)}function UA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ta(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ls(n.bytesValue).toBase64():"referenceValue"in n?ne.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const s of r.values||[])o?o=!1:i+=",",i+=UA(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",s=!0;for(const a of i)s?s=!1:o+=",",o+=`${a}:${UA(r.fields[a])}`;return o+"}"}(n.mapValue):ue();var e}function hc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BA(n){return!!n&&"integerValue"in n}function Af(n){return!!n&&"arrayValue"in n}function f$(n){return!!n&&"nullValue"in n}function p$(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wy(n){return!!n&&"mapValue"in n}function xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ea(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function g$(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tme(n){return"nullValue"in n?yy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hc(dc.empty(),ne.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ue()}function nme(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hc(dc.empty(),ne.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?na:ue()}function m$(n,e){const t=ia(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _$(n,e){const t=ia(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(t)}setAll(e){let t=pn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=xf(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());wy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ea(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new or(xf(this.value))}}function y$(n){const e=[];return ea(n.fields,(t,r)=>{const i=new pn([t]);if(wy(r)){const o=y$(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Wr(e)}class Vt{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Vt(e,0,fe.min(),fe.min(),fe.min(),or.empty(),0)}static newFoundDocument(e,t,r,i){return new Vt(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new Vt(e,2,t,fe.min(),fe.min(),or.empty(),0)}static newUnknownDocument(e,t){return new Vt(e,3,t,fe.min(),fe.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oa{constructor(e,t){this.position=e,this.inclusive=t}}function v$(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?ne.comparator(ne.fromName(s.referenceValue),t.key):ia(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function w$(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Io(n.position[t],e.position[t]))return!1;return!0}class hl{constructor(e,t="asc"){this.field=e,this.dir=t}}function rme(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class b${}class Ke extends b${constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ime(e,t,r):"array-contains"===t?new ame(e,r):"in"===t?new A$(e,r):"not-in"===t?new cme(e,r):"array-contains-any"===t?new ume(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ome(e,r):new sme(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ia(t,this.value)):null!==t&&ra(this.value)===ra(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yt extends b${constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new yt(e,t)}matches(e){return fl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function fl(n){return"and"===n.op}function jA(n){return"or"===n.op}function $A(n){return C$(n)&&fl(n)}function C$(n){for(const e of n.filters)if(e instanceof yt)return!1;return!0}function zA(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+dl(n.value);if($A(n))return n.filters.map(e=>zA(e)).join(",");{const e=n.filters.map(t=>zA(t)).join(",");return`${n.op}(${e})`}}function E$(n,e){return n instanceof Ke?(t=n,(r=e)instanceof Ke&&t.op===r.op&&t.field.isEqual(r.field)&&Io(t.value,r.value)):n instanceof yt?function(t,r){return r instanceof yt&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,s)=>i&&E$(o,r.filters[s]),!0)}(n,e):void ue();var t,r}function I$(n,e){const t=n.filters.concat(e);return yt.create(t,n.op)}function T$(n){return n instanceof Ke?`${(e=n).field.canonicalString()} ${e.op} ${dl(e.value)}`:n instanceof yt?function(e){return e.op.toString()+" {"+e.getFilters().map(T$).join(" ,")+"}"}(n):"Filter";var e}class ime extends Ke{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){const t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class ome extends Ke{constructor(e,t){super(e,"in",t),this.keys=D$(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sme extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=D$(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function D$(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ne.fromName(r.referenceValue))}class ame extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&Df(t.arrayValue,this.value)}}class A$ extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Df(this.value.arrayValue,t)}}class cme extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Df(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Df(this.value.arrayValue,t)}}class ume extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Df(this.value.arrayValue,r))}}class lme{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.dt=null}}function HA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new lme(n,e,t,r,i,o,s)}function fc(n){const e=ie(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dl(r)).join(",")),e.dt=t}return e.dt}function Sf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rme(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!E$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w$(n.startAt,e.startAt)&&w$(n.endAt,e.endAt)}function by(n){return ne.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Cy(n,e){return n.filters.filter(t=>t instanceof Ke&&t.field.isEqual(e))}function x$(n,e,t){let r=yy,i=!0;for(const o of Cy(n,e)){let s=yy,a=!0;switch(o.op){case"<":case"<=":s=tme(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=yy}m$({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];m$({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function S$(n,e,t){let r=na,i=!0;for(const o of Cy(n,e)){let s=na,a=!0;switch(o.op){case">=":case">":s=nme(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=na}_$({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];_$({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class ds{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.wt=null,this._t=null}}function pl(n){return new ds(n)}function O$(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function GA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ey(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function qA(n){return null!==n.collectionGroup}function pc(n){const e=ie(n);if(null===e.wt){e.wt=[];const t=Ey(e),r=GA(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new hl(t)),e.wt.push(new hl(pn.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new hl(pn.keyField(),o))}}}return e.wt}function Or(n){const e=ie(n);if(!e._t)if("F"===e.limitType)e._t=HA(e.path,e.collectionGroup,pc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of pc(e))t.push(new hl(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new oa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new oa(e.startAt.position,e.startAt.inclusive):null;e._t=HA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function WA(n,e){e.getFirstInequalityField(),Ey(n);const t=n.filters.concat([e]);return new ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Iy(n,e,t){return new ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mf(n,e){return Sf(Or(n),Or(e))&&n.limitType===e.limitType}function P$(n){return`${fc(Or(n))}|lt:${n.limitType}`}function KA(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>T$(r)).join(", ")}]`),Ef(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dl(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dl(r)).join(",")),`Target(${t})`}(Or(n))}; limitType=${n.limitType})`}function Of(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ne.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of pc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,s){const a=v$(i,o,s);return i.inclusive?a<=0:a<0}(t.startAt,pc(t),r)||t.endAt&&!function(i,o,s){const a=v$(i,o,s);return i.inclusive?a>=0:a>0}(t.endAt,pc(t),r)));var t,r}function N$(n){return(e,t)=>{let r=!1;for(const i of pc(n)){const o=dme(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function dme(n,e,t){const r=n.field.isKeyField()?ne.comparator(e.key,t.key):function(i,o,s){const a=o.data.field(i),c=s.data.field(i);return null!==a&&null!==c?ia(a,c):ue()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}class hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ea(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return u$(this.inner)}size(){return this.innerSize}}const hme=new Ot(ne.comparator);function Kr(){return hme}const R$=new Ot(ne.comparator);function Pf(...n){let e=R$;for(const t of n)e=e.insert(t.key,t);return e}function F$(n){let e=R$;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function To(){return kf()}function L$(){return kf()}function kf(){return new hs(n=>n.toString(),(n,e)=>n.isEqual(e))}const fme=new Ot(ne.comparator),pme=new Lt(ne.comparator);function Re(...n){let e=pme;for(const t of n)e=e.add(t);return e}const gme=new Lt(Ie);function V$(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(e)?"-0":e}}function U$(n){return{integerValue:""+n}}function B$(n,e){return function t$(n){return"number"==typeof n&&Number.isInteger(n)&&!If(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?U$(e):V$(n,e)}class Ty{constructor(){this._=void 0}}function mme(n,e,t){return n instanceof gl?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&my(i)&&(i=_y(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof gc?$$(n,e):n instanceof mc?z$(n,e):function(r,i){const o=j$(r,i),s=H$(o)+H$(r.gt);return BA(o)&&BA(r.gt)?U$(s):V$(r.serializer,s)}(n,e)}function _me(n,e,t){return n instanceof gc?$$(n,e):n instanceof mc?z$(n,e):t}function j$(n,e){return n instanceof ml?BA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class gl extends Ty{}class gc extends Ty{constructor(e){super(),this.elements=e}}function $$(n,e){const t=G$(e);for(const r of n.elements)t.some(i=>Io(i,r))||t.push(r);return{arrayValue:{values:t}}}class mc extends Ty{constructor(e){super(),this.elements=e}}function z$(n,e){let t=G$(e);for(const r of n.elements)t=t.filter(i=>!Io(i,r));return{arrayValue:{values:t}}}class ml extends Ty{constructor(e,t){super(),this.serializer=e,this.gt=t}}function H$(n){return on(n.integerValue||n.doubleValue)}function G$(n){return Af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nf{constructor(e,t){this.field=e,this.transform=t}}class vme{constructor(e,t){this.version=e,this.transformResults=t}}class Gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ay{}function q$(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yl(n.key,Gt.none()):new _l(n.key,n.data,Gt.none());{const t=n.data,r=or.empty();let i=new Lt(pn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new fs(n.key,r,new Wr(i.toArray()),Gt.none())}}function wme(n,e,t){n instanceof _l?function(r,i,o){const s=r.value.clone(),a=Q$(r.fieldTransforms,i,o.transformResults);s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof fs?function(r,i,o){if(!Dy(r.precondition,i))return void i.convertToUnknownDocument(o.version);const s=Q$(r.fieldTransforms,i,o.transformResults),a=i.data;a.setAll(K$(r)),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Rf(n,e,t,r){return n instanceof _l?function(i,o,s,a){if(!Dy(i.precondition,o))return s;const c=i.value.clone(),u=Y$(i.fieldTransforms,a,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof fs?function(i,o,s,a){if(!Dy(i.precondition,o))return s;const c=Y$(i.fieldTransforms,a,o),u=o.data;return u.setAll(K$(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===s?null:s.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(n,e,t,r):(s=t,Dy(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s);var o,s}function bme(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=j$(r.transform,i||null);null!=o&&(null===t&&(t=or.empty()),t.set(r.field,o))}return t||null}function W$(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ul(t,r,(i,o)=>function yme(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof gc&&r instanceof gc||t instanceof mc&&r instanceof mc?ul(t.elements,r.elements,Io):t instanceof ml&&r instanceof ml?Io(t.gt,r.gt):t instanceof gl&&r instanceof gl);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class _l extends Ay{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fs extends Ay{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function K$(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Q$(n,e,t){const r=new Map;he(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,_me(s,a,t[i]))}return r}function Y$(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,mme(o,s,e))}return r}class yl extends Ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YA extends Ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wme(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=L$();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=q$(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(t,r)=>W$(t,r))&&ul(this.baseMutations,e.baseMutations,(t,r)=>W$(t,r))}}class JA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){he(e.mutations.length===r.length);let i=fme;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new JA(e,t,r,i)}}class ZA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Eme{constructor(e,t){this.count=e,this.unchangedNames=t}}var wn,Ze;function J$(n){if(void 0===n)return fn("GRPC error has no .code"),V.UNKNOWN;switch(n){case wn.OK:return V.OK;case wn.CANCELLED:return V.CANCELLED;case wn.UNKNOWN:return V.UNKNOWN;case wn.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case wn.INTERNAL:return V.INTERNAL;case wn.UNAVAILABLE:return V.UNAVAILABLE;case wn.UNAUTHENTICATED:return V.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case wn.NOT_FOUND:return V.NOT_FOUND;case wn.ALREADY_EXISTS:return V.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return V.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case wn.ABORTED:return V.ABORTED;case wn.OUT_OF_RANGE:return V.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return V.UNIMPLEMENTED;case wn.DATA_LOSS:return V.DATA_LOSS;default:return ue()}}(Ze=wn||(wn={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";class ex{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xy}static getOrCreateInstance(){return null===xy&&(xy=new ex),xy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xy=null;const Ime=new al([4294967295,4294967295],0);function e6(n){const e=function Z$(){return new TextEncoder}().encode(n),t=new wge;return t.update(e),new Uint8Array(t.digest())}function t6(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new al([t,r],0),new al([i,o],0)]}class tx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ff(`Invalid padding: ${t}`);if(r<0)throw new Ff(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ff(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ff(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=al.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(al.fromNumber(r)));return 1===i.compare(Ime)&&(i=new al([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=e6(e),[r,i]=t6(t);for(let o=0;o<this.hashCount;o++){const s=this.Et(r,i,o);if(!this.At(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new tx(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.It)return;const t=e6(e),[r,i]=t6(t);for(let o=0;o<this.hashCount;o++){const s=this.Et(r,i,o);this.Rt(s)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ff extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lf{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Vf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lf(fe.min(),i,new Ot(Ie),Kr(),Re())}}class Vf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vf(r,t,Re(),Re(),Re())}}class Sy{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class n6{constructor(e,t){this.targetId=e,this.Vt=t}}class r6{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class i6{constructor(){this.St=0,this.Dt=s6(),this.Ct=Mn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Re(),t=Re(),r=Re();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new Vf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=s6()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Tme{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Kr(),this.zt=o6(),this.Wt=new Ot(Ie)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const s=o.target;if(by(s))if(0===i){const a=new ne(s.path);this.Yt(r,a,Vt.newNoDocument(a,fe.min()))}else he(1===i);else{const a=this.ie(r);if(a!==i){const c=this.re(e,a);0!==c&&(this.ee(r),this.Wt=this.Wt.insert(r,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ex.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(u,l,d){var h,p,w,I,x,k;const M={localCacheCount:l,existenceFilterCount:d.count},$=d.unchangedNames;return $&&(M.bloomFilter={applied:0===u,hashCount:null!==(h=$?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(I=null===(w=null===(p=$?.bits)||void 0===p?void 0:p.bitmap)||void 0===w?void 0:w.length)&&void 0!==I?I:0,padding:null!==(k=null===(x=$?.bits)||void 0===x?void 0:x.padding)&&void 0!==k?k:0}),M}(c,a,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:s=0},hashCount:a=0}=r;let c,u;try{c=ls(o).toUint8Array()}catch(l){if(l instanceof d$)return Hi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{u=new tx(c,s,a)}catch(l){return Hi(l instanceof Ff?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===u.It?1:i!==t-this.oe(e.targetId,u)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const s=this.Gt.ue(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.vt(a)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,s)=>{const a=this.se(s);if(a){if(o.current&&by(a.target)){const c=new ne(a.target.path);null!==this.jt.get(c)||this.ae(s,c)||this.Yt(s,c,Vt.newNoDocument(c,e))}o.Mt&&(t.set(s,o.Ot()),o.Ft())}});let r=Re();this.zt.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.se(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.jt.forEach((o,s)=>s.setReadTime(e));const i=new Lf(e,t,this.Wt,this.jt,r);return this.jt=Kr(),this.zt=o6(),this.Wt=new Ot(Ie),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new i6,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Lt(Ie),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Y("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new i6),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function o6(){return new Ot(ne.comparator)}function s6(){return new Ot(ne.comparator)}const Dme={asc:"ASCENDING",desc:"DESCENDING"},Ame={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xme={and:"AND",or:"OR"};class Sme{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nx(n,e){return n.useProto3Json||Ef(e)?e:{value:e}}function vl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Mme(n,e){return vl(n,e.toTimestamp())}function gn(n){return he(!!n),fe.fromTimestamp(function(e){const t=ta(e);return new Zt(t.seconds,t.nanos)}(n))}function rx(n,e){return(t=n,new Je(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function c6(n){const e=Je.fromString(n);return he(_6(e)),e}function Uf(n,e){return rx(n.databaseId,e.path)}function Do(n,e){const t=c6(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(l6(t))}function ix(n,e){return rx(n.databaseId,e)}function u6(n){const e=c6(n);return 4===e.length?Je.emptyPath():l6(e)}function Bf(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l6(n){return he(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function d6(n,e,t){return{name:Uf(n,e),fields:t.value.mapValue.fields}}function jf(n,e){let t;if(e instanceof _l)t={update:d6(n,e.key,e.value)};else if(e instanceof yl)t={delete:Uf(n,e.key)};else if(e instanceof fs)t={update:d6(n,e.key,e.data),updateMask:Vme(e.fieldMask)};else{if(!(e instanceof YA))return ue();t={verify:Uf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const s=o.transform;if(s instanceof gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof gc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof mc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof ml)return{fieldPath:o.field.canonicalString(),increment:s.gt};throw ue()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Mme(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ue()),t;var i}function ox(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Gt.updateTime(gn(i.updateTime)):void 0!==i.exists?Gt.exists(i.exists):Gt.none():Gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,s){let a=null;"setToServerValue"in s?(he("REQUEST_TIME"===s.setToServerValue),a=new gl):"appendMissingElements"in s?a=new gc(s.appendMissingElements.values||[]):"removeAllFromArray"in s?a=new mc(s.removeAllFromArray.values||[]):"increment"in s?a=new ml(o,s.increment):ue();const c=pn.fromServerFormat(s.fieldPath);return new Nf(c,a)}(n,i)):[];var i;if(e.update){const i=Do(n,e.update.name),o=new or({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Wr((e.updateMask.fieldPaths||[]).map(u=>pn.fromServerFormat(u)));return new fs(i,o,s,t,r)}return new _l(i,o,t,r)}if(e.delete){const i=Do(n,e.delete);return new yl(i,t)}if(e.verify){const i=Do(n,e.verify);return new YA(i,t)}return ue()}function f6(n,e){return{documents:[ix(n,e.path)]}}function sx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ix(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ix(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0!==c.length)return m6(yt.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:sa((l=u).field),direction:Rme(l.dir)};var l})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=nx(n,e.limit);var a,c;return null!==s&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),t}function p6(n){let e=u6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){he(1===r);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(l){const d=g6(l);return d instanceof yt&&$A(d)?d.getFilters():[d]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(l=>{return new hl(wl((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,Ef(d)?null:d}(t.limit));let c=null;var l;t.startAt&&(c=new oa((l=t.startAt).values||[],!!l.before));let u=null;return t.endAt&&(u=function(l){return new oa(l.values||[],!l.before)}(t.endAt)),function M$(n,e,t,r,i,o,s,a){return new ds(n,e,t,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function g6(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wl(e.unaryFilter.field);return Ke.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=wl(e.unaryFilter.field);return Ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wl(e.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wl(e.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):void 0!==n.fieldFilter?Ke.create(wl((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return yt.create(e.compositeFilter.filters.map(t=>g6(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ue()}}(e.compositeFilter.op))}(n):ue();var e}function Rme(n){return Dme[n]}function Fme(n){return Ame[n]}function Lme(n){return xme[n]}function sa(n){return{fieldPath:n.canonicalString()}}function wl(n){return pn.fromServerFormat(n.fieldPath)}function m6(n){return n instanceof Ke?function(e){if("=="===e.op){if(p$(e.value))return{unaryFilter:{field:sa(e.field),op:"IS_NAN"}};if(f$(e.value))return{unaryFilter:{field:sa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(p$(e.value))return{unaryFilter:{field:sa(e.field),op:"IS_NOT_NAN"}};if(f$(e.value))return{unaryFilter:{field:sa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(e.field),op:Fme(e.op),value:e.value}}}(n):n instanceof yt?function(e){const t=e.getFilters().map(r=>m6(r));return 1===t.length?t[0]:{compositeFilter:{op:Lme(e.op),filters:t}}}(n):ue()}function Vme(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _6(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ps{constructor(e,t,r,i,o=fe.min(),s=fe.min(),a=Mn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class y6{constructor(e){this.fe=e}}function v6(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:My(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Uf(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:vl(i,o.version.toTimestamp()),createTime:vl(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_c(e.version)};else{if(!e.isUnknownDocument())return ue();r.unknownDocument={path:t.path.toArray(),version:_c(e.version)}}var i,o;return r}function My(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _c(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yc(n){const e=new Zt(n.seconds,n.nanoseconds);return fe.fromTimestamp(e)}function vc(n,e){const t=(e.baseMutations||[]).map(o=>ox(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>ox(n.fe,o)),i=Zt.fromMillis(e.localWriteTimeMs);return new XA(e.batchId,i,t,r)}function $f(n){const e=yc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?yc(n.lastLimboFreeSnapshotVersion):fe.min();let r;var i;return void 0!==n.query.documents?(he(1===(i=n.query).documents.length),r=Or(pl(u6(i.documents[0])))):r=Or(p6(n.query)),new ps(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mn.fromBase64String(n.resumeToken))}function w6(n,e){const t=_c(e.snapshotVersion),r=_c(e.lastLimboFreeSnapshotVersion);let i;i=by(e.target)?f6(n.fe,e.target):sx(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ax(n){const e=p6({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Iy(e,e.limit,"L"):e}function cx(n,e){return new ZA(e.largestBatchId,ox(n.fe,e.overlayMutation))}function b6(n,e){const t=e.path.lastSegment();return[n,yr(e.path.popLast()),t]}function C6(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:_c(r.readTime),documentKey:yr(r.documentKey.path),largestBatchId:r.largestBatchId}}class Bme{getBundleMetadata(e,t){return E6(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:yc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return E6(e).put({bundleId:(r=t).id,createTime:_c(gn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return I6(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ax(i.bundledQuery),readTime:yc(i.readTime)};var i})}saveNamedQuery(e,t){return I6(e).put({name:(r=t).name,readTime:_c(gn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function E6(n){return Bn(n,"bundles")}function I6(n){return Bn(n,"namedQueries")}class Oy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Oy(e,t.uid||"")}getOverlay(e,t){return zf(e).get(b6(this.userId,t)).next(r=>r?cx(this.serializer,r):null)}getOverlays(e,t){const r=To();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new ZA(t,s);i.push(this.we(e,a))}),F.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(yr(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(zf(e).J("collectionPathOverlayIndex",a))}),F.waitFor(o)}getOverlaysForCollection(e,t,r){const i=To(),o=yr(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return zf(e).j("collectionPathOverlayIndex",s).next(a=>{for(const c of a){const u=cx(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=To();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zf(e).X({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{const d=cx(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}we(e,t){return zf(e).put(function(r,i,o){const[s,a,c]=b6(i,o.mutation.key);return{userId:i,collectionPath:a,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:jf(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function zf(n){return Bn(n,"documentOverlays")}class wc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(on(e.integerValue));else if("doubleValue"in e){const r=on(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),If(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ls(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?g$(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ue()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),ne.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function jme(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function T6(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=jme(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}wc.Ve=new wc;class $me{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=T6(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=T6(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zme{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Hme{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Hf{constructor(){this.je=new $me,this.ze=new zme(this.je),this.We=new Hme(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class bc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bc(this.indexId,this.documentKey,this.arrayValue,r)}}function aa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=D6(n.arrayValue,e.arrayValue),0!==t?t:(t=D6(n.directionalValue,e.directionalValue),0!==t?t:ne.comparator(n.documentKey,e.documentKey)))}function D6(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Gme{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){he(e.collectionGroup===this.collectionId);const t=NA(e);if(void 0!==t&&!this.en(t))return!1;const r=uc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const a=r[o];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[s++],a))return!1}++o}for(;o<r.length;++o)if(s>=this.Ye.length||!this.sn(this.Ye[s++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function A6(n){var e,t;if(he(n instanceof Ke||n instanceof yt),n instanceof Ke){if(n instanceof A$){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Ke.create(n.field,"==",o)))||[];return yt.create(i,"or")}return n}const r=n.filters.map(i=>A6(i));return yt.create(r,n.op)}function qme(n){if(0===n.getFilters().length)return[];const e=dx(A6(n));return he(x6(e)),ux(e)||lx(e)?[e]:e.getFilters()}function ux(n){return n instanceof Ke}function lx(n){return n instanceof yt&&$A(n)}function x6(n){return ux(n)||lx(n)||function(e){if(e instanceof yt&&jA(e)){for(const t of e.getFilters())if(!ux(t)&&!lx(t))return!1;return!0}return!1}(n)}function dx(n){if(he(n instanceof Ke||n instanceof yt),n instanceof Ke)return n;if(1===n.filters.length)return dx(n.filters[0]);const e=n.filters.map(r=>dx(r));let t=yt.create(e,n.op);return t=Py(t),x6(t)?t:(he(t instanceof yt),he(fl(t)),he(t.filters.length>1),t.filters.reduce((r,i)=>hx(r,i)))}function hx(n,e){let t;return he(n instanceof Ke||n instanceof yt),he(e instanceof Ke||e instanceof yt),t=n instanceof Ke?e instanceof Ke?yt.create([n,e],"and"):S6(n,e):e instanceof Ke?S6(e,n):function(r,i){if(he(r.filters.length>0&&i.filters.length>0),fl(r)&&fl(i))return I$(r,i.getFilters());const o=jA(r)?r:i,s=jA(r)?i:r,a=o.filters.map(c=>hx(c,s));return yt.create(a,"or")}(n,e),Py(t)}function S6(n,e){if(fl(e))return I$(e,n.getFilters());{const t=e.filters.map(r=>hx(n,r));return yt.create(t,"or")}}function Py(n){if(he(n instanceof Ke||n instanceof yt),n instanceof Ke)return n;const e=n.getFilters();if(1===e.length)return Py(e[0]);if(C$(n))return n;const t=e.map(i=>Py(i)),r=[];return t.forEach(i=>{i instanceof Ke?r.push(i):i instanceof yt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:yt.create(r,n.op)}class Wme{constructor(){this.rn=new fx}addToCollectionParentIndex(e,t){return this.rn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(si.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class fx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Lt(Je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lt(Je.comparator)).toArray()}}const ky=new Uint8Array(0);class Kme{constructor(e,t){this.user=e,this.databaseId=t,this.on=new fx,this.un=new hs(r=>fc(r),(r,i)=>Sf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:yr(i)};return M6(e).put(o)}return F.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Qj(t),""],!1,!0);return M6(e).j(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(Eo(s.parent))}return r})}addFieldIndex(e,t){const r=Ny(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var s;delete i.indexId;const o=r.add(i);if(t.indexState){const s=qf(e);return o.next(a=>{s.put(C6(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Ny(e),i=qf(e),o=Gf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Gf(e);let i=!0;const o=new Map;return F.forEach(this.cn(t),s=>this.an(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Re();const a=[];return F.forEach(o,(c,u)=>{var l;Y("IndexedDbIndexManager",`Using index ${l=c,`id=${l.indexId}|cg=${l.collectionGroup}|f=${l.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`} to execute ${fc(t)}`);const d=function($,J){const ae=NA(J);if(void 0===ae)return null;for(const ye of Cy($,ae.fieldPath))switch(ye.op){case"array-contains-any":return ye.value.arrayValue.values||[];case"array-contains":return[ye.value]}return null}(u,c),h=function($,J){const ae=new Map;for(const ye of uc(J))for(const Nt of Cy($,ye.fieldPath))switch(Nt.op){case"==":case"in":ae.set(ye.fieldPath.canonicalString(),Nt.value);break;case"not-in":case"!=":return ae.set(ye.fieldPath.canonicalString(),Nt.value),Array.from(ae.values())}return null}(u,c),p=function($,J){const ae=[];let ye=!0;for(const Nt of uc(J)){const Cn=0===Nt.kind?x$($,Nt.fieldPath,$.startAt):S$($,Nt.fieldPath,$.startAt);ae.push(Cn.value),ye&&(ye=Cn.inclusive)}return new oa(ae,ye)}(u,c),w=function($,J){const ae=[];let ye=!0;for(const Nt of uc(J)){const Cn=0===Nt.kind?S$($,Nt.fieldPath,$.endAt):x$($,Nt.fieldPath,$.endAt);ae.push(Cn.value),ye&&(ye=Cn.inclusive)}return new oa(ae,ye)}(u,c),I=this.hn(c,u,p),x=this.hn(c,u,w),k=this.ln(c,u,h),M=this.fn(c.indexId,d,I,p.inclusive,x,w.inclusive,k);return F.forEach(M,$=>r.H($,t.limit).next(J=>{J.forEach(ae=>{const ye=ne.fromSegments(ae.documentKey);s.has(ye)||(s=s.add(ye),a.push(ye))})}))}).next(()=>a)}return F.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:qme(yt.create(e.filters,"and")).map(r=>HA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,s,a){const c=(null!=t?t.length:1)*Math.max(r.length,o.length),u=c/(null!=t?t.length:1),l=[];for(let d=0;d<c;++d){const h=t?this.dn(t[d/u]):ky,p=this.wn(e,h,r[d%u],i),w=this._n(e,h,o[d%u],s),I=a.map(x=>this.wn(e,h,x,!0));l.push(...this.createRange(p,w,I))}return l}wn(e,t,r,i){const o=new bc(e,ne.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new bc(e,ne.empty(),t,r);return i?o.Je():o}an(e,t){const r=new Gme(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.cn(t);return F.forEach(i,o=>this.an(e,o).next(s=>{s?0!==r&&s.fields.length<function(a){let c=new Lt(pn.comparator),u=!1;for(const l of a.filters)for(const d of l.getFlattenedFilters())d.field.isKeyField()||("array-contains"===d.op||"array-contains-any"===d.op?u=!0:c=c.add(d.field));for(const l of a.orderBy)l.field.isKeyField()||(c=c.add(l.field));return c.size+(u?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Hf;for(const i of uc(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.He(i.kind);wc.Ve._e(o,s)}return r.Qe()}dn(e){const t=new Hf;return wc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Hf;return wc.Ve._e(hc(this.databaseId,t),r.He(function(i){const o=uc(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Hf);let o=0;for(const s of uc(e)){const a=r[o++];for(const c of i)if(this.yn(t,s.fieldPath)&&Af(a))i=this.pn(i,s,a);else{const u=c.He(s.kind);wc.Ve._e(a,u)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const c=new Hf;c.seed(a.Qe()),wc.Ve._e(s,c.He(t.kind)),o.push(c)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof Ke&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ny(e),i=qf(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const s=[];return F.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(u,l){const d=l?new bf(l.sequenceNumber,new si(yc(l.readTime),new ne(Eo(l.documentKey)),l.largestBatchId)):bf.empty(),h=u.fields.map(([p,w])=>new hy(pn.fromServerFormat(p),w));return new dy(u.indexId,u.collectionGroup,h,d)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ny(e),o=qf(e);return this.Tn(e).next(s=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>F.forEach(a,c=>o.put(C6(c.indexId,this.user,s,r)))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?F.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),F.forEach(a,c=>this.En(e,i,c).next(u=>{const l=this.An(o,c);return u.isEqual(l)?F.resolve():this.vn(e,o,c,u,l)}))))})}Rn(e,t,r,i){return Gf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Gf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Gf(e);let o=new Lt(aa);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(s,a)=>{o=o.add(new bc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}An(e,t){let r=new Lt(aa);const i=this.mn(t,e);if(null==i)return r;const o=NA(t);if(null!=o){const s=e.data.field(o.fieldPath);if(Af(s))for(const a of s.arrayValue.values||[])r=r.add(new bc(t.indexId,e.key,this.dn(a),i))}else r=r.add(new bc(t.indexId,e.key,ky,i));return r}vn(e,t,r,i,o){Y("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(a,c,u,l,d){const h=a.getIterator(),p=c.getIterator();let w=ll(h),I=ll(p);for(;w||I;){let x=!1,k=!1;if(w&&I){const M=u(w,I);M<0?k=!0:M>0&&(x=!0)}else null!=w?k=!0:x=!0;x?(l(I),I=ll(p)):k?(d(w),w=ll(h)):(w=ll(h),I=ll(p))}}(i,o,aa,a=>{s.push(this.Rn(e,t,r,a))},a=>{s.push(this.Pn(e,t,r,a))}),F.waitFor(s)}Tn(e){let t=1;return qf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>aa(s,a)).filter((s,a,c)=>!a||0!==aa(s,c[a-1]));const i=[];i.push(e);for(const s of r){const a=aa(s,e),c=aa(s,t);if(0===a)i[0]=e.Je();else if(a>0&&c<0)i.push(s),i.push(s.Je());else if(c>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ky,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ky,[]]))}return o}bn(e,t){return aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(O6)}getMinOffset(e,t){return F.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ue())).next(O6)}}function M6(n){return Bn(n,"collectionParents")}function Gf(n){return Bn(n,"indexEntries")}function Ny(n){return Bn(n,"indexConfiguration")}function qf(n){return Bn(n,"indexState")}function O6(n){he(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;RA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new si(e.readTime,e.documentKey,t)}const P6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vr(e,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function k6(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const c=r.X({range:s},(l,d,h)=>(a++,h.delete()));o.push(c.next(()=>{he(1===a)}));const u=[];for(const l of t.mutations){const d=i$(e,l.key.path,t.batchId);o.push(i.delete(d)),u.push(l.key)}return F.waitFor(o).next(()=>u)}function Ry(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ue();e=n.noDocument}return JSON.stringify(e).length}vr.DEFAULT_COLLECTION_PERCENTILE=10,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vr.DEFAULT=new vr(41943040,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vr.DISABLED=new vr(-1,0,0);class Fy{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){he(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Fy(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ca(e).X({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=bl(e),s=ca(e);return s.add({}).next(a=>{he("number"==typeof a);const c=new XA(a,t,r,i),u=function(h,p,w){const I=w.baseMutations.map(k=>jf(h.fe,k)),x=w.mutations.map(k=>jf(h.fe,k));return{userId:p,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:I,mutations:x}}(this.serializer,this.userId,c),l=[];let d=new Lt((h,p)=>Ie(h.canonicalString(),p.canonicalString()));for(const h of i){const p=i$(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(u)),l.push(o.put(p,Fge))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Vn[a]=c.keys()}),F.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return ca(e).get(t).next(r=>r?(he(r.userId===this.userId),vc(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?F.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ca(e).X({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(he(a.batchId>=r),o=vc(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ca(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ca(e).j("userMutationsIndex",t).next(r=>r.map(i=>vc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=py(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return bl(e).X({range:i},(s,a,c)=>{const[u,l,d]=s,h=Eo(l);if(u===this.userId&&t.path.isEqual(h))return ca(e).get(d).next(p=>{if(!p)throw ue();he(p.userId===this.userId),o.push(vc(this.serializer,p))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(Ie);const i=[];return t.forEach(o=>{const s=py(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=bl(e).X({range:a},(u,l,d)=>{const[h,p,w]=u,I=Eo(p);h===this.userId&&o.path.isEqual(I)?r=r.add(w):d.done()});i.push(c)}),F.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=py(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Lt(Ie);return bl(e).X({range:s},(c,u,l)=>{const[d,h,p]=c,w=Eo(h);d===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(p)):l.done()}).next(()=>this.Dn(e,a))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(ca(e).get(o).next(s=>{if(null===s)throw ue();he(s.userId===this.userId),r.push(vc(this.serializer,s))}))}),F.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return k6(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),F.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return bl(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){const c=Eo(o[1]);i.push(c)}else a.done()}).next(()=>{he(0===i.length)})})}containsKey(e,t){return N6(e,this.userId,t)}xn(e){return R6(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function N6(n,e,t){const r=py(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return bl(n).X({range:o,Y:!0},(a,c,u)=>{const[l,d,h]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function ca(n){return Bn(n,"mutations")}function bl(n){return Bn(n,"documentMutations")}function R6(n){return Bn(n,"mutationQueues")}class Cc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Cc(0)}static Mn(){return new Cc(-1)}}class Qme{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Cc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>fe.fromTimestamp(new Zt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Cl(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(he(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Cl(e).X((s,a)=>{const c=$f(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>F.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Cl(e).X((r,i)=>{const o=$f(i);t(o)})}$n(e){return F6(e).get("targetGlobalKey").next(t=>(he(null!==t),t))}On(e,t){return F6(e).put("targetGlobalKey",t)}Fn(e,t){return Cl(e).put(w6(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=fc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Cl(e).X({range:i,index:"queryTargetsIndex"},(s,a,c)=>{const u=$f(a);Sf(t,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=ua(e);return t.forEach(s=>{const a=yr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),F.waitFor(i)}removeMatchingKeys(e,t,r){const i=ua(e);return F.forEach(t,o=>{const s=yr(o.path);return F.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=ua(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ua(e);let o=Re();return i.X({range:r,Y:!0},(s,a,c)=>{const u=Eo(s[1]),l=new ne(u);o=o.add(l)}).next(()=>o)}containsKey(e,t){const r=yr(t.path),i=IDBKeyRange.bound([r],[Qj(r)],!1,!0);let o=0;return ua(e).X({index:"documentTargetsIndex",Y:!0,range:i},([s,a],c,u)=>{0!==s&&(o++,u.done())}).next(()=>o>0)}le(e,t){return Cl(e).get(t).next(r=>r?$f(r):null)}}function Cl(n){return Bn(n,"targets")}function F6(n){return Bn(n,"targetGlobal")}function ua(n){return Bn(n,"targetDocuments")}function L6([n,e],[t,r]){const i=Ie(n,t);return 0===i?Ie(e,r):i}class Yme{constructor(e){this.Ln=e,this.buffer=new Lt(L6),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();L6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class V6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Y("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,C(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Zs(r)?Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Js(r)}yield t.Qn(3e5)}))}}class Xme{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return F.resolve(ai.ct);const r=new Yme(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(P6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P6):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,s,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),PA()<=Qe.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${d} documents in `+(u-c)+`ms\nTotal Duration: ${u-l}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}}class Jme{constructor(e,t){this.db=e,this.garbageCollector=function U6(n,e){return new Xme(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Ly(e,r)}removeReference(e,t,r){return Ly(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ly(e,t)}Xn(e,t){return function(r,i){let o=!1;return R6(r).Z(s=>N6(r,s,i).next(a=>(a&&(o=!0),F.resolve(!a)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(s,a)=>{if(a<=t){const c=this.Xn(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,fe.min()),ua(e).delete([0,yr(s.path)])))});i.push(c)}}).next(()=>F.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ly(e,t)}Yn(e,t){const r=ua(e);let i,o=ai.ct;return r.X({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{0===s?(o!==ai.ct&&t(new ne(Eo(i)),o),o=u,i=c):o=ai.ct}).next(()=>{o!==ai.ct&&t(new ne(Eo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ly(n,e){return ua(n).put((r=n.currentSequenceNumber,{targetId:0,path:yr(e.path),sequenceNumber:r}));var r}class B6{constructor(){this.changes=new hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zme{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ec(e).put(r)}removeEntry(e,t,r){return Ec(e).delete(function(i,o){const s=i.path.toArray();return[s.slice(0,s.length-2),s[s.length-2],My(o),s[s.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Vt.newInvalidDocument(t);return Ec(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wf(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:Vt.newInvalidDocument(t)};return Ec(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wf(t))},(i,o)=>{r={document:this.ts(t,o),size:Ry(o)}}).next(()=>r)}getEntries(e,t){let r=Kr();return this.ns(e,t,(i,o)=>{const s=this.ts(i,o);r=r.insert(i,s)}).next(()=>r)}ss(e,t){let r=Kr(),i=new Ot(ne.comparator);return this.ns(e,t,(o,s)=>{const a=this.ts(o,s);r=r.insert(o,a),i=i.insert(o,Ry(s))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return F.resolve();let i=new Lt(H6);t.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(Wf(i.first()),Wf(i.last())),s=i.getIterator();let a=s.getNext();return Ec(e).X({index:"documentKeyIndex",range:o},(c,u,l)=>{const d=ne.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&H6(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.G(Wf(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),My(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ec(e).j(IDBKeyRange.bound(s,a,!0)).next(c=>{let u=Kr();for(const l of c){const d=this.ts(ne.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);d.isFoundDocument()&&(Of(t,d)||i.has(d.key))&&(u=u.insert(d.key,d))}return u})}getAllFromCollectionGroup(e,t,r,i){let o=Kr();const s=z6(t,r),a=z6(t,si.max());return Ec(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{const d=this.ts(ne.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new e_e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $6(e).get("remoteDocumentGlobalKey").next(t=>(he(!!t),t))}Zn(e,t){return $6(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function Ume(n,e){let t;if(e.document)t=function h6(n,e,t){const r=Do(n,e.name),i=gn(e.updateTime),o=e.createTime?gn(e.createTime):fe.min(),s=new or({mapValue:{fields:e.fields}}),a=Vt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ne.fromSegments(e.noDocument.path),i=yc(e.noDocument.readTime);t=Vt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue();{const r=ne.fromSegments(e.unknownDocument.path),i=yc(e.unknownDocument.version);t=Vt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Zt(r[0],r[1]);return fe.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(fe.min()))return r}return Vt.newInvalidDocument(e)}}function j6(n){return new Zme(n)}class e_e extends B6{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new hs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Lt((o,s)=>Ie(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.us.get(o);if(t.push(this.os.removeEntry(e,o,a.readTime)),s.isValidDocument()){const c=v6(this.os.serializer,s);i=i.add(o.path.popLast());const u=Ry(c);r+=u-a.size,t.push(this.os.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){const c=v6(this.os.serializer,s.convertToNoDocument(fe.min()));t.push(this.os.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,s)=>{this.us.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function $6(n){return Bn(n,"remoteDocumentGlobal")}function Ec(n){return Bn(n,"remoteDocumentsV14")}function Wf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function z6(n,e){const t=e.documentKey.path.toArray();return[n,My(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function H6(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Ie(t[o],r[o]),i)return i;return i=Ie(t.length,r.length),i||(i=Ie(t[t.length-2],r[r.length-2]),i||Ie(t[t.length-1],r[r.length-1]))}class t_e{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class G6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Rf(r.mutation,i,Wr.empty(),Zt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Re()){const i=To();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Pf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=To();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Re()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Kr();const s=kf(),a=kf();return t.forEach((c,u)=>{const l=r.get(u.key);i.has(u.key)&&(void 0===l||l.mutation instanceof fs)?o=o.insert(u.key,u):void 0!==l?(s.set(u.key,l.mutation.getFieldMask()),Rf(l.mutation,u,l.mutation.getFieldMask(),Zt.now())):s.set(u.key,Wr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),t.forEach((u,l)=>{var d;return a.set(u,new t_e(l,null!==(d=s.get(u))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=kf();let i=new Ot((s,a)=>s-a),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let l=r.get(c)||Wr.empty();l=a.applyToLocalView(u,l),r.set(c,l);const d=(i.get(a.batchId)||Re()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,d=L$();l.forEach(h=>{if(!o.has(h)){const p=q$(t.get(h),r.get(h));null!==p&&d.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ne.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(To());let a=-1,c=o;return s.next(u=>F.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?F.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Re())).next(l=>({batchId:a,changes:F$(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=Pf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Pf();return this.indexManager.getCollectionParents(e,i).next(s=>F.forEach(s,a=>{const c=(u=t,l=a.child(i),new ds(l,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,l;return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((l,d)=>{o=o.insert(l,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((a,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Vt.newInvalidDocument(u)))});let s=Pf();return o.forEach((a,c)=>{const u=i.get(a);void 0!==u&&Rf(u.mutation,c,Wr.empty(),Zt.now()),Of(t,c)&&(s=s.insert(a,c))}),s})}}class n_e{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return F.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:gn(r.createTime)}),F.resolve()}getNamedQuery(e,t){return F.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:ax(r.bundledQuery),readTime:gn(r.readTime)}),F.resolve();var r}}class r_e{constructor(){this.overlays=new Ot(ne.comparator),this.ls=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=To();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const i=To(),o=t.length+1,s=new ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ot((u,l)=>u-l);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=o.get(u.largestBatchId);null===l&&(l=To(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=To(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return F.resolve(a)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ZA(t,r));let o=this.ls.get(t);void 0===o&&(o=Re(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class px{constructor(){this.fs=new Lt(jn.ds),this.ws=new Lt(jn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new jn(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new jn(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new ne(new Je([])),r=new jn(t,e),i=new jn(t,e+1),o=[];return this.ws.forEachInRange([r,i],s=>{this.ys(s),o.push(s.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ne(new Je([])),r=new jn(t,e),i=new jn(t,e+1);let o=Re();return this.ws.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new jn(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class jn{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ne.comparator(e.key,t.key)||Ie(e.As,t.As)}static _s(e,t){return Ie(e.As,t.As)||ne.comparator(e.key,t.key)}}class i_e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Lt(jn.ds)}checkEmpty(e){return F.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const s=new XA(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.Rs=this.Rs.add(new jn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jn(t,0),i=new jn(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],s=>{const a=this.Ps(s.As);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(Ie);return t.forEach(i=>{const o=new jn(i,0),s=new jn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,s],a=>{r=r.add(a.As)})}),F.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;ne.isDocumentKey(o)||(o=o.child(""));const s=new jn(new ne(o),0);let a=new Lt(Ie);return this.Rs.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.As)),!0)},s),F.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){he(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return F.forEach(t.mutations,i=>{const o=new jn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new jn(t,0),i=this.Rs.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return F.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class o_e{constructor(e){this.Ds=e,this.docs=new Ot(ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let r=Kr();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Kr();const s=t.path,a=new ne(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||RA(Xj(l),r)<=0||(i.has(l.key)||Of(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ue()}Cs(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s_e(this)}getSize(e){return F.resolve(this.size)}}class s_e extends B6{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class a_e{constructor(e){this.persistence=e,this.xs=new hs(t=>fc(t),Sf),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Ns=0,this.ks=new px,this.targetCount=0,this.Ms=Cc.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),F.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Cc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Fn(t),F.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.xs.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.ks.containsKey(t))}}class gx{constructor(e,t){this.$s={},this.overlays={},this.Os=new ai(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new a_e(this),this.indexManager=new Wme,this.remoteDocumentCache=new o_e(r=>this.referenceDelegate.Ls(r)),this.serializer=new y6(t),this.qs=new n_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r_e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new i_e(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Y("MemoryPersistence","Starting transaction:",e);const i=new c_e(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return F.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class c_e extends Zj{constructor(e){super(),this.currentSequenceNumber=e}}class Vy{constructor(e){this.persistence=e,this.Qs=new px,this.js=null}static zs(e){return new Vy(e)}get Ws(){if(this.js)return this.js;throw ue()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),F.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Ws,r=>{const i=ne.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,fe.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return F.or([()=>F.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class u_e{constructor(e){this.serializer=e}O(e,t,r,i){const o=new fy("createOrUpgrade",t);var a;r<1&&i>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",r$,{unique:!0}),a.createObjectStore("documentMutations"),q6(e),function(a){a.createObjectStore("remoteDocuments")}(e));let s=F.resolve();return r<3&&i>=3&&(0!==r&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),q6(e)),s=s.next(()=>function(a){const c=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(a,c){return c.store("mutations").j().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",r$,{unique:!0});const l=c.store("mutations"),d=u.map(h=>l.put(h));return F.waitFor(d)})}(e,o))),s=s.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Ys(o))),r<6&&i>=6&&(s=s.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(s=s.next(()=>this.Zs(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ei(o))),r<11&&i>=11&&(s=s.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(a){const c=a.createObjectStore("documentOverlays",{keyPath:Kge});c.createIndex("collectionPathOverlayIndex",Qge,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Yge,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:Lge});c.createIndex("documentKeyIndex",Vge),c.createIndex("collectionGroupIndex",Uge)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:Hge}).createIndex("sequenceNumberIndex",Gge,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:qge}).createIndex("documentKeyIndex",Wge,{unique:!1})}(e))),s}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Ry(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>F.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",s).next(a=>F.forEach(a,c=>{he(c.userId===o.userId);const u=vc(this.serializer,c);return k6(e,o.userId,u).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((s,a)=>{const c=new Je(s),u=[0,yr(c)];o.push(t.get(u).next(l=>l?F.resolve():t.put({targetId:0,path:yr(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>F.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:zge});const r=t.store("collectionParents"),i=new fx,o=s=>{if(i.add(s)){const a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:yr(c)})}};return t.store("remoteDocuments").X({Y:!0},(s,a)=>{const c=new Je(s);return o(c.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([s,a,c],u)=>{const l=Eo(a);return o(l.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=$f(i),s=w6(this.serializer,o);return t.put(s)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,s)=>{const a=t.store("remoteDocumentsV14"),c=(u=s,u.document?new ne(Je.fromString(u.document.name).popFirst(5)):u.noDocument?ne.fromSegments(u.noDocument.path):u.unknownDocument?ne.fromSegments(u.unknownDocument.path):ue()).path.toArray();var u;const l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>F.waitFor(i))}si(e,t){const r=t.store("mutations"),i=j6(this.serializer),o=new gx(Vy.zs,this.serializer.fe);return r.j().next(s=>{const a=new Map;return s.forEach(c=>{var u;let l=null!==(u=a.get(c.userId))&&void 0!==u?u:Re();vc(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),F.forEach(a,(c,u)=>{const l=new Un(u),d=Oy.de(this.serializer,l),h=o.getIndexManager(l),p=Fy.de(l,this.serializer,h,o.referenceDelegate);return new G6(i,p,d,h).recalculateAndSaveOverlaysForDocumentKeys(new VA(t,ai.ct),c).next()})})}}function q6(n){n.createObjectStore("targetDocuments",{keyPath:jge}).createIndex("documentTargetsIndex",$ge,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bge,{unique:!0}),n.createObjectStore("targetGlobal")}const mx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _x{constructor(e,t,r,i,o,s,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=s,this.document=a,this.ri=u,this.oi=l,this.ui=d,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=h=>Promise.resolve(),!_x.D())throw new Q(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jme(this,i),this.di=t+"main",this.serializer=new y6(c),this.wi=new Gi(this.di,this.ui,new u_e(this.serializer)),this.Bs=new Qme(this.referenceDelegate,this.serializer),this.remoteDocumentCache=j6(this.serializer),this.qs=new Bme,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&fn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(V.FAILED_PRECONDITION,mx);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ai(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=C(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=C(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(C(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>By(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Zs(e))return Y("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Kf(e).get("owner").next(t=>F.resolve(this.Ri(t)))}Pi(e){return By(e).delete(this.clientId)}bi(){var e=this;return C(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Bn(r,"clientMetadata");return i.j().next(o=>{const s=e.Si(o,18e5),a=o.filter(c=>-1===s.indexOf(c));return F.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?F.resolve(!0):Kf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Q(V.FAILED_PRECONDITION,mx);return!1}}return!(!this.networkEnabled||!this.inForeground)||By(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Y("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return C(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new VA(t,ai.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>By(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Fy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Kme(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Oy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Y("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(s=this.ui)?Jge:14===s?a$:13===s?s$:12===s?Xge:11===s?o$:void ue();var s;let a;return this.wi.runTransaction(e,i,o,c=>(a=new VA(c,this.Os?this.Os.next():ai.ct),"readwrite-primary"===t?this.Ti(a).next(u=>!!u||this.Ei(a)).next(u=>{if(!u)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Q(V.FAILED_PRECONDITION,Jj);return r(a)}).next(u=>this.vi(a).next(()=>u)):this.Oi(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Oi(e){return Kf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Q(V.FAILED_PRECONDITION,mx)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kf(e).put("owner",t)}static D(){return Gi.D()}Ai(e){const t=Kf(e);return t.get("owner").next(r=>this.Ri(r)?(Y("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):F.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(function zoe(){return!function joe(){var n;const e=null===(n=Zm())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")})()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Y("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kf(n){return Bn(n,"owner")}function By(n){return Bn(n,"clientMetadata")}class vx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Re(),i=Re();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new vx(e,t.fromCache,r,i)}}class W6{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(O$(t))return F.resolve(null);let r=Or(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Iy(t,null,"F"),r=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Re(...o);return this.Ui.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ji(t,a);return this.zi(t,u,s,c.readTime)?this.Ki(e,Iy(t,null,"F")):this.Wi(e,u,t,c)}))})))}Gi(e,t,r,i){return O$(t)||i.isEqual(fe.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const s=this.ji(t,o);return this.zi(t,s,r,i)?this.Qi(e,t):(PA()<=Qe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),KA(t)),this.Wi(e,s,t,function Yj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(1e9===r?new Zt(t+1,0):new Zt(t,r));return new si(i,ne.empty(),e)}(i,-1)))})}ji(e,t){let r=new Lt(N$(e));return t.forEach((i,o)=>{Of(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return PA()<=Qe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",KA(t)),this.Ui.getDocumentsMatchingQuery(e,t,si.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class l_e{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Ot(Ie),this.Yi=new hs(o=>fc(o),Sf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G6(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function K6(n,e,t,r){return new l_e(n,e,t,r)}function Q6(n,e){return wx.apply(this,arguments)}function wx(){return wx=C(function*(n,e){const t=ie(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=Re();for(const u of i){s.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of o){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({er:u,removedBatchIds:s,addedBatchIds:a}))})})}),wx.apply(this,arguments)}function Y6(n){const e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function f_e(n,e){const t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Il(n,e,t){return bx.apply(this,arguments)}function bx(){return bx=C(function*(n,e,t){const r=ie(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zs(s))throw s;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),bx.apply(this,arguments)}function jy(n,e,t){const r=ie(n);let i=fe.min(),o=Re();return r.persistence.runTransaction("Execute query","readonly",s=>function(a,c,u){const l=ie(a),d=l.Yi.get(u);return void 0!==d?F.resolve(l.Ji.get(d)):l.Bs.getTargetData(c,u)}(r,s,Or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Hi.getDocumentsMatchingQuery(s,e,t?i:fe.min(),t?o:Re())).next(a=>(function e9(n,e,t){let r=n.Xi.get(e)||fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}(r,function k$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ir:o})))}class Dx{constructor(){this.activeTargetIds=function QA(){return gme}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r9{constructor(){this.Hr=new Dx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Dx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class m_e{Yr(e){}shutdown(){}}class i9{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hy=null;function xx(){return null===Hy?Hy=268435456+Math.round(2147483648*Math.random()):Hy++,"0x"+Hy.toString(16)}const __e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y_e{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const wr="WebChannelConnection";class v_e extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const s=xx(),a=this.To(e,t);Y("RestConnection",`Sending RPC '${e}' ${s}:`,a,r);const c={};return this.Eo(c,i,o),this.Ao(e,a,c,r).then(u=>(Y("RestConnection",`Received RPC '${e}' ${s}: `,u),u),u=>{throw Hi("RestConnection",`RPC '${e}' ${s} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,t,r,i,o,s){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${__e[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=xx();return new Promise((s,a)=>{const c=new vge;c.setWithCredentials(!0),c.listenOnce(mge.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case OA.NO_ERROR:const l=c.getResponseJson();Y(wr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case OA.TIMEOUT:Y(wr,`RPC '${e}' ${o} timed out`),a(new Q(V.DEADLINE_EXCEEDED,"Request time out"));break;case OA.HTTP_ERROR:const d=c.getStatus();if(Y(wr,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h?.error;if(p&&p.status&&p.message){const w=function(I){const x=I.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(x)>=0?x:V.UNKNOWN}(p.status);a(new Q(w,p.message))}else a(new Q(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(V.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Y(wr,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);Y(wr,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}Ro(e,t,r){const i=xx(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pge(),a=gge(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new yge({})),this.Eo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const l=o.join("");Y(wr,`Creating RPC '${e}' stream ${i}: ${l}`,c);const d=s.createWebChannel(l,c);let h=!1,p=!1;const w=new y_e({ro:x=>{p?Y(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(h||(Y(wr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Y(wr,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},oo:()=>d.close()}),I=(x,k,M)=>{x.listen(k,$=>{try{M($)}catch(J){setTimeout(()=>{throw J},0)}})};return I(d,ly.EventType.OPEN,()=>{p||Y(wr,`RPC '${e}' stream ${i} transport opened.`)}),I(d,ly.EventType.CLOSE,()=>{p||(p=!0,Y(wr,`RPC '${e}' stream ${i} transport closed`),w.wo())}),I(d,ly.EventType.ERROR,x=>{p||(p=!0,Hi(wr,`RPC '${e}' stream ${i} transport errored:`,x),w.wo(new Q(V.UNAVAILABLE,"The operation could not be completed")))}),I(d,ly.EventType.MESSAGE,x=>{var k;if(!p){const M=x.data[0];he(!!M);const J=M.error||(null===(k=M[0])||void 0===k?void 0:k.error);if(J){Y(wr,`RPC '${e}' stream ${i} received error:`,J);const ae=J.status;let ye=function(Cn){const Ai=wn[Cn];if(void 0!==Ai)return J$(Ai)}(ae),Nt=J.message;void 0===ye&&(ye=V.INTERNAL,Nt="Unknown error status: "+ae+" with message "+J.message),p=!0,w.wo(new Q(ye,Nt)),d.close()}else Y(wr,`RPC '${e}' stream ${i} received:`,M),w._o(M)}}),I(a,_ge.STAT_EVENT,x=>{x.stat===Hj.PROXY?Y(wr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Hj.NOPROXY&&Y(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.fo()},0),w}}function Gy(){return typeof document<"u"?document:null}function Yf(n){return new Sme(n,!0)}class Sx{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class s9{constructor(e,t,r,i,o,s,a,c){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Sx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return C(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return C(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return C(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===V.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Q(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(C(function*(){e.state=0,e.start()}))}tu(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w_e extends s9{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Pme(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:ue(),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(he(void 0===u||"string"==typeof u),Mn.fromBase64String(u||"")):(he(void 0===u||u instanceof Uint8Array),Mn.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=void 0===c.code?V.UNKNOWN:J$(c.code);return new Q(u,c.message||"")}(s);t=new r6(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Do(n,r.document.name),o=gn(r.document.updateTime),s=r.document.createTime?gn(r.document.createTime):fe.min(),a=new or({mapValue:{fields:r.document.fields}}),c=Vt.newFoundDocument(i,o,s,a);t=new Sy(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Do(n,r.document),o=r.readTime?gn(r.readTime):fe.min(),s=Vt.newNoDocument(i,o);t=new Sy([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Do(n,r.document);t=new Sy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ue();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Eme(i,o);t=new n6(r.targetId,s)}}var c;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?gn(o.readTime):fe.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Bf(this.serializer),t.addTarget=function(i,o){let s;const a=o.target;if(s=by(a)?{documents:f6(i,a)}:{query:sx(i,a)},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=a6(i,o.resumeToken);const c=nx(i,o.expectedCount);null!==c&&(s.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){s.readTime=vl(i,o.snapshotVersion.toTimestamp());const c=nx(i,o.expectedCount);null!==c&&(s.expectedCount=c)}return s}(this.serializer,e);const r=function Nme(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Bf(this.serializer),t.removeTarget=e,this.Wo(t)}}class b_e extends s9{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function kme(n,e){return n&&n.length>0?(he(void 0!==e),n.map(t=>function(r,i){let o=gn(r.updateTime?r.updateTime:i);return o.isEqual(fe.min())&&(o=gn(i)),new vme(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.cu(r,t)}return he(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Bf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jf(this.serializer,r))};this.Wo(t)}}class C_e extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Q(V.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(V.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.vo(e,t,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(V.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class I_e{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fn(t),this.mu=!1):Y("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class T_e{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(a=>{r.enqueueAndForget(C(function*(){var c;la(s)&&(Y("RemoteStore","Restarting streams for network reachability change."),yield(c=C(function*(u){const l=ie(u);l.vu.add(4),yield Tl(l),l.bu.set("Unknown"),l.vu.delete(4),yield Xf(l)}),function(u){return c.apply(this,arguments)})(s))}))}),this.bu=new I_e(r,i)}}function Xf(n){return Ox.apply(this,arguments)}function Ox(){return Ox=C(function*(n){if(la(n))for(const e of n.Ru)yield e(!0)}),Ox.apply(this,arguments)}function Tl(n){return Px.apply(this,arguments)}function Px(){return Px=C(function*(n){for(const e of n.Ru)yield e(!1)}),Px.apply(this,arguments)}function qy(n,e){const t=ie(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Rx(t)?Nx(t):Al(t).Ko()&&kx(t,e))}function Jf(n,e){const t=ie(n),r=Al(t);t.Au.delete(e),r.Ko()&&a9(t,e),0===t.Au.size&&(r.Ko()?r.jo():la(t)&&t.bu.set("Unknown"))}function kx(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Al(n).su(e)}function a9(n,e){n.Vu.qt(e),Al(n).iu(e)}function Nx(n){n.Vu=new Tme({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Al(n).start(),n.bu.gu()}function Rx(n){return la(n)&&!Al(n).Uo()&&n.Au.size>0}function la(n){return 0===ie(n).vu.size}function c9(n){n.Vu=void 0}function D_e(n){return Fx.apply(this,arguments)}function Fx(){return Fx=C(function*(n){n.Au.forEach((e,t)=>{kx(n,e)})}),Fx.apply(this,arguments)}function A_e(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=C(function*(n,e){c9(n),Rx(n)?(n.bu.Iu(e),Nx(n)):n.bu.set("Unknown")}),Lx.apply(this,arguments)}function x_e(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=C(function*(n,e,t){if(n.bu.set("Online"),e instanceof r6&&2===e.state&&e.cause)try{yield(r=C(function*(i,o){const s=o.cause;for(const a of o.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wy(n,r)}else if(e instanceof Sy?n.Vu.Ht(e):e instanceof n6?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(fe.min()))try{const r=yield Y6(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const s=i.Vu.ce(o);return s.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(c);u&&i.Au.set(c,u.withResumeToken(a.resumeToken,o))}}),s.targetMismatches.forEach((a,c)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(Mn.EMPTY_BYTE_STRING,u.snapshotVersion)),a9(i,a);const l=new ps(u.target,a,c,u.sequenceNumber);kx(i,l)}),i.remoteSyncer.applyRemoteEvent(s)}(n,t))}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),yield Wy(n,r)}var r}),Vx.apply(this,arguments)}function Wy(n,e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=C(function*(n,e,t){if(!Zs(e))throw e;n.vu.add(1),yield Tl(n),n.bu.set("Offline"),t||(t=()=>Y6(n.localStore)),n.asyncQueue.enqueueRetryable(C(function*(){Y("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Xf(n)}))}),Ux.apply(this,arguments)}function u9(n,e){return e().catch(t=>Wy(n,t,e))}function Dl(n){return Bx.apply(this,arguments)}function Bx(){return Bx=C(function*(n){const e=ie(n),t=da(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;S_e(e);)try{const i=yield f_e(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,M_e(e,i)}catch(i){yield Wy(e,i)}l9(e)&&d9(e)}),Bx.apply(this,arguments)}function S_e(n){return la(n)&&n.Eu.length<10}function M_e(n,e){n.Eu.push(e);const t=da(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function l9(n){return la(n)&&!da(n).Uo()&&n.Eu.length>0}function d9(n){da(n).start()}function O_e(n){return jx.apply(this,arguments)}function jx(){return jx=C(function*(n){da(n).hu()}),jx.apply(this,arguments)}function P_e(n){return $x.apply(this,arguments)}function $x(){return $x=C(function*(n){const e=da(n);for(const t of n.Eu)e.uu(t.mutations)}),$x.apply(this,arguments)}function k_e(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=C(function*(n,e,t){const r=n.Eu.shift(),i=JA.from(r,e,t);yield u9(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dl(n)}),zx.apply(this,arguments)}function N_e(n,e){return Hx.apply(this,arguments)}function Hx(){return Hx=C(function*(n,e){var t;e&&da(n).ou&&(yield(t=C(function*(r,i){if(function X$(n){switch(n){default:return ue();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}(o=i.code)&&o!==V.ABORTED){const s=r.Eu.shift();da(r).Qo(),yield u9(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Dl(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),l9(n)&&d9(n)}),Hx.apply(this,arguments)}function h9(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=C(function*(n,e){const t=ie(n);t.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=la(t);t.vu.add(3),yield Tl(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Xf(t)}),Gx.apply(this,arguments)}function Wx(){return Wx=C(function*(n,e){const t=ie(n);e?(t.vu.delete(2),yield Xf(t)):e||(t.vu.add(2),yield Tl(t),t.bu.set("Unknown"))}),Wx.apply(this,arguments)}function Al(n){return n.Su||(n.Su=function(e,t,r){const i=ie(e);return i.fu(),new w_e(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:D_e.bind(null,n),ao:A_e.bind(null,n),nu:x_e.bind(null,n)}),n.Ru.push(function(){var e=C(function*(t){t?(n.Su.Qo(),Rx(n)?Nx(n):n.bu.set("Unknown")):(yield n.Su.stop(),c9(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function da(n){return n.Du||(n.Du=function(e,t,r){const i=ie(e);return i.fu(),new b_e(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:O_e.bind(null,n),ao:N_e.bind(null,n),au:P_e.bind(null,n),cu:k_e.bind(null,n)}),n.Ru.push(function(){var e=C(function*(t){t?(n.Du.Qo(),yield Dl(n)):(yield n.Du.stop(),n.Eu.length>0&&(Y("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Kx{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new Kx(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Q(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xl(n,e){if(fn("AsyncQueue",`${e}: ${n}`),Zs(n))return new Q(V.UNAVAILABLE,`${e}: ${n}`);throw n}class Sl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=Pf(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new Sl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class f9{constructor(){this.Cu=new Ot(ne.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ue():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ml{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new Ml(e,t,Sl.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class R_e{constructor(){this.Nu=void 0,this.listeners=[]}}class F_e{constructor(){this.queries=new hs(e=>P$(e),Mf),this.onlineState="Unknown",this.ku=new Set}}function Qx(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=C(function*(n,e){const t=ie(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new R_e),i)try{o.Nu=yield t.onListen(r)}catch(s){const a=xl(s,`Initialization of query '${KA(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&Zx(t)}),Yx.apply(this,arguments)}function Xx(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=C(function*(n,e){const t=ie(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Jx.apply(this,arguments)}function L_e(n,e){const t=ie(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.listeners)a.$u(i)&&(r=!0);s.Nu=i}}r&&Zx(t)}function V_e(n,e,t){const r=ie(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function Zx(n){n.ku.forEach(e=>{e.next()})}class eS{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class m9{constructor(e){this.key=e}}class _9{constructor(e){this.key=e}}class y9{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Re(),this.mutatedKeys=Re(),this.tc=N$(e),this.ec=new Sl(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new f9,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),p=Of(this.query,d)?d:null,w=!!h&&this.mutatedKeys.has(h.key),I=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;h&&p?h.data.isEqual(p.data)?w!==I&&(r.track({type:3,doc:p}),x=!0):this.rc(h,p)||(r.track({type:2,doc:p}),x=!0,(c&&this.tc(p,c)>0||u&&this.tc(p,u)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),x=!0):h&&!p&&(r.track({type:1,doc:h}),x=!0,(c||u)&&(a=!0)),x&&(p?(s=s.add(p),o=I?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const l="F"===this.query.limitType?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ec:s,ic:r,zi:a,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((u,l)=>function(d,h){const p=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return p(d)-p(h)}(u.type,l.type)||this.tc(u.doc,l.doc)),this.oc(r);const s=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,c=a!==this.Xu;return this.Xu=a,0!==o.length||c?{snapshot:new Ml(this.query,e.ec,i,o,e.mutatedKeys,0===a,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new f9,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Re(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new _9(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new m9(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Re();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ml.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class j_e{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $_e{constructor(e){this.key=e,this.fc=!1}}class z_e{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new hs(a=>P$(a),Mf),this._c=new Map,this.mc=new Set,this.gc=new Ot(ne.comparator),this.yc=new Map,this.Ic=new px,this.Tc={},this.Ec=new Map,this.Ac=Cc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function H_e(n,e){return tS.apply(this,arguments)}function tS(){return tS=C(function*(n,e){const t=function IS(n){const e=ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z_e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W_e.bind(null,e),e.dc.nu=L_e.bind(null,e.eventManager),e.dc.Pc=V_e.bind(null,e.eventManager),e}(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const s=yield function El(n,e){const t=ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.Bs.allocateTargetId(r).next(s=>(i=new ps(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Or(e)),a=t.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield function nS(n,e,t,r,i){return rS.apply(this,arguments)}(t,e,r,"current"===a,s.resumeToken),t.isPrimaryClient&&qy(t.remoteStore,s)}return i}),tS.apply(this,arguments)}function rS(){return rS=C(function*(n,e,t,r,i){n.Rc=(d,h,p)=>{return(w=C(function*(I,x,k,M){let $=x.view.sc(k);$.zi&&($=yield jy(I.localStore,x.query,!1).then(({documents:ye})=>x.view.sc(ye,$)));const J=M&&M.targetChanges.get(x.targetId),ae=x.view.applyChanges($,I.isPrimaryClient,J);return fS(I,x.targetId,ae.cc),ae.snapshot}),function(I,x,k,M){return w.apply(this,arguments)})(n,d,h,p);var w};const o=yield jy(n.localStore,e,!0),s=new y9(e,o.ir),a=s.sc(o.documents),c=Vf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=s.applyChanges(a,n.isPrimaryClient,c);fS(n,t,u.cc);const l=new j_e(e,t,s);return n.wc.set(e,l),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),u.snapshot}),rS.apply(this,arguments)}function G_e(n,e){return iS.apply(this,arguments)}function iS(){return iS=C(function*(n,e){const t=ie(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!Mf(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Il(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jf(t.remoteStore,r.targetId),Ol(t,r.targetId)}).catch(Js))):(Ol(t,r.targetId),yield Il(t.localStore,r.targetId,!0))}),iS.apply(this,arguments)}function oS(){return oS=C(function*(n,e,t){const r=TS(n);try{const i=yield function(o,s){const a=ie(o),c=Zt.now(),u=s.reduce((h,p)=>h.add(p.key),Re());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Kr(),w=Re();return a.Zi.getEntries(h,u).next(I=>{p=I,p.forEach((x,k)=>{k.isValidDocument()||(w=w.add(x))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,p)).next(I=>{l=I;const x=[];for(const k of s){const M=bme(k,l.get(k.key).overlayedDocument);null!=M&&x.push(new fs(k.key,M,y$(M.value.mapValue),Gt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,c,x,s)}).next(I=>{d=I;const x=I.applyToLocalDocumentSet(l,w);return a.documentOverlayCache.saveOverlays(h,I.batchId,x)})}).then(()=>({batchId:d.batchId,changes:F$(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,a){let c=o.Tc[o.currentUser.toKey()];c||(c=new Ot(Ie)),c=c.insert(s,a),o.Tc[o.currentUser.toKey()]=c}(r,i.batchId,t),yield gs(r,i.changes),yield Dl(r.remoteStore)}catch(i){const o=xl(i,"Failed to persist write");t.reject(o)}}),oS.apply(this,arguments)}function v9(n,e){return sS.apply(this,arguments)}function sS(){return sS=C(function*(n,e){const t=ie(n);try{const r=yield function h_e(n,e){const t=ie(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(t.Bs.removeMatchingKeys(o,l.removedDocuments,d).next(()=>t.Bs.addMatchingKeys(o,l.addedDocuments,d)));let p=h.withSequenceNumber(o.currentSequenceNumber);var w,I,x;null!==e.targetMismatches.get(d)?p=p.withResumeToken(Mn.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(d,p),I=p,x=l,(0===(w=h).resumeToken.approximateByteSize()||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(o,p))});let c=Kr(),u=Re();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(function X6(n,e,t){let r=Re(),i=Re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Kr();return t.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{nr:s,sr:i}})}(o,s,e.documentUpdates).next(l=>{c=l.nr,u=l.sr})),!r.isEqual(fe.min())){const l=t.Bs.getLastRemoteSnapshotVersion(o).next(d=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.yc.get(o);s&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.fc=!0:i.modifiedDocuments.size>0?he(s.fc):i.removedDocuments.size>0&&(he(s.fc),s.fc=!1))}),yield gs(t,r,e)}catch(r){yield Js(r)}}),sS.apply(this,arguments)}function w9(n,e,t){const r=ie(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,s)=>{const a=s.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(o,s){const a=ie(o);a.onlineState=s;let c=!1;a.queries.forEach((u,l)=>{for(const d of l.listeners)d.Mu(s)&&(c=!0)}),c&&Zx(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function W_e(n,e,t){return aS.apply(this,arguments)}function aS(){return aS=C(function*(n,e,t){const r=ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let s=new Ot(ne.comparator);s=s.insert(o,Vt.newNoDocument(o,fe.min()));const a=Re().add(o),c=new Lf(fe.min(),new Map,new Ot(Ie),s,a);yield v9(r,c),r.gc=r.gc.remove(o),r.yc.delete(e),pS(r)}else yield Il(r.localStore,e,!1).then(()=>Ol(r,e,t)).catch(Js)}),aS.apply(this,arguments)}function K_e(n,e){return cS.apply(this,arguments)}function cS(){return cS=C(function*(n,e){const t=ie(n),r=e.batch.batchId;try{const i=yield function d_e(n,e){const t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(s,a,c,u){const l=c.batch,d=l.keys();let h=F.resolve();return d.forEach(p=>{h=h.next(()=>u.getEntry(a,p)).next(w=>{const I=c.docVersions.get(p);he(null!==I),w.version.compareTo(I)<0&&(l.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),h.next(()=>s.mutationQueue.removeMutationBatch(a,l))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let a=Re();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(a=a.add(s.batch.mutations[c].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);hS(t,r,null),dS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield gs(t,i)}catch(i){yield Js(i)}}),cS.apply(this,arguments)}function Q_e(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=C(function*(n,e,t){const r=ie(n);try{const i=yield function(o,s){const a=ie(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,s).next(l=>(he(null!==l),u=l.keys(),a.mutationQueue.removeMutationBatch(c,l))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);hS(r,e,t),dS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield gs(r,i)}catch(i){yield Js(i)}}),uS.apply(this,arguments)}function dS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function hS(n,e,t){const r=ie(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ol(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||b9(n,r)})}function b9(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Jf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),pS(n))}function fS(n,e,t){for(const r of t)r instanceof m9?(n.Ic.addReference(r.key,e),X_e(n,r)):r instanceof _9?(Y("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||b9(n,r.key)):ue()}function X_e(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Y("SyncEngine","New document in limbo: "+t),n.mc.add(r),pS(n))}function pS(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new ne(Je.fromString(e)),r=n.Ac.next();n.yc.set(r,new $_e(t)),n.gc=n.gc.insert(t,r),qy(n.remoteStore,new ps(Or(pl(t.path)),r,"TargetPurposeLimboResolution",ai.ct))}}function gs(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=C(function*(n,e,t){const r=ie(n),i=[],o=[],s=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,c)=>{s.push(r.Rc(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const l=vx.Li(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.dc.nu(i),yield(a=C(function*(c,u){const l=ie(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(u,h=>F.forEach(h.Fi,p=>l.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>F.forEach(h.Bi,p=>l.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Zs(d))throw d;Y("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const p=l.Ji.get(h),I=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);l.Ji=l.Ji.insert(h,I)}}}),function(c,u){return a.apply(this,arguments)})(r.localStore,o))}),gS.apply(this,arguments)}function J_e(n,e){return mS.apply(this,arguments)}function mS(){return mS=C(function*(n,e){const t=ie(n);if(!t.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=yield Q6(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(s=>{s.forEach(a=>{a.reject(new Q(V.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gs(t,r.er)}var i}),mS.apply(this,arguments)}function Z_e(n,e){const t=ie(n),r=t.yc.get(e);if(r&&r.fc)return Re().add(r.key);{let i=Re();const o=t._c.get(e);if(!o)return i;for(const s of o){const a=t.wc.get(s);i=i.unionWith(a.view.nc)}return i}}function TS(n){const e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K_e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q_e.bind(null,e),e}class Zf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return C(function*(){t.serializer=Yf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return K6(this.persistence,new W6,e.initialUser,this.serializer)}createPersistence(e){return new gx(Vy.zs,this.serializer)}createSharedClientState(e){return new r9}terminate(){var e=this;return C(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class I9 extends Zf{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return C(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield TS(r.Vc.syncEngine),yield Dl(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return K6(this.persistence,new W6,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new V6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Nge(t,this.persistence);return new kge(e.asyncQueue,r)}createPersistence(e){const t=function yx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new _x(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,function o9(){return typeof window<"u"?window:null}(),Gy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new r9}}class Pl{initialize(e,t){var r=this;return C(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>w9(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=J_e.bind(null,r.syncEngine),yield function qx(n,e){return Wx.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new F_e}createDatastore(e){const t=Yf(e.databaseInfo.databaseId),r=new v_e(e.databaseInfo);return new C_e(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=a=>w9(this.syncEngine,a,0),s=i9.D()?new i9:new m_e,new T_e(t,r,i,o,s);var t,r,i,o,s}createSyncEngine(e,t){return function(r,i,o,s,a,c,u){const l=new z_e(r,i,o,s,a,c);return u&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=C(function*(t){const r=ie(t);Y("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Tl(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class Ky{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hye{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Un.UNAUTHENTICATED,this.clientId=Kj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=C(function*(a){Y("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(Y("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return C(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(C(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=xl(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Qy(n,e){return DS.apply(this,arguments)}function DS(){return DS=C(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=C(function*(o){r.isEqual(o)||(yield Q6(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),DS.apply(this,arguments)}function AS(n,e){return xS.apply(this,arguments)}function xS(){return xS=C(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function SS(n){return MS.apply(this,arguments)}(n);Y("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>h9(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>h9(e.remoteStore,o)),n._onlineComponents=e}),xS.apply(this,arguments)}function A9(n){return"FirebaseError"===n.name?n.code===V.FAILED_PRECONDITION||n.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function MS(){return MS=C(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!A9(t))throw t;Hi("Error using user provided cache. Falling back to memory cache: "+t),yield Qy(n,new Zf)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),yield Qy(n,new Zf);return n._offlineComponents}),MS.apply(this,arguments)}function Yy(n){return OS.apply(this,arguments)}function OS(){return OS=C(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),yield AS(n,n._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),yield AS(n,new Pl))),n._onlineComponents}),OS.apply(this,arguments)}function kl(n){return kS.apply(this,arguments)}function kS(){return kS=C(function*(n){const e=yield Yy(n),t=e.eventManager;return t.onListen=H_e.bind(null,e.syncEngine),t.onUnlisten=G_e.bind(null,e.syncEngine),t}),kS.apply(this,arguments)}function k9(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const N9=new Map;function NS(n,e,t){if(!t)throw new Q(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function R9(n){if(!ne.isDocumentKey(n))throw new Q(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F9(n){if(ne.isDocumentKey(n))throw new Q(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ue()}function Ye(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jy(n);throw new Q(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class V9{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Q(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Q(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function bye(n,e,t,r){if(!0===e&&!0===r)throw new Q(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=k9(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ep{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V9({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Q(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V9(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bge;switch(t.type){case"firstParty":return new Tge(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Q(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=N9.get(e);t&&(Y("ComponentProvider","Removing Datastore"),N9.delete(e),t.terminate())}(this),Promise.resolve()}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class sr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sr(this.firestore,e,this._query)}}class Ao extends sr{constructor(e,t,r){super(e,t,pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ne(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function Eye(n,e,...t){if(n=Ht(n),NS("collection","path",e),n instanceof ep){const r=Je.fromString(e,...t);return F9(r),new Ao(n,null,r)}{if(!(n instanceof mn||n instanceof Ao))throw new Q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return F9(r),new Ao(n.firestore,null,r)}}function U9(n,e,...t){if(n=Ht(n),1===arguments.length&&(e=Kj.A()),NS("doc","path",e),n instanceof ep){const r=Je.fromString(e,...t);return R9(r),new mn(n,null,new ne(r))}{if(!(n instanceof mn||n instanceof Ao))throw new Q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return R9(r),new mn(n.firestore,n instanceof Ao?n.converter:null,new ne(r))}}class Iye{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Sx(this,"async_queue_retry"),this.Xc=()=>{const t=Gy();t&&Y("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Gy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Gy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Sn;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return C(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Zs(t))throw t;Y("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,fn("INTERNAL UNHANDLED ERROR: ",function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),s}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Kx.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&ue()}verifyOperationInProgress(){}sa(){var e=this;return C(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Ut extends ep{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Iye,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||j9(this),this._firestoreClient.terminate()}}function Dye(n,e){const r="string"==typeof n?n:e||"(default)",i=js("object"==typeof n?n:Dh(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=nE("firestore");o&&function Cye(n,e,t,r={}){var i;const o=(n=Ye(n,ep))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Un.MOCK_USER;else{a=MU(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Q(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Un(u)}n._authCredentials=new Cge(new qj(a,c))}}(i,...o)}return i}function bn(n){return n._firestoreClient||j9(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function j9(n){var e,t,r;const i=n._freezeSettings(),o=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new eme(n._databaseId,a,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,k9(u.experimentalLongPollingOptions),u.useFetchStreams));var a,u;n._firestoreClient=new hye(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Aye(n,e){!function z9(n){if(n._initialized||n._terminated)throw new Q(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(n=Ye(n,Ut));const t=bn(n);if(t._uninitializedComponentsProvider)throw new Q(V.FAILED_PRECONDITION,"SDK cache is already specified.");Hi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Pl;return function $9(n,e,t){const r=new Sn;return n.asyncQueue.enqueue(C(function*(){try{yield Qy(n,t),yield AS(n,e),r.resolve()}catch(i){const o=i;if(!A9(o))throw o;Hi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}(t,i,new I9(i,r.cacheSizeBytes,e?.forceOwnership))}class Ic{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ic(Mn.fromBase64String(e))}catch(t){throw new Q(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ic(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Q(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class FS{constructor(e){this._methodName=e}}class LS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}const Sye=/^__.*__$/;class Mye{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}}class H9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function G9(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Zy{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Zy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return tv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(G9(this.ca)&&Sye.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Oye{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yf(e)}ya(e,t,r,i=!1){return new Zy({ca:e,methodName:t,ga:r,path:pn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(n){const e=n._freezeSettings(),t=Yf(n._databaseId);return new Oye(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VS(n,e,t,r,i,o={}){const s=n.ya(o.merge||o.mergeFields?2:0,e,t,i);BS("Data must be an object, but it was:",s,r);const a=Y9(r,s);let c,u;if(o.merge)c=new Wr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const l=[];for(const d of o.mergeFields){const h=rp(e,d,t);if(!s.contains(h))throw new Q(V.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);J9(l,h)||l.push(h)}c=new Wr(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new Mye(new or(a),c,u)}class np extends FS{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof np}}function Tc(n,e){if(X9(n=Ht(n)))return BS("Unsupported field value:",e,n),Y9(n,e);if(n instanceof FS)return function(t,r){if(!G9(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const s of t){let a=Tc(s,r.wa(o));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=Ht(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return B$(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Zt.fromDate(t);return{timestampValue:vl(r.serializer,i)}}if(t instanceof Zt){const i=new Zt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vl(r.serializer,i)}}if(t instanceof LS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ic)return{bytesValue:a6(r.serializer,t._byteString)};if(t instanceof mn){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Jy(t)}`)}(n,e)}function Y9(n,e){const t={};return u$(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ea(n,(r,i)=>{const o=Tc(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function X9(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zt||n instanceof LS||n instanceof Ic||n instanceof mn||n instanceof FS)}function BS(n,e,t){if(!X9(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Jy(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function rp(n,e,t){if((e=Ht(e))instanceof Nl)return e._internalPath;if("string"==typeof e)return ev(n,e);throw tv("Field path arguments must be of type string or ",n,!1,void 0,t)}const Rye=new RegExp("[~\\*/\\[\\]]");function ev(n,e,t){if(e.search(Rye)>=0)throw tv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw tv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tv(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Q(V.INVALID_ARGUMENT,a+n+c)}function J9(n,e){return n.some(t=>t.isEqual(e))}class jS{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fye extends jS{data(){return super.data()}}function nv(n,e){return"string"==typeof e?ev(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}class $S{}class Lye extends $S{}function Vye(n,e,...t){let r=[];e instanceof $S&&r.push(e),r=r.concat(t),function(i){const o=i.filter(a=>a instanceof Fl).length,s=i.filter(a=>a instanceof ip).length;if(o>1||o>0&&s>0)throw new Q(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class ip extends Lye{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ip(e,t,r)}_apply(e){const t=this._parse(e);return rz(e._query,t),new sr(e.firestore,e.converter,WA(e._query,t))}_parse(e){const t=Rl(e.firestore);return function(i,o,s,a,c,u,l){let d;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Q(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){nz(l,u);const h=[];for(const p of l)h.push(tz(a,i,p));d={arrayValue:{values:h}}}else d=tz(a,i,l)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||nz(l,u),d=function Q9(n,e,t,r=!1){return Tc(t,n.ya(r?4:3,e))}(s,"where",l,"in"===u||"not-in"===u);return Ke.create(c,u,d)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function Uye(n,e,t){const r=e,i=nv("where",n);return ip._create(i,r,t)}class Fl extends $S{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fl(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:yt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const s=i.getFlattenedFilters();for(const a of s)rz(o,a),o=WA(o,a)}(e._query,t),new sr(e.firestore,e.converter,WA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function tz(n,e,t){if("string"==typeof(t=Ht(t))){if(""===t)throw new Q(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qA(e)&&-1!==t.indexOf("/"))throw new Q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Je.fromString(t));if(!ne.isDocumentKey(r))throw new Q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hc(n,new ne(r))}if(t instanceof mn)return hc(n,t._key);throw new Q(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jy(t)}.`)}function nz(n,e){if(!Array.isArray(n)||0===n.length)throw new Q(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rz(n,e){if(e.isInequality()){const r=Ey(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Q(V.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=GA(n);null!==o&&function iz(n,e,t){if(!t.isEqual(e))throw new Q(V.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}(0,i,o)}const t=function(r,i){for(const o of r)for(const s of o.getFlattenedFilters())if(i.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Q(V.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Bye{convertValue(e,t="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ea(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new LS(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_y(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=ta(e);return new Zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);he(_6(r));const i=new dc(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(t)||fn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class Dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ll extends jS{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class sv extends Ll{data(e={}){return super.data(e)}}class Vl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Dc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new sv(this._firestore,this._userDataWriter,r.key,r,new Dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(s=>({type:"added",doc:new sv(r._firestore,r._userDataWriter,s.doc.key,s.doc,new Dc(r._snapshot.mutatedKeys.has(s.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(s=>i||3!==s.type).map(s=>{const a=new sv(r._firestore,r._userDataWriter,s.doc.key,s.doc,new Dc(r._snapshot.mutatedKeys.has(s.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==s.type&&(c=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),1!==s.type&&(o=o.add(s.doc),u=o.indexOf(s.doc.key)),{type:$ye(s.type),doc:a,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $ye(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function zye(n){n=Ye(n,mn);const e=Ye(n.firestore,Ut);return function O9(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget(C(function*(){return function(i,o,s,a,c){const u=new Ky({next:d=>{o.enqueueAndForget(()=>Xx(i,l));const h=d.docs.has(s);!h&&d.fromCache?c.reject(new Q(V.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?c.reject(new Q(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),l=new eS(pl(s.path),u,{includeMetadataChanges:!0,Ku:!0});return Qx(i,l)}(yield kl(n),n.asyncQueue,e,t,r)})),r.promise}(bn(e),n._key).then(t=>function GS(n,e,t){const r=t.docs.get(e._key),i=new ha(n);return new Ll(n,i,e._key,r,new Dc(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}class ha extends Bye{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ic(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Hye(n){n=Ye(n,sr);const e=Ye(n.firestore,Ut),t=bn(e),r=new ha(e);return function Z9(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Q(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),function P9(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget(C(function*(){return function(i,o,s,a,c){const u=new Ky({next:d=>{o.enqueueAndForget(()=>Xx(i,l)),d.fromCache&&"server"===a.source?c.reject(new Q(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),l=new eS(s,u,{includeMetadataChanges:!0,Ku:!0});return Qx(i,l)}(yield kl(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new Vl(e,r,n,i))}function Gye(n,e,t){n=Ye(n,mn);const r=Ye(n.firestore,Ut),i=function HS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return op(r,[VS(Rl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Gt.none())])}function qye(n,e,t,...r){n=Ye(n,mn);const i=Ye(n.firestore,Ut),o=Rl(i);let s;return s="string"==typeof(e=Ht(e))||e instanceof Nl?function K9(n,e,t,r,i,o){const s=n.ya(1,e,t),a=[rp(e,r,t)],c=[i];if(o.length%2!=0)throw new Q(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(rp(e,o[h])),c.push(o[h+1]);const u=[],l=or.empty();for(let h=a.length-1;h>=0;--h)if(!J9(u,a[h])){const p=a[h];let w=c[h];w=Ht(w);const I=s.da(p);if(w instanceof np)u.push(p);else{const x=Tc(w,I);null!=x&&(u.push(p),l.set(p,x))}}const d=new Wr(u);return new H9(l,d,s.fieldTransforms)}(o,"updateDoc",n._key,e,t,r):function W9(n,e,t,r){const i=n.ya(1,e,t);BS("Data must be an object, but it was:",i,r);const o=[],s=or.empty();ea(r,(c,u)=>{const l=ev(e,c,t);u=Ht(u);const d=i.da(l);if(u instanceof np)o.push(l);else{const h=Tc(u,d);null!=h&&(o.push(l),s.set(l,h))}});const a=new Wr(o);return new H9(s,a,i.fieldTransforms)}(o,"updateDoc",n._key,e),op(i,[s.toMutation(n._key,Gt.exists(!0))])}function Wye(n){return op(Ye(n.firestore,Ut),[new yl(n._key,Gt.none())])}function op(n,e){return function(t,r){const i=new Sn;return t.asyncQueue.enqueueAndForget(C(function*(){return function q_e(n,e,t){return oS.apply(this,arguments)}(yield function PS(n){return Yy(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(bn(n),e)}!function(n,e=!0){cl=$s,Jn(new Nn("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),s=new Ut(new Ege(t.getProvider("auth-internal")),new Dge(t.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Q(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(a.options.projectId,c)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),wt(Gj,"3.13.0",n),wt(Gj,"3.13.0","esm2017")}();class ut{constructor(e){return e}}const az="firestore",qS=new le("angularfire2.firestore-instances");function ave(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ut(r)}}const cve={provide:class ove{constructor(){return Oh(az)}},deps:[[new Xt,qS]]},uve={provide:ut,useFactory:function sve(n,e){const t=Mh(az,n,e);return t&&new ut(t)},deps:[[new Xt,qS],Hs]};let lve=(()=>{class n{constructor(){wt("angularfire",Ku.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[uve,cve]}),n})();function dve(n,...e){return{ngModule:lve,providers:[{provide:qS,useFactory:ave(n),multi:!0,deps:[gt,Ir,Ph,kh,[new Xt,L_],[new Xt,Fh],...e]}]}}const Te=xn(Eye,!0),$n=xn(Wye,!0),Fe=xn(U9,!0),hve=xn(Aye,!0),fve=xn(zye,!0),pe=xn(Hye,!0),pve=xn(Dye,!0),_n=xn(Vye,!0),xo=xn(Gye,!0),ci=xn(qye,!0),sn=xn(Uye,!0),gve=[{path:"auth",component:x5,children:[{path:"login",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.firestore=i,this.data=[],this.nid=1,this.getData()}getData(){const t=Te(this.firestore,"users");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}Signup(){this.router.navigate(["/auth/signup"])}Salir(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}handleLogin(t){var r=this;return C(function*(){let i;fpe(r.auth,t.email,t.password).then(function(){var o=C(function*(s){r.current=s.user.email,i=s.user.email;const a=_n(Te(r.firestore,"users"),sn("email","==",i));console.log(r.auth.currentUser?.email),(yield pe(a)).forEach(u=>{console.log(u.id," => ",u.data());let l=u.data();console.log(l.role),"Adminitrador"==l.role?r.router.navigate(["/admin"]):"Investigador"==l.role?r.router.navigate(["/user/projects"]):"Cliente"==l.role&&r.router.navigate(["/client/projects"])})});return function(s){return o.apply(this,arguments)}}()).catch(o=>{alert(o.message)})})()}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(Pe),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-login"]],decls:20,vars:0,consts:[[1,"salir",3,"click"],[1,"loginBox"],[1,"loginTile"],[1,"lineBlack"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"userText"],["name","email","ngModel","","placeholder","Email","id","email","type","email",1,"input-field"],[1,"claveText"],["name","password","ngModel","","placeholder","Password","id","password","type","password",1,"input-field"],[1,"boton"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"login works!"),m(),_(2,"button",0),q("click",function(){return r.Salir()}),m(),Z(3,"div",1),_(4,"span",2),b(5,"Iniciar Sesi\xf3n"),m(),Z(6,"div",3),_(7,"form",4,5),q("ngSubmit",function(){Ge(i);const s=Kn(8);return qe(r.handleLogin(s.value))}),_(9,"div",6)(10,"div",7)(11,"span",8),b(12,"Email:"),m(),Z(13,"input",9),m(),_(14,"div",7)(15,"span",10),b(16,"Clave:"),m(),Z(17,"input",11),m(),_(18,"button",12),b(19,"Log In"),m()()()}},dependencies:[Hr,bi,ho,zr,Ui,pr],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:34%;height:27%;position:absolute;left:39.2%;top:38%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;width:10%;height:4%;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:59.5%;top:59%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}@media only screen and (max-width: 768px){.main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:40%;position:absolute;left:15%;top:35%}.loginTile[_ngcontent-%COMP%]{color:#000;width:75%;height:20%;position:absolute;font-family:Arial;text-align:center;font-size:24px;letter-spacing:0;left:15%;top:37%}.lineBlack[_ngcontent-%COMP%]{width:75%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:15%;top:43%}#email[_ngcontent-%COMP%]{width:60%;height:3%;position:absolute;left:20%;top:50%}.userText[_ngcontent-%COMP%]{color:#000;width:10%;height:5%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:20%;top:45%}#password[_ngcontent-%COMP%]{width:60%;height:3%;position:absolute;left:20%;top:60%}.claveText[_ngcontent-%COMP%]{color:#000;width:10%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:20%;top:55%}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;width:20%;height:5%;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:60%;top:65%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:14px;letter-spacing:0;left:60%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:15%;left:0%;top:0%}}"]}),n})()},{path:"signup",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.firestore=r,this.router=i,this.title="gestion-de-muestras-de-campo",this.data=[],this.getData()}Login(){this.router.navigate(["/auth/login"])}handleRegister(t){hpe(this.auth,t.email,t.password).then(r=>{console.log(r.user)}).catch(r=>{alert(r.message)}),this.addData(t)}addData(t){const r=Fe(this.firestore,"users",t.email);t.password==t.confirmpassword?"Invetigador"==t.role||"Cliente"==t.role?xo(r,{email:t.email,role:t.role,password:t.password}).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}):alert("Rol no reconocido"):alert("Claves No Iguales")}getData(){const t=Te(this.firestore,"users");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}Salir(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(ut),S(Pe))},n.\u0275cmp=He({type:n,selectors:[["app-signup"]],decls:31,vars:0,consts:[[1,"salir",3,"click"],[1,"loginBox"],[1,"loginTile"],[1,"lineBlack"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"userText"],["name","email","ngModel","","placeholder","Email","id","email","type","email",1,"input-field"],[1,"roleText"],["list","roles","name","role","ngModel","","placeholder","Roles","id","role","type","role",1,"input-field"],["id","roles"],["value","Investigador"],["value","Cliente"],[1,"claveText"],["name","password","ngModel","","placeholder","Clave","id","password","type","password",1,"input-field"],[1,"clave2Text"],["name","confirmpassword","ngModel","","placeholder","Confirmar Clave","id","confirmpassword","type","password",1,"input-field"],[1,"boton"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"signup works!"),m(),_(2,"button",0),q("click",function(){return r.Salir()}),m(),Z(3,"div",1),_(4,"span",2),b(5,"Registrar"),m(),Z(6,"div",3),_(7,"form",4,5),q("ngSubmit",function(){Ge(i);const s=Kn(8);return qe(r.handleRegister(s.value))}),_(9,"div",6)(10,"div",7)(11,"span",8),b(12,"Email:"),m(),Z(13,"input",9),m(),_(14,"div",7)(15,"span",10),b(16,"Roles:"),m(),Z(17,"input",11),_(18,"datalist",12),Z(19,"option",13)(20,"option",14),m()(),_(21,"div",7)(22,"span",15),b(23,"Clave:"),m(),Z(24,"input",16),m(),_(25,"div",7)(26,"span",17),b(27,"Confirmar Clave:"),m(),Z(28,"input",18),m(),_(29,"button",19),b(30,"Sign Up"),m()()()}},dependencies:[Hr,nh,rh,bi,ho,zr,Ui,pr],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}.loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:39%;height:40%;position:absolute;left:33.5%;top:37%}.loginTile[_ngcontent-%COMP%]{color:#000;width:39%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:33.5%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:38.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:33.5%;top:45%}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#role[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.roleText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.5%;top:54%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:58.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:59%}#confirmpassword[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:63.5%}.clave2Text[_ngcontent-%COMP%]{color:#000;width:15%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:36.2%;top:64%}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;width:10%;height:4%;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:59.5%;top:69%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:69.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}@media only screen and (max-width: 768px){.main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:60%;position:absolute;left:15%;top:25%}.loginTile[_ngcontent-%COMP%]{color:#000;width:75%;height:20%;position:absolute;font-family:Arial;text-align:center;font-size:24px;letter-spacing:0;left:15%;top:26%}.lineBlack[_ngcontent-%COMP%]{width:75%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:15%;top:32%}#email[_ngcontent-%COMP%]{width:60%;height:3%;position:absolute;left:20%;top:40%}.userText[_ngcontent-%COMP%]{color:#000;width:10%;height:5%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:20%;top:35%}#role[_ngcontent-%COMP%]{width:30%;height:3%;position:absolute;left:20%;top:60%}.roleText[_ngcontent-%COMP%]{color:#000;width:15%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:20%;top:55%}#password[_ngcontent-%COMP%]{width:60%;height:3%;position:absolute;left:20%;top:50%}.claveText[_ngcontent-%COMP%]{color:#000;width:10%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:20%;top:45%}#confirmpassword[_ngcontent-%COMP%]{width:60%;height:3%;position:absolute;left:20%;top:70%}.clave2Text[_ngcontent-%COMP%]{color:#000;width:60%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:20%;top:65%}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;width:20%;height:5%;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:60%;top:75%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:14px;letter-spacing:0;left:60%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:15%;left:0%;top:0%}}"]}),n})()},{path:"select",component:(()=>{class n{constructor(t,r){this.auth=t,this.router=r}Login(){this.router.navigate(["/auth/login"])}Signup(){this.router.navigate(["/auth/signup"])}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(Pe))},n.\u0275cmp=He({type:n,selectors:[["app-select"]],decls:15,vars:0,consts:[[1,"base"],["id","login",3,"click"],["id","signup",3,"click"],[1,"install"],["id","share","src","../../../../assets/share.png","alt","share"],["id","menu","src","../../../../assets/menu.png","alt","menu"]],template:function(t,r){1&t&&(_(0,"div",0)(1,"div")(2,"button",1),q("click",function(){return r.Login()}),b(3,"Log In"),m()(),Z(4,"div"),_(5,"div")(6,"button",2),q("click",function(){return r.Signup()}),b(7,"Sign Up"),m()(),_(8,"div",3)(9,"span"),b(10,"Para instalar en tu dispositivo m\xf3vil, pulsa el boton de inicio \u201cCompartir\u201d "),Z(11,"img",4),b(12," en IOS o el boton \u201cMen\xfa\u201d "),Z(13,"img",5),b(14," en Androi, y selecionar \u201cAgregar a inicio\u201d"),m()()())},styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#login[_ngcontent-%COMP%]{top:20%;position:absolute}#signup[_ngcontent-%COMP%]{top:40%;position:absolute}#login[_ngcontent-%COMP%]{background-color:#3ec28f;width:40%;height:15%;position:absolute;left:36%;top:25%;border-radius:30px;border-width:0;color:#fff;font-family:Arial;text-align:center;font-size:64px;letter-spacing:0}#signup[_ngcontent-%COMP%]{background-color:#3ec28f;width:40%;height:15%;position:absolute;left:36%;top:50%;border-radius:30px;border-width:0;color:#fff;font-family:Arial;text-align:center;font-size:64px;letter-spacing:0}.install[_ngcontent-%COMP%]{color:#000;width:30%;height:30%;position:absolute;left:42%;top:77%;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;font-weight:700}.line[_ngcontent-%COMP%]{display:inline}#menu[_ngcontent-%COMP%]{width:16px;height:21.647058486938477px;background-repeat:no-repeat;background-size:cover;border-radius:5px}#share[_ngcontent-%COMP%]{width:20px;height:23.636362075805664px;background-repeat:no-repeat;background-size:cover;border-radius:5px}p[_ngcontent-%COMP%]{line-height:.5}@media only screen and (max-width: 768px){.main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;cursor:pointer}#login[_ngcontent-%COMP%]{top:20%;position:absolute}#signup[_ngcontent-%COMP%]{top:40%;position:absolute}#login[_ngcontent-%COMP%]{background-color:#3ec28f;width:70%;height:15%;margin:0;position:absolute;left:15%;top:25%;border-radius:30px;border-width:0;color:#fff;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0}#signup[_ngcontent-%COMP%]{background-color:#3ec28f;width:70%;height:15%;margin:0;position:absolute;left:15%;top:50%;border-radius:30px;border-width:0;color:#fff;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0}.install[_ngcontent-%COMP%]{color:#000;width:70%;height:10%;position:absolute;left:15%;top:75%;font-family:Arial;text-align:center;font-size:12px;letter-spacing:0;font-weight:700}.line[_ngcontent-%COMP%]{display:inline}#menu[_ngcontent-%COMP%]{width:10px;height:12px;background-repeat:no-repeat;background-size:cover;border-radius:5px}#share[_ngcontent-%COMP%]{width:12px;height:14px;background-repeat:no-repeat;background-size:cover;border-radius:5px}p[_ngcontent-%COMP%]{line-height:.5}}"]}),n})()}]}];let mve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[ji.forChild(gve),ji]}),n})(),_ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[Qd,Pm,ji,mve]}),n})(),yve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=He({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(_(0,"p"),b(1,"home works!"),m())}}),n})();function vve(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td",14),b(2),m(),_(3,"td",14),b(4),m(),_(5,"td",14),b(6),m(),_(7,"td",14),b(8),m(),_(9,"td")(10,"button",15),q("click",function(){const o=Ge(t).$implicit;return qe(un().updateData(o.id))}),b(11," Update "),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.Nombre),H(2),Ee(t.email),H(2),Ee(t.password),H(2),Ee(t.role)}}let wve=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.getData()}ngOnInit(){}getData(){const t=Te(this.firestore,"users");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"users",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"users",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}handleSignOut(){tr(this.auth).then(()=>{}).catch(t=>{console.log("here")}),this.router.navigate(["auth/select"])}Home(){this.router.navigate(["admin"])}Projectos(){this.router.navigate(["admin"])}Muestras(){this.router.navigate(["admin"])}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-admin"]],decls:31,vars:1,consts:[[1,"navbar"],[1,"tituloBox"],[1,"tituloText"],[1,"logoCiens"],[1,"logoUcv"],[1,"homeBox"],[1,"homeText"],[1,"salir",3,"click"],[1,"navbar2"],[1,"navbar2Box"],["id","cerrarText",1,"navbar2Text",3,"click"],[1,"subTituloText"],[1,"list"],[4,"ngFor","ngForOf"],["contenteditable","true"],[3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"admin works!"),m(),_(2,"div",0)(3,"div",1)(4,"span",2),b(5,"Gestion de Muestras"),m()(),Z(6,"div",3)(7,"div",4),_(8,"div",5)(9,"span",6),b(10,"Home"),m()()(),_(11,"button",7),q("click",function(){return r.Home()}),m(),_(12,"div",8),Z(13,"div",9),_(14,"div",10),q("click",function(){return r.handleSignOut()}),b(15,"CERRAR SESI\xd3N"),m()(),_(16,"h1",11),b(17,"Usuarios"),m(),_(18,"div",12)(19,"table")(20,"tr")(21,"th"),b(22," Nombre "),m(),_(23,"th"),b(24," Email "),m(),_(25,"th"),b(26," Password "),m(),_(27,"th"),b(28," Role "),m(),Z(29,"th"),m(),ri(30,vve,12,4,"tr",13),m()()),2&t&&(H(30),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:33%;top:35%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}button[_ngcontent-%COMP%]{border:none;background-color:#3eb3c2;color:#fff;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;width:70%;height:10%;vertical-align:middle;line-height:250%;font-family:Verdana;text-align:center;font-size:48px;letter-spacing:0;left:20%;top:15%}.main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}.homeBox[_ngcontent-%COMP%]{background-color:#3ec28f;border-right:4px solid white;width:20%;height:10%;position:absolute;left:0;top:0%;text-align:center}.homeText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.tituloBox[_ngcontent-%COMP%]{background-color:#3ec28f;width:80%;height:10%;position:absolute;left:20%;top:0%;text-align:center}.tituloText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.logoCiens[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:92%;top:1.5%;background-image:url(image_7.2e20c6c16e8ce206.png);background-repeat:no-repeat;background-size:cover}.logoUcv[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:22%;top:1.5%;background-image:url(logo_ucv_bg2_1.32a61806277cba42.png);background-repeat:no-repeat;background-size:cover}.navbar2Box[_ngcontent-%COMP%]{width:100%;height:47px;background:#3EC28F;border-top:4px solid white;position:absolute;left:0%;top:10%}.navbar2Text[_ngcontent-%COMP%]{height:47px;color:#fff;font-size:20px;font-family:Verdana;font-weight:600;word-wrap:break-word;text-align:center;display:inline-block;vertical-align:middle;line-height:240%;border-top:4px solid white}#usernameText[_ngcontent-%COMP%]{width:20%;position:absolute;left:0%;top:10%;border-right:4px solid white}#ProyectosText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:20%;top:10%;border-right:4px solid white}#MuestrasText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:40%;top:10%;border-right:4px solid white}#ClientesText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:60%;top:10%;border-right:4px solid white}#cerrarText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:0%;top:10%;border-right:4px solid white}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})(),bve=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(t,r){return this.checkLogin(r.url)}checkLogin(t){return!!this.auth.currentUser||(this.router.navigate(["/"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(me(We),me(Pe))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cz=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.title="gestion-muestras"}handleSignOut(){tr(this.auth).then(()=>{}).catch(t=>{console.log("here")}),this.router.navigate(["auth/select"])}Home(){this.router.navigate(["user/projects"])}Projectos(){this.router.navigate(["user/projects"])}Muestras(){this.router.navigate(["user/muestras-all"])}Clientes(){this.router.navigate(["user/clients"])}Unidades(){this.router.navigate(["user/unidad-produccion-all"])}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(Pe))},n.\u0275cmp=He({type:n,selectors:[["app-user"]],decls:26,vars:0,consts:[[1,"navbar"],[1,"tituloBox"],[1,"tituloText"],[1,"logoCiens"],[1,"logoUcv"],[1,"homeBox"],[1,"homeText"],[1,"homeLogo"],[1,"salir",3,"click"],[1,"navbar2"],[1,"navbar2Box"],["id","cerrarText",1,"navbar2Text",3,"click"],["id","UnidadText",1,"navbar2Text",3,"click"],["id","ProyectosText",1,"navbar2Text",3,"click"],["id","MuestrasText",1,"navbar2Text",3,"click"],["id","ClientesText",1,"navbar2Text",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"user works!"),m(),_(2,"div",0)(3,"div",1)(4,"span",2),b(5,"Gestion de Muestras"),m()(),Z(6,"div",3)(7,"div",4),_(8,"div",5)(9,"span",6),b(10,"Home"),m(),Z(11,"div",7),m()(),_(12,"button",8),q("click",function(){return r.Home()}),m(),_(13,"div",9),Z(14,"div",10),_(15,"div",11),q("click",function(){return r.handleSignOut()}),b(16,"CERRAR SESI\xd3N"),m(),_(17,"div",12),q("click",function(){return r.Unidades()}),b(18,"UNIDADES"),m(),_(19,"div",13),q("click",function(){return r.Projectos()}),b(20,"PROYECTOS"),m(),_(21,"div",14),q("click",function(){return r.Muestras()}),b(22,"MUESTRAS"),m(),_(23,"div",15),q("click",function(){return r.Clientes()}),b(24,"CLIENTES"),m()(),Z(25,"router-outlet"))},dependencies:[Vu],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}.homeBox[_ngcontent-%COMP%]{background-color:#3ec28f;border-right:4px solid white;width:20%;height:10%;position:absolute;left:0;top:0%;text-align:center}.homeText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.tituloBox[_ngcontent-%COMP%]{background-color:#3ec28f;width:80%;height:10%;position:absolute;left:20%;top:0%;text-align:center}.tituloText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.logoCiens[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:92%;top:1.5%;background-image:url(image_7.2e20c6c16e8ce206.png);background-repeat:no-repeat;background-size:cover}.logoUcv[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:22%;top:1.5%;background-image:url(logo_ucv_bg2_1.32a61806277cba42.png);background-repeat:no-repeat;background-size:cover}.navbar2Box[_ngcontent-%COMP%]{width:100%;height:5%;background:#3EC28F;border-top:4px solid white;position:absolute;left:0%;top:10%}.navbar2Text[_ngcontent-%COMP%]{height:5%;color:#fff;font-size:20px;font-family:Verdana;font-weight:600;word-wrap:break-word;text-align:center;display:inline-block;vertical-align:middle;line-height:240%;border-top:4px solid white}#UnidadText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:40%;top:10%;border-right:4px solid white}#ProyectosText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:20%;top:10%;border-right:4px solid white}#MuestrasText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:60%;top:10%;border-right:4px solid white}#ClientesText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:80%;top:10%}#cerrarText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:0%;top:10%;border-right:4px solid white}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}@media only screen and (max-width: 768px){.homeBox[_ngcontent-%COMP%]{background-color:#3ec28f;border-right:2px solid white;width:20%;height:15%;position:absolute;left:0;top:0%}.homeText[_ngcontent-%COMP%]{display:none}.homeLogo[_ngcontent-%COMP%]{position:relative;top:30%;left:25%;width:36px;height:36px;text-align:center;background-image:url(home.a5ce65d54c28e165.png);background-repeat:no-repeat;background-size:cover}.tituloBox[_ngcontent-%COMP%]{background-color:#3ec28f;width:80%;height:15%;position:absolute;left:20%;top:0%;text-align:center}.tituloText[_ngcontent-%COMP%]{color:#fff;line-height:1.6;display:inline-block;vertical-align:middle;font-family:Verdana;font-size:32px;letter-spacing:0px}.logoCiens[_ngcontent-%COMP%]{width:31px;height:31px;position:absolute;left:90%;top:1.5%;background-image:url(image_7.2e20c6c16e8ce206.png);background-repeat:no-repeat;background-size:cover}.logoUcv[_ngcontent-%COMP%]{width:31px;height:31px;position:absolute;left:22%;top:1.5%;background-image:url(logo_ucv_bg2_1.32a61806277cba42.png);background-repeat:no-repeat;background-size:cover}.navbar2Box[_ngcontent-%COMP%]{width:100%;height:5%;background:#3EC28F;border-top:2px solid white;position:absolute;left:0%;top:15%}.navbar2Text[_ngcontent-%COMP%]{height:5%;color:#fff;font-size:10px;font-family:Verdana;font-weight:600;word-wrap:break-word;text-align:center;display:inline-block;vertical-align:middle;line-height:1.6;border-top:2px solid white}#UnidadText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:40%;top:15%;border-right:2px solid white;padding-top:7px}#ProyectosText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:20%;top:15%;border-right:2px solid white;padding-top:7px}#MuestrasText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:60%;top:15%;border-right:2px solid white;padding-top:7px}#ClientesText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:80%;top:15%;padding-top:7px}#cerrarText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:0%;top:15%;border-right:2px solid white}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:15%;left:0%;top:0%}}"]}),n})();var uz=N(6387);let Cve=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o}ngOnInit(){this.route.params.subscribe(t=>{this.item=t,console.log(t),this.generateBarcode(t)})}generateBarcode(t){uz("#barcode",t.id,{format:"CODE128"}),window.print()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-print"]],decls:1,vars:0,consts:[["id","barcode"]],template:function(t,r){1&t&&(D0(),Z(0,"svg",0))},styles:["#barcode[_ngcontent-%COMP%]{position:absolute;top:200px;left:200px}"]}),n})(),lz=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.title="gestion-muestras"}handleSignOut(){tr(this.auth).then(()=>{}).catch(t=>{console.log("here")}),this.router.navigate(["auth/select"])}Home(){this.router.navigate(["client/projects"])}Projectos(){this.router.navigate(["client/projects"])}Muestras(){this.router.navigate(["client/muestras-all"])}Unidad(){this.router.navigate(["client/unidad-produccion-all"])}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(Pe))},n.\u0275cmp=He({type:n,selectors:[["app-client"]],decls:25,vars:0,consts:[[1,"navbar"],[1,"tituloBox"],[1,"tituloText"],[1,"logoCiens"],[1,"logoUcv"],[1,"homeBox"],[1,"homeText"],[1,"salir",3,"click"],[1,"navbar2"],[1,"navbar2Box"],["id","cerrarText",1,"navbar2Text",3,"click"],["id","usernameText",1,"navbar2Text"],["id","ProyectosText",1,"navbar2Text",3,"click"],["id","MuestrasText",1,"navbar2Text",3,"click"],["id","UnidadText",1,"navbar2Text",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"client works!"),m(),_(2,"div",0)(3,"div",1)(4,"span",2),b(5,"Gestion de Muestras"),m()(),Z(6,"div",3)(7,"div",4),_(8,"div",5)(9,"span",6),b(10,"Home"),m()()(),_(11,"button",7),q("click",function(){return r.Home()}),m(),_(12,"div",8),Z(13,"div",9),_(14,"div",10),q("click",function(){return r.handleSignOut()}),b(15,"CERRAR SESI\xd3N"),m(),_(16,"div",11),b(17,"USUARIO"),m(),_(18,"div",12),q("click",function(){return r.Projectos()}),b(19,"PROYECTOS"),m(),_(20,"div",13),q("click",function(){return r.Muestras()}),b(21,"MUESTRAS"),m(),_(22,"div",14),q("click",function(){return r.Unidad()}),b(23,"UNIDADES"),m()(),Z(24,"router-outlet"))},dependencies:[Vu],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}.homeBox[_ngcontent-%COMP%]{background-color:#3ec28f;border-right:4px solid white;width:20%;height:10%;position:absolute;left:0;top:0%;text-align:center}.homeText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.tituloBox[_ngcontent-%COMP%]{background-color:#3ec28f;width:80%;height:10%;position:absolute;left:20%;top:0%;text-align:center}.tituloText[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:middle;line-height:250%;font-family:Verdana;font-size:40px;letter-spacing:0}.logoCiens[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:92%;top:1.5%;background-image:url(image_7.2e20c6c16e8ce206.png);background-repeat:no-repeat;background-size:cover}.logoUcv[_ngcontent-%COMP%]{width:69px;height:69px;position:absolute;left:22%;top:1.5%;background-image:url(logo_ucv_bg2_1.32a61806277cba42.png);background-repeat:no-repeat;background-size:cover}.navbar2Box[_ngcontent-%COMP%]{width:100%;height:47px;background:#3EC28F;border-top:4px solid white;position:absolute;left:0%;top:10%}.navbar2Text[_ngcontent-%COMP%]{height:47px;color:#fff;font-size:20px;font-family:Verdana;font-weight:600;word-wrap:break-word;text-align:center;display:inline-block;vertical-align:middle;line-height:240%;border-top:4px solid white}#usernameText[_ngcontent-%COMP%]{width:20%;position:absolute;left:80%;top:10%}#ProyectosText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:20%;top:10%;border-right:4px solid white}#MuestrasText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:60%;top:10%;border-right:4px solid white}#UnidadText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:40%;top:10%;border-right:4px solid white}#cerrarText[_ngcontent-%COMP%]{cursor:pointer;width:20%;position:absolute;left:0%;top:10%;border-right:4px solid white}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const Eve=[{path:"",redirectTo:"auth/select",pathMatch:"full"},{path:"home",component:yve},{path:"admin",component:wve,canActivate:[bve]},{path:"auth",component:x5},{path:"user",component:cz},{path:"client",component:lz},{path:"print/:id",component:Cve}];let dz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[ji.forRoot(Eve),ji]}),n})(),Ive=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.title="gestion-muestras"}handleSignOut(){tr(this.auth).then(()=>{}).catch(t=>{console.log("here")})}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(Pe),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Z(0,"router-outlet")},dependencies:[Vu]}),n})();const Tve_firebase={projectId:"gestion-de-muestras-de-campo",appId:"1:956362829056:web:235ab7e9c2cbd05ffe97e5",databaseURL:"https://gestion-de-muestras-de-campo-default-rtdb.firebaseio.com",storageBucket:"gestion-de-muestras-de-campo.appspot.com",apiKey:"AIzaSyDeImqmNn3CZpIAB1A9_q78bnqPVNM1ji8",authDomain:"gestion-de-muestras-de-campo.firebaseapp.com",messagingSenderId:"956362829056",measurementId:"G-T5SRLVHLR3"},hz="@firebase/database";let WS="";class Ave{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ch(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class xve{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Zo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const pz=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ave(e)}}catch{}return new xve},Ac=pz("localStorage"),KS=pz("sessionStorage"),Ul=new qa("@firebase/database"),gz=function(){let n=1;return function(){return n++}}(),mz=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,re(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new Qoe;t.update(e);const r=t.digest();return Ym.encodeByteArray(r)},sp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sp.apply(null,r):e+="object"==typeof r?Xn(r):r,e+=" "}return e};let xc=null,_z=!0;const zn=function(...n){if(!0===_z&&(_z=!1,null===xc&&!0===KS.get("logging_enabled")&&function(n,e){re(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ul.logLevel=Qe.VERBOSE,xc=Ul.log.bind(Ul),e&&KS.set("logging_enabled",!0)):"function"==typeof n?xc=n:(xc=null,KS.remove("logging_enabled"))}(!0)),xc){const e=sp.apply(null,n);xc(e)}},ap=function(n){return function(...e){zn(n,...e)}},QS=function(...n){const e="FIREBASE INTERNAL ERROR: "+sp(...n);Ul.error(e)},So=function(...n){const e=`FIREBASE FATAL ERROR: ${sp(...n)}`;throw Ul.error(e),new Error(e)},br=function(...n){const e="FIREBASE WARNING: "+sp(...n);Ul.warn(e)},cv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fa="[MIN_NAME]",ms="[MAX_NAME]",Sc=function(n,e){if(n===e)return 0;if(n===fa||e===ms)return-1;if(e===fa||n===ms)return 1;{const t=bz(n),r=bz(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Ove=function(n,e){return n===e?0:n<e?-1:1},cp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Xn(e))},YS=function(n){if("object"!=typeof n||null===n)return Xn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Xn(e[r]),t+=":",t+=YS(n[e[r]]);return t+="}",t},vz=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Hn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const wz=function(n){re(!cv(n),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===n?(o=0,s=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const l=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Rve=new RegExp("^-?(0*)\\d{1,10}$"),bz=function(n){if(Rve.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Bl=function(n){try{n()}catch(e){setTimeout(()=>{throw br("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},up=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Uve{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){br(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Bve{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',br(e)}}let lp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Dz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Sz="websocket",Mz="long_polling";class JS{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ac.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ac.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Oz(n,e,t){let r;if(re("string"==typeof e,"typeof type must == string"),re("object"==typeof t,"typeof params must == object"),e===Sz)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Mz)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function jve(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Hn(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class $ve{constructor(){this.counters_={}}incrementCounter(e,t=1){Zo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Roe(this.counters_)}}const ZS={},eM={};function tM(n){const e=n.toString();return ZS[e]||(ZS[e]=new $ve),ZS[e]}class Hve{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Bl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pa{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ap(e),this.stats_=tM(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),Oz(t,Mz,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Hve(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nM((...o)=>{const[s,a,c,u,l]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Dz.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pa.forceAllow_=!0}static forceDisallow(){pa.forceDisallow_=!0}static isAvailable(){return!(!pa.forceAllow_&&(pa.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Xn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=TU(t),i=vz(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Xn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class nM{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=nM.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){zn("frame writing exception"),a.stack&&zn(a.stack),zn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let lv=null;typeof MozWebSocket<"u"?lv=MozWebSocket:typeof WebSocket<"u"&&(lv=WebSocket);let jl=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ap(this.connId),this.stats_=tM(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&Dz.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),Oz(t,Sz,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ac.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new lv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==lv&&!n.forceDisallow_}static previouslyFailed(){return Ac.isInMemoryStorage||!0===Ac.get("previous_websocket_failure")}markConnectionHealthy(){Ac.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Ch(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(re(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Xn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=vz(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Vz=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[pa,jl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=jl&&jl.isAvailable();let i=r&&!jl.previouslyFailed();if(t.webSocketOnly&&(r||br("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[jl];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Gz{constructor(e,t,r,i,o,s,a,c,u,l){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ap("c:"+this.id+":"),this.transportManager_=new Vz(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=up(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=cp("t",e),r=cp("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=cp("t",e),r=cp("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=cp("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?QS("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QS("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&br("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),up(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):up(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ac.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qz{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Wz{constructor(e){this.allowedEvents_=e,this.listeners_={},re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){re(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class dv extends Wz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dv}getInitialEvent(e){return re("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ht{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function rt(){return new ht("")}function Ue(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ga(n){return n.pieces_.length-n.pieceNum_}function Dt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ht(n.pieces_,e)}function iM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function dp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Yz(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ht(e,0)}function qt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ht)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ht(t,0)}function Be(n){return n.pieceNum_>=n.pieces_.length}function Pr(n,e){const t=Ue(n),r=Ue(e);if(null===t)return e;if(t===r)return Pr(Dt(n),Dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function oM(n,e){if(ga(n)!==ga(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ti(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ga(n)>ga(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class f0e{constructor(e,t){this.errorPrefix_=t,this.parts_=dp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=i_(this.parts_[r]);Xz(this)}}function Xz(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mc(n))}function Mc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sM extends Wz{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sM}getInitialEvent(e){return re("visible"===e,"Unknown event type: "+e),[this.visible_]}}const hp=1e3;let fv,Oc=(()=>{class n extends qz{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=ap("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&dv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Xn(s)),re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new Hu,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),re(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),re(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,c=>{const u=c.d,l=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),"ok"!==l&&this.removeListen_(i,o),t.onComplete&&t.onComplete(l,u))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Zo(t,"w")){const i=Gu(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();br(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=e_(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=e_(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),re(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const s={p:t};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Xn(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):QS("Unrecognized action received from server: "+Xn(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=hp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return C(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let c=!1,u=null;const l=function(){u?u.close():(c=!0,o())};t.realtime_={close:l,sendRequest:function(p){re(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(p)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[p,w]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);c?zn("getToken() completed but was canceled"):(zn("getToken() completed. Creating connection."),t.authToken_=p&&p.accessToken,t.appCheckToken_=w&&w.token,u=new Gz(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,I=>{br(I+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(p){t.log_("Failed to get token: "+p),c||(t.repoInfo_.nodeAdmin&&br(p),l())}}})()}interrupt(t){zn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],sE(this.interruptReasons_)&&(this.reconnectDelay_=hp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(s=>YS(s)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new ht(t).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){zn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+WS.replace(/\./g,"-")]=1,rE()?t["framework.cordova"]=1:OU()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=dv.getInstance().currentlyOnline();return sE(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class je{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new je(e,t)}}class hv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new je(fa,e),i=new je(fa,t);return 0!==this.compare(r,i)}minPost(){return je.MIN}}class eH extends hv{static get __EMPTY_NODE(){return fv}static set __EMPTY_NODE(e){fv=e}compare(e,t){return Sc(e.name,t.name)}isDefinedOn(e){throw zu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return je.MIN}maxPost(){return new je(ms,fv)}makePost(e,t){return re("string"==typeof e,"KeyIndex indexValue must always be a string."),new je(e,fv)}toString(){return".key"}}const Mo=new eH;class pv{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let cM,qi=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Qr.EMPTY_NODE,this.right=s??Qr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const s=i(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Qr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Qr{constructor(e,t=Qr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Qr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qi.BLACK,null,null))}remove(e){return new Qr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pv(this.root_,null,this.comparator_,!0,e)}}function b0e(n,e){return Sc(n.name,e.name)}function aM(n,e){return Sc(n,e)}Qr.EMPTY_NODE=new class w0e{copy(e,t,r,i,o){return this}insert(e,t,r){return new qi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tH=function(n){return"number"==typeof n?"number:"+wz(n):"string:"+n},nH=function(n){if(n.isLeafNode()){const e=n.val();re("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zo(e,".sv"),"Priority must be a string or number.")}else re(n===cM||n.isEmpty(),"priority of unexpected type.");re(n===cM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rH,iH,oH,$l=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,re(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nH(this.priorityNode_)}static set __childrenNodeConstructor(t){rH=t}static get __childrenNodeConstructor(){return rH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Be(t)?this:".priority"===Ue(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ue(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(re(".priority"!==i||1===ga(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tH(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?wz(this.value_):this.value_,this.lazyHash_=mz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(re(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return re(o>=0,"Unknown leaf type: "+r),re(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Pt=new class T0e extends hv{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Sc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return je.MIN}maxPost(){return new je(ms,new $l("[PRIORITY-POST]",oH))}makePost(e,t){const r=iH(e);return new je(t,new $l("[PRIORITY-POST]",r))}toString(){return".priority"}},D0e=Math.log(2);class A0e{constructor(e){this.count=parseInt(Math.log(e+1)/D0e,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gv=function(n,e,t,r){n.sort(e);const i=function(c,u){const l=u-c;let d,h;if(0===l)return null;if(1===l)return d=n[c],h=t?t(d):d,new qi(h,d.node,qi.BLACK,null,null);{const p=parseInt(l/2,10)+c,w=i(c,p),I=i(p+1,u);return d=n[p],h=t?t(d):d,new qi(h,d.node,qi.BLACK,w,I)}},a=function(c){let u=null,l=null,d=n.length;const h=function(w,I){const x=d-w,k=d;d-=w;const M=i(x+1,k),$=n[x],J=t?t($):$;p(new qi(J,$.node,I,null,M))},p=function(w){u?(u.left=w,u=w):(l=w,u=w)};for(let w=0;w<c.count;++w){const I=c.nextBitIsOne(),x=Math.pow(2,c.count-(w+1));I?h(x,qi.BLACK):(h(x,qi.BLACK),h(x,qi.RED))}return l}(new A0e(n.length));return new Qr(r||e,a)};let uM;const zl={};class _s{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return re(zl&&Pt,"ChildrenNode.ts has not been loaded"),uM=uM||new _s({".priority":zl},{".priority":Pt}),uM}get(e){const t=Gu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qr?t:null}hasIndex(e){return Zo(this.indexSet_,e.toString())}addIndex(e,t){re(e!==Mo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(je.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?gv(r,e.getCompare()):zl;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const l=Object.assign({},this.indexes_);return l[c]=a,new _s(l,u)}addToIndexes(e,t){const r=t_(this.indexes_,(i,o)=>{const s=Gu(this.indexSet_,o);if(re(s,"Missing index implementation for "+o),i===zl){if(s.isDefinedOn(e.node)){const a=[],c=t.getIterator(je.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),gv(a,s.getCompare())}return zl}{const a=t.get(e.name);let c=i;return a&&(c=c.remove(new je(e.name,a))),c.insert(e,e.node)}});return new _s(r,this.indexSet_)}removeFromIndexes(e,t){const r=t_(this.indexes_,i=>{if(i===zl)return i;{const o=t.get(e.name);return o?i.remove(new je(e.name,o)):i}});return new _s(r,this.indexSet_)}}let fp,ke=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nH(this.priorityNode_),this.children_.isEmpty()&&re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fp||(fp=new n(new Qr(aM),null,_s.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?fp:r}}getChild(t){const r=Ue(t);return null===r?this:this.getImmediateChild(r).getChild(Dt(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(re(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new je(t,r);let o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?fp:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){const i=Ue(t);if(null===i)return r;{re(".priority"!==Ue(t)||1===ga(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Dt(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Pt,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tH(this.getPriority().val())+":"),this.forEachChild(Pt,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":mz(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new je(t,r));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new je(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new je(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,je.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,je.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===pp?-1:0}withIndex(t){if(t===Mo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Mo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Pt),o=r.getIterator(Pt);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(t){return t===Mo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const pp=new class x0e extends ke{constructor(){super(new Qr(aM),ke.EMPTY_NODE,_s.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ke.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(je,{MIN:{value:new je(fa,ke.EMPTY_NODE)},MAX:{value:new je(ms,pp)}}),eH.__EMPTY_NODE=ke.EMPTY_NODE,$l.__childrenNodeConstructor=ke,function C0e(n){cM=n}(pp),function I0e(n){oH=n}(pp);const S0e=!0;function en(n,e=null){if(null===n)return ke.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),re(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $l(n,en(e));if(n instanceof Array||!S0e){let t=ke.EMPTY_NODE;return Hn(n,(r,i)=>{if(Zo(n,r)&&"."!==r.substring(0,1)){const o=en(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(en(e))}{const t=[];let r=!1;if(Hn(n,(s,a)=>{if("."!==s.substring(0,1)){const c=en(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new je(s,c)))}}),0===t.length)return ke.EMPTY_NODE;const o=gv(t,b0e,s=>s.name,aM);if(r){const s=gv(t,Pt.getCompare());return new ke(o,en(e),new _s({".priority":s},{".priority":Pt}))}return new ke(o,en(e),_s.Default)}}!function E0e(n){iH=n}(en);class lM extends hv{constructor(e){super(),this.indexPath_=e,re(!Be(e)&&".priority"!==Ue(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Sc(e.name,t.name):o}makePost(e,t){const r=en(e),i=ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new je(t,i)}maxPost(){const e=ke.EMPTY_NODE.updateChild(this.indexPath_,pp);return new je(ms,e)}toString(){return dp(this.indexPath_,0).join("/")}}const dM=new class M0e extends hv{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Sc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,t){const r=en(e);return new je(t,r)}toString(){return".value"}};function mp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class fM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fa}hasEnd(){return this.endSet_}getIndexEndValue(){return re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pt}copy(){const e=new fM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function aH(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Pt?t="$priority":n.index_===dM?t="$value":n.index_===Mo?t="$key":(re(n.index_ instanceof lM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Xn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Xn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Xn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Xn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Xn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function cH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Pt&&(e.i=n.index_.toString()),e}class _v extends qz{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ap("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=_v.getListenId_(e,r),a={};this.listens_[s]=a;const c=aH(e._queryParams);this.restRequest_(o+".json",c,(u,l)=>{let d=l;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(o,d,!1,r),Gu(this.listens_,s)===a){let h;h=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(h,null)}})}unlisten(e,t){const r=_v.getListenId_(e,t);delete this.listens_[r]}get(e){const t=aH(e._queryParams),r=e._path.toString(),i=new Hu;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Eh(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ch(a.responseText)}catch{br("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&br("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class V0e{constructor(){this.rootNode_=ke.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yv(){return{value:null,children:new Map}}function Gl(n,e,t){if(Be(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ue(e);n.children.has(r)||n.children.set(r,yv()),Gl(n.children.get(r),e=Dt(e),t)}}function _M(n,e,t){null!==n.value?t(e,n.value):function U0e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{_M(i,new ht(e.toString()+"/"+r),t)})}class B0e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class z0e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new B0e(e);const r=1e4+2e4*Math.random();up(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Hn(e,(i,o)=>{o>0&&Zo(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),up(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oo=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Oo||{});function wM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class vv{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Oo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Be(this.path)){if(null!=this.affectedTree.value)return re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ht(e));return new vv(rt(),t,this.revert)}}return re(Ue(this.path)===e,"operationForChild called for unrelated child."),new vv(Dt(this.path),this.affectedTree,this.revert)}}class Pc{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Oo.OVERWRITE}operationForChild(e){return Be(this.path)?new Pc(this.source,rt(),this.snap.getImmediateChild(e)):new Pc(this.source,Dt(this.path),this.snap)}}class ql{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Oo.MERGE}operationForChild(e){if(Be(this.path)){const t=this.children.subtree(new ht(e));return t.isEmpty()?null:t.value?new Pc(this.source,rt(),t.value):new ql(this.source,rt(),t)}return re(Ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ql(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ma{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Be(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ue(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function vp(n,e,t,r,i,o){const s=r.filter(a=>a.type===t);s.sort((a,c)=>function W0e(n,e,t){if(null==e.childName||null==t.childName)throw zu("Should only compare child_ events.");const r=new je(e.childName,e.snapshotNode),i=new je(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,c)),s.forEach(a=>{const c=function q0e(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function wv(n,e){return{eventCache:n,serverCache:e}}function wp(n,e,t,r){return wv(new ma(e,t,r),n.serverCache)}function lH(n,e,t,r){return wv(n.eventCache,new ma(e,t,r))}function bv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function kc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let bM;class kt{constructor(e,t=(()=>(bM||(bM=new Qr(Ove)),bM))()){this.value=e,this.children=t}static fromObject(e){let t=new kt(null);return Hn(e,(r,i)=>{t=t.set(new ht(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:rt(),value:this.value};if(Be(e))return null;{const r=Ue(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Dt(e),t);return null!=o?{path:qt(new ht(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Be(e))return this;{const t=Ue(e),r=this.children.get(t);return null!==r?r.subtree(Dt(e)):new kt(null)}}set(e,t){if(Be(e))return new kt(t,this.children);{const r=Ue(e),o=(this.children.get(r)||new kt(null)).set(Dt(e),t),s=this.children.insert(r,o);return new kt(this.value,s)}}remove(e){if(Be(e))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const t=Ue(e),r=this.children.get(t);if(r){const i=r.remove(Dt(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new kt(null):new kt(this.value,o)}return this}}get(e){if(Be(e))return this.value;{const t=Ue(e),r=this.children.get(t);return r?r.get(Dt(e)):null}}setTree(e,t){if(Be(e))return t;{const r=Ue(e),o=(this.children.get(r)||new kt(null)).setTree(Dt(e),t);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new kt(this.value,s)}}fold(e){return this.fold_(rt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(qt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,rt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Be(e))return null;{const o=Ue(e),s=this.children.get(o);return s?s.findOnPath_(Dt(e),qt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,rt(),t)}foreachOnPath_(e,t,r){if(Be(e))return this;{this.value&&r(t,this.value);const i=Ue(e),o=this.children.get(i);return o?o.foreachOnPath_(Dt(e),qt(t,i),r):new kt(null)}}foreach(e){this.foreach_(rt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(qt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Wi{constructor(e){this.writeTree_=e}static empty(){return new Wi(new kt(null))}}function bp(n,e,t){if(Be(e))return new Wi(new kt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Pr(i,e);return o=o.updateChild(s,t),new Wi(n.writeTree_.set(i,o))}{const i=new kt(t),o=n.writeTree_.setTree(e,i);return new Wi(o)}}}function CM(n,e,t){let r=n;return Hn(t,(i,o)=>{r=bp(r,qt(e,i),o)}),r}function dH(n,e){if(Be(e))return Wi.empty();{const t=n.writeTree_.setTree(e,new kt(null));return new Wi(t)}}function EM(n,e){return null!=Nc(n,e)}function Nc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Pr(t.path,e)):null}function hH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Pt,(r,i)=>{e.push(new je(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new je(r,i.value))}),e}function _a(n,e){if(Be(e))return n;{const t=Nc(n,e);return new Wi(null!=t?new kt(t):n.writeTree_.subtree(e))}}function IM(n){return n.writeTree_.isEmpty()}function Wl(n,e){return fH(rt(),n.writeTree_,e)}function fH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?(re(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=fH(qt(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(qt(n,".priority"),r)),t}}function Cv(n,e){return yH(e,n)}function Z0e(n,e){if(n.snap)return Ti(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ti(qt(n.path,t),e))return!0;return!1}function twe(n){return n.visible}function pH(n,e,t){let r=Wi.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const s=o.path;let a;if(o.snap)Ti(t,s)?(a=Pr(t,s),r=bp(r,a,o.snap)):Ti(s,t)&&(a=Pr(s,t),r=bp(r,rt(),o.snap.getChild(a)));else{if(!o.children)throw zu("WriteRecord should have .snap or .children");if(Ti(t,s))a=Pr(t,s),r=CM(r,a,o.children);else if(Ti(s,t))if(a=Pr(s,t),Be(a))r=CM(r,rt(),o.children);else{const c=Gu(o.children,Ue(a));if(c){const u=c.getChild(Dt(a));r=bp(r,rt(),u)}}}}}return r}function gH(n,e,t,r,i){if(r||i){const o=_a(n.visibleWrites,e);return!i&&IM(o)?t:i||null!=t||EM(o,rt())?Wl(pH(n.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Ti(u.path,e)||Ti(e,u.path))},e),t||ke.EMPTY_NODE):null}{const o=Nc(n.visibleWrites,e);if(null!=o)return o;{const s=_a(n.visibleWrites,e);return IM(s)?t:null!=t||EM(s,rt())?Wl(s,t||ke.EMPTY_NODE):null}}}function Ev(n,e,t,r){return gH(n.writeTree,n.treePath,e,t,r)}function TM(n,e){return function nwe(n,e,t){let r=ke.EMPTY_NODE;const i=Nc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pt,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){const o=_a(n.visibleWrites,e);return t.forEachChild(Pt,(s,a)=>{const c=Wl(_a(o,new ht(s)),a);r=r.updateImmediateChild(s,c)}),hH(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return hH(_a(n.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(n.writeTree,n.treePath,e)}function mH(n,e,t,r){return function rwe(n,e,t,r,i){re(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=qt(e,t);if(EM(n.visibleWrites,o))return null;{const s=_a(n.visibleWrites,o);return IM(s)?i.getChild(t):Wl(s,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Iv(n,e){return function owe(n,e){return Nc(n.visibleWrites,e)}(n.writeTree,qt(n.treePath,e))}function DM(n,e,t){return function iwe(n,e,t,r){const i=qt(e,t),o=Nc(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Wl(_a(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function _H(n,e){return yH(qt(n.treePath,e),n.writeTree)}function yH(n,e){return{treePath:n,writeTree:e}}class uwe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;re("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),re(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,mp(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,function gp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,function Hl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw zu("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,mp(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const vH=new class lwe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class AM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ma(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:kc(this.viewCache_),o=function cwe(n,e,t,r,i,o){return function swe(n,e,t,r,i,o,s){let a;const c=_a(n.visibleWrites,e),u=Nc(c,rt());if(null!=u)a=u;else{if(null==t)return[];a=Wl(c,t)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let p=h.getNext();for(;p&&l.length<i;)0!==d(p,r)&&l.push(p),p=h.getNext();return l}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function wH(n,e,t,r,i,o){const s=e.eventCache;if(null!=Iv(r,t))return e;{let a,c;if(Be(t))if(re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=kc(e),d=TM(r,u instanceof ke?u:ke.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const u=Ev(r,kc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{const u=Ue(t);if(".priority"===u){re(1===ga(t),"Can't have a priority with additional path components");const l=s.getNode();c=e.serverCache.getNode();const d=mH(r,t,l,c);a=null!=d?n.filter.updatePriority(l,d):s.getNode()}else{const l=Dt(t);let d;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();const h=mH(r,t,s.getNode(),c);d=null!=h?s.getNode().getImmediateChild(u).updateChild(l,h):s.getNode().getImmediateChild(u)}else d=DM(r,u,e.serverCache);a=null!=d?n.filter.updateChild(s.getNode(),u,d,l,i,o):s.getNode()}}return wp(e,a,s.isFullyInitialized()||Be(t),n.filter.filtersNodes())}}function Tv(n,e,t,r,i,o,s,a){const c=e.serverCache;let u;const l=s?n.filter:n.filter.getIndexedFilter();if(Be(t))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(t,r);u=l.updateFullNode(c.getNode(),p,null)}else{const p=Ue(t);if(!c.isCompleteForPath(t)&&ga(t)>1)return e;const w=Dt(t),x=c.getNode().getImmediateChild(p).updateChild(w,r);u=".priority"===p?l.updatePriority(c.getNode(),x):l.updateChild(c.getNode(),p,x,w,vH,null)}const d=lH(e,u,c.isFullyInitialized()||Be(t),l.filtersNodes());return wH(n,d,t,i,new AM(i,d,o),a)}function xM(n,e,t,r,i,o,s){const a=e.eventCache;let c,u;const l=new AM(i,e,o);if(Be(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=wp(e,u,!0,n.filter.filtersNodes());else{const d=Ue(t);if(".priority"===d)u=n.filter.updatePriority(e.eventCache.getNode(),r),c=wp(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=Dt(t),p=a.getNode().getImmediateChild(d);let w;if(Be(h))w=r;else{const I=l.getCompleteChild(d);w=null!=I?".priority"===iM(h)&&I.getChild(Yz(h)).isEmpty()?I:I.updateChild(h,r):ke.EMPTY_NODE}c=p.equals(w)?e:wp(e,n.filter.updateChild(a.getNode(),d,w,h,l,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function bH(n,e){return n.eventCache.isCompleteForChild(e)}function CH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function SM(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,c=e;u=Be(t)?r:new kt(null).setTree(t,r);const l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const w=CH(0,e.serverCache.getNode().getImmediateChild(d),h);c=Tv(n,c,new ht(d),w,i,o,s,a)}}),u.children.inorderTraversal((d,h)=>{const p=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!l.hasChild(d)&&!p){const I=CH(0,e.serverCache.getNode().getImmediateChild(d),h);c=Tv(n,c,new ht(d),I,i,o,s,a)}}),c}function Cwe(n,e){const t=kc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Be(e)&&!t.getImmediateChild(Ue(e)).isEmpty())?t.getChild(e):null}function TH(n,e,t,r){e.type===Oo.MERGE&&null!==e.source.queryId&&(re(kc(n.viewCache_),"We should always have a full cache before handling merges"),re(bv(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function fwe(n,e,t,r,i){const o=new uwe;let s,a;if(t.type===Oo.OVERWRITE){const u=t;u.source.fromUser?s=xM(n,e,u.path,u.snap,r,i,o):(re(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Be(u.path),s=Tv(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===Oo.MERGE){const u=t;u.source.fromUser?s=function gwe(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{const l=qt(t,c);bH(e,Ue(l))&&(a=xM(n,a,l,u,i,o,s))}),r.foreach((c,u)=>{const l=qt(t,c);bH(e,Ue(l))||(a=xM(n,a,l,u,i,o,s))}),a}(n,e,u.path,u.children,r,i,o):(re(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=SM(n,e,u.path,u.children,r,i,a,o))}else if(t.type===Oo.ACK_USER_WRITE){const u=t;s=u.revert?function ywe(n,e,t,r,i,o){let s;if(null!=Iv(r,t))return e;{const a=new AM(r,e,i),c=e.eventCache.getNode();let u;if(Be(t)||".priority"===Ue(t)){let l;if(e.serverCache.isFullyInitialized())l=Ev(r,kc(e));else{const d=e.serverCache.getNode();re(d instanceof ke,"serverChildren would be complete if leaf node"),l=TM(r,d)}u=n.filter.updateFullNode(c,l,o)}else{const l=Ue(t);let d=DM(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),u=null!=d?n.filter.updateChild(c,l,d,Dt(t),a,o):e.eventCache.getNode().hasChild(l)?n.filter.updateChild(c,l,ke.EMPTY_NODE,Dt(t),a,o):c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Ev(r,kc(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=Iv(r,rt()),wp(e,u,s,n.filter.filtersNodes())}}(n,e,u.path,r,i,o):function mwe(n,e,t,r,i,o,s){if(null!=Iv(i,t))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Be(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Tv(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Be(t)){let u=new kt(null);return c.getNode().forEachChild(Mo,(l,d)=>{u=u.set(new ht(l),d)}),SM(n,e,t,u,i,o,a,s)}return e}{let u=new kt(null);return r.foreach((l,d)=>{const h=qt(t,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),SM(n,e,t,u,i,o,a,s)}}(n,e,u.path,u.affectedTree,r,i,o)}else{if(t.type!==Oo.LISTEN_COMPLETE)throw zu("Unknown operation type: "+t.type);s=function _we(n,e,t,r,i){const o=e.serverCache;return wH(n,lH(e,o.getNode(),o.isFullyInitialized()||Be(t),o.isFiltered()),t,r,vH,i)}(n,e,t.path,r,o)}const c=o.getChanges();return function pwe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=bv(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(function sH(n){return{type:"value",snapshotNode:n}}(bv(e)))}}(e,s,c),{viewCache:s,changes:c}}(n.processor_,i,e,t,r);return function hwe(n,e){re(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),re(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),re(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function DH(n,e,t,r){return function G0e(n,e,t,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function O0e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(s.childName,s.snapshotNode))}),vp(n,i,"child_removed",e,r,t),vp(n,i,"child_added",e,r,t),vp(n,i,"child_moved",o,r,t),vp(n,i,"child_changed",e,r,t),vp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let Dv,xv;function MM(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return re(null!=o,"SyncTree gave us an op for an invalid query."),TH(o,e,t,r)}{let o=[];for(const s of n.views.values())o=o.concat(TH(s,e,t,r));return o}}function ya(n,e){let t=null;for(const r of n.views.values())t=t||Cwe(r,e);return t}class PH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kt(null),this.pendingWriteTree_=function awe(){return{visibleWrites:Wi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function OM(n,e,t,r,i){return function Q0e(n,e,t,r,i){re(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=bp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Kl(n,new Pc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wa(n,e,t=!1){const r=function X0e(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function J0e(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);re(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=t&&Z0e(a,r.path)?i=!1:Ti(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function ewe(n){n.visibleWrites=pH(n.allWrites,twe,rt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=dH(n.visibleWrites,r.path):Hn(r.children,c=>{n.visibleWrites=dH(n.visibleWrites,qt(r.path,c))}),!0))}(n.pendingWriteTree_,e)){let o=new kt(null);return null!=r.snap?o=o.set(rt(),!0):Hn(r.children,s=>{o=o.set(new ht(s),!0)}),Kl(n,new vv(r.path,o,t))}return[]}function Cp(n,e,t){return Kl(n,new Pc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Mv(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{const u=ya(a,Pr(s,e));if(u)return u});return gH(i,e,o,t,!0)}function Kl(n,e){return NH(e,n.syncPointTree_,null,Cv(n.pendingWriteTree_,rt()))}function NH(n,e,t,r){if(Be(n.path))return RH(n,e,t,r);{const i=e.get(rt());null==t&&null!=i&&(t=ya(i,rt()));let o=[];const s=Ue(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){const u=t?t.getImmediateChild(s):null,l=_H(r,s);o=o.concat(NH(a,c,u,l))}return i&&(o=o.concat(MM(i,n,r,t))),o}}function RH(n,e,t,r){const i=e.get(rt());null==t&&null!=i&&(t=ya(i,rt()));let o=[];return e.children.inorderTraversal((s,a)=>{const c=t?t.getImmediateChild(s):null,u=_H(r,s),l=n.operationForChild(s);l&&(o=o.concat(RH(l,a,c,u)))}),i&&(o=o.concat(MM(i,n,r,t))),o}function kM(n,e){return n.tagToQueryMap.get(e)}function NM(n){const e=n.indexOf("$");return re(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ht(n.substr(0,e))}}function RM(n,e,t){const r=n.syncPointTree_.get(e);return re(r,"Missing sync point for query tag that we're tracking"),MM(r,t,Cv(n.pendingWriteTree_,e),null)}class FM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new FM(t)}node(){return this.node_}}class LM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=qt(this.path_,e);return new LM(this.syncTree_,t)}node(){return Mv(this.syncTree_,this.path_)}}const zwe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},LH=function(n,e,t){return n&&"object"==typeof n?(re(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Hwe(n[".sv"],e,t):"object"==typeof n[".sv"]?Gwe(n[".sv"],e):void re(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Hwe=function(n,e,t){if("timestamp"===n)return t.timestamp;re(!1,"Unexpected server value: "+n)},Gwe=function(n,e,t){n.hasOwnProperty("increment")||re(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&re(!1,"Unexpected increment value: "+r);const i=e.node();if(re(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},VH=function(n,e,t,r){return UM(e,new LM(t,n),r)},VM=function(n,e,t){return UM(n,new FM(e),t)};function UM(n,e,t){const r=n.getPriority().val(),i=LH(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const s=n,a=LH(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new $l(a,en(i)):n}{const s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new $l(i))),s.forEachChild(Pt,(a,c)=>{const u=UM(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}class BM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Pv(n,e){let t=e instanceof ht?e:new ht(e),r=n,i=Ue(t);for(;null!==i;){const o=Gu(r.node.children,i)||{children:{},childCount:0};r=new BM(i,r,o),t=Dt(t),i=Ue(t)}return r}function Rc(n){return n.node.value}function jM(n,e){n.node.value=e,$M(n)}function UH(n){return n.node.childCount>0}function kv(n,e){Hn(n.node.children,(t,r)=>{e(new BM(t,n,r))})}function BH(n,e,t,r){t&&!r&&e(n),kv(n,i=>{BH(i,e,!0,r)}),t&&r&&e(n)}function Tp(n){return new ht(null===n.parent?n.name:Tp(n.parent)+"/"+n.name)}function $M(n){null!==n.parent&&function Kwe(n,e,t){const r=function qwe(n){return void 0===Rc(n)&&!UH(n)}(t),i=Zo(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,$M(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,$M(n))}(n.parent,n.name,n)}const Qwe=/[\[\].#$\/\u0000-\u001F\u007F]/,Ywe=/[\[\].#$\u0000-\u001F\u007F]/,zM=10485760,Nv=function(n){return"string"==typeof n&&0!==n.length&&!Qwe.test(n)},Ap=function(n,e,t){const r=t instanceof ht?new f0e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Mc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Mc(r)+" with contents = "+e.toString());if(cv(e))throw new Error(n+"contains "+e.toString()+" "+Mc(r));if("string"==typeof e&&e.length>zM/3&&i_(e)>zM)throw new Error(n+"contains a string greater than "+zM+" utf8 bytes "+Mc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Hn(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Nv(s)))throw new Error(n+" contains an invalid key ("+s+") "+Mc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function p0e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=i_(e),Xz(n)})(r,s),Ap(n,a,r),function g0e(n){const e=n.parts_.pop();n.byteLength_-=i_(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Mc(r)+" in addition to actual children.")}},zH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Nv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Ywe.test(n)}(n)}(t))throw new Error(function r_(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ebe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ui(n,e,t){(function Rv(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!oM(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function GH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(tbe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Ti(r,e)||Ti(e,r))}function tbe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();xc&&zn("event: "+t.toString()),Bl(r)}}}const nbe=25;class rbe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ebe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yv(),this.transactionQueueTree_=new BM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WH(n){const t=n.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Sp(n){return zwe({timestamp:WH(n)})}function KH(n,e,t,r,i){n.dataUpdateCount++;const o=new ht(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){const c=t_(t,u=>en(u));s=function Lwe(n,e,t,r){const i=kM(n,r);if(i){const o=NM(i),s=o.path,a=o.queryId,c=Pr(s,e),u=kt.fromObject(t);return RM(n,s,new ql(wM(a),c,u))}return[]}(n.serverSyncTree_,o,c,i)}else{const c=en(t);s=function kH(n,e,t,r){const i=kM(n,r);if(null!=i){const o=NM(i),s=o.path,a=o.queryId,c=Pr(s,e);return RM(n,s,new Pc(wM(a),c,t))}return[]}(n.serverSyncTree_,o,c,i)}else if(r){const c=t_(t,u=>en(u));s=function Nwe(n,e,t){const r=kt.fromObject(t);return Kl(n,new ql({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,c)}else{const c=en(t);s=Cp(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Yl(n,o)),ui(n.eventQueue_,a,s)}function QH(n,e){qM(n,"connected",e),!1===e&&function cbe(n){Ql(n,"onDisconnectEvents");const e=Sp(n),t=yv();_M(n.onDisconnect_,rt(),(i,o)=>{const s=VH(i,o,n.serverSyncTree_,e);Gl(t,i,s)});let r=[];_M(t,rt(),(i,o)=>{r=r.concat(Cp(n.serverSyncTree_,i,o));const s=function YM(n,e){const t=Tp(JH(n,e)),r=Pv(n.transactionQueueTree_,e);return function Wwe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{XM(n,i)}),XM(n,r),BH(r,i=>{XM(n,i)}),t}(n,i);Yl(n,s)}),n.onDisconnect_=yv(),ui(n.eventQueue_,rt(),r)}(n)}function qM(n,e,t){const r=new ht("/.info/"+e),i=en(t);n.infoData_.updateSnapshot(r,i);const o=Cp(n.infoSyncTree_,r,i);ui(n.eventQueue_,r,o)}function Fv(n){return n.nextWriteId_++}function Ql(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zn(t,...e)}function QM(n,e,t){return Mv(n.serverSyncTree_,e,t)||ke.EMPTY_NODE}function Lv(n,e=n.transactionQueueTree_){if(e||Vv(n,e),Rc(e)){const t=ZH(n,e);re(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function gbe(n,e,t){const r=t.map(u=>u.currentWriteId),i=QM(n,e,r);let o=i;const s=i.hash();for(let u=0;u<t.length;u++){const l=t[u];re(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=Pr(e,l.path);o=o.updateChild(d,l.currentOutputSnapshotRaw)}const a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{Ql(n,"transaction put response",{path:c.toString(),status:u});let l=[];if("ok"===u){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,l=l.concat(wa(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Vv(n,Pv(n.transactionQueueTree_,e)),Lv(n,n.transactionQueueTree_),ui(n.eventQueue_,e,l);for(let h=0;h<d.length;h++)Bl(d[h])}else{if("datastale"===u)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{br("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=u}Yl(n,e)}},s)}(n,Tp(e),t)}else UH(e)&&kv(e,t=>{Lv(n,t)})}function Yl(n,e){const t=JH(n,e),r=Tp(t);return function mbe(n,e,t){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Pr(t,c.path);let d,l=!1;if(re(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)l=!0,d=c.abortReason,i=i.concat(wa(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=nbe)l=!0,d="maxretry",i=i.concat(wa(n.serverSyncTree_,c.currentWriteId,!0));else{const h=QM(n,c.path,s);c.currentInputSnapshot=h;const p=e[a].update(h.val());if(void 0!==p){Ap("transaction failed: Data returned ",p,c.path);let w=en(p);"object"==typeof p&&null!=p&&Zo(p,".priority")||(w=w.updatePriority(h.getPriority()));const x=c.currentWriteId,k=Sp(n),M=VM(w,h,k);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=M,c.currentWriteId=Fv(n),s.splice(s.indexOf(x),1),i=i.concat(OM(n.serverSyncTree_,c.path,M,c.currentWriteId,c.applyLocally)),i=i.concat(wa(n.serverSyncTree_,x,!0))}else l=!0,d="nodata",i=i.concat(wa(n.serverSyncTree_,c.currentWriteId,!0))}ui(n.eventQueue_,t,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Vv(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Bl(r[a]);Lv(n,n.transactionQueueTree_)}(n,ZH(n,t),r),r}function JH(n,e){let t,r=n.transactionQueueTree_;for(t=Ue(e);null!==t&&void 0===Rc(r);)r=Pv(r,t),t=Ue(e=Dt(e));return r}function ZH(n,e){const t=[];return eG(n,e,t),t.sort((r,i)=>r.order-i.order),t}function eG(n,e,t){const r=Rc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);kv(e,i=>{eG(n,i,t)})}function Vv(n,e){const t=Rc(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,jM(e,t.length>0?t:void 0)}kv(e,r=>{Vv(n,r)})}function XM(n,e){const t=Rc(e);if(t){const r=[];let i=[],o=-1;for(let s=0;s<t.length;s++)3===t[s].status||(1===t[s].status?(re(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(re(0===t[s].status,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(wa(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?jM(e,void 0):t.length=o+1,ui(n.eventQueue_,Tp(e),i);for(let s=0;s<r.length;s++)Bl(r[s])}}const JM=function(n,e){const t=vbe(n),r=t.namespace;return"firebase.com"===t.domain&&So(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&So("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&br("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new JS(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ht(t.pathString)}},vbe=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let l=n.indexOf("/");-1===l&&(l=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(l,d)),l<d&&(i=function _be(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(l,d)));const h=function ybe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):br(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if("localhost"===p.toLowerCase())t="localhost";else if(p.split(".").length<=2)t=p;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=r}"ns"in h&&(o=h.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class li{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Be(this._path)?null:iM(this._path)}get ref(){return new Ki(this._repo,this._path)}get _queryIdentifier(){const e=cH(this._queryParams),t=YS(e);return"{}"===t?"default":t}get _queryObject(){return cH(this._queryParams)}isEqual(e){if(!((e=Ht(e))instanceof li))return!1;const t=this._repo===e._repo,r=oM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function d0e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ki extends li{constructor(e,t){super(e,t,new fM,!1)}get parent(){const e=Yz(this._path);return null===e?null:new Ki(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Twe(n){re(!Dv,"__referenceConstructor has already been defined"),Dv=n})(Ki),function Mwe(n){re(!xv,"__referenceConstructor has already been defined"),xv=n}(Ki);const eO={};class Ube{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ibe(n,e,t){if(n.stats_=tM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new _v(n.repoInfo_,(r,i,o,s)=>{KH(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Oc(n.repoInfo_,e,(r,i,o,s)=>{KH(n,r,i,o,s)},r=>{QH(n,r)},r=>{!function obe(n,e){Hn(e,(t,r)=>{qM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function zve(n,e){const t=n.toString();return eM[t]||(eM[t]=e()),eM[t]}(n.repoInfo_,()=>new z0e(n.stats_,n.server_)),n.infoData_=new V0e,n.infoSyncTree_=new PH({startListening:(r,i,o,s)=>{let a=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Cp(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),qM(n,"connected",!1),n.serverSyncTree_=new PH({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{const u=s(a,c);ui(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ki(this._repo,rt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Fbe(n,e){const t=eO[e];(!t||t[n.key]!==n)&&So(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function XH(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&So("Cannot call "+e+" on a deleted database.")}}function Bbe(n=Dh(),e){const t=js(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=nE("database");r&&function jbe(n,e,t,r={}){(n=Ht(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&So("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&So('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new lp(lp.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:MU(r.mockUserToken,n.app.options.projectId);o=new lp(s)}!function Nbe(n,e,t,r){n.repoInfo_=new JS(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(t,...r)}return t}Oc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Oc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function $be(n){(function Dve(n){WS=n})($s),Jn(new Nn("database",(e,{instanceIdentifier:t})=>function Rbe(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||So("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,u,s=JM(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=JM(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const l=i&&c?new lp(lp.OWNER):new Bve(n.name,n.options,e);zH("Invalid Firebase Database URL",s),Be(s.path)||So("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Lbe(n,e,t,r){let i=eO[e.name];i||(i={},eO[e.name]=i);let o=i[n.toURLString()];return o&&So("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new rbe(n,!1,t,r),i[n.toURLString()]=o,o}(a,n,l,new Uve(n.name,t));return new Ube(d,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),wt(hz,"0.14.4",n),wt(hz,"0.14.4","esm2017")}();class tO{constructor(e){return e}}const uG="database",nO=new le("angularfire2.database-instances");function Wbe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new tO(r)}}const Kbe={provide:class Gbe{constructor(){return Oh(uG)}},deps:[[new Xt,nO]]},Qbe={provide:tO,useFactory:function qbe(n,e){const t=Mh(uG,n,e);return t&&new tO(t)},deps:[[new Xt,nO],Hs]};let Ybe=(()=>{class n{constructor(){wt("angularfire",Ku.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[Qbe,Kbe]}),n})();function Xbe(n,...e){return{ngModule:Ybe,providers:[{provide:nO,useFactory:Wbe(n),multi:!0,deps:[gt,Ir,Ph,kh,[new Xt,L_],[new Xt,Fh],...e]}]}}const Jbe=xn(Bbe,!0),iO="functions";class rCe{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return C(function*(){if(e.auth)try{const t=yield e.auth.getToken();return t?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return C(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var t=this;return C(function*(){if(t.appCheck){const r=e?yield t.appCheck.getLimitedUseToken():yield t.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var t=this;return C(function*(){return{authToken:yield t.getAuthToken(),messagingToken:yield t.getMessagingToken(),appCheckToken:yield t.getAppCheckToken(e)}})()}}const oO="us-central1";class oCe{constructor(e,t,r,i,o=oO,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new rCe(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin,this.region=oO}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const fG="@firebase/functions";function gCe(n=Dh(),e=oO){const r=js(Ht(n),iO).getImmediate({identifier:e}),i=nE("functions");return i&&function mCe(n,e,t){!function sCe(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}(Ht(n),e,t)}(r,...i),r}!function pCe(n,e){Jn(new Nn(iO,(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),c=r.getProvider("app-check-internal");return new oCe(o,s,a,c,i,n)},"PUBLIC").setMultipleInstances(!0)),wt(fG,"0.10.0",e),wt(fG,"0.10.0","esm2017")}(fetch.bind(self));class cO{constructor(e){return e}}const gG="functions",uO=new le("angularfire2.functions-instances");function vCe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cO(r)}}const wCe={provide:class _Ce{constructor(){return Oh(gG)}},deps:[[new Xt,uO]]},bCe={provide:cO,useFactory:function yCe(n,e){const t=Mh(gG,n,e);return t&&new cO(t)},deps:[[new Xt,uO],Hs]};let CCe=(()=>{class n{constructor(){wt("angularfire",Ku.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[bCe,wCe]}),n})();function ECe(n,...e){return{ngModule:CCe,providers:[{provide:uO,useFactory:vCe(n),multi:!0,deps:[gt,Ir,Ph,kh,[new Xt,L_],[new Xt,Fh],...e]}]}}const ICe=xn(gCe,!0);function TCe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td",4),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",7),q("click",function(){const o=Ge(t).$implicit;return qe(un().Unidades(o.name))}),m(),_(11,"button",8),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoProject(o.codigo))}),m(),_(12,"button",9),q("click",function(){const o=Ge(t).$implicit;return qe(un().editProyecto(o.name))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.name),H(2),Ee(t.owner),H(2),Ee(t.integrantes),H(2),Ee(t.cliente)}}let DCe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.list=[],this.email="",this.MyQuery()}getData(){const t=ic();el(t,i=>{i&&i.email&&(this.email=i.email)});const r=Te(this.firestore,"projects");pe(r).then(i=>{this.data=[...i.docs.map(o=>({...o.data(),id:o.id}))]})}updateData(t){const r=Fe(this.firestore,"projects",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"projects",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}infoProject(t){this.router.navigate(["user/project-info/"+t])}newProject(){this.router.navigate(["user/project-new"])}EditProject(){this.router.navigate(["user/project-new"])}Unidades(t){this.router.navigate(["user/unidad-produccion/"+t])}Muestras(t){this.router.navigate(["user/muestras/"+t])}editProyecto(t){this.router.navigate(["user/project-edit/"+t])}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}MyQuery(){var t=this;return C(function*(){const r=ic();let i;i="",console.log(r),el(r,function(){var o=C(function*(s){if(s&&(console.log(s.email),s.email)){i=s.email;const a=_n(Te(t.firestore,"projects"),sn("owner","==",i));pe(a).then(c=>{t.data=[...c.docs.map(u=>({...u.data(),id:u.id}))]})}});return function(s){return o.apply(this,arguments)}}()),console.log("done")})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-projects"]],decls:22,vars:1,consts:[[1,"scanbutton"],[1,"scantext",3,"click"],[1,"subTituloText"],[1,"list"],[1,"integrantes"],[4,"ngFor","ngForOf"],["id","agregar",1,"boton",3,"click"],[1,"muestras",3,"click"],[1,"detalles",3,"click"],[1,"edit",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"projects works!"),m(),Z(2,"div",0),_(3,"div",1),q("click",function(){return r.Scan()}),b(4,"SCAN"),m(),_(5,"h1",2),b(6,"Proyectos"),m(),_(7,"div",3)(8,"table")(9,"tr")(10,"th"),b(11," Nombre "),m(),_(12,"th"),b(13," Due\xf1o "),m(),_(14,"th",4),b(15," Integrantes"),m(),_(16,"th"),b(17," Clientes "),m(),Z(18,"th"),m(),ri(19,TCe,13,4,"tr",5),m(),_(20,"button",6),q("click",function(){return r.newProject()}),b(21," Agregar "),m()()),2&t&&(H(19),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:25%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{cursor:pointer;width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{cursor:pointer;width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.muestras[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(clipboard.008357a0b24034e8.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}@media only screen and (max-width: 768px){.list[_ngcontent-%COMP%]{position:absolute;left:1%;top:40%;text-overflow:ellipsis}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;text-overflow:ellipsis;padding:2px;font-size:12px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:2px;font-size:12px}table[_ngcontent-%COMP%]{border-collapse:collapse}.integrantes[_ngcontent-%COMP%]{display:none}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:30%;height:36px;left:35%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:30%;height:3%;left:35%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{position:absolute;left:80%;top:100%;border:none;float:right;background-color:#3eb3c2;color:#fff;margin:10px 0;padding:10px;text-align:center;text-decoration:none;font-size:12px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:32px;letter-spacing:0;left:30%;top:22%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:14px;height:14px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.muestras[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:14px;height:14px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(clipboard.008357a0b24034e8.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:14px;height:14px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}}"]}),n})();function ACe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",7),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoMuestra(o.codigo))}),m(),_(11,"button",8),q("click",function(){const o=Ge(t).$implicit;return qe(un().editMuestra(o.codigo))}),m(),_(12,"button",9),q("click",function(){const o=Ge(t).$implicit;return qe(un().Barcode(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.fecha),H(2),Ee(t.cultivo),H(2),Ee(t.coordenadas)}}let xCe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[]}ngOnInit(){this.route.params.subscribe(t=>{this.item=t.id,this.up=t.up,console.log(t),console.log(t.id)}),this.MyQuery()}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"muestras",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"muestras",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newMuestra(t){this.router.navigate(["user/muestras-new/"+t])}editMuestra(t){this.router.navigate(["user/muestras-edit/"+t])}infoUnidad(t){this.router.navigate(["user/unidad-produccion-info/"+t])}infoMuestra(t){this.router.navigate(["user/muestras-info/"+t])}Barcode(t){this.router.navigate(["user/barcode/"+t])}MyQuery(){var t=this;return C(function*(){let r=t.item;t.pid=r;let i=t.up;console.log(r);const o=_n(Te(t.firestore,"muestras"),sn("project","==",r),sn("unidad","==",i));pe(o).then(a=>{t.data=[...a.docs.map(c=>({...c.data(),id:c.id}))]}),(yield pe(o)).forEach(a=>{console.log(a.id," => ",a.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras"]],decls:24,vars:1,consts:[[1,"subTituloText"],[1,"scanbutton"],[1,"scantext",3,"click"],[1,"list"],[1,"projectBlock",3,"click"],[4,"ngFor","ngForOf"],["id","agregar",1,"boton",3,"click"],[1,"detalles",3,"click"],[1,"edit",3,"click"],[1,"imprimir",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"muestras works!"),m(),_(2,"h1",0),b(3,"Muestras"),m(),Z(4,"div",1),_(5,"div",2),q("click",function(){return r.Scan()}),b(6,"SCAN"),m(),_(7,"div",3)(8,"div",4),q("click",function(){return r.infoUnidad(r.up)}),b(9,"Unidad de Produccion"),m(),_(10,"table")(11,"tr")(12,"th"),b(13," Codigo "),m(),_(14,"th"),b(15," Fecha "),m(),_(16,"th"),b(17," Cultivo"),m(),_(18,"th"),b(19," Coordenadas "),m(),Z(20,"th"),m(),ri(21,ACe,13,4,"tr",5),m(),_(22,"button",6),q("click",function(){return r.newMuestra(r.pid)}),b(23," Agregar "),m()()),2&t&&(H(21),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:60%;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{cursor:pointer;width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{cursor:pointer;width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})(),SCe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[]}ngOnInit(){let t;this.route.params.subscribe(r=>{this.item=r.id,t=r.id,console.log(r),console.log(r.id),this.generateBarcode(t)})}generateBarcode(t){var r=t;console.log(t),console.log(r),this.res=r,uz("#barcode",r,{format:"CODE128"})}toPrint(){this.router.navigate(["/print/"+this.res])}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-barcode"]],decls:5,vars:0,consts:[["onclick","window.print(this)","id","barcode"],[1,"print",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"barcode works!"),m(),D0(),Z(2,"svg",0),function UP(){!function L7(){ve.lFrame.currentNamespace=null}()}(),_(3,"button",1),q("click",function(){return r.toPrint()}),b(4,"Print"),m())},styles:[".main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:100%;left:5%;top:20%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.print[_ngcontent-%COMP%]{position:absolute;width:10%;left:45%;top:20%}svg[_ngcontent-%COMP%]{position:absolute;left:44%;top:35%}button[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:24px;font-weight:700;cursor:pointer;border-radius:30px}"]}),n})();const MCe=["div"];let OCe=(()=>{class n{constructor(t,r,i){this.auth=t,this.firestore=r,this.renderer=i,this.title="gestion-de-muestras-de-campo",this.data=[],this.getData(),this.index=1}randomCode(){let t="";for(let o=0;o<20;o++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return t}handleRegister(t){this.addData(t)}addData(t){var r=this;return C(function*(){let o=r.randomCode(),s=t.integrantes.split(/[\s,]+/);const a=Fe(r.firestore,"projects",o);(yield fve(a))?alert("Needs a Unique Code"):xo(a,{name:t.name,cliente:t.cliente,owner:t.owner,integrantes:s}).then(()=>{alert("Data Sent")}).catch(u=>{alert(u.message)})})()}getData(){const t=Te(this.firestore,"projects");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}}return n.\u0275fac=function(t){return new(t||n)(S(We),S(ut),S(Pi))},n.\u0275cmp=He({type:n,selectors:[["app-project-new"]],viewQuery:function(t,r){if(1&t&&hr(MCe,5),2&t){let i;Qn(i=Yn())&&(r.div=i.first)}},decls:32,vars:0,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[2,"color","red"],[1,"input-fields"],[1,"Text"],["name","id","ngModel","","placeholder","ID","id","id","type","id",1,"input-field"],["name","name","ngModel","","placeholder","Name","id","name","type","name",1,"input-field"],["name","owner","ngModel","","placeholder","Owner","id","owner","type","owner",1,"input-field"],["name","integrantes","ngModel","","placeholder","Integrantes","id","integrantes","type","integrantes",1,"input-field"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field"],[1,"boton"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"project-new works!"),m(),_(2,"h1",0),b(3,"Nuevo Proyecto"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"p",5),b(9," * Todo Projecto requiere un identificador \xfanico "),m(),_(10,"div",6)(11,"span",7),b(12,"ID:"),m(),Z(13,"input",8),m(),_(14,"div",6)(15,"span",7),b(16,"Name:"),m(),Z(17,"input",9),m(),_(18,"div",6)(19,"span",7),b(20,"Owner:"),m(),Z(21,"input",10),m(),_(22,"div",6)(23,"span",7),b(24,"Integrantes:"),m(),Z(25,"input",11),m(),_(26,"div",6)(27,"span",7),b(28,"Cliente:"),m(),Z(29,"input",12),m(),_(30,"button",13),b(31,"Crear Proyecto"),m()()()()}},dependencies:[Hr,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:45%;flex-shrink:0;position:absolute;left:15%;top:30%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:3%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:85%;top:110%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const PCe=["geo"];let kCe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.res="",this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.pid=t.id})}handleRegister(t){this.addData(t)}addData(t){const r=Fe(this.firestore,"clientes",t.codigo);xo(r,{codigo:t.codigo,cliente:t.cliente,fecha:t.fecha,cultivo:t.cultivo,tipo:t.tipo,fitopatogeno:t.fitopatogeno,estado:t.estado,coordenadas:t.coordenadas,sintomas:t.sintomas,comentarios:t.comentarios,project:this.pid}).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"clientes");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude),n.text=t.coords.latitude+", "+t.coords.longitude,console.log(n.text)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{t.res=n.text,console.log(t.res)},1e3)})()}}return n.text="",n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras-new"]],viewQuery:function(t,r){if(1&t&&hr(PCe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:69,vars:1,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],["name","codigo","ngModel","","placeholder","codigo","id","codigo","type","codigo",1,"input-field"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field"],["name","fecha","ngModel","","placeholder","Fecha","id","fecha","type","fecha",1,"input-field"],["name","cultivo","ngModel","","placeholder","Cultivo","id","cultivo","type","cultivo",1,"input-field"],["list","tipos","name","tipo","ngModel","","placeholder","Tipo","id","tipo","type","tipo",1,"input-field"],["id","tipos"],["value","Hibrido"],["value","Variedad"],["value","Clone"],["list","fitopatogenos","name","fitopatogeno","ngModel","","placeholder","Fitopatogeno","id","fitopatogeno","type","fitopatogeno",1,"input-field"],["id","fitopatogenos"],["value","Hongos"],["value","Bacterias"],["value","Virus"],["name","estado","ngModel","","placeholder","Estado","id","estado","type","estado",1,"input-field"],["name","lote","ngModel","","placeholder","Lote","id","lote","type","lote",1,"input-field"],["name","repeticion","ngModel","","placeholder","Repeticion","id","repeticion","type","repeticion",1,"input-field"],["name","coordenadas","ngModel","","placeholder","Coordenadas","id","coordenadas","type","coordenadas",1,"input-field",3,"ngModel","ngModelChange"],[1,"bUbicacion",3,"click"],["src","../../../../assets/Ubicacion.png","alt","U"],["name","sintomas","ngModel","","placeholder","Sintomas","id","sintomas","rows","4","cols","50"],["name","comentarios","ngModel","","placeholder","Comentarios","id","comentarios","rows","4","cols","50"],[1,"boton"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"muestras-new works!"),m(),_(2,"h1",0),b(3,"Nueva Muestra"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),Z(11,"input",7),m(),_(12,"div",5)(13,"span",6),b(14,"Cliente:"),m(),Z(15,"input",8),m(),_(16,"div",5)(17,"span",6),b(18,"Fecha:"),m(),Z(19,"input",9),m(),_(20,"div",5)(21,"span",6),b(22,"Cultivo:"),m(),Z(23,"input",10),m(),_(24,"div",5)(25,"span",6),b(26,"Tipo:"),m(),Z(27,"input",11),_(28,"datalist",12),Z(29,"option",13)(30,"option",14)(31,"option",15),m()(),_(32,"div",5)(33,"span",6),b(34,"Fitopat\xf3geno:"),m(),Z(35,"input",16),_(36,"datalist",17),Z(37,"option",18)(38,"option",19)(39,"option",20),m()(),_(40,"div",5)(41,"span",6),b(42,"Estado:"),m(),Z(43,"input",21),m(),_(44,"div",5)(45,"span",6),b(46,"Lote:"),m(),Z(47,"input",22),m(),_(48,"div",5)(49,"span",6),b(50,"Repetici\xf3n:"),m(),Z(51,"input",23),m(),_(52,"div",5)(53,"span",6),b(54,"Coordenadas:"),m(),_(55,"input",24),q("ngModelChange",function(s){return r.res=s}),m(),_(56,"div",25),q("click",function(){return r.getLocation()}),Z(57,"img",26),m()(),_(58,"div",5)(59,"span",6),b(60,"Sintomas:"),m(),Z(61,"textarea",27),m(),_(62,"div",5)(63,"span",6),b(64,"Comentarios:"),m(),_(65,"textarea",28),b(66," "),m()(),_(67,"button",29),b(68,"Crear Muestra"),m()()()()}2&t&&(H(55),Ae("ngModel",r.res))},dependencies:[Hr,nh,rh,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:70%;flex-shrink:0;position:absolute;left:15%;top:25%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:3%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:15%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();class Di extends Qi{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(e){const{hasError:t,_hasValue:r,_value:i,thrownError:o,isStopped:s,_isComplete:a}=this;t?e.error(o):(s||a)&&(r&&e.next(i),e.complete())}next(e){this.isStopped||(this._value=e,this._hasValue=!0)}complete(){const{_hasValue:e,_value:t,_isComplete:r}=this;r||(this._isComplete=!0,e&&super.next(t),super.complete())}}const NCe=["video"],RCe=["canvas"],FCe=["resultsPanel"],lO="assets/wasm/index.js",Pp="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.4/wasm/index.js",mG={audio:!1,video:!0},dO={lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"},hO={font:"15px serif",strokeStyle:"#fff0",fillStyle:"#ff0000"},ys={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:mG,canvasStyles:[dO,hO]};var zv=()=>"zbarWasm"in window;const it=(n,e,t)=>{t?n.error(t):n.next(e),n.complete()},fO=(n=!1)=>{if(!1===n)return;const e=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");e.oncanplaythrough=()=>{const t=e.play();t&&t.catch(r=>{})}},_G=(n,e,t,r)=>{let i,o,s=e.width,a=e.height,c=s/a,u=parseInt(getComputedStyle(e).width),l=parseInt(getComputedStyle(e).height),d=u/l;t.innerHTML="",c>d?(i=u/s,o=u/c/a):(o=l/a,i=l*c/s);for(let h=0;h<n.length;h++){const p=n[h];let w=document.createElement("canvas"),I=w.getContext("2d",{willReadFrequently:!0}),x={},k=[],M=[],$=0,J=0,ae=2===r.length&&r[1]?.font?.replace(/[^0-9]/g,"");ae&&/[0-9]/g.test(ae)&&($=parseFloat(ae),J=(i||1)*$,Number.isNaN(J)&&(J=$));const ye=p.points;for(let Bt=0;Bt<ye.length;Bt++){const Gv=ye?.[Bt]?.x??0,qv=ye?.[Bt]?.y??0;x[`x${Bt+1}`]=Gv,x[`y${Bt+1}`]=qv,k.push(Gv),M.push(qv)}let Nt=Math.max(...k),Cn=Math.min(...k),Ai=Math.max(...M),No=Math.min(...M);w.setAttribute("class","qrcode-polygon"),c>d?(w.style.top=No*o+.5*(l-u/c)+"px",w.style.left=Cn*i+"px",w.width=(Nt-Cn)*i,w.height=(Ai-No)*i):(w.style.top=No*o+"px",w.style.left=Cn*i+.5*(u-l*c)+"px",w.width=(Nt-Cn)*o,w.height=(Ai-No)*o);for(const Bt in r[0])I[Bt]=r[0][Bt];const _O=[];for(let Bt=0;Bt<k.length;Bt++)_O.push((x[`x${Bt+1}`]-Cn)*o),_O.push((x[`y${Bt+1}`]-No)*i);const kp=_O.slice(0);for(I.beginPath(),I.moveTo(kp.shift(),kp.shift());kp.length;)I.lineTo(kp.shift(),kp.shift());if(I.closePath(),I.fill(),I.stroke(),$){const Bt=document.createElement("div");Bt.setAttribute("class","qrcode-tooltip-temp"),Bt.innerText=p.value,Bt.style.maxWidth=(s>window.innerWidth?.9*window.innerWidth:s)+"px",Bt.style.borderRadius=`clamp(1px, ${i*$-10}px, 3px)`,Bt.style.paddingBlock=`clamp(1px, ${i*$-10}px, 3px)`,Bt.style.paddingInline=`clamp(2.5px, ${i*$-6}px, 10px)`;const Gv=`<svg xmlns="http://www.w3.org/2000/svg" width="${J}" height="${J}" viewBox="0 0 512 512"><rect x="128" y="128" width="336" height="336" rx="57" ry="57"></rect><path d="M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24"></path></svg>`,qv=(new DOMParser).parseFromString(Gv,"application/xml"),yO=Bt.ownerDocument.importNode(qv.documentElement,!0);yO.style.marginLeft=`clamp(1px, ${i*$-10}px, 3px)`,Bt.appendChild(yO),yO.addEventListener("click",()=>window.navigator.clipboard.writeText(p.value)),Bt.addEventListener("click",()=>window.navigator.clipboard.writeText(p.value));const Ea=document.createElement("div");Ea.setAttribute("class","qrcode-tooltip"),Ea.appendChild(Bt),o=l/a,i=l*c/s,Ea.style.fontSize=i*$+"px",Ea.style.top=No*o+"px",Ea.style.left=Cn*i+.5*(u-l*c)+"px",Ea.style.width=(Nt-Cn)*o+"px",Ea.style.height=(Ai-No)*o+"px";const Lc=document.createElement("span");Lc.innerText=p.value,Lc.style.top=No*o+-20*o+"px",Lc.style.left=Cn*i+.5*(u-l*c)+"px";const VEe=r[1]?.font?.split(" ")?.[1];Lc.style.fontFamily=VEe,Lc.style.fontSize=i*$+"px",Lc.style.color=r?.[1]?.fillStyle,t?.appendChild(Ea),t?.appendChild(Lc)}t?.appendChild(w)}},yG=(n,e)=>new Promise((t,r)=>n.toBlob(i=>t(i),e)),vG=(n=[],e,t,r,i=new Di)=>(wG(n,t,r).then(o=>{Promise.all(Object.assign([],n).map(s=>((n,e)=>{let t=e?.decode??ys.decode,r=2===e?.canvasStyles?.length?e?.canvasStyles:[dO,hO],i=e?.isBeep??ys.isBeep;return new Promise((o,s)=>{const a=new FileReader;a.onload=()=>{const c={name:n.name,file:n,url:URL.createObjectURL(n)},u=new Image;u.setAttribute("crossOrigin","anonymous"),u.onload=C(function*(){const l=document.createElement("canvas");l.width=u.naturalWidth||u.width,l.height=u.naturalHeight||u.height;const d=l.getContext("2d");d.drawImage(u,0,0,l.width,l.height);const h=d.getImageData(0,0,l.width,l.height);if(zv()){const p=yield zbarWasm.scanImageData(h);if(p?.length){p.forEach(k=>k.value=k.decode(t?.toLocaleLowerCase())),((n,e,t)=>{let r=e.getContext("2d",{willReadFrequently:!0});for(let i=0;i<n.length;i++){const o=n[i];let s={},a=[],c=[],u=0,d=t[1]?.font?.split(" ")?.[0]?.replace(/[^0-9]/g,"");d&&/[0-9]/g.test(d)&&(u=parseFloat(d));const h=o.points;for(let M=0;M<h.length;M++){const $=h?.[M]?.x??0,J=h?.[M]?.y??0;s[`x${M+1}`]=$,s[`y${M+1}`]=J,a.push($),c.push(J)}let p=Math.min(...a),w=Math.min(...c);const I=()=>{for(const J in t[0])r[J]=t[0][J];const M=[];for(let J=0;J<a.length;J++)M.push(s[`x${J+1}`]),M.push(s[`y${J+1}`]);const $=M.slice(0);for(r.beginPath(),r.moveTo($.shift(),$.shift());$.length;)r.lineTo($.shift(),$.shift());r.closePath(),r.fill(),r.stroke()};let x=document.createElement("canvas");const k=()=>{const M=t[1]?.font?.split(" ")?.[1];x.height=e.height,x.width=e.width;let $=x.getContext("2d",{willReadFrequently:!0});$.font=u+"px "+M;for(const J in t[1])$[J]=t[1][J];zCe($,o.value,p,w-5)};I(),k(),r.drawImage(x,0,0)}})(p,l,r);const w=yield yG(l),I=URL.createObjectURL(w);o(Object.assign({},c,{data:p,url:I,canvas:l,file:(k=w,M=c.name,new File([k],M,{lastModified:(new Date).getTime(),type:k.type}))})),fO(i)}else o(Object.assign({},c,{data:p,canvas:l}))}var k,M}),u.src=c.url},a.onerror=c=>s(c),a.readAsDataURL(n)})})(s,e))).then(s=>{it(i,s)}).catch(s=>it(i,null,s))}),i),zCe=(n,e,t,r)=>{let i=1.2*n.measureText("M").width,o=e.split("\n");for(var s=0;s<o.length;++s)n.fillText(o[s],t,r),n.strokeText(o[s],t,r),r+=i},wG=function(){var n=C(function*(e=[],t=.5,r="image/jpeg"){if(!e.length||1===t)return e;const i=function(){var s=C(function*(a){const c=yield createImageBitmap(a),u=document.createElement("canvas");u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0);const d=yield new Promise(h=>u.toBlob(h,r,t));return new File([d],a.name,{type:d.type})});return function(c){return s.apply(this,arguments)}}(),o=new DataTransfer;return yield C(function*(){for(const s of e){if(!s.type.startsWith("image")){o.items.add(s);continue}const a=yield i(s);o.items.add(a)}})(),o.files});return function(){return n.apply(this,arguments)}}(),bG=n=>{Object.assign([],n.childNodes).forEach(e=>n.removeChild(e))},pO=(n,e)=>{n.style.width=e.offsetWidth+"px",n.style.height=e.offsetHeight+"px"},CG=(n=300)=>{n&&GCe()&&window?.navigator?.vibrate(n)},GCe=()=>{const n=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n.substr(0,4))||/^((?!chrome|android).)*safari/i.test(n))};let EG=(()=>{class n{loadFiles(t=[],r,i){const o=new Di;return wG(t,r,i).then(s=>{Promise.all(Object.assign([],t).map(a=>this.readAsDataURL(a))).then(a=>it(o,a)).catch(a=>it(o,null,a))}),o}loadFilesToScan(t=[],r,i,o){return vG(t,r,i,o)}readAsDataURL(t){return new Promise((r,i)=>{const o=new FileReader;o.onload=()=>{const s={name:t.name,file:t,url:URL.createObjectURL(t)};r(s)},o.onerror=s=>i(s),o.readAsDataURL(t)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hv=(n=new Di,e)=>{let t=0;const r=(i=!1)=>{const o=()=>{let c;try{const u=()=>{clearTimeout(c),zv()?setTimeout(()=>it(n,!0)):c=setTimeout(()=>u())};setTimeout(()=>u()),setTimeout(()=>clearTimeout(c),3e3)}catch{clearTimeout(c)}},s=document.querySelectorAll(`script[src="${Pp}"]`),a=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(s.length||a.length)o();else{const c=document.querySelectorAll(`script[src="${lO}"]`);if(1===c.length)o();else if(c.forEach(u=>u.remove()),e){const u=e.createElement("script");e.setAttribute(u,"src",i?Pp:lO),e.setAttribute(u,"type","text/javascript"),e.setAttribute(u,"async",""),e.appendChild(document.head,u),u.onload=()=>o(),u.onerror=()=>{t<2?(document.head.removeChild(u),r(!0)):it(n,!1,Pp)},t+=1}else{const u=document.createElement("script");u.setAttribute("src",i?Pp:lO),u.setAttribute("type","text/javascript"),u.setAttribute("async",""),document.head.appendChild(u),u.onload=()=>o(),u.onerror=()=>{t<2?(document.head.removeChild(u),r(!0)):it(n,!1,Pp)},t+=1}}};return r(),n};let qCe=(()=>{class n{constructor(t,r){this.renderer=t,this.elementRef=r,this.event=new et,this.src=ys.src,this.fps=ys.fps,this.vibrate=ys.vibrate,this.decode=ys.decode,this.isBeep=ys.isBeep,this.config=ys,this.constraints=ys.constraints,this.canvasStyles=[dO,hO],this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new Nr([]),this.devices=new Nr([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new Di,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),Hv(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(t){const r=new Di;return this.isStart?it(r,!1):this.safariWebRTC(r,t),r}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const t=new Di;try{clearTimeout(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(r=>{r.stop(),it(t,!0)}),this.dataForResize=[],(n=>{n.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,n.width,n.height)})(this.canvas.nativeElement),bG(this.resultsPanel.nativeElement)}catch(r){it(t,!1,r)}return t}play(){const t=new Di;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(),it(t,!0)):it(t,!1),t}pause(){const t=new Di;return this.isStart?(clearTimeout(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),it(t,!0)):it(t,!1),t}playDevice(t,r=new Di){const i=this.getConstraints();switch(!0){case"null"===t||"undefined"===t||!t:stop(),this.stop(),it(r,!1);break;case t&&(!this.isStart||!i||i.deviceId!==t):stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(a=>a.deviceId===t);const s={...this.constraints,audio:!1,video:{deviceId:t,...this.constraints.video}};navigator.mediaDevices.getUserMedia(s).then(a=>{this.video.nativeElement.srcObject=a,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),it(r,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(a=>{this.eventEmit(!1),it(r,!1,a),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:it(r,!1),this.STATUS.loadingOFF()}return r}loadImage(t){const r=new Di;this.STATUS.startOFF(),this.STATUS.loadingON();const i=new Image;return i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{zv()&&this.drawImage(i,o=>{it(r,o),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},i.src=t,r}torcher(){const t=this.applyConstraints({advanced:[{torch:this.isTorch}]});return t.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),t}applyConstraints(t,r=0){var i=this;const o=new Di;if(this.isStart){const s=this.video.nativeElement.srcObject;if(null===r&&void 0===r&&Number.isNaN(r))it(o,!1,"Please check again deviceIndex");else{const a=s.getVideoTracks()[r];new window.ImageCapture(a).getPhotoCapabilities().then(C(function*(){yield a.applyConstraints(t),pO(i.video.nativeElement,i.canvas.nativeElement),it(o,!0)})).catch(u=>{switch(u?.name){case"NotFoundError":case"DevicesNotFoundError":it(o,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":it(o,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":it(o,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":it(o,!1,"Permission denied in browser");break;case"TypeError":it(o,!1,"Empty constraints object");break;default:it(o,!1,u)}})}}else it(o,!1,"Please start the scanner");return o}getConstraints(t=0){return this.video.nativeElement.srcObject?.getVideoTracks()[t]?.getConstraints()}download(t=`ngx_scanner_qrcode_${Date.now()}.png`,r,i){var o=this;const s=new Di;return C(function*(){const c=((n,e)=>new File([n],e,{lastModified:(new Date).getTime(),type:n.type}))(yield yG(o.canvas.nativeElement),t);vG([c],o.config,r,i,s).subscribe(u=>{u.forEach(l=>{if(l?.data?.length){const d=document.createElement("a");d.href=l.url,d.download=l.name,d.click(),d.remove()}})})})(),s}resize(){window.addEventListener("resize",()=>{_G(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles),pO(this.video.nativeElement,this.canvas.nativeElement)})}overrideConfig(){"src"in this.config&&(this.src=this.config.src),"fps"in this.config&&(this.fps=this.config.fps),"vibrate"in this.config&&(this.vibrate=this.config.vibrate),"decode"in this.config&&(this.decode=this.config.decode),"isBeep"in this.config&&(this.isBeep=this.config.isBeep),"constraints"in this.config&&(this.constraints=((n,e,t)=>{if(e&&Object.keys(e[n]).length){for(const r in t){const i=JSON.parse(JSON.stringify({...e[n],[r]:t[r]}));e[n]=e[n].hasOwnProperty(r)?e[n]:i}return e[n]}return t})("constraints",this.config,mG)),"canvasStyles"in this.config&&2===this.config?.canvasStyles?.length&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(t,r){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(i=>{i.getTracks().forEach(o=>o.stop()),this.loadAllDevices(t,r)}).catch(i=>{it(t,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(t,r){navigator.mediaDevices.enumerateDevices().then(i=>{let o=i.filter(s=>"videoinput"==s.kind);this.devices.next(o),o?.length>0?(it(t,o),r?r(o):this.playDevice(o[0].deviceId)):(it(t,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(i=>{it(t,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(t,r=(()=>{})){var i=this;return C(function*(){const o=i.canvas.nativeElement,s=o.getContext("2d",{willReadFrequently:!0});t instanceof HTMLImageElement&&(o.width=t.naturalWidth,o.height=t.naturalHeight,t.style.visibility="",i.video.nativeElement.style.visibility="hidden",i.renderer.setStyle(i.elementRef.nativeElement,"width",o.width+"px"),i.renderer.setStyle(i.elementRef.nativeElement,"maxWidth","100%"),i.renderer.setStyle(i.elementRef.nativeElement,"display","inline-block")),t instanceof HTMLVideoElement&&(o.width=t.videoWidth,o.height=t.videoHeight,t.style.visibility="",i.canvas.nativeElement.style.visibility="hidden"),pO(i.video.nativeElement,o),s.clearRect(0,0,o.width,o.height),s.drawImage(t,0,0,o.width,o.height);const a=s.getImageData(0,0,o.width,o.height),c=yield zbarWasm.scanImageData(a);if(c?.length){c.forEach(l=>l.value=l.decode(i.decode?.toLocaleLowerCase())),_G(c,Object.freeze(i.canvas.nativeElement),i.resultsPanel.nativeElement,i.canvasStyles);const u=()=>{i.eventEmit(c),i.dataForResize=c};t instanceof HTMLImageElement&&(r(!0),u(),CG(i.vibrate),fO(i.isBeep)),t instanceof HTMLVideoElement&&(u(),CG(i.vibrate),fO(i.isBeep))}else r(!1),bG(i.resultsPanel.nativeElement),i.dataForResize=[]})()}eventEmit(t=!1){!1!==t&&this.data.next(t||[]),!1!==t&&this.event.emit(t||[])}requestAnimationFrame(t=100){try{clearTimeout(this.rAF_ID),this.rAF_ID=setTimeout(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(t=0,zv()&&this.drawImage(this.video.nativeElement),this.isStart&&!this.isPause&&this.requestAnimationFrame(t))},t||this.fps)}catch{clearTimeout(this.rAF_ID)}}get isReady(){return this.ready}ngOnDestroy(){this.pause()}}return n.\u0275fac=function(t){return new(t||n)(S(Pi),S(jr))},n.\u0275cmp=He({type:n,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(t,r){if(1&t&&(hr(NCe,5),hr(RCe,5),hr(FCe,5)),2&t){let i;Qn(i=Yn())&&(r.video=i.first),Qn(i=Yn())&&(r.canvas=i.first),Qn(i=Yn())&&(r.resultsPanel=i.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[[1,"origin-overlay"],["resultsPanel",""],[1,"origin-canvas"],["canvas",""],["playsinline","",1,"origin-video"],["video",""]],template:function(t,r){1&t&&Z(0,"div",0,1)(2,"canvas",2,3)(4,"video",4,5)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\n"],encapsulation:2}),n})(),mO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({providers:[EG]}),n})();const YCe=["action"];function XCe(n,e){1&n&&(_(0,"p"),b(1,"\u231b Loading..."),m())}let JCe=(()=>{class n{constructor(t,r,i,o,s){this.qrcode=t,this.router=r,this.route=i,this.auth=o,this.firestore=s,this.data=[],this.config={constraints:{video:{width:window.innerWidth}}},this.qrCodeResult=[],this.qrCodeResult2=[],this.getData()}ngAfterViewInit(){this.action.isReady.subscribe(t=>{})}onEvent(t,r){console.log(t[0].value),this.item=t[0].value,this.MyQuery()}handle(t,r){"start"===r?t[r](o=>{const s=o.find(a=>/back|rear|environment/gi.test(a.label));t.playDevice(s?s.deviceId:o[0].deviceId)}).subscribe(o=>console.log(r,o),alert):t[r]().subscribe(o=>console.log(r,o),alert)}onDowload(t){t.download().subscribe(console.log,alert)}onSelects(t){this.qrcode.loadFiles(t,.5).subscribe(r=>{this.qrCodeResult=r})}onSelects2(t){this.qrcode.loadFilesToScan(t,this.config,.5).subscribe(r=>{console.log(r),this.qrCodeResult2=r})}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}MyQuery(){var t=this;return C(function*(){let r=t.item;console.log(r);const i=_n(Te(t.firestore,"muestras"),sn("codigo","==",r));pe(i).then(o=>{t.data=[...o.docs.map(s=>({...s.data(),id:s.id}))],0!=t.data.length&&(t.handle(t.action,"stop"),t.router.navigate(["user/muestras-info/"+r]))})})()}}return n.\u0275fac=function(t){return new(t||n)(S(EG),S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-scan"]],viewQuery:function(t,r){if(1&t&&hr(YCe,5),2&t){let i;Qn(i=Yn())&&(r.action=i.first)}},decls:6,vars:8,consts:[[1,"container"],[1,"screen",3,"config","event"],["action","scanner"],[4,"ngIf"],[1,"btn",3,"disabled","click"],["width","30px",3,"src"]],template:function(t,r){if(1&t){const i=xt();_(0,"div",0)(1,"ngx-scanner-qrcode",1,2),q("event",function(s){Ge(i);const a=Kn(2);return qe(r.onEvent(s,a))}),m(),ri(3,XCe,2,0,"p",3),_(4,"button",4),q("click",function(){Ge(i);const s=Kn(2);return qe(r.handle(s,s.isStart?"stop":"start"))}),Z(5,"img",5),m()()}if(2&t){const i=Kn(2);H(1),Ae("config",r.config),H(2),Ae("ngIf",i.isLoading),H(1),Fd("btn-info",!i.isStart)("btn-warning",i.isStart),Ae("disabled",i.isLoading),H(1),Ae("src",i.isStart?"https://id1945.github.io/images/svg/camera-off.svg":"https://id1945.github.io/images/svg/camera-on.svg",ow)}},dependencies:[UL,qCe],styles:["h1[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-weight:600;word-break:break-all;font-family:Courier New,Courier,monospace}div[_ngcontent-%COMP%]{text-align:center}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;height:60px;width:60px;margin:4px}div[_ngcontent-%COMP%]   buttondisabled[_ngcontent-%COMP%]{cursor:no-drop}div[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{background:antiquewhite;border-radius:5px}.origin-overlay[_ngcontent-%COMP%]   .qrcode-tooltip[_ngcontent-%COMP%]   .qrcode-tooltip-temp[_ngcontent-%COMP%]{padding:5px!important}.screen[_ngcontent-%COMP%]{display:block;height:50%;width:50%;margin-left:auto;margin-right:auto}.container[_ngcontent-%COMP%]{top:25%;width:100%;position:absolute}"]}),n})();const ZCe=["geo"];let eEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.res="",this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.x=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}handleRegister(t){this.addData(t)}addData(t){var r=this;return C(function*(){console.log(t);const i=Fe(r.firestore,"muestras",t.codigo);ci(i,{codigo:t.codigo,cliente:t.cliente,fecha:t.fecha,cultivo:t.cultivo,tipo:t.tipo,fitopatogeno:t.fitopatogeno,estado:t.estado,coordenadas:t.coordenadas,sintomas:t.sintomas,comentarios:t.comentarios,project:r.pid}).then(()=>{alert("Data Sent")}).catch(o=>{alert(o.message)}),console.log(r.pid)})()}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude),n.text=t.coords.latitude+", "+t.coords.longitude}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{t.res=n.text,console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.x;const i=_n(Te(t.firestore,"muestras"),sn("codigo","==",r)),o=yield pe(i);o.empty||o.forEach(s=>{t.item=s.data(),console.log(s.id," => ",s.data()),t.res=t.item.coordenadas,t.pid=t.item.project})})()}deleteData(t){const i=Fe(this.firestore,"muestras",this.x);$n(i).then(()=>{alert("Data Deleted"),this.router.navigate(["user/muestras/"+this.pid])}).catch(o=>{alert(o.message)})}}return n.text="",n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras-edit"]],viewQuery:function(t,r){if(1&t&&hr(ZCe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:71,vars:12,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],["name","codigo","ngModel","","placeholder","codigo","id","codigo","type","codigo",1,"input-field",3,"ngModel","ngModelChange"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field",3,"ngModel","ngModelChange"],["name","fecha","ngModel","","placeholder","Fecha","id","fecha","type","fecha",1,"input-field",3,"ngModel","ngModelChange"],["name","cultivo","ngModel","","placeholder","Cultivo","id","cultivo","type","cultivo",1,"input-field",3,"ngModel","ngModelChange"],["list","tipos","name","tipo","ngModel","","placeholder","Tipo","id","tipo","type","tipo",1,"input-field",3,"ngModel","ngModelChange"],["id","tipos"],["value","Hibrido"],["value","Variedad"],["value","Clone"],["list","fitopatogenos","name","fitopatogeno","ngModel","","placeholder","Fitopat\xf3geno","id","fitopatogeno","type","fitopatogeno",1,"input-field",3,"ngModel","ngModelChange"],["id","fitopatogenos"],["value","Hongos"],["value","Bacterias"],["value","Virus"],["name","estado","ngModel","","placeholder","Estado","id","estado","type","estado",1,"input-field",3,"ngModel","ngModelChange"],["name","lote","ngModel","","placeholder","Lote","id","lote","type","lote",1,"input-field",3,"ngModel","ngModelChange"],["name","repeticion","ngModel","","placeholder","Repeticion","id","repeticion","type","repeticion",1,"input-field",3,"ngModel","ngModelChange"],["name","coordenadas","ngModel","","placeholder","Coordenadas","id","coordenadas","type","coordenadas",1,"input-field",3,"ngModel","ngModelChange"],[1,"bUbicacion",3,"click"],["src","../../../../assets/Ubicacion.png","alt","U"],["name","sintomas","ngModel","","placeholder","S\xedntomas","id","sintomas","rows","4","cols","50",3,"ngModel","ngModelChange"],["name","comentarios","ngModel","","placeholder","Comentarios","id","comentarios","rows","4","cols","50",3,"ngModel","ngModelChange"],[1,"boton"],[1,"botonrojo",3,"click"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"muestras-edit works!"),m(),_(2,"h1",0),b(3,"Editar Muestra"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),_(11,"input",7),q("ngModelChange",function(s){return r.item.codigo=s}),m()(),_(12,"div",5)(13,"span",6),b(14,"Cliente:"),m(),_(15,"input",8),q("ngModelChange",function(s){return r.item.cliente=s}),m()(),_(16,"div",5)(17,"span",6),b(18,"Fecha:"),m(),_(19,"input",9),q("ngModelChange",function(s){return r.item.fecha=s}),m()(),_(20,"div",5)(21,"span",6),b(22,"Cultivo:"),m(),_(23,"input",10),q("ngModelChange",function(s){return r.item.cultivo=s}),m()(),_(24,"div",5)(25,"span",6),b(26,"Tipo:"),m(),_(27,"input",11),q("ngModelChange",function(s){return r.item.tipo=s}),m(),_(28,"datalist",12),Z(29,"option",13)(30,"option",14)(31,"option",15),m()(),_(32,"div",5)(33,"span",6),b(34,"Fitopat\xf3geno:"),m(),_(35,"input",16),q("ngModelChange",function(s){return r.item.fitopatogeno=s}),m(),_(36,"datalist",17),Z(37,"option",18)(38,"option",19)(39,"option",20),m()(),_(40,"div",5)(41,"span",6),b(42,"Estado:"),m(),_(43,"input",21),q("ngModelChange",function(s){return r.item.estado=s}),m()(),_(44,"div",5)(45,"span",6),b(46,"Lote:"),m(),_(47,"input",22),q("ngModelChange",function(s){return r.item.lote=s}),m()(),_(48,"div",5)(49,"span",6),b(50,"Repetici\xf3n:"),m(),_(51,"input",23),q("ngModelChange",function(s){return r.item.repeticion=s}),m()(),_(52,"div",5)(53,"span",6),b(54,"Coordenadas:"),m(),_(55,"input",24),q("ngModelChange",function(s){return r.res=s}),m(),_(56,"div",25),q("click",function(){return r.getLocation()}),Z(57,"img",26),m()(),_(58,"div",5)(59,"span",6),b(60,"S\xedntomas:"),m(),_(61,"textarea",27),q("ngModelChange",function(s){return r.item.sintomas=s}),m()(),_(62,"div",5)(63,"span",6),b(64,"Comentarios:"),m(),_(65,"textarea",28),q("ngModelChange",function(s){return r.item.comentarios=s}),b(66," "),m()(),_(67,"button",29),b(68,"Editar Muestra"),m(),_(69,"button",30),q("click",function(){return r.deleteData(r.item.id)}),b(70," Delete "),m()()()()}2&t&&(H(11),Ae("ngModel",r.item.codigo),H(4),Ae("ngModel",r.item.cliente),H(4),Ae("ngModel",r.item.fecha),H(4),Ae("ngModel",r.item.cultivo),H(4),Ae("ngModel",r.item.tipo),H(8),Ae("ngModel",r.item.fitopatogeno),H(8),Ae("ngModel",r.item.estado),H(4),Ae("ngModel",r.item.lote),H(4),Ae("ngModel",r.item.repeticion),H(4),Ae("ngModel",r.res),H(6),Ae("ngModel",r.item.sintomas),H(4),Ae("ngModel",r.item.comentarios))},dependencies:[Hr,nh,rh,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:69%;flex-shrink:0;position:absolute;left:15%;top:24%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:0%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:39%;top:16%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{margin:2%;background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:90%;top:100%}.botonrojo[_ngcontent-%COMP%]{margin:2%;background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const tEe=["geo"];let nEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.somethingChange=new et,this.getData(),this.MyQuery()}ngOnInit(){this.route.params.subscribe(t=>{this.text=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}handleRegister(t){this.addData(t)}addData(t){const r=Fe(this.firestore,"muestras",t.codigo);xo(r,t).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.text;const i=_n(Te(t.firestore,"muestras"),sn("codigo","==",r)),o=yield pe(i);o.empty||o.forEach(s=>{t.item=s.data(),console.log(s.id," => ",s.data())})})()}editMuestra(){this.router.navigate(["user/muestras-edit/"+this.text])}deleteData(t){const r=Fe(this.firestore,"users",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras-info"]],viewQuery:function(t,r){if(1&t&&hr(tEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:70,vars:12,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],[1,"input-field"],[1,"boton",3,"click"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"muestras-info works!"),m(),_(2,"h1",0),b(3,"Datos de la Muestra"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),_(11,"span",7),b(12),m()(),_(13,"div",5)(14,"span",6),b(15,"Cliente:"),m(),_(16,"span",7),b(17),m()(),_(18,"div",5)(19,"span",6),b(20,"Fecha:"),m(),_(21,"span",7),b(22),m()(),_(23,"div",5)(24,"span",6),b(25,"Cultivo:"),m(),_(26,"span",7),b(27),m()(),_(28,"div",5)(29,"span",6),b(30,"Tipo:"),m(),_(31,"span",7),b(32),m()(),_(33,"div",5)(34,"span",6),b(35,"Fitopat\xf3geno:"),m(),_(36,"span",7),b(37),m()(),_(38,"div",5)(39,"span",6),b(40,"Estado:"),m(),_(41,"span",7),b(42),m()(),_(43,"div",5)(44,"span",6),b(45,"Lote:"),m(),_(46,"span",7),b(47),m()(),_(48,"div",5)(49,"span",6),b(50,"Repetici\xf3n:"),m(),_(51,"span",7),b(52),m()(),_(53,"div",5)(54,"span",6),b(55,"Coordenadas:"),m(),_(56,"span",7),b(57),m()(),_(58,"div",5)(59,"span",6),b(60,"S\xedntomas:"),m(),_(61,"span",7),b(62),m()(),_(63,"div",5)(64,"span",6),b(65,"Comentarios:"),m(),_(66,"span",7),b(67),m()()()()(),_(68,"button",8),q("click",function(){return r.editMuestra()}),b(69,"Editar Muestra"),m()}2&t&&(H(12),Ve(" ",r.item.codigo,""),H(5),Ve(" ",r.item.cliente,""),H(5),Ve(" ",r.item.fecha,""),H(5),Ve(" ",r.item.cultivo,""),H(5),Ve(" ",r.item.tipo,""),H(5),Ve(" ",r.item.fitopatogeno,""),H(5),Ve(" ",r.item.estado,""),H(5),Ve(" ",r.item.lote,""),H(5),Ve(" ",r.item.repeticion,""),H(5),Ve(" ",r.item.coordenadas,""),H(5),Ve(" ",r.item.sintomas,""),H(5),Ve(" ",r.item.comentarios,""))},dependencies:[Hr,zr,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:65%;height:62%;flex-shrink:0;position:absolute;left:25%;top:28%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;left:10%;top:2%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:12px 12px 12px 25px;height:20px;left:92px;color:#000;font-family:Arial;font-size:20px;letter-spacing:0}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:40%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;height:25px;font-family:Arial;font-size:20px;font-weight:700;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:92%}.botonrojo[_ngcontent-%COMP%]{background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const rEe=["geo"];let iEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.text=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}handleRegister(t){this.addData(t)}randomCode(){let t="";for(let o=0;o<20;o++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return t}addData(t){let r=t.integrantes.split(/[\s,]+/);const i=Fe(this.firestore,"projects",this.pid);xo(i,{name:t.name,cliente:t.cliente,owner:t.owner,integrantes:r}).then(()=>{alert("Data Sent")}).catch(o=>{alert(o.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"projects");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.text;const i=_n(Te(t.firestore,"projects"),sn("name","==",r));(yield pe(i)).forEach(s=>{t.item=s.data(),t.pid=s.id,console.log(s.id," => ",s.data())})})()}deleteData(t){const r=Fe(this.firestore,"projects",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-project-edit"]],viewQuery:function(t,r){if(1&t&&hr(rEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:28,vars:4,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],["name","name","ngModel","","placeholder","Name","id","name","type","name",1,"input-field",3,"ngModel","ngModelChange"],["name","owner","ngModel","","placeholder","Owner","id","owner","type","owner",1,"input-field",3,"ngModel","ngModelChange"],["name","integrantes","ngModel","","placeholder","Integrantes","id","integrantes","type","integrantes",1,"input-field",3,"ngModel","ngModelChange"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field",3,"ngModel","ngModelChange"],[1,"boton"],[1,"botonrojo",3,"click"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"project-edit works!"),m(),_(2,"h1",0),b(3,"Editar Projecto"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Nombre:"),m(),_(11,"input",7),q("ngModelChange",function(s){return r.item.name=s}),m()(),_(12,"div",5)(13,"span",6),b(14,"Owner:"),m(),_(15,"input",8),q("ngModelChange",function(s){return r.item.owner=s}),m()(),_(16,"div",5)(17,"span",6),b(18,"Integrantes:"),m(),_(19,"input",9),q("ngModelChange",function(s){return r.item.integrantes=s}),m()(),_(20,"div",5)(21,"span",6),b(22,"Cliente:"),m(),_(23,"input",10),q("ngModelChange",function(s){return r.item.cliente=s}),m()(),_(24,"button",11),b(25,"Editar Projecto"),m(),_(26,"button",12),q("click",function(){return r.deleteData(r.pid)}),b(27," Delete "),m()()()()}2&t&&(H(11),Ae("ngModel",r.item.name),H(4),Ae("ngModel",r.item.owner),H(4),Ae("ngModel",r.item.integrantes),H(4),Ae("ngModel",r.item.cliente))},dependencies:[Hr,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:35%;flex-shrink:0;position:absolute;left:15%;top:30%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:5%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:85%;top:110%}.botonrojo[_ngcontent-%COMP%]{background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:110%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function oEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",5),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoMuestra(o.codigo))}),m(),_(11,"button",6),q("click",function(){const o=Ge(t).$implicit;return qe(un().editMuestra(o.codigo))}),m(),Z(12,"button",7),m()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.fecha),H(2),Ee(t.cultivo),H(2),Ee(t.coordenadas)}}let sEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.getData()}ngOnInit(){this.route.params.subscribe(t=>{this.item=t.id,console.log(t),console.log(t.id)})}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"muestras",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"muestras",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newMuestra(){this.router.navigate(["user/muestras-new"])}editMuestra(t){this.router.navigate(["user/muestras-edit/"+t])}infoProject(t){this.router.navigate(["user/project-edit/"+t])}infoMuestra(t){this.router.navigate(["user/muestras-info/"+t])}MyQuery(){var t=this;return C(function*(){let r=t.item;t.pid=r,console.log(r);const i=_n(Te(t.firestore,"muestras"),sn("project","==",r));pe(i).then(s=>{t.data=[...s.docs.map(a=>({...a.data(),id:a.id}))]}),(yield pe(i)).forEach(s=>{console.log(s.id," => ",s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras-all"]],decls:20,vars:1,consts:[[1,"subTituloText"],[1,"scanbutton"],[1,"scantext",3,"click"],[1,"list"],[4,"ngFor","ngForOf"],[1,"detalles",3,"click"],[1,"edit",3,"click"],[1,"imprimir"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"muestras-all works!"),m(),_(2,"h1",0),b(3,"Muestras"),m(),Z(4,"div",1),_(5,"div",2),q("click",function(){return r.Scan()}),b(6,"SCAN"),m(),_(7,"div",3)(8,"table")(9,"tr")(10,"th"),b(11," Codigo "),m(),_(12,"th"),b(13," Fecha "),m(),_(14,"th"),b(15," Cultivo"),m(),_(16,"th"),b(17," Coordenadas "),m(),Z(18,"th"),m(),ri(19,oEe,13,4,"tr",4),m()()),2&t&&(H(19),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:auto;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{cursor:pointer;width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{cursor:pointer;width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;margin-left:2px;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const aEe=["geo"];let cEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.text=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}handleRegister(t){this.addData(t)}randomCode(){let t="";for(let o=0;o<20;o++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return t}addData(t){let r=t.integrantes.split(/[\s,]+/);const i=Fe(this.firestore,"projects",this.pid);xo(i,{name:t.name,cliente:t.cliente,owner:t.owner,integrantes:r}).then(()=>{alert("Data Sent")}).catch(o=>{alert(o.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"projects");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.text;const i=_n(Te(t.firestore,"projects"),sn("name","==",r));(yield pe(i)).forEach(s=>{t.item=s.data(),t.pid=s.id,console.log(s.id," => ",s.data())})})()}deleteData(t){const r=Fe(this.firestore,"projects",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}editProyecto(){this.router.navigate(["user/project-edit/"+this.text])}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-project-info"]],viewQuery:function(t,r){if(1&t&&hr(aEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:30,vars:4,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],[1,"input-field"],[1,"boton",3,"click"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"project-info works!"),m(),_(2,"h1",0),b(3,"Datos del Projecto"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Nombre:"),m(),_(11,"span",7),b(12),m()(),_(13,"div",5)(14,"span",6),b(15,"Owner:"),m(),_(16,"span",7),b(17),m()(),_(18,"div",5)(19,"span",6),b(20,"Integrantes:"),m(),_(21,"span",7),b(22),m()(),_(23,"div",5)(24,"span",6),b(25,"Cliente:"),m(),_(26,"span",7),b(27),m()()()()(),_(28,"button",8),q("click",function(){return r.editProyecto()}),b(29,"Editar Muestra"),m()}2&t&&(H(12),Ve(" ",r.item.name,""),H(5),Ve(" ",r.item.owner,""),H(5),Ve(" ",r.item.integrantes,""),H(5),Ve(" ",r.item.cliente,""))},dependencies:[Hr,zr,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:25%;flex-shrink:0;position:absolute;left:15%;top:30%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:5%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:12px 12px 12px 25px;height:20px;left:92px;color:#000;font-family:Arial;font-size:20px;letter-spacing:0}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:60%}.botonrojo[_ngcontent-%COMP%]{background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:110%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function uEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",7),q("click",function(){const o=Ge(t).$implicit,s=un();return qe(s.Muestras(s.pid,o.codigo))}),m(),_(11,"button",8),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoUnidad(o.codigo))}),m(),_(12,"button",9),q("click",function(){const o=Ge(t).$implicit;return qe(un().editUnidad(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.cliente),H(2),Ee(t.altitud),H(2),Ee(t.coordenadas)}}let lEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[]}ngOnInit(){this.route.params.subscribe(t=>{this.pid=t.id,console.log(t),console.log(t.id)}),this.MyQuery()}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"unidad-produccion",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"unidad-produccion",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}Muestras(t,r){this.router.navigate(["user/muestras/"+t+"/"+r])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newUnidad(t){this.router.navigate(["user/unidad-produccion-new/"+t])}editUnidad(t){this.router.navigate(["user/unidad-produccion-edit/"+t])}infoProject(t){this.router.navigate(["user/project-info/"+t])}infoUnidad(t){this.router.navigate(["user/unidad-produccion-info/"+t])}MyQuery(){var t=this;return C(function*(){let r=t.pid;console.log(r);const i=_n(Te(t.firestore,"unidad-produccion"),sn("project","==",r));pe(i).then(s=>{t.data=[...s.docs.map(a=>({...a.data(),id:a.id}))]}),(yield pe(i)).forEach(s=>{console.log(s.id," => ",s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion"]],decls:24,vars:1,consts:[[1,"subTituloText"],[1,"scanbutton"],[1,"scantext",3,"click"],[1,"list"],[1,"projectBlock"],[4,"ngFor","ngForOf"],["id","agregar",1,"boton",3,"click"],[1,"muestras",3,"click"],[1,"detalles",3,"click"],[1,"edit",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"unidad-produccion works!"),m(),_(2,"h1",0),b(3,"Unidades "),m(),Z(4,"div",1),_(5,"div",2),q("click",function(){return r.Scan()}),b(6,"SCAN"),m(),_(7,"div",3)(8,"div",4),b(9,"Proyecto"),m(),_(10,"table")(11,"tr")(12,"th"),b(13," Codigo "),m(),_(14,"th"),b(15," Cliente "),m(),_(16,"th"),b(17," Altitud"),m(),_(18,"th"),b(19," Coordenadas "),m(),Z(20,"th"),m(),ri(21,uEe,13,4,"tr",5),m(),_(22,"button",6),q("click",function(){return r.newUnidad(r.pid)}),b(23," Agregar "),m()()),2&t&&(H(21),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:60%;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.muestras[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(clipboard.008357a0b24034e8.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const dEe=["geo"];let hEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.res="",this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.pid=t.id})}handleRegister(t){this.addData(t)}addData(t){const r=Fe(this.firestore,"unidad-produccion",t.codigo);xo(r,{codigo:t.codigo,cliente:t.cliente,fecha:t.fecha,cultivo:t.cultivo,tipo:t.tipo,fitopatogeno:t.fitopatogeno,estado:t.estado,coordenadas:t.coordenadas,sintomas:t.sintomas,comentarios:t.comentarios,project:this.pid}).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude),n.text=t.coords.latitude+", "+t.coords.longitude,console.log(n.text)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{t.res=n.text,console.log(t.res)},1e3)})()}}return n.text="",n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion-new"]],viewQuery:function(t,r){if(1&t&&hr(dEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:52,vars:1,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],["name","codigo","ngModel","","placeholder","codigo","id","codigo","type","codigo",1,"input-field"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field"],["name","coordenadas","ngModel","","placeholder","Coordenadas","id","coordenadas","type","coordenadas",1,"input-field",3,"ngModel","ngModelChange"],[1,"bUbicacion",3,"click"],["src","../../../../assets/Ubicacion.png","alt","U"],["name","localidad","ngModel","","placeholder","Localidad","id","localidad","type","localidad",1,"input-field"],["name","municipio","ngModel","","placeholder","Municipio","id","municipio","type","municipio",1,"input-field"],["name","estado","ngModel","","placeholder","Estado","id","estado","type","estado",1,"input-field"],["name","altitud","ngModel","","placeholder","Altitud","id","altitud","type","altitud",1,"input-field"],["name","tempmax","ngModel","","placeholder","Temperaturas M\xe1ximas","id","tempmax","type","tempmax",1,"input-field"],["name","tempmin","ngModel","","placeholder","Temperaturas M\xednimas","id","tempmin","type","tempmin",1,"input-field"],["name","precipitacion","ngModel","","placeholder","Precipitaci\xf3n","id","precipitacion","type","precipitacion",1,"input-field"],[1,"boton"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"unidad-produccion-new works!"),m(),_(2,"h1",0),b(3,"Nueva Unidad"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),Z(11,"input",7),m(),_(12,"div",5)(13,"span",6),b(14,"Cliente:"),m(),Z(15,"input",8),m(),_(16,"div",5)(17,"span",6),b(18,"Coordenadas:"),m(),_(19,"input",9),q("ngModelChange",function(s){return r.res=s}),m(),_(20,"div",10),q("click",function(){return r.getLocation()}),Z(21,"img",11),m()(),_(22,"div",5)(23,"span",6),b(24,"Localidad:"),m(),Z(25,"input",12),m(),_(26,"div",5)(27,"span",6),b(28,"Municipio:"),m(),Z(29,"input",13),m(),_(30,"div",5)(31,"span",6),b(32,"Estado:"),m(),Z(33,"input",14),m(),_(34,"div",5)(35,"span",6),b(36,"Altitud:"),m(),Z(37,"input",15),m(),_(38,"div",5)(39,"span",6),b(40,"Temperaturas M\xe1ximas:"),m(),Z(41,"input",16),m(),_(42,"div",5)(43,"span",6),b(44,"Temperaturas M\xednimas:"),m(),Z(45,"input",17),m(),_(46,"div",5)(47,"span",6),b(48,"Precipitaci\xf3n:"),m(),Z(49,"input",18),m(),_(50,"button",19),b(51,"Crear Unidad"),m()()()()}2&t&&(H(19),Ae("ngModel",r.res))},dependencies:[Hr,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:70%;flex-shrink:0;position:absolute;left:15%;top:25%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:3%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:15%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const fEe=["geo"];let pEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.res="",this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.x=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}handleRegister(t){this.addData(t)}addData(t){var r=this;return C(function*(){console.log(t);const i=Fe(r.firestore,"unidad-produccion",t.codigo);ci(i,{codigo:t.codigo,cliente:t.cliente,fecha:t.fecha,cultivo:t.cultivo,tipo:t.tipo,fitopatogeno:t.fitopatogeno,estado:t.estado,coordenadas:t.coordenadas,sintomas:t.sintomas,comentarios:t.comentarios,project:r.pid}).then(()=>{alert("Data Sent")}).catch(o=>{alert(o.message)}),console.log(r.pid)})()}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude),n.text=t.coords.latitude+", "+t.coords.longitude}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{t.res=n.text,console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.x;const i=_n(Te(t.firestore,"unidad-produccion"),sn("codigo","==",r)),o=yield pe(i);o.empty||o.forEach(s=>{t.item=s.data(),console.log(s.id," => ",s.data()),t.res=t.item.coordenadas,t.pid=t.item.project})})()}deleteData(t){const i=Fe(this.firestore,"unidad-produccion",this.x);$n(i).then(()=>{alert("Data Deleted"),this.router.navigate(["user/unidad-produccion/"+this.pid])}).catch(o=>{alert(o.message)})}}return n.text="",n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion-edit"]],viewQuery:function(t,r){if(1&t&&hr(fEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:63,vars:10,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],["name","codigo","ngModel","","placeholder","codigo","id","codigo","type","codigo",1,"input-field",3,"ngModel","ngModelChange"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field",3,"ngModel","ngModelChange"],["name","fecha","ngModel","","placeholder","Fecha","id","fecha","type","fecha",1,"input-field",3,"ngModel","ngModelChange"],["name","cultivo","ngModel","","placeholder","Cultivo","id","cultivo","type","cultivo",1,"input-field",3,"ngModel","ngModelChange"],["list","tipos","name","tipo","ngModel","","placeholder","Tipo","id","tipo","type","tipo",1,"input-field",3,"ngModel","ngModelChange"],["id","tipos"],["value","Hibrido"],["value","Variedad"],["value","Clone"],["list","fitopatogenos","name","fitopatogeno","ngModel","","placeholder","Fitopat\xf3geno","id","fitopatogeno","type","fitopatogeno",1,"input-field",3,"ngModel","ngModelChange"],["id","fitopatogenos"],["value","Hongos"],["value","Bacterias"],["value","Virus"],["name","estado","ngModel","","placeholder","Estado","id","estado","type","estado",1,"input-field",3,"ngModel","ngModelChange"],["name","coordenadas","ngModel","","placeholder","Coordenadas","id","coordenadas","type","coordenadas",1,"input-field",3,"ngModel","ngModelChange"],[1,"bUbicacion",3,"click"],["src","../../../../assets/Ubicacion.png","alt","U"],["name","sintomas","ngModel","","placeholder","S\xedntomas","id","sintomas","rows","4","cols","50",3,"ngModel","ngModelChange"],["name","comentarios","ngModel","","placeholder","Comentarios","id","comentarios","rows","4","cols","50",3,"ngModel","ngModelChange"],[1,"boton"],[1,"botonrojo",3,"click"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"unidad-produccion-edit works!"),m(),_(2,"h1",0),b(3,"Editar Unidad"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),_(11,"input",7),q("ngModelChange",function(s){return r.item.codigo=s}),m()(),_(12,"div",5)(13,"span",6),b(14,"Cliente:"),m(),_(15,"input",8),q("ngModelChange",function(s){return r.item.cliente=s}),m()(),_(16,"div",5)(17,"span",6),b(18,"Fecha:"),m(),_(19,"input",9),q("ngModelChange",function(s){return r.item.fecha=s}),m()(),_(20,"div",5)(21,"span",6),b(22,"Cultivo:"),m(),_(23,"input",10),q("ngModelChange",function(s){return r.item.cultivo=s}),m()(),_(24,"div",5)(25,"span",6),b(26,"Tipo:"),m(),_(27,"input",11),q("ngModelChange",function(s){return r.item.tipo=s}),m(),_(28,"datalist",12),Z(29,"option",13)(30,"option",14)(31,"option",15),m()(),_(32,"div",5)(33,"span",6),b(34,"Fitopat\xf3geno:"),m(),_(35,"input",16),q("ngModelChange",function(s){return r.item.fitopatogeno=s}),m(),_(36,"datalist",17),Z(37,"option",18)(38,"option",19)(39,"option",20),m()(),_(40,"div",5)(41,"span",6),b(42,"Estado:"),m(),_(43,"input",21),q("ngModelChange",function(s){return r.item.estado=s}),m()(),_(44,"div",5)(45,"span",6),b(46,"Coordenadas:"),m(),_(47,"input",22),q("ngModelChange",function(s){return r.res=s}),m(),_(48,"div",23),q("click",function(){return r.getLocation()}),Z(49,"img",24),m()(),_(50,"div",5)(51,"span",6),b(52,"S\xedntomas:"),m(),_(53,"textarea",25),q("ngModelChange",function(s){return r.item.sintomas=s}),m()(),_(54,"div",5)(55,"span",6),b(56,"Comentarios:"),m(),_(57,"textarea",26),q("ngModelChange",function(s){return r.item.comentarios=s}),b(58," "),m()(),_(59,"button",27),b(60,"Editar Muestra"),m(),_(61,"button",28),q("click",function(){return r.deleteData(r.item.id)}),b(62," Delete "),m()()()()}2&t&&(H(11),Ae("ngModel",r.item.codigo),H(4),Ae("ngModel",r.item.cliente),H(4),Ae("ngModel",r.item.fecha),H(4),Ae("ngModel",r.item.cultivo),H(4),Ae("ngModel",r.item.tipo),H(8),Ae("ngModel",r.item.fitopatogeno),H(8),Ae("ngModel",r.item.estado),H(4),Ae("ngModel",r.res),H(6),Ae("ngModel",r.item.sintomas),H(4),Ae("ngModel",r.item.comentarios))},dependencies:[Hr,nh,rh,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:70%;flex-shrink:0;position:absolute;left:15%;top:25%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:3%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:17%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:90%;top:100%}.botonrojo[_ngcontent-%COMP%]{background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const gEe=["geo"];let mEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.somethingChange=new et,this.getData(),this.MyQuery()}ngOnInit(){this.route.params.subscribe(t=>{this.text=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}handleRegister(t){this.addData(t)}addData(t){const r=Fe(this.firestore,"unidad-produccion",t.codigo);xo(r,t).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.text;const i=_n(Te(t.firestore,"unidad-produccion"),sn("codigo","==",r)),o=yield pe(i);o.empty||o.forEach(s=>{t.item=s.data(),console.log(s.id," => ",s.data())})})()}editMuestra(){this.router.navigate(["user/unidad-produccion-edit/"+this.text])}deleteData(t){const r=Fe(this.firestore,"users",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion-info"]],viewQuery:function(t,r){if(1&t&&hr(gEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:60,vars:10,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],[1,"input-field"],[1,"boton",3,"click"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"unidad-produccion-info works!"),m(),_(2,"h1",0),b(3,"Datos de la Muestra"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),_(11,"span",7),b(12),m()(),_(13,"div",5)(14,"span",6),b(15,"Cliente:"),m(),_(16,"span",7),b(17),m()(),_(18,"div",5)(19,"span",6),b(20,"Coordenadas:"),m(),_(21,"span",7),b(22),m()(),_(23,"div",5)(24,"span",6),b(25,"Localidad:"),m(),_(26,"span",7),b(27),m()(),_(28,"div",5)(29,"span",6),b(30,"Municipio:"),m(),_(31,"span",7),b(32),m()(),_(33,"div",5)(34,"span",6),b(35,"Estado:"),m(),_(36,"span",7),b(37),m()(),_(38,"div",5)(39,"span",6),b(40,"Altitud:"),m(),_(41,"span",7),b(42),m()(),_(43,"div",5)(44,"span",6),b(45,"Temperaturas M\xe1ximas:"),m(),_(46,"span",7),b(47),m()(),_(48,"div",5)(49,"span",6),b(50,"Temperaturas M\xednimas:"),m(),_(51,"span",7),b(52),m()(),_(53,"div",5)(54,"span",6),b(55,"Precipitaci\xf3n:"),m(),_(56,"span",7),b(57),m()()()()(),_(58,"button",8),q("click",function(){return r.editMuestra()}),b(59,"Editar Unidad"),m()}2&t&&(H(12),Ve(" ",r.item.codigo,""),H(5),Ve(" ",r.item.cliente,""),H(5),Ve(" ",r.item.coordenadas,""),H(5),Ve(" ",r.item.localidad,""),H(5),Ve(" ",r.item.municipio,""),H(5),Ve(" ",r.item.cliente,""),H(5),Ve(" ",r.item.altitud,""),H(5),Ve(" ",r.item.tempmax,""),H(5),Ve(" ",r.item.tempmin,""),H(5),Ve(" ",r.item.precipitacion,""))},dependencies:[Hr,zr,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:65%;height:55%;flex-shrink:0;position:absolute;left:25%;top:30%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;left:10%;top:7%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:12px 12px 12px 25px;height:20px;left:92px;color:#000;font-family:Arial;font-size:20px;letter-spacing:0}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:40%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;height:25px;font-family:Arial;font-size:20px;font-weight:700;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:88%}.botonrojo[_ngcontent-%COMP%]{background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function _Ee(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",4),q("click",function(){const o=Ge(t).$implicit;return qe(un().editMuestra(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.email),H(2),Ee(t.nombre),H(2),Ee(t.telefono),H(2),Ee(t.direccion)}}let yEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.getData()}ngOnInit(){this.route.params.subscribe(t=>{this.item=t.id,console.log(t),console.log(t.id)})}getData(){const t=Te(this.firestore,"clientes");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"muestras",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"muestras",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newClients(){this.router.navigate(["user/clients-new"])}editMuestra(t){this.router.navigate(["user/muestras-edit/"+t])}infoProject(t){this.router.navigate(["user/project-edit/"+t])}infoMuestra(t){this.router.navigate(["user/muestras-info/"+t])}MyQuery(){var t=this;return C(function*(){let r=t.item;t.pid=r,console.log(r);const i=_n(Te(t.firestore,"muestras"),sn("project","==",r));pe(i).then(s=>{t.data=[...s.docs.map(a=>({...a.data(),id:a.id}))]}),(yield pe(i)).forEach(s=>{console.log(s.id," => ",s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-clients"]],decls:19,vars:1,consts:[[1,"subTituloText"],[1,"list"],[4,"ngFor","ngForOf"],["id","agregar",1,"boton",3,"click"],[1,"edit",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"clients works!"),m(),_(2,"h1",0),b(3,"Clientes"),m(),_(4,"div",1)(5,"table")(6,"tr")(7,"th"),b(8," Email "),m(),_(9,"th"),b(10," Nombre "),m(),_(11,"th"),b(12," Telefono"),m(),_(13,"th"),b(14," Direccion "),m(),Z(15,"th"),m(),ri(16,_Ee,11,4,"tr",2),m(),_(17,"button",3),q("click",function(){return r.newClients()}),b(18," Agregar "),m()()),2&t&&(H(16),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:auto;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;margin-left:2px;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const vEe=["geo"];let wEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.res="",this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.pid=t.id})}handleRegister(t){this.addData(t)}addData(t){const r=Fe(this.firestore,"muestras",t.codigo);xo(r,{codigo:t.codigo,cliente:t.cliente,fecha:t.fecha,cultivo:t.cultivo,tipo:t.tipo,fitopatogeno:t.fitopatogeno,estado:t.estado,coordenadas:t.coordenadas,sintomas:t.sintomas,comentarios:t.comentarios,project:this.pid}).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude),n.text=t.coords.latitude+", "+t.coords.longitude,console.log(n.text)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{t.res=n.text,console.log(t.res)},1e3)})()}}return n.text="",n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-clients-new"]],viewQuery:function(t,r){if(1&t&&hr(vEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:26,vars:0,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],["name","email","ngModel","","placeholder","Email","id","emai","type","email",1,"input-field"],["name","nombre","ngModel","","placeholder","Nombre","id","nombre","type","nombre",1,"input-field"],["name","telefono","ngModel","","placeholder","Telefono","id","telefono","type","telefono",1,"input-field"],["name","direccion","ngModel","","placeholder","Direccion","id","direccion","type","direccion",1,"input-field"],[1,"boton"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"clients-new works!"),m(),_(2,"h1",0),b(3,"Nuevo Cliente"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Email:"),m(),Z(11,"input",7),m(),_(12,"div",5)(13,"span",6),b(14,"Nombre:"),m(),Z(15,"input",8),m(),_(16,"div",5)(17,"span",6),b(18,"Telefono:"),m(),Z(19,"input",9),m(),_(20,"div",5)(21,"span",6),b(22,"Direccion:"),m(),Z(23,"input",10),m(),_(24,"button",11),b(25,"Crear Cliente"),m()()()()}},dependencies:[Hr,bi,ho,zr,Ui,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:75%;height:30%;flex-shrink:0;position:absolute;left:15%;top:30%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;width:90%;left:5%;top:3%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:10px;width:85%;height:20px;left:92px}#cordenadas[_ngcontent-%COMP%]{width:78%}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:35%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;width:25%;height:25px;font-family:Arial;font-size:20px;letter-spacing:0}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function bEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",5),q("click",function(){const o=Ge(t).$implicit,s=un();return qe(s.Muestras(s.pid,o.codigo))}),m(),_(11,"button",6),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoUnidad(o.codigo))}),m(),_(12,"button",7),q("click",function(){const o=Ge(t).$implicit;return qe(un().editUnidad(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.cliente),H(2),Ee(t.altitud),H(2),Ee(t.coordenadas)}}const CEe=[{path:"user",component:cz,children:[{path:"projects",component:DCe},{path:"project-new",component:OCe},{path:"project-edit/:id",component:iEe},{path:"project-info/:id",component:cEe},{path:"barcode/:id",component:SCe},{path:"muestras/:id/:up",component:xCe},{path:"muestras-new/:id",component:kCe},{path:"muestras-edit/:id",component:eEe},{path:"muestras-info/:id",component:nEe},{path:"muestras-all",component:sEe},{path:"unidad-produccion/:id",component:lEe},{path:"unidad-produccion-new/:id",component:hEe},{path:"unidad-produccion-edit/:id",component:pEe},{path:"unidad-produccion-info/:id",component:mEe},{path:"unidad-produccion-all",component:(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.getData()}ngOnInit(){this.route.params.subscribe(t=>{this.pid=t.id,console.log(t),console.log(t.id)})}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"unidad-produccion",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"unidad-produccion",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}Muestras(t,r){this.router.navigate(["user/muestras/"+t+"/"+r])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newUnidad(t){this.router.navigate(["user/unidad-produccion-new/"+t])}editUnidad(t){this.router.navigate(["user/unidad-produccion-edit/"+t])}infoProject(t){this.router.navigate(["user/project-info/"+t])}infoUnidad(t){this.router.navigate(["user/unidad-produccion-info/"+t])}MyQuery(){var t=this;return C(function*(){let r=t.pid;console.log(r);const i=_n(Te(t.firestore,"unidad-produccion"),sn("project","==",r));pe(i).then(s=>{t.data=[...s.docs.map(a=>({...a.data(),id:a.id}))]}),(yield pe(i)).forEach(s=>{console.log(s.id," => ",s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion-all"]],decls:20,vars:1,consts:[[1,"subTituloText"],[1,"scanbutton"],[1,"scantext",3,"click"],[1,"list"],[4,"ngFor","ngForOf"],[1,"muestras",3,"click"],[1,"detalles",3,"click"],[1,"edit",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"unidad-produccion-all works!"),m(),_(2,"h1",0),b(3,"Unidades "),m(),Z(4,"div",1),_(5,"div",2),q("click",function(){return r.Scan()}),b(6,"SCAN"),m(),_(7,"div",3)(8,"table")(9,"tr")(10,"th"),b(11," Codigo "),m(),_(12,"th"),b(13," Cliente "),m(),_(14,"th"),b(15," Altitud"),m(),_(16,"th"),b(17," Coordenadas "),m(),Z(18,"th"),m(),ri(19,bEe,13,4,"tr",4),m()()),2&t&&(H(19),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:auto;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{cursor:pointer;width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{cursor:pointer;width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.muestras[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(clipboard.008357a0b24034e8.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})()},{path:"clients",component:yEe},{path:"clients-new",component:wEe},{path:"scan",component:JCe}]}];let EEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[ji.forChild(CEe),ji]}),n})();Hv().subscribe(n=>console.log("LOAD_WASM",n));let IEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[Qd,EEe,Pm,mO]}),n})(),TEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[Qd]}),n})();function DEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",3),q("click",function(){const o=Ge(t).$implicit;return qe(un().Muestras(o.name))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.name),H(2),Ee(t.owner),H(2),Ee(t.integrantes),H(2),Ee(t.cliente)}}let AEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.list=[],this.email="",this.getData(),this.MyQuery()}getData(){const t=ic();el(t,i=>{i&&i.email&&(this.email=i.email)});const r=Te(this.firestore,"projects");pe(r).then(i=>{this.data=[...i.docs.map(o=>({...o.data(),id:o.id}))]})}updateData(t){const r=Fe(this.firestore,"projects",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"projects",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}newProject(){this.router.navigate(["user/project-new"])}EditProject(){this.router.navigate(["user/project-new"])}Muestras(t){this.router.navigate(["client/muestras/"+t])}editProyecto(t){this.router.navigate(["user/project-edit/"+t])}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}MyQuery(){var t=this;return C(function*(){const r=ic();let i;i="",console.log(r),el(r,function(){var o=C(function*(s){if(s&&(console.log(s.email),s.email)){i=s.email;const a=_n(Te(t.firestore,"projects"),sn("cliente","==",i));pe(a).then(u=>{t.data=[...u.docs.map(l=>({...l.data(),id:l.id}))]});const c=yield pe(a);console.log(c),c.forEach(u=>{console.log(u.id," => ",u.data()),console.log("here2")}),console.log(t.data.length),console.log(t.data),console.log(t.data[0].cliente)}});return function(s){return o.apply(this,arguments)}}())})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-projects"]],decls:17,vars:1,consts:[[1,"subTituloText"],[1,"list"],[4,"ngFor","ngForOf"],[1,"muestras",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"projects works!"),m(),_(2,"h1",0),b(3,"Proyectos"),m(),_(4,"div",1)(5,"table")(6,"tr")(7,"th"),b(8," Nombre "),m(),_(9,"th"),b(10," Due\xf1o "),m(),_(11,"th"),b(12," Integrantes"),m(),_(13,"th"),b(14," Clientes "),m(),Z(15,"th"),m(),ri(16,DEe,11,4,"tr",2),m()()),2&t&&(H(16),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:25%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.muestras[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(clipboard.008357a0b24034e8.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function xEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",4),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoMuestra(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.fecha),H(2),Ee(t.cultivo),H(2),Ee(t.coordenadas)}}let DG=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.MyQuery()}ngOnInit(){this.route.params.subscribe(t=>{this.item=t.id,console.log(t),console.log(t.id)}),this.MyQuery()}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"muestras",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"muestras",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["client/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newMuestra(){this.router.navigate(["user/muestras-new"])}editMuestra(t){this.router.navigate(["user/muestras-edit/"+t])}infoProject(t){this.router.navigate(["user/project-edit/"+t])}infoMuestra(t){this.router.navigate(["client/muestras-info/"+t])}MyQuery(){var t=this;return C(function*(){let r=t.item;t.pid=r,console.log(r);const i=_n(Te(t.firestore,"muestras"),sn("project","==",r));pe(i).then(s=>{t.data=[...s.docs.map(a=>({...a.data(),id:a.id}))]}),(yield pe(i)).forEach(s=>{console.log(s.id," => ",s.data())})})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras"]],decls:19,vars:1,consts:[[1,"subTituloText"],[1,"list"],[1,"projectBlock",3,"click"],[4,"ngFor","ngForOf"],[1,"detalles",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"muestras works!"),m(),_(2,"h1",0),b(3,"Muestras"),m(),_(4,"div",1)(5,"div",2),q("click",function(){return r.infoProject(r.pid)}),b(6,"Proyecto"),m(),_(7,"table")(8,"tr")(9,"th"),b(10," Codigo "),m(),_(11,"th"),b(12," Fecha "),m(),_(13,"th"),b(14," Cultivo"),m(),_(15,"th"),b(16," Coordenadas "),m(),Z(17,"th"),m(),ri(18,xEe,11,4,"tr",3),m()()),2&t&&(H(18),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:auto;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function SEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",3),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoMuestra(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.fecha),H(2),Ee(t.cultivo),H(2),Ee(t.coordenadas)}}let MEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.arr=[]}ngOnInit(){this.route.params.subscribe(t=>{this.item=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}getData(){const t=Te(this.firestore,"muestras");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"muestras",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"muestras",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newMuestra(){this.router.navigate(["user/muestras-new"])}editMuestra(t){this.router.navigate(["user/muestras-edit/"+t])}infoProject(t){this.router.navigate(["user/project-edit/"+t])}infoMuestra(t){this.router.navigate(["user/muestras-info/"+t])}MyQuery(){var t=this;return C(function*(){const r=ic();let i,o=[];i="",console.log(r),el(r,function(){var s=C(function*(a){if(a&&(console.log(a.email),a.email)){i=a.email;const d=_n(Te(t.firestore,"projects"),sn("cliente","==",i));pe(d).then(w=>{t.dataTem=[...w.docs.map(I=>({...I.data(),id:I.id}))]}),(yield pe(d)).forEach(w=>{}),console.log(t.dataTem.length),console.log(t.dataTem[0].name);let p=t.dataTem.length;console.log(p);for(let w=0;w<p;w++)console.log(t.dataTem[w].name),o.push(t.dataTem[w].name);console.log(o)}console.log("next"),console.log(o),t.pid=t.item;const u=_n(Te(t.firestore,"muestras"),sn("project","in",o));pe(u).then(d=>{t.data=[...d.docs.map(h=>({...h.data(),id:h.id}))]}),(yield pe(u)).forEach(d=>{console.log(d.id," => ",d.data())})});return function(a){return s.apply(this,arguments)}}())})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-muestras-all"]],decls:17,vars:1,consts:[[1,"subTituloText"],[1,"list"],[4,"ngFor","ngForOf"],[1,"detalles",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"muestras-all works!"),m(),_(2,"h1",0),b(3,"Muestras"),m(),_(4,"div",1)(5,"table")(6,"tr")(7,"th"),b(8," Codigo "),m(),_(9,"th"),b(10," Fecha "),m(),_(11,"th"),b(12," Cultivo"),m(),_(13,"th"),b(14," Coordenadas "),m(),Z(15,"th"),m(),ri(16,SEe,11,4,"tr",2),m()()),2&t&&(H(16),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:auto;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;margin-left:2px;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();function OEe(n,e){if(1&n){const t=xt();_(0,"tr")(1,"td"),b(2),m(),_(3,"td"),b(4),m(),_(5,"td"),b(6),m(),_(7,"td"),b(8),m(),_(9,"td")(10,"button",3),q("click",function(){const o=Ge(t).$implicit;return qe(un().infoUnidad(o.codigo))}),m()()()}if(2&n){const t=e.$implicit;H(2),Ee(t.codigo),H(2),Ee(t.project),H(2),Ee(t.altitud),H(2),Ee(t.coordenadas)}}let PEe=(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.data=[],this.arr=[]}ngOnInit(){this.route.params.subscribe(t=>{this.item=t.id,console.log(t),console.log(t.id)}),this.getData(),this.MyQuery()}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(t){const r=Fe(this.firestore,"unidad-produccion",t);ci(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(t){const r=Fe(this.firestore,"unidad-produccion",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}Scan(){this.router.navigate(["user/scan"])}Home(){this.router.navigate(["user/projects"])}logOut(){tr(this.auth).then(()=>{}).catch(t=>{}),this.router.navigate(["auth/select"])}newMuestra(){this.router.navigate(["user/muestras-new"])}editMuestra(t){this.router.navigate(["user/muestras-edit/"+t])}infoProject(t){this.router.navigate(["user/project-edit/"+t])}infoUnidad(t){this.router.navigate(["client/unidad-produccion-info/"+t])}MyQuery(){var t=this;return C(function*(){const r=ic();let i,o=[];i="",console.log(r),el(r,function(){var s=C(function*(a){if(a&&(console.log(a.email),a.email)){i=a.email;const d=_n(Te(t.firestore,"projects"),sn("cliente","==",i));pe(d).then(w=>{t.dataTem=[...w.docs.map(I=>({...I.data(),id:I.id}))]}),(yield pe(d)).forEach(w=>{}),console.log(t.dataTem.length),console.log(t.dataTem[0].name);let p=t.dataTem.length;console.log(p);for(let w=0;w<p;w++)console.log(t.dataTem[w].name),o.push(t.dataTem[w].name);console.log(o)}console.log("next"),console.log(o),t.pid=t.item;const u=_n(Te(t.firestore,"unidad-produccion"),sn("project","in",o));pe(u).then(d=>{t.data=[...d.docs.map(h=>({...h.data(),id:h.id}))]}),(yield pe(u)).forEach(d=>{console.log(d.id," => ",d.data())})});return function(a){return s.apply(this,arguments)}}())})()}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion-all"]],decls:17,vars:1,consts:[[1,"subTituloText"],[1,"list"],[4,"ngFor","ngForOf"],[1,"detalles",3,"click"]],template:function(t,r){1&t&&(_(0,"p"),b(1,"unidad-produccion-all works!"),m(),_(2,"h1",0),b(3,"Unidades"),m(),_(4,"div",1)(5,"table")(6,"tr")(7,"th"),b(8," Codigo "),m(),_(9,"th"),b(10," Proyecto "),m(),_(11,"th"),b(12," Altitud"),m(),_(13,"th"),b(14," Coordenadas "),m(),Z(15,"th"),m(),ri(16,OEe,11,4,"tr",2),m()()),2&t&&(H(16),Ae("ngForOf",r.data))},dependencies:[wi],styles:[".list[_ngcontent-%COMP%]{position:absolute;left:38%;top:38%}td[_ngcontent-%COMP%]{border:1px solid #000;background:#D9D9D9;padding:10px}th[_ngcontent-%COMP%]{border:1px solid #000;background:#AAAAAA;padding:10px}table[_ngcontent-%COMP%]{border-collapse:collapse}.projectBlock[_ngcontent-%COMP%]{width:auto;height:35px;background:#3EC28F;color:#fff;padding-top:10px;font-family:Verdana;text-align:center;font-size:20px;font-weight:700;letter-spacing:0;cursor:pointer}.username[_ngcontent-%COMP%]{width:119px;height:17px;left:4%;top:17%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;text-decoration:underline;word-wrap:break-word}.logout[_ngcontent-%COMP%]{width:128px;height:23px;left:4%;top:23%;position:absolute;color:#4c9eff;font-size:16px;font-family:Inter;font-weight:400;word-wrap:break-word}.scanbutton[_ngcontent-%COMP%]{width:153px;height:36px;left:49%;top:30%;position:absolute;background:#4C9EFF;border-radius:30px}.scantext[_ngcontent-%COMP%]{width:126px;height:16px;left:50%;top:31%;position:absolute;text-align:center;color:#fff;font-size:16px;font-family:Verdana;font-weight:700;word-wrap:break-word}.boton[_ngcontent-%COMP%]{border:none;float:right;background-color:#3eb3c2;color:#fff;margin:15px 0;padding:15px;text-align:center;text-decoration:none;font-size:16px;cursor:pointer;border-radius:30px}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;width:300px;height:64px;font-family:Verdana;font-size:48px;letter-spacing:0;left:45%;top:20%}.edit[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Edit.1c3b33dbc7a0ce7c.png)}.detalles[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(info.f631e6664ac6fa77.png)}.imprimir[_ngcontent-%COMP%]{border:none;background-color:#d9d9d9;margin-left:2px;width:25px;height:25px;background-size:contain;background-repeat:no-repeat;cursor:pointer;background-image:url(Imprimir.5707a7d8e20080ab.png)}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})();const kEe=["geo"],NEe=[{path:"client",component:lz,children:[{path:"projects",component:AEe},{path:"muestras-all",component:MEe},{path:"muestras/:id",component:DG},{path:"unidad-produccion-all",component:PEe},{path:"muestras-info/:id",component:DG},{path:"unidad-produccion-info/:id",component:(()=>{class n{constructor(t,r,i,o){this.router=t,this.route=r,this.auth=i,this.firestore=o,this.title="gestion-de-muestras-de-campo",this.data=[],this.somethingChange=new et}ngOnInit(){this.route.params.subscribe(t=>{this.text=t.id,console.log(t),console.log(t.id)}),this.MyQuery()}handleRegister(t){this.addData(t)}addData(t){const r=Fe(this.firestore,"unidad-produccion",t.codigo);xo(r,t).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}),console.log(t.comentarios)}getData(){const t=Te(this.firestore,"unidad-produccion");pe(t).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}showPosition(t){console.log(t.coords.latitude),console.log(t.coords.longitude)}getLocation(){var t=this;return C(function*(){t.res="...",navigator.geolocation?yield navigator.geolocation.getCurrentPosition(t.showPosition):console.log("error"),setTimeout(()=>{console.log(t.res)},1e3)})()}MyQuery(){var t=this;return C(function*(){let r=t.text;const i=_n(Te(t.firestore,"unidad-produccion"),sn("codigo","==",r)),o=yield pe(i);o.empty||o.forEach(s=>{t.item=s.data(),console.log(s.id," => ",s.data())})})()}editMuestra(){this.router.navigate(["user/unidad-produccion-edit/"+this.text])}deleteData(t){const r=Fe(this.firestore,"users",t);$n(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return n.\u0275fac=function(t){return new(t||n)(S(Pe),S(dt),S(We),S(ut))},n.\u0275cmp=He({type:n,selectors:[["app-unidad-produccion-info"]],viewQuery:function(t,r){if(1&t&&hr(kEe,5),2&t){let i;Qn(i=Yn())&&(r.geo=i.first)}},inputs:{something:"something"},outputs:{somethingChange:"somethingChange"},decls:58,vars:10,consts:[[1,"subTituloText"],[1,"loginBox"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],[1,"Text"],[1,"input-field"]],template:function(t,r){if(1&t){const i=xt();_(0,"p"),b(1,"unidad-produccion-info works!"),m(),_(2,"h1",0),b(3,"Datos de la Muestra"),m(),_(4,"div",1)(5,"form",2,3),q("ngSubmit",function(){Ge(i);const s=Kn(6);return qe(r.handleRegister(s.value))}),_(7,"div",4)(8,"div",5)(9,"span",6),b(10,"Codigo:"),m(),_(11,"span",7),b(12),m()(),_(13,"div",5)(14,"span",6),b(15,"Cliente:"),m(),_(16,"span",7),b(17),m()(),_(18,"div",5)(19,"span",6),b(20,"Coordenadas:"),m(),_(21,"span",7),b(22),m()(),_(23,"div",5)(24,"span",6),b(25,"Localidad:"),m(),_(26,"span",7),b(27),m()(),_(28,"div",5)(29,"span",6),b(30,"Municipio:"),m(),_(31,"span",7),b(32),m()(),_(33,"div",5)(34,"span",6),b(35,"Estado:"),m(),_(36,"span",7),b(37),m()(),_(38,"div",5)(39,"span",6),b(40,"Altitud:"),m(),_(41,"span",7),b(42),m()(),_(43,"div",5)(44,"span",6),b(45,"Temperaturas M\xe1ximas:"),m(),_(46,"span",7),b(47),m()(),_(48,"div",5)(49,"span",6),b(50,"Temperaturas M\xednimas:"),m(),_(51,"span",7),b(52),m()(),_(53,"div",5)(54,"span",6),b(55,"Precipitaci\xf3n:"),m(),_(56,"span",7),b(57),m()()()()()}2&t&&(H(12),Ve(" ",r.item.codigo,""),H(5),Ve(" ",r.item.cliente,""),H(5),Ve(" ",r.item.coordenadas,""),H(5),Ve(" ",r.item.localidad,""),H(5),Ve(" ",r.item.municipio,""),H(5),Ve(" ",r.item.cliente,""),H(5),Ve(" ",r.item.altitud,""),H(5),Ve(" ",r.item.tempmax,""),H(5),Ve(" ",r.item.tempmin,""),H(5),Ve(" ",r.item.precipitacion,""))},dependencies:[Hr,zr,pr],styles:[".loginBox[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#d9d9d9;width:65%;height:55%;flex-shrink:0;position:absolute;left:25%;top:30%}.main[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:absolute;left:10%;top:7%}.input-fields[_ngcontent-%COMP%]{display:flex;align-items:center}textarea[_ngcontent-%COMP%]{resize:none;left:92px;margin:10px;font-family:Arial;width:85%}.input-field[_ngcontent-%COMP%]{margin:12px 12px 12px 25px;height:20px;left:92px;color:#000;font-family:Arial;font-size:20px;letter-spacing:0}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}#signup[_ngcontent-%COMP%]{top:20%;position:absolute}.subTituloText[_ngcontent-%COMP%]{color:#3ec28f;position:absolute;margin:0;font-family:Verdana;font-size:48px;letter-spacing:0;left:40%;top:20%}.loginTile[_ngcontent-%COMP%]{color:#000;width:34%;height:28%;position:absolute;font-family:Arial;text-align:center;font-size:32px;letter-spacing:0;left:39.2%;top:39.5%}.lineBlack[_ngcontent-%COMP%]{width:33.9%;height:0px;position:absolute;border:1px solid rgba(0,0,0,1);left:39.2%;top:45%}.Text[_ngcontent-%COMP%]{color:#000;height:25px;font-family:Arial;font-size:20px;font-weight:700;letter-spacing:0}#email[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:48.5%}.userText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:center;font-size:20px;letter-spacing:0;left:43.7%;top:49%}#password[_ngcontent-%COMP%]{width:15%;height:3%;position:absolute;left:49%;top:53.5%}.claveText[_ngcontent-%COMP%]{color:#000;width:5%;height:3%;position:absolute;font-family:Arial;text-align:left;font-size:20px;letter-spacing:0;left:43.7%;top:54%}.bUbicacion[_ngcontent-%COMP%]{display:inline;width:28px;height:27px;flex-shrink:0;border-radius:4px;border:.5px solid #000;background:#A6A6A6;mix-blend-mode:color-burn;box-shadow:0 4px 4px #00000040;font-family:Arial;text-align:center;cursor:pointer}img[_ngcontent-%COMP%]{margin:1px;width:24px;height:24px}.boton[_ngcontent-%COMP%]{background-color:#3eb3c2;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:80%;top:88%}.botonrojo[_ngcontent-%COMP%]{background-color:#c23e3e;color:#fff;position:absolute;border-width:0;border-radius:30px;font-size:16px;left:0%;top:100%}.botonText[_ngcontent-%COMP%]{color:#fff;width:10%;height:1.5%;position:absolute;font-family:Arial;text-align:center;font-size:16px;letter-spacing:0;left:59.5%;top:59.8%}.salir[_ngcontent-%COMP%]{cursor:pointer;border:none;background:none;position:absolute;width:20%;height:10%;left:0%;top:0%}"]}),n})()}]}];let REe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[ji.forChild(NEe),ji]}),n})();Hv().subscribe(n=>console.log("LOAD_WASM",n));let FEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=$t({imports:[REe,dz,Qd,Pm,mO,ji]}),n})();Hv().subscribe(n=>console.log("LOAD_WASM",n));let LEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n,bootstrap:[Ive]}),n.\u0275inj=$t({providers:[{provide:Ps,useClass:DL}],imports:[ji,nne,dz,Pm,_ve,Ale(()=>xle(Tve_firebase)),dpe(()=>ic()),Xbe(()=>Jbe()),dve(()=>{const e=pve();return hve(e),e}),ECe(()=>ICe()),IEe,TEe,FEe,mO]}),n})();ene().bootstrapModule(LEe).catch(n=>console.error(n))},6387:(ge,D,N)=>{var B=te(N(4168)),R=te(N(6017)),G=te(N(1301)),z=te(N(7164)),f=te(N(8619)),v=te(N(4866)),E=te(N(3057)),A=N(723),K=te(N(530));function te(ze){return ze&&ze.__esModule?ze:{default:ze}}var ce=function(){},bt=function(Ct,Wt,vt){var tt=new ce;if(typeof Ct>"u")throw Error("No element to render on was provided.");return tt._renderProperties=(0,f.default)(Ct),tt._encodings=[],tt._options=K.default,tt._errorHandler=new E.default(tt),typeof Wt<"u"&&((vt=vt||{}).format||(vt.format=vs()),tt.options(vt)[vt.format](Wt,vt).render()),tt};for(var Yr in bt.getModule=function(ze){return B.default[ze]},B.default)B.default.hasOwnProperty(Yr)&&di(B.default,Yr);function di(ze,Ct){ce.prototype[Ct]=ce.prototype[Ct.toUpperCase()]=ce.prototype[Ct.toLowerCase()]=function(Wt,vt){var tt=this;return tt._errorHandler.wrapBarcodeCall(function(){vt.text=typeof vt.text>"u"?void 0:""+vt.text;var kr=(0,R.default)(tt._options,vt);kr=(0,v.default)(kr);var jt=Ia(Wt,ze[Ct],kr);return tt._encodings.push(jt),tt})}}function Ia(ze,Ct,Wt){var vt=new Ct(ze=""+ze,Wt);if(!vt.valid())throw new A.InvalidInputException(vt.constructor.name,ze);var tt=vt.encode();tt=(0,G.default)(tt);for(var kr=0;kr<tt.length;kr++)tt[kr].options=(0,R.default)(Wt,tt[kr].options);return tt}function vs(){return B.default.CODE128?"CODE128":Object.keys(B.default)[0]}function ws(ze,Ct,Wt){Ct=(0,G.default)(Ct);for(var vt=0;vt<Ct.length;vt++)Ct[vt].options=(0,R.default)(Wt,Ct[vt].options),(0,z.default)(Ct[vt].options);(0,z.default)(Wt),new(0,ze.renderer)(ze.element,Ct,Wt).render(),ze.afterRender&&ze.afterRender()}ce.prototype.options=function(ze){return this._options=(0,R.default)(this._options,ze),this},ce.prototype.blank=function(ze){var Ct=new Array(ze+1).join("0");return this._encodings.push({data:Ct}),this},ce.prototype.init=function(){var ze;if(this._renderProperties)for(var Ct in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var Wt=(0,R.default)(this._options,(ze=this._renderProperties[Ct]).options);"auto"==Wt.format&&(Wt.format=vs()),this._errorHandler.wrapBarcodeCall(function(){var kr=Ia(Wt.value,B.default[Wt.format.toUpperCase()],Wt);ws(ze,kr,Wt)})}},ce.prototype.render=function(){if(!this._renderProperties)throw new A.NoElementException;if(Array.isArray(this._renderProperties))for(var ze=0;ze<this._renderProperties.length;ze++)ws(this._renderProperties[ze],this._encodings,this._options);else ws(this._renderProperties,this._encodings,this._options);return this},ce.prototype._defaults=K.default,typeof window<"u"&&(window.JsBarcode=bt),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(ze,Ct){var Wt=[];return jQuery(this).each(function(){Wt.push(this)}),bt(Wt,ze,Ct)}),ge.exports=bt},9418:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.default=function B(U,R){(function N(B,U){if(!(B instanceof U))throw new TypeError("Cannot call a class as a function")})(this,B),this.data=U,this.text=R.text||U,this.options=R}},8514:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),U=function j(f){return f&&f.__esModule?f:{default:f}}(N(9418)),R=N(9144),T=function(f){function g(v,y){!function G(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g);var E=function P(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v.substring(1),y));return E.bytes=v.split("").map(function(A){return A.charCodeAt(0)}),E}return function z(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var y=this.bytes,E=y.shift()-105,A=R.SET_BY_CODE[E];if(void 0===A)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&y.unshift(R.FNC1);var O=g.next(y,1,A);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:g.getBar(E)+O.result+g.getBar((O.checksum+E)%R.MODULO)+g.getBar(R.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var y=this.options.ean128||!1;return"string"==typeof y&&(y="true"===y.toLowerCase()),y}}],[{key:"getBar",value:function(y){return R.BARS[y]?R.BARS[y].toString():""}},{key:"correctIndex",value:function(y,E){if(E===R.SET_A){var A=y.shift();return A<32?A+64:A-32}return E===R.SET_B?y.shift()-32:10*(y.shift()-48)+y.shift()-48}},{key:"next",value:function(y,E,A){if(!y.length)return{result:"",checksum:0};var O=void 0,K=void 0;if(y[0]>=200){K=y.shift()-105;var te=R.SWAP[K];void 0!==te?O=g.next(y,E+1,te):((A===R.SET_A||A===R.SET_B)&&K===R.SHIFT&&(y[0]=A===R.SET_A?y[0]>95?y[0]-96:y[0]:y[0]<32?y[0]+96:y[0]),O=g.next(y,E+1,A))}else K=g.correctIndex(y,A),O=g.next(y,E+1,A);return{result:g.getBar(K)+O.result,checksum:K*E+O.checksum}}}]),g}(U.default);D.default=T},2100:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),U=function j(f){return f&&f.__esModule?f:{default:f}}(N(8514)),R=N(9144),T=function(f){function g(v,y){return function G(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),function P(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,R.A_START_CHAR+v,y))}return function z(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"valid",value:function(){return new RegExp("^"+R.A_CHARS+"+$").test(this.data)}}]),g}(U.default);D.default=T},2943:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),U=function j(f){return f&&f.__esModule?f:{default:f}}(N(8514)),R=N(9144),T=function(f){function g(v,y){return function G(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),function P(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,R.B_START_CHAR+v,y))}return function z(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"valid",value:function(){return new RegExp("^"+R.B_CHARS+"+$").test(this.data)}}]),g}(U.default);D.default=T},5683:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),U=function j(f){return f&&f.__esModule?f:{default:f}}(N(8514)),R=N(9144),T=function(f){function g(v,y){return function G(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),function P(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,R.C_START_CHAR+v,y))}return function z(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"valid",value:function(){return new RegExp("^"+R.C_CHARS+"+$").test(this.data)}}]),g}(U.default);D.default=T},7737:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=j(N(8514)),R=j(N(4336));function j(f){return f&&f.__esModule?f:{default:f}}function P(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}var T=function(f){function g(v,y){if(function G(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),/^[\x00-\x7F\xC8-\xD3]+$/.test(v))var E=P(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,(0,R.default)(v),y));else E=P(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,y));return P(E)}return function z(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),g}(B.default);D.default=T},4336:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=N(9144),B=function(z){return z.match(new RegExp("^"+L.A_CHARS+"*"))[0].length},U=function(z){return z.match(new RegExp("^"+L.B_CHARS+"*"))[0].length},R=function(z){return z.match(new RegExp("^"+L.C_CHARS+"*"))[0]};function j(P,z){var T=z?L.A_CHARS:L.B_CHARS,f=P.match(new RegExp("^("+T+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(f)return f[1]+String.fromCharCode(204)+G(P.substring(f[1].length));var g=P.match(new RegExp("^"+T+"+"))[0];return g.length===P.length?P:g+String.fromCharCode(z?205:206)+j(P.substring(g.length),!z)}function G(P){var z=R(P),T=z.length;if(T===P.length)return P;P=P.substring(T);var f=B(P)>=U(P);return z+String.fromCharCode(f?206:205)+j(P,f)}D.default=function(P){var z=void 0;if(R(P).length>=2)z=L.C_START_CHAR+G(P);else{var f=B(P)>U(P);z=(f?L.A_START_CHAR:L.B_START_CHAR)+j(P,f)}return z.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(g,v){return String.fromCharCode(203)+v})}},9144:(ge,D)=>{var N;function L(Yr,di,Ia){return di in Yr?Object.defineProperty(Yr,di,{value:Ia,enumerable:!0,configurable:!0,writable:!0}):Yr[di]=Ia,Yr}Object.defineProperty(D,"__esModule",{value:!0});var B=D.SET_A=0,U=D.SET_B=1,R=D.SET_C=2,G=(D.SHIFT=98,D.START_A=103),P=D.START_B=104,z=D.START_C=105;D.MODULO=103,D.STOP=106,D.FNC1=207,D.SET_BY_CODE=(L(N={},G,B),L(N,P,U),L(N,z,R),N),D.SWAP={101:B,100:U,99:R},D.A_START_CHAR=String.fromCharCode(208),D.B_START_CHAR=String.fromCharCode(209),D.C_START_CHAR=String.fromCharCode(210),D.A_CHARS="[\0-_\xc8-\xcf]",D.B_CHARS="[ -\x7f\xc8-\xcf]",D.C_CHARS="(\xcf*[0-9]{2}\xcf*)",D.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},8754:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.CODE128C=D.CODE128B=D.CODE128A=D.CODE128=void 0;var B=T(N(7737)),R=T(N(2100)),G=T(N(2943)),z=T(N(5683));function T(f){return f&&f.__esModule?f:{default:f}}D.CODE128=B.default,D.CODE128A=R.default,D.CODE128B=G.default,D.CODE128C=z.default},6602:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.CODE39=void 0;var L=function(){function O(K,te){for(var ce=0;ce<te.length;ce++){var bt=te[ce];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(K,bt.key,bt)}}return function(K,te,ce){return te&&O(K.prototype,te),ce&&O(K,ce),K}}(),z=function(O){function K(te,ce){return function j(O,K){if(!(O instanceof K))throw new TypeError("Cannot call a class as a function")}(this,K),te=te.toUpperCase(),ce.mod43&&(te+=function y(O){return T[O]}(function A(O){for(var K=0,te=0;te<O.length;te++)K+=E(O[te]);return K%=43}(te))),function G(O,K){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!K||"object"!=typeof K&&"function"!=typeof K?O:K}(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,te,ce))}return function P(O,K){if("function"!=typeof K&&null!==K)throw new TypeError("Super expression must either be null or a function, not "+typeof K);O.prototype=Object.create(K&&K.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(O,K):O.__proto__=K)}(K,O),L(K,[{key:"encode",value:function(){for(var ce=g("*"),bt=0;bt<this.data.length;bt++)ce+=g(this.data[bt])+"0";return{data:ce+=g("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),K}(function R(O){return O&&O.__esModule?O:{default:O}}(N(9418)).default),T=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],f=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function g(O){return function v(O){return f[O].toString(2)}(E(O))}function E(O){return T.indexOf(O)}D.CODE39=z},4079:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function v(y,E){for(var A=0;A<E.length;A++){var O=E[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,E,A){return E&&v(y.prototype,E),A&&v(y,A),y}}(),B=N(1392),R=P(N(2651));function P(v){return v&&v.__esModule?v:{default:v}}var g=function(v){function y(E,A){!function z(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}(this,y);var O=function T(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?v:y}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,E,A));return O.fontSize=!A.flat&&A.fontSize>10*A.width?10*A.width:A.fontSize,O.guardHeight=A.height+O.fontSize/2+A.textMargin,O}return function f(v,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}(y,v),L(y,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(A,O){return this.text.substr(A,O)}},{key:"leftEncode",value:function(A,O){return(0,R.default)(A,O)}},{key:"rightText",value:function(A,O){return this.text.substr(A,O)}},{key:"rightEncode",value:function(A,O){return(0,R.default)(A,O)}},{key:"encodeGuarded",value:function(){var A={fontSize:this.fontSize},O={height:this.guardHeight};return[{data:B.SIDE_BIN,options:O},{data:this.leftEncode(),text:this.leftText(),options:A},{data:B.MIDDLE_BIN,options:O},{data:this.rightEncode(),text:this.rightText(),options:A},{data:B.SIDE_BIN,options:O}]}},{key:"encodeFlat",value:function(){return{data:[B.SIDE_BIN,this.leftEncode(),B.MIDDLE_BIN,this.rightEncode(),B.SIDE_BIN].join(""),text:this.text}}}]),y}(P(N(9418)).default);D.default=g},9619:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function v(y,E){for(var A=0;A<E.length;A++){var O=E[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,E,A){return E&&v(y.prototype,E),A&&v(y,A),y}}(),B=function v(y,E,A){null===y&&(y=Function.prototype);var O=Object.getOwnPropertyDescriptor(y,E);if(void 0===O){var K=Object.getPrototypeOf(y);return null===K?void 0:v(K,E,A)}if("value"in O)return O.value;var te=O.get;return void 0===te?void 0:te.call(A)},U=N(1392),j=function G(v){return v&&v.__esModule?v:{default:v}}(N(4079)),f=function(y){return(10-y.substr(0,12).split("").map(function(A){return+A}).reduce(function(A,O,K){return K%2?A+3*O:A+O},0)%10)%10},g=function(v){function y(E,A){(function P(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,y),-1!==E.search(/^[0-9]{12}$/)&&(E+=f(E));var O=function z(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?v:y}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,E,A));return O.lastChar=A.lastChar,O}return function T(v,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}(y,v),L(y,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===f(this.data)}},{key:"leftText",value:function(){return B(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var A=this.data.substr(1,6),O=U.EAN13_STRUCTURE[this.data[0]];return B(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"leftEncode",this).call(this,A,O)}},{key:"rightText",value:function(){return B(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var A=this.data.substr(7,6);return B(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"rightEncode",this).call(this,A,"RRRRRR")}},{key:"encodeGuarded",value:function(){var A=B(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(A.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(A.push({data:"00"}),A.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),A}}]),y}(j.default);D.default=g},5754:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function v(y,E){for(var A=0;A<E.length;A++){var O=E[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,E,A){return E&&v(y.prototype,E),A&&v(y,A),y}}(),B=N(1392),R=P(N(2651));function P(v){return v&&v.__esModule?v:{default:v}}var g=function(v){function y(E,A){return function z(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}(this,y),function T(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?v:y}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,E,A))}return function f(v,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}(y,v),L(y,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var A=B.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,R.default)(this.data,A,"01"),text:this.text}}}]),y}(P(N(9418)).default);D.default=g},1931:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function y(E,A){for(var O=0;O<A.length;O++){var K=A[O];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(E,K.key,K)}}return function(E,A,O){return A&&y(E.prototype,A),O&&y(E,O),E}}(),B=N(1392),R=P(N(2651));function P(y){return y&&y.__esModule?y:{default:y}}var v=function(y){function E(A,O){return function z(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}(this,E),function T(y,E){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||"object"!=typeof E&&"function"!=typeof E?y:E}(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,O))}return function f(y,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function, not "+typeof E);y.prototype=Object.create(E&&E.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(y,E):y.__proto__=E)}(E,y),L(E,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var O=B.EAN5_STRUCTURE[function(E){return E.split("").map(function(O){return+O}).reduce(function(O,K,te){return te%2?O+9*K:O+3*K},0)%10}(this.data)];return{data:"1011"+(0,R.default)(this.data,O,"01"),text:this.text}}}]),E}(P(N(9418)).default);D.default=v},3372:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function g(v,y){for(var E=0;E<y.length;E++){var A=y[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,y,E){return y&&g(v.prototype,y),E&&g(v,E),v}}(),B=function g(v,y,E){null===v&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,y);if(void 0===A){var O=Object.getPrototypeOf(v);return null===O?void 0:g(O,y,E)}if("value"in A)return A.value;var K=A.get;return void 0===K?void 0:K.call(E)},R=function j(g){return g&&g.__esModule?g:{default:g}}(N(4079)),T=function(v){return(10-v.substr(0,7).split("").map(function(E){return+E}).reduce(function(E,A,O){return O%2?E+A:E+3*A},0)%10)%10},f=function(g){function v(y,E){return function G(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,v),-1!==y.search(/^[0-9]{7}$/)&&(y+=T(y)),function P(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?g:v}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y,E))}return function z(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}(v,g),L(v,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===T(this.data)}},{key:"leftText",value:function(){return B(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var E=this.data.substr(0,4);return B(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftEncode",this).call(this,E,"LLLL")}},{key:"rightText",value:function(){return B(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var E=this.data.substr(4,4);return B(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightEncode",this).call(this,E,"RRRR")}}]),v}(R.default);D.default=f},5821:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function v(y,E){for(var A=0;A<E.length;A++){var O=E[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,E,A){return E&&v(y.prototype,E),A&&v(y,A),y}}();D.checksum=g;var U=G(N(2651));function G(v){return v&&v.__esModule?v:{default:v}}var f=function(v){function y(E,A){(function P(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,y),-1!==E.search(/^[0-9]{11}$/)&&(E+=g(E));var O=function z(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?v:y}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,E,A));return O.displayValue=A.displayValue,O.fontSize=A.fontSize>10*A.width?10*A.width:A.fontSize,O.guardHeight=A.height+O.fontSize/2+A.textMargin,O}return function T(v,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}(y,v),L(y,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==g(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var A="";return A+="101",A+=(0,U.default)(this.data.substr(0,6),"LLLLLL"),A+="01010",A+=(0,U.default)(this.data.substr(6,6),"RRRRRR"),{data:A+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var A=[];return this.displayValue&&A.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),A.push({data:"101"+(0,U.default)(this.data[0],"L"),options:{height:this.guardHeight}}),A.push({data:(0,U.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),A.push({data:"01010",options:{height:this.guardHeight}}),A.push({data:(0,U.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),A.push({data:(0,U.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&A.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),A}}]),y}(G(N(9418)).default);function g(v){var E,y=0;for(E=1;E<11;E+=2)y+=parseInt(v[E]);for(E=0;E<11;E+=2)y+=3*parseInt(v[E]);return(10-y%10)%10}D.default=f},1091:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function A(O,K){for(var te=0;te<K.length;te++){var ce=K[te];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(O,ce.key,ce)}}return function(O,K,te){return K&&A(O.prototype,K),te&&A(O,te),O}}(),U=P(N(2651)),j=P(N(9418)),G=N(5821);function P(A){return A&&A.__esModule?A:{default:A}}function T(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?A:O}var g=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],v=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],y=function(A){function O(K,te){!function z(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}(this,O);var ce=T(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,K,te));if(ce.isValid=!1,-1!==K.search(/^[0-9]{6}$/))ce.middleDigits=K,ce.upcA=E(K,"0"),ce.text=te.text||""+ce.upcA[0]+K+ce.upcA[ce.upcA.length-1],ce.isValid=!0;else{if(-1===K.search(/^[01][0-9]{7}$/))return T(ce);if(ce.middleDigits=K.substring(1,K.length-1),ce.upcA=E(ce.middleDigits,K[0]),ce.upcA[ce.upcA.length-1]!==K[K.length-1])return T(ce);ce.isValid=!0}return ce.displayValue=te.displayValue,ce.fontSize=te.fontSize>10*te.width?10*te.width:te.fontSize,ce.guardHeight=te.height+ce.fontSize/2+te.textMargin,ce}return function f(A,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}(O,A),L(O,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var te="";return te+="101",te+=this.encodeMiddleDigits(),{data:te+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var te=[];return this.displayValue&&te.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),te.push({data:"101",options:{height:this.guardHeight}}),te.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),te.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&te.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),te}},{key:"encodeMiddleDigits",value:function(){var te=this.upcA[0],bt=v[parseInt(this.upcA[this.upcA.length-1])][parseInt(te)];return(0,U.default)(this.middleDigits,bt)}}]),O}(j.default);function E(A,O){for(var K=parseInt(A[A.length-1]),te=g[K],ce="",bt=0,Yr=0;Yr<te.length;Yr++){var di=te[Yr];ce+="X"===di?A[bt++]:di}return(ce=""+O+ce)+(0,G.checksum)(ce)}D.default=y},1392:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.SIDE_BIN="101",D.MIDDLE_BIN="01010",D.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},D.EAN2_STRUCTURE=["LL","LG","GL","GG"],D.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],D.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},2651:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=N(1392);D.default=function(R,j,G){var P=R.split("").map(function(T,f){return L.BINARIES[j[f]]}).map(function(T,f){return T?T[R[f]]:""});if(G){var z=R.length-1;P=P.map(function(T,f){return f<z?T+G:T})}return P.join("")}},2708:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.UPCE=D.UPC=D.EAN2=D.EAN5=D.EAN8=D.EAN13=void 0;var B=y(N(9619)),R=y(N(3372)),G=y(N(1931)),z=y(N(5754)),f=y(N(5821)),v=y(N(1091));function y(E){return E&&E.__esModule?E:{default:E}}D.EAN13=B.default,D.EAN8=R.default,D.EAN5=G.default,D.EAN2=z.default,D.UPC=f.default,D.UPCE=v.default},8817:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.GenericBarcode=void 0;var L=function(){function T(f,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,g,v){return g&&T(f.prototype,g),v&&T(f,v),f}}(),z=function(T){function f(g,v){return function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),L(f,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),f}(function R(T){return T&&T.__esModule?T:{default:T}}(N(9418)).default);D.GenericBarcode=z},6065:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),B=N(5168),T=function(f){function g(){return function G(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),function P(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return function z(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var y=this,E=this.data.match(/.{2}/g).map(function(A){return y.encodePair(A)}).join("");return{data:B.START_BIN+E+B.END_BIN,text:this.text}}},{key:"encodePair",value:function(y){var E=B.BINARIES[y[1]];return B.BINARIES[y[0]].split("").map(function(A,O){return("1"===A?"111":"1")+("1"===E[O]?"000":"0")}).join("")}}]),g}(function j(f){return f&&f.__esModule?f:{default:f}}(N(9418)).default);D.default=T},9643:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),U=function R(f){return f&&f.__esModule?f:{default:f}}(N(6065)),z=function(g){var v=g.substr(0,13).split("").map(function(y){return parseInt(y,10)}).reduce(function(y,E,A){return y+E*(3-A%2*2)},0);return 10*Math.ceil(v/10)-v},T=function(f){function g(v,y){return function j(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),-1!==v.search(/^[0-9]{13}$/)&&(v+=z(v)),function G(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,y))}return function P(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===z(this.data)}}]),g}(U.default);D.default=T},5168:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.START_BIN="1010",D.END_BIN="11101",D.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},8969:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.ITF14=D.ITF=void 0;var B=j(N(6065)),R=j(N(9643));function j(G){return G&&G.__esModule?G:{default:G}}D.ITF=B.default,D.ITF14=R.default},7037:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function f(g,v){for(var y=0;y<v.length;y++){var E=v[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,y){return v&&f(g.prototype,v),y&&f(g,y),g}}(),z=function(f){function g(v,y){return function j(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g),function G(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?f:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,y))}return function P(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}(g,f),L(g,[{key:"encode",value:function(){for(var y="110",E=0;E<this.data.length;E++){var O=parseInt(this.data[E]).toString(2);O=T(O,4-O.length);for(var K=0;K<O.length;K++)y+="0"==O[K]?"100":"110"}return{data:y+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),g}(function R(f){return f&&f.__esModule?f:{default:f}}(N(9418)).default);function T(f,g){for(var v=0;v<g;v++)f="0"+f;return f}D.default=z},3922:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=function R(T){return T&&T.__esModule?T:{default:T}}(N(7037)),U=N(6225),z=function(T){function f(g,v){return function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g+(0,U.mod10)(g),v))}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),f}(B.default);D.default=z},8742:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=function R(T){return T&&T.__esModule?T:{default:T}}(N(7037)),U=N(6225),z=function(T){function f(g,v){return function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),g+=(0,U.mod10)(g),g+=(0,U.mod10)(g),function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),f}(B.default);D.default=z},1825:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=function R(T){return T&&T.__esModule?T:{default:T}}(N(7037)),U=N(6225),z=function(T){function f(g,v){return function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g+(0,U.mod11)(g),v))}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),f}(B.default);D.default=z},4455:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=function R(T){return T&&T.__esModule?T:{default:T}}(N(7037)),U=N(6225),z=function(T){function f(g,v){return function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),g+=(0,U.mod11)(g),g+=(0,U.mod10)(g),function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),f}(B.default);D.default=z},6225:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.mod10=function N(B){for(var U=0,R=0;R<B.length;R++){var j=parseInt(B[R]);U+=(R+B.length)%2==0?j:2*j%10+Math.floor(2*j/10)}return(10-U%10)%10},D.mod11=function L(B){for(var U=0,R=[2,3,4,5,6,7],j=0;j<B.length;j++){var G=parseInt(B[B.length-1-j]);U+=R[j%R.length]*G}return(11-U%11)%11}},1122:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.MSI1110=D.MSI1010=D.MSI11=D.MSI10=D.MSI=void 0;var B=g(N(7037)),R=g(N(3922)),G=g(N(1825)),z=g(N(8742)),f=g(N(4455));function g(v){return v&&v.__esModule?v:{default:v}}D.MSI=B.default,D.MSI10=R.default,D.MSI11=G.default,D.MSI1010=z.default,D.MSI1110=f.default},886:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.codabar=void 0;var L=function(){function T(f,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,g,v){return g&&T(f.prototype,g),v&&T(f,v),f}}(),z=function(T){function f(g,v){(function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")})(this,f),0===g.search(/^[0-9\-\$\:\.\+\/]+$/)&&(g="A"+g+"A");var y=function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g.toUpperCase(),v));return y.text=y.options.text||y.text.replace(/[A-D]/g,""),y}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),L(f,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var v=[],y=this.getEncodings(),E=0;E<this.data.length;E++)v.push(y[this.data.charAt(E)]),E!==this.data.length-1&&v.push("0");return{text:this.text,data:v.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),f}(function R(T){return T&&T.__esModule?T:{default:T}}(N(9418)).default);D.codabar=z},4168:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=N(6602),B=N(8754),U=N(2708),R=N(8969),j=N(1122),G=N(8758),P=N(886),z=N(8817);D.default={CODE39:L.CODE39,CODE128:B.CODE128,CODE128A:B.CODE128A,CODE128B:B.CODE128B,CODE128C:B.CODE128C,EAN13:U.EAN13,EAN8:U.EAN8,EAN5:U.EAN5,EAN2:U.EAN2,UPC:U.UPC,UPCE:U.UPCE,ITF14:R.ITF14,ITF:R.ITF,MSI:j.MSI,MSI10:j.MSI10,MSI11:j.MSI11,MSI1010:j.MSI1010,MSI1110:j.MSI1110,pharmacode:G.pharmacode,codabar:P.codabar,GenericBarcode:z.GenericBarcode}},8758:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.pharmacode=void 0;var L=function(){function T(f,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,g,v){return g&&T(f.prototype,g),v&&T(f,v),f}}(),z=function(T){function f(g,v){!function j(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f);var y=function G(T,f){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?T:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v));return y.number=parseInt(g,10),y}return function P(T,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);T.prototype=Object.create(f&&f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(T,f):T.__proto__=f)}(f,T),L(f,[{key:"encode",value:function(){for(var v=this.number,y="";!isNaN(v)&&0!=v;)v%2==0?(y="11100"+y,v=(v-2)/2):(y="100"+y,v=(v-1)/2);return{data:y=y.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),f}(function R(T){return T&&T.__esModule?T:{default:T}}(N(9418)).default);D.pharmacode=z},3057:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0});var N=function(){function U(R,j){for(var G=0;G<j.length;G++){var P=j[G];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(R,P.key,P)}}return function(R,j,G){return j&&U(R.prototype,j),G&&U(R,G),R}}(),B=function(){function U(R){(function L(U,R){if(!(U instanceof R))throw new TypeError("Cannot call a class as a function")})(this,U),this.api=R}return N(U,[{key:"handleCatch",value:function(j){if("InvalidInputException"!==j.name)throw j;if(this.api._options.valid===this.api._defaults.valid)throw j.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(j){try{var G=j.apply(void 0,arguments);return this.api._options.valid(!0),G}catch(P){return this.handleCatch(P),this.api}}}]),U}();D.default=B},723:(ge,D)=>{function N(G,P){if(!(G instanceof P))throw new TypeError("Cannot call a class as a function")}function L(G,P){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||"object"!=typeof P&&"function"!=typeof P?G:P}function B(G,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function, not "+typeof P);G.prototype=Object.create(P&&P.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(G,P):G.__proto__=P)}Object.defineProperty(D,"__esModule",{value:!0});var U=function(G){function P(z,T){N(this,P);var f=L(this,(P.__proto__||Object.getPrototypeOf(P)).call(this));return f.name="InvalidInputException",f.symbology=z,f.input=T,f.message='"'+f.input+'" is not a valid input for '+f.symbology,f}return B(P,Error),P}(),R=function(G){function P(){N(this,P);var z=L(this,(P.__proto__||Object.getPrototypeOf(P)).call(this));return z.name="InvalidElementException",z.message="Not supported type to render on",z}return B(P,Error),P}(),j=function(G){function P(){N(this,P);var z=L(this,(P.__proto__||Object.getPrototypeOf(P)).call(this));return z.name="NoElementException",z.message="No element to render on.",z}return B(P,Error),P}();D.InvalidInputException=U,D.InvalidElementException=R,D.NoElementException=j},7164:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.default=function N(L){return L.marginTop=L.marginTop||L.margin,L.marginBottom=L.marginBottom||L.margin,L.marginRight=L.marginRight||L.margin,L.marginLeft=L.marginLeft||L.margin,L}},7020:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=j(N(4866)),R=j(N(530));function j(P){return P&&P.__esModule?P:{default:P}}D.default=function G(P){var z={};for(var T in R.default)R.default.hasOwnProperty(T)&&(P.hasAttribute("jsbarcode-"+T.toLowerCase())&&(z[T]=P.getAttribute("jsbarcode-"+T.toLowerCase())),P.hasAttribute("data-"+T.toLowerCase())&&(z[T]=P.getAttribute("data-"+T.toLowerCase())));return z.value=P.getAttribute("jsbarcode-value")||P.getAttribute("data-value"),(0,B.default)(z)}},8619:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},U=P(N(7020)),j=P(N(2233)),G=N(723);function P(g){return g&&g.__esModule?g:{default:g}}D.default=function z(g){if("string"==typeof g)return function T(g){var v=document.querySelectorAll(g);if(0!==v.length){for(var y=[],E=0;E<v.length;E++)y.push(z(v[E]));return y}}(g);if(Array.isArray(g)){for(var v=[],y=0;y<g.length;y++)v.push(z(g[y]));return v}if(typeof HTMLCanvasElement<"u"&&g instanceof HTMLImageElement)return function f(g){var v=document.createElement("canvas");return{element:v,options:(0,U.default)(g),renderer:j.default.CanvasRenderer,afterRender:function(){g.setAttribute("src",v.toDataURL())}}}(g);if(g&&g.nodeName&&"svg"===g.nodeName.toLowerCase()||typeof SVGElement<"u"&&g instanceof SVGElement)return{element:g,options:(0,U.default)(g),renderer:j.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement)return{element:g,options:(0,U.default)(g),renderer:j.default.CanvasRenderer};if(g&&g.getContext)return{element:g,renderer:j.default.CanvasRenderer};if(g&&"object"===(typeof g>"u"?"undefined":L(g))&&!g.nodeName)return{element:g,renderer:j.default.ObjectRenderer};throw new G.InvalidElementException}},1301:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.default=function N(L){var B=[];return function U(R){if(Array.isArray(R))for(var j=0;j<R.length;j++)U(R[j]);else R.text=R.text||"",R.data=R.data||"",B.push(R)}(L),B}},6017:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0});var N=Object.assign||function(L){for(var B=1;B<arguments.length;B++){var U=arguments[B];for(var R in U)Object.prototype.hasOwnProperty.call(U,R)&&(L[R]=U[R])}return L};D.default=function(L,B){return N({},L,B)}},4866:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.default=function N(L){var B=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var U in B)B.hasOwnProperty(U)&&"string"==typeof L[U=B[U]]&&(L[U]=parseInt(L[U],10));return"string"==typeof L.displayValue&&(L.displayValue="false"!=L.displayValue),L}},530:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},1799:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function z(T,f){for(var g=0;g<f.length;g++){var v=f[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(T,v.key,v)}}return function(T,f,g){return f&&z(T.prototype,f),g&&z(T,g),T}}(),U=function j(z){return z&&z.__esModule?z:{default:z}}(N(6017)),R=N(4358),P=function(){function z(T,f,g){(function G(z,T){if(!(z instanceof T))throw new TypeError("Cannot call a class as a function")})(this,z),this.canvas=T,this.encodings=f,this.options=g}return L(z,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var f=0;f<this.encodings.length;f++){var g=(0,U.default)(this.options,this.encodings[f].options);this.drawCanvasBarcode(g,this.encodings[f]),this.drawCanvasText(g,this.encodings[f]),this.moveCanvasDrawing(this.encodings[f])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var f=this.canvas.getContext("2d");f.save(),(0,R.calculateEncodingAttributes)(this.encodings,this.options,f);var g=(0,R.getTotalWidthOfEncodings)(this.encodings),v=(0,R.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=g+this.options.marginLeft+this.options.marginRight,this.canvas.height=v,f.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(f.fillStyle=this.options.background,f.fillRect(0,0,this.canvas.width,this.canvas.height)),f.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(f,g){var E,v=this.canvas.getContext("2d"),y=g.data;E="top"==f.textPosition?f.marginTop+f.fontSize+f.textMargin:f.marginTop,v.fillStyle=f.lineColor;for(var A=0;A<y.length;A++){var O=A*f.width+g.barcodePadding;"1"===y[A]?v.fillRect(O,E,f.width,f.height):y[A]&&v.fillRect(O,E,f.width,f.height*y[A])}}},{key:"drawCanvasText",value:function(f,g){var E,A,v=this.canvas.getContext("2d");f.displayValue&&(A="top"==f.textPosition?f.marginTop+f.fontSize-f.textMargin:f.height+f.textMargin+f.marginTop+f.fontSize,v.font=f.fontOptions+" "+f.fontSize+"px "+f.font,"left"==f.textAlign||g.barcodePadding>0?(E=0,v.textAlign="left"):"right"==f.textAlign?(E=g.width-1,v.textAlign="right"):(E=g.width/2,v.textAlign="center"),v.fillText(g.text,E,A))}},{key:"moveCanvasDrawing",value:function(f){this.canvas.getContext("2d").translate(f.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),z}();D.default=P},2233:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var B=P(N(1799)),R=P(N(5794)),G=P(N(1138));function P(z){return z&&z.__esModule?z:{default:z}}D.default={CanvasRenderer:B.default,SVGRenderer:R.default,ObjectRenderer:G.default}},1138:(ge,D)=>{Object.defineProperty(D,"__esModule",{value:!0});var N=function(){function U(R,j){for(var G=0;G<j.length;G++){var P=j[G];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(R,P.key,P)}}return function(R,j,G){return j&&U(R.prototype,j),G&&U(R,G),R}}(),B=function(){function U(R,j,G){(function L(U,R){if(!(U instanceof R))throw new TypeError("Cannot call a class as a function")})(this,U),this.object=R,this.encodings=j,this.options=G}return N(U,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),U}();D.default=B},4358:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.getTotalWidthOfEncodings=D.calculateEncodingAttributes=D.getBarcodePadding=D.getEncodingHeight=D.getMaximumHeightOfEncodings=void 0;var B=function U(f){return f&&f.__esModule?f:{default:f}}(N(6017));function R(f,g){return g.height+(g.displayValue&&f.text.length>0?g.fontSize+g.textMargin:0)+g.marginTop+g.marginBottom}function j(f,g,v){if(v.displayValue&&g<f){if("center"==v.textAlign)return Math.floor((f-g)/2);if("left"==v.textAlign)return 0;if("right"==v.textAlign)return Math.floor(f-g)}return 0}function T(f,g,v){var y;if(v)y=v;else{if(!(typeof document<"u"))return 0;y=document.createElement("canvas").getContext("2d")}y.font=g.fontOptions+" "+g.fontSize+"px "+g.font;var E=y.measureText(f);return E?E.width:0}D.getMaximumHeightOfEncodings=function z(f){for(var g=0,v=0;v<f.length;v++)f[v].height>g&&(g=f[v].height);return g},D.getEncodingHeight=R,D.getBarcodePadding=j,D.calculateEncodingAttributes=function G(f,g,v){for(var y=0;y<f.length;y++){var O,E=f[y],A=(0,B.default)(g,E.options);O=A.displayValue?T(E.text,A,v):0;var K=E.data.length*A.width;E.width=Math.ceil(Math.max(O,K)),E.height=R(E,A),E.barcodePadding=j(O,K,A)}},D.getTotalWidthOfEncodings=function P(f){for(var g=0,v=0;v<f.length;v++)g+=f[v].width;return g}},5794:(ge,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0});var L=function(){function T(f,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,g,v){return g&&T(f.prototype,g),v&&T(f,v),f}}(),U=function j(T){return T&&T.__esModule?T:{default:T}}(N(6017)),R=N(4358),P="http://www.w3.org/2000/svg",z=function(){function T(f,g,v){(function G(T,f){if(!(T instanceof f))throw new TypeError("Cannot call a class as a function")})(this,T),this.svg=f,this.encodings=g,this.options=v,this.document=v.xmlDocument||document}return L(T,[{key:"render",value:function(){var g=this.options.marginLeft;this.prepareSVG();for(var v=0;v<this.encodings.length;v++){var y=this.encodings[v],E=(0,U.default)(this.options,y.options),A=this.createGroup(g,E.marginTop,this.svg);this.setGroupOptions(A,E),this.drawSvgBarcode(A,E,y),this.drawSVGText(A,E,y),g+=y.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,R.calculateEncodingAttributes)(this.encodings,this.options);var g=(0,R.getTotalWidthOfEncodings)(this.encodings),v=(0,R.getMaximumHeightOfEncodings)(this.encodings),y=g+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(y,v),this.options.background&&this.drawRect(0,0,y,v,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(g,v,y){var A,E=y.data;A="top"==v.textPosition?v.fontSize+v.textMargin:0;for(var O=0,K=0,te=0;te<E.length;te++)K=te*v.width+y.barcodePadding,"1"===E[te]?O++:O>0&&(this.drawRect(K-v.width*O,A,v.width*O,v.height,g),O=0);O>0&&this.drawRect(K-v.width*(O-1),A,v.width*O,v.height,g)}},{key:"drawSVGText",value:function(g,v,y){var A,O,E=this.document.createElementNS(P,"text");v.displayValue&&(E.setAttribute("style","font:"+v.fontOptions+" "+v.fontSize+"px "+v.font),O="top"==v.textPosition?v.fontSize-v.textMargin:v.height+v.textMargin+v.fontSize,"left"==v.textAlign||y.barcodePadding>0?(A=0,E.setAttribute("text-anchor","start")):"right"==v.textAlign?(A=y.width-1,E.setAttribute("text-anchor","end")):(A=y.width/2,E.setAttribute("text-anchor","middle")),E.setAttribute("x",A),E.setAttribute("y",O),E.appendChild(this.document.createTextNode(y.text)),g.appendChild(E))}},{key:"setSvgAttributes",value:function(g,v){var y=this.svg;y.setAttribute("width",g+"px"),y.setAttribute("height",v+"px"),y.setAttribute("x","0px"),y.setAttribute("y","0px"),y.setAttribute("viewBox","0 0 "+g+" "+v),y.setAttribute("xmlns",P),y.setAttribute("version","1.1"),y.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(g,v,y){var E=this.document.createElementNS(P,"g");return E.setAttribute("transform","translate("+g+", "+v+")"),y.appendChild(E),E}},{key:"setGroupOptions",value:function(g,v){g.setAttribute("style","fill:"+v.lineColor+";")}},{key:"drawRect",value:function(g,v,y,E,A){var O=this.document.createElementNS(P,"rect");return O.setAttribute("x",g),O.setAttribute("y",v),O.setAttribute("width",y),O.setAttribute("height",E),A.appendChild(O),O}}]),T}();D.default=z}},ge=>{ge(ge.s=3661)}]);