"use strict";(self.webpackChunkgestion_muestras=self.webpackChunkgestion_muestras||[]).push([[179],{839:()=>{function Ae(t){return"function"==typeof t}function Lc(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const mf=Lc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ca(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class $n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ae(r))try{r()}catch(s){e=s instanceof mf?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{oN(s)}catch(o){e=e??[],o instanceof mf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oN(e);else{if(e instanceof $n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ca(n,e)}remove(e){const{_finalizers:n}=this;n&&Ca(n,e),e instanceof $n&&e._removeParent(this)}}$n.EMPTY=(()=>{const t=new $n;return t.closed=!0,t})();const iN=$n.EMPTY;function sN(t){return t instanceof $n||t&&"closed"in t&&Ae(t.remove)&&Ae(t.add)&&Ae(t.unsubscribe)}function oN(t){Ae(t)?t():t.unsubscribe()}const oo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_f={setTimeout(t,e,...n){const{delegate:r}=_f;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=_f;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function aN(t){_f.setTimeout(()=>{const{onUnhandledError:e}=oo;if(!e)throw t;e(t)})}function uN(){}const o3=Ry("C",void 0,void 0);function Ry(t,e,n){return{kind:t,value:e,error:n}}let ao=null;function yf(t){if(oo.useDeprecatedSynchronousErrorHandling){const e=!ao;if(e&&(ao={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ao;if(ao=null,n)throw r}}else t()}class ky extends $n{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sN(e)&&e.add(this)):this.destination=f3}static create(e,n,r){return new Vc(e,n,r)}next(e){this.isStopped?Oy(function u3(t){return Ry("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Oy(function a3(t){return Ry("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Oy(o3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const l3=Function.prototype.bind;function Py(t,e){return l3.call(t,e)}class d3{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vf(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vf(r)}else vf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vf(n)}}}class Vc extends ky{constructor(e,n,r){let i;if(super(),Ae(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&oo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Py(e.next,s),error:e.error&&Py(e.error,s),complete:e.complete&&Py(e.complete,s)}):i=e}this.destination=new d3(i)}}function vf(t){oo.useDeprecatedSynchronousErrorHandling?function c3(t){oo.useDeprecatedSynchronousErrorHandling&&ao&&(ao.errorThrown=!0,ao.error=t)}(t):aN(t)}function Oy(t,e){const{onStoppedNotification:n}=oo;n&&_f.setTimeout(()=>n(t,e))}const f3={closed:!0,next:uN,error:function h3(t){throw t},complete:uN},Fy="function"==typeof Symbol&&Symbol.observable||"@@observable";function rs(t){return t}function cN(t){return 0===t.length?rs:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let et=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function m3(t){return t&&t instanceof ky||function g3(t){return t&&Ae(t.next)&&Ae(t.error)&&Ae(t.complete)}(t)&&sN(t)}(n)?n:new Vc(n,r,i);return yf(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=lN(r))((i,s)=>{const o=new Vc({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Fy](){return this}pipe(...n){return cN(n)(this)}toPromise(n){return new(n=lN(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function lN(t){var e;return null!==(e=t??oo.Promise)&&void 0!==e?e:Promise}const _3=Lc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _i=(()=>{class t extends et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new dN(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new _3}next(n){yf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){yf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?iN:(this.currentObservers=null,s.push(n),new $n(()=>{this.currentObservers=null,Ca(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new et;return n.source=this,n}}return t.create=(e,n)=>new dN(e,n),t})();class dN extends _i{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:iN}}class nr extends _i{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function hN(t){return Ae(t?.lift)}function xt(t){return e=>{if(hN(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(t,e,n,r,i){return new y3(t,e,n,r,i)}class y3 extends ky{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xe(t,e){return xt((n,r)=>{let i=0;n.subscribe(Et(r,s=>{r.next(t.call(e,s,i++))}))})}function Uy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function is(t){return this instanceof is?(this.v=t,this):new is(t)}function mN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function $y(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const _N=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function yN(t){return Ae(t?.then)}function vN(t){return Ae(t[Fy])}function wN(t){return Symbol.asyncIterator&&Ae(t?.[Symbol.asyncIterator])}function EN(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const IN=function U3(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function CN(t){return Ae(t?.[IN])}function DN(t){return function gN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof is?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield is(n.read());if(i)return yield is(void 0);yield yield is(r)}}finally{n.releaseLock()}})}function bN(t){return Ae(t?.getReader)}function rr(t){if(t instanceof et)return t;if(null!=t){if(vN(t))return function B3(t){return new et(e=>{const n=t[Fy]();if(Ae(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(_N(t))return function $3(t){return new et(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(yN(t))return function j3(t){return new et(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,aN)})}(t);if(wN(t))return TN(t);if(CN(t))return function H3(t){return new et(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(bN(t))return function G3(t){return TN(DN(t))}(t)}throw EN(t)}function TN(t){return new et(e=>{(function z3(t,e){var n,r,i,s;return function fN(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=mN(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function yi(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Gt(t,e,n=1/0){return Ae(e)?Gt((r,i)=>xe((s,o)=>e(r,s,i,o))(rr(t(r,i))),n):("number"==typeof e&&(n=e),xt((r,i)=>function q3(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let _=!1;rr(n(g,l++)).subscribe(Et(e,w=>{i?.(w),s?f(w):e.next(w)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){const w=u.shift();o?yi(e,o,()=>p(w)):p(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(Et(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function Da(t=1/0){return Gt(rs,t)}const Or=new et(t=>t.complete());function jy(t){return t[t.length-1]}function SN(t){return Ae(jy(t))?t.pop():void 0}function Uc(t){return function K3(t){return t&&Ae(t.schedule)}(jy(t))?t.pop():void 0}function wf(t,e=0){return xt((n,r)=>{n.subscribe(Et(r,i=>yi(r,t,()=>r.next(i),e),()=>yi(r,t,()=>r.complete(),e),i=>yi(r,t,()=>r.error(i),e)))})}function Ef(t,e=0){return xt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function AN(t,e){if(!t)throw new Error("Iterable cannot be null");return new et(n=>{yi(n,e,()=>{const r=t[Symbol.asyncIterator]();yi(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Nt(t,e){return e?function t6(t,e){if(null!=t){if(vN(t))return function Y3(t,e){return rr(t).pipe(Ef(e),wf(e))}(t,e);if(_N(t))return function J3(t,e){return new et(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(yN(t))return function X3(t,e){return rr(t).pipe(Ef(e),wf(e))}(t,e);if(wN(t))return AN(t,e);if(CN(t))return function Z3(t,e){return new et(n=>{let r;return yi(n,e,()=>{r=t[IN](),yi(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ae(r?.return)&&r.return()})}(t,e);if(bN(t))return function e6(t,e){return AN(DN(t),e)}(t,e)}throw EN(t)}(t,e):rr(t)}function z(...t){return Nt(t,Uc(t))}function MN(t={}){const{connector:e=(()=>new _i),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return xt((g,_)=>{c++,!d&&!l&&h();const w=u=u??e();_.add(()=>{c--,0===c&&!d&&!l&&(a=Hy(p,i))}),w.subscribe(_),!o&&c>0&&(o=new Vc({next:y=>w.next(y),error:y=>{d=!0,h(),a=Hy(f,n,y),w.error(y)},complete:()=>{l=!0,h(),a=Hy(f,r),w.complete()}}),rr(g).subscribe(o))})(s)}}function Hy(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Vc({next:()=>{r.unsubscribe(),t()}});return rr(e(...n)).subscribe(r)}function Fr(t,e){return xt((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Et(r,u=>{i?.unsubscribe();let c=0;const l=s++;rr(t(u,l)).subscribe(i=Et(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function i6(t,e){return t===e}function Ie(t){for(let e in t)if(t[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function If(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function It(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(It).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Gy(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const s6=Ie({__forward_ref__:Ie});function Pe(t){return t.__forward_ref__=Pe,t.toString=function(){return It(this())},t}function q(t){return zy(t)?t():t}function zy(t){return"function"==typeof t&&t.hasOwnProperty(s6)&&t.__forward_ref__===Pe}function qy(t){return t&&!!t.\u0275providers}class S extends Error{constructor(e,n){super(function Cf(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function we(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function Q(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Df(t,e){throw new S(-201,!1)}function ir(t,e){null==t&&function me(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mt(t){return{providers:t.providers||[],imports:t.imports||[]}}function bf(t){return NN(t,Tf)||NN(t,kN)}function NN(t,e){return t.hasOwnProperty(e)?t[e]:null}function RN(t){return t&&(t.hasOwnProperty(Wy)||t.hasOwnProperty(f6))?t[Wy]:null}const Tf=Ie({\u0275prov:Ie}),Wy=Ie({\u0275inj:Ie}),kN=Ie({ngInjectableDef:Ie}),f6=Ie({ngInjectorDef:Ie});var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{});let Ky;function An(t){const e=Ky;return Ky=t,e}function ON(t,e,n){const r=bf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&re.Optional?null:void 0!==e?e:void Df(It(t))}const Ne=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Bc={},Qy="__NG_DI_FLAG__",Sf="ngTempTokenPath",g6=/\n/gm,FN="__source";let ba;function ss(t){const e=ba;return ba=t,e}function y6(t,e=re.Default){if(void 0===ba)throw new S(-203,!1);return null===ba?ON(t,void 0,e):ba.get(t,e&re.Optional?null:void 0,e)}function $(t,e=re.Default){return(function PN(){return Ky}()||y6)(q(t),e)}function V(t,e=re.Default){return $(t,Af(e))}function Af(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Yy(t){const e=[];for(let n=0;n<t.length;n++){const r=q(t[n]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,s=re.Default;for(let o=0;o<r.length;o++){const a=r[o],u=v6(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push($(i,s))}else e.push($(r))}return e}function $c(t,e){return t[Qy]=e,t.prototype[Qy]=e,t}function v6(t){return t[Qy]}function vi(t){return{toString:t}.toString()}var Mf=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Mf||{}),mr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mr||{});const Lr={},pe=[],xf=Ie({\u0275cmp:Ie}),Xy=Ie({\u0275dir:Ie}),Jy=Ie({\u0275pipe:Ie}),VN=Ie({\u0275mod:Ie}),wi=Ie({\u0275fac:Ie}),jc=Ie({__NG_ELEMENT_ID__:Ie}),UN=Ie({__NG_ENV_ID__:Ie});function BN(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Zy(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];jN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function $N(t){return 3===t||4===t||6===t}function jN(t){return 64===t.charCodeAt(0)}function Hc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||HN(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function HN(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const GN="ng-template";function I6(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==BN(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function zN(t){return 4===t.type&&t.value!==GN}function C6(t,e,n){return e===(4!==t.type||n?t.value:GN)}function D6(t,e,n){let r=4;const i=t.attrs||[],s=function S6(t){for(let e=0;e<t.length;e++)if($N(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!C6(t,u,n)||""===u&&1===e.length){if(_r(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!I6(t.attrs,c,n)){if(_r(r))return!1;o=!0}continue}const d=b6(8&r?"class":u,i,zN(t),n);if(-1===d){if(_r(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==BN(f,c,0)||2&r&&c!==h){if(_r(r))return!1;o=!0}}}}else{if(!o&&!_r(r)&&!_r(u))return!1;if(o&&_r(u))continue;o=!1,r=u|1&r}}return _r(r)||o}function _r(t){return 0==(1&t)}function b6(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function A6(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function qN(t,e,n=!1){for(let r=0;r<e.length;r++)if(D6(t,e[r],n))return!0;return!1}function WN(t,e){return t?":not("+e.trim()+")":e}function x6(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!_r(o)&&(e+=WN(s,i),i=""),r=o,s=s||!_r(r);n++}return""!==i&&(e+=WN(s,i)),e}function co(t){return vi(()=>{const e=QN(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Mf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mr.Emulated,styles:t.styles||pe,_:null,schemas:t.schemas||null,tView:null,id:""};YN(n);const r=t.dependencies;return n.directiveDefs=Nf(r,!1),n.pipeDefs=Nf(r,!0),n.id=function V6(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function P6(t){return _e(t)||rn(t)}function O6(t){return null!==t}function Ct(t){return vi(()=>({type:t.type,bootstrap:t.bootstrap||pe,declarations:t.declarations||pe,imports:t.imports||pe,exports:t.exports||pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function KN(t,e){if(null==t)return Lr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function G(t){return vi(()=>{const e=QN(t);return YN(e),e})}function _e(t){return t[xf]||null}function rn(t){return t[Xy]||null}function xn(t){return t[Jy]||null}function Hn(t,e){const n=t[VN]||null;if(!n&&!0===e)throw new Error(`Type ${It(t)} does not have '\u0275mod' property.`);return n}function QN(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Lr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||pe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:KN(t.inputs,e),outputs:KN(t.outputs)}}function YN(t){t.features?.forEach(e=>e(t))}function Nf(t,e){if(!t)return null;const n=e?xn:P6;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(O6)}const Dt=0,k=1,X=2,Ke=3,yr=4,Gc=5,sn=6,Sa=7,at=8,Aa=9,lo=10,J=11,zc=12,XN=13,Ma=14,ut=15,qc=16,xa=17,Vr=18,Wc=19,JN=20,os=21,Ei=22,Rf=23,kf=24,ae=25,ev=1,ZN=2,Ur=7,Na=9,on=11;function Gn(t){return Array.isArray(t)&&"object"==typeof t[ev]}function Nn(t){return Array.isArray(t)&&!0===t[ev]}function tv(t){return 0!=(4&t.flags)}function ho(t){return t.componentOffset>-1}function Of(t){return 1==(1&t.flags)}function vr(t){return!!t.template}function nv(t){return 0!=(512&t[X])}function fo(t,e){return t.hasOwnProperty(wi)?t[wi]:null}let G6=Ne.WeakRef??class H6{constructor(e){this.ref=e}deref(){return this.ref}},q6=0,Br=null,Ff=!1;function Rt(t){const e=Br;return Br=t,e}class iR{constructor(){this.id=q6++,this.ref=function z6(t){return new G6(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(null!=r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Ff;Ff=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{Ff=e}}producerAccessed(){if(Ff)throw new Error("");if(null===Br)return;let e=Br.producers.get(this.id);void 0===e?(e={consumerNode:Br.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Br.trackingVersion},Br.producers.set(this.id,e),this.consumers.set(Br.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Br.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Br?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let sR=null;const aR=()=>{};class Y6 extends iR{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=aR,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Rt(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=aR,this.watch(this.registerOnCleanup)}finally{Rt(e)}}cleanup(){this.cleanupFn()}}class X6{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function sr(){return uR}function uR(t){return t.type.prototype.ngOnChanges&&(t.setInput=Z6),J6}function J6(){const t=lR(this),e=t?.current;if(e){const n=t.previous;if(n===Lr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Z6(t,e,n,r){const i=this.declaredInputs[n],s=lR(t)||function e9(t,e){return t[cR]=e}(t,{previous:Lr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new X6(u&&u.currentValue,e,a===Lr),t[r]=e}sr.ngInherit=!0;const cR="__ngSimpleChanges__";function lR(t){return t[cR]||null}const $r=function(t,e,n){};function Be(t){for(;Array.isArray(t);)t=t[Dt];return t}function Rn(t,e){return Be(e[t.index])}function zn(t,e){const n=e[t];return Gn(n)?n:n[Dt]}function as(t,e){return null==e?null:t[e]}function pR(t){t[xa]=0}function a9(t){1024&t[X]||(t[X]|=1024,mR(t,1))}function gR(t){1024&t[X]&&(t[X]&=-1025,mR(t,-1))}function mR(t,e){let n=t[Ke];if(null===n)return;n[Gc]+=e;let r=n;for(n=n[Ke];null!==n&&(1===e&&1===r[Gc]||-1===e&&0===r[Gc]);)n[Gc]+=e,r=n,n=n[Ke]}const H={lFrame:SR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vR(){return H.bindingsEnabled}function I(){return H.lFrame.lView}function le(){return H.lFrame.tView}function uv(t){return H.lFrame.contextLView=t,t[at]}function cv(t){return H.lFrame.contextLView=null,t}function zt(){let t=wR();for(;null!==t&&64===t.type;)t=t.parent;return t}function wR(){return H.lFrame.currentTNode}function jr(t,e){const n=H.lFrame;n.currentTNode=t,n.isParent=e}function lv(){return H.lFrame.isParent}function v9(t,e){const n=H.lFrame;n.bindingIndex=n.bindingRootIndex=t,hv(e)}function hv(t){H.lFrame.currentDirectiveIndex=t}function pv(t){H.lFrame.currentQueryIndex=t}function E9(t){const e=t[k];return 2===e.type?e.declTNode:1===e.type?t[sn]:null}function bR(t,e,n){if(n&re.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&re.Host||(i=E9(s),null===i||(s=s[Ma],10&i.type))););if(null===i)return!1;e=i,t=s}const r=H.lFrame=TR();return r.currentTNode=e,r.lView=t,!0}function gv(t){const e=TR(),n=t[k];H.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function TR(){const t=H.lFrame,e=null===t?null:t.child;return null===e?SR(t):e}function SR(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function AR(){const t=H.lFrame;return H.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const MR=AR;function mv(){const t=AR();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yn(){return H.lFrame.selectedIndex}function po(t){H.lFrame.selectedIndex=t}let NR=!0;function Bf(){return NR}function us(t){NR=t}function $f(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function jf(t,e,n){RR(t,e,3,n)}function Hf(t,e,n,r){(3&t[X])===n&&RR(t,e,n,r)}function _v(t,e){let n=t[X];(3&n)===e&&(n&=8191,n+=1,t[X]=n)}function RR(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[xa]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[xa]+=65536),(a<s||-1==s)&&(M9(t,n,e,u),t[xa]=(4294901760&t[xa])+u+2),u++}function kR(t,e){$r(4,t,e);const n=Rt(null);try{e.call(t)}finally{Rt(n),$r(5,t,e)}}function M9(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[X]>>13<t[xa]>>16&&(3&t[X])===e&&(t[X]+=8192,kR(a,s)):kR(a,s)}const Oa=-1;class Yc{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function PR(t){return t!==Oa}function Gf(t){return 32767&t}function zf(t,e){let n=function k9(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ma],n--;return r}let vv=!0;function qf(t){const e=vv;return vv=t,e}const OR=255,FR=5;let P9=0;const Hr={};function Wf(t,e){const n=LR(t,e);if(-1!==n)return n;const r=e[k];r.firstCreatePass&&(t.injectorIndex=e.length,wv(r.data,t),wv(e,null),wv(r.blueprint,null));const i=Ev(t,e),s=t.injectorIndex;if(PR(i)){const o=Gf(i),a=zf(i,e),u=a[k].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function wv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LR(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ev(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=GR(i),null===r)return Oa;if(n++,i=i[Ma],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Oa}function Iv(t,e,n){!function O9(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(jc)&&(r=n[jc]),null==r&&(r=n[jc]=P9++);const i=r&OR;e.data[t+(i>>FR)]|=1<<i}(t,e,n)}function VR(t,e,n){if(n&re.Optional||void 0!==t)return t;Df()}function UR(t,e,n,r){if(n&re.Optional&&void 0===r&&(r=null),!(n&(re.Self|re.Host))){const i=t[Aa],s=An(void 0);try{return i?i.get(e,r,n&re.Optional):ON(e,r,n&re.Optional)}finally{An(s)}}return VR(r,0,n)}function BR(t,e,n,r=re.Default,i){if(null!==t){if(2048&e[X]&&!(r&re.Self)){const o=function B9(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[X]&&!(512&o[X]);){const a=$R(s,o,n,r|re.Self,Hr);if(a!==Hr)return a;let u=s.parent;if(!u){const c=o[JN];if(c){const l=c.get(n,Hr,r);if(l!==Hr)return l}u=GR(o),o=o[Ma]}s=u}return i}(t,e,n,r,Hr);if(o!==Hr)return o}const s=$R(t,e,n,r,Hr);if(s!==Hr)return s}return UR(e,n,r,i)}function $R(t,e,n,r,i){const s=function V9(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(jc)?t[jc]:void 0;return"number"==typeof e?e>=0?e&OR:U9:e}(n);if("function"==typeof s){if(!bR(e,t,r))return r&re.Host?VR(i,0,r):UR(e,n,r,i);try{const o=s(r);if(null!=o||r&re.Optional)return o;Df()}finally{MR()}}else if("number"==typeof s){let o=null,a=LR(t,e),u=Oa,c=r&re.Host?e[ut][sn]:null;for((-1===a||r&re.SkipSelf)&&(u=-1===a?Ev(t,e):e[a+8],u!==Oa&&HR(r,!1)?(o=e[k],a=Gf(u),e=zf(u,e)):a=-1);-1!==a;){const l=e[k];if(jR(s,a,l.data)){const d=L9(a,e,n,o,r,c);if(d!==Hr)return d}u=e[a+8],u!==Oa&&HR(r,e[k].data[a+8]===c)&&jR(s,a,e)?(o=l,a=Gf(u),e=zf(u,e)):a=-1}}return i}function L9(t,e,n,r,i,s){const o=e[k],a=o.data[t+8],l=function Kf(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&vr(f)&&f.type===n)return u}return null}(a,o,n,null==r?ho(a)&&vv:r!=o&&0!=(3&a.type),i&re.Host&&s===a);return null!==l?go(e,o,l,a):Hr}function go(t,e,n,r){let i=t[n];const s=e.data;if(function x9(t){return t instanceof Yc}(i)){const o=i;o.resolving&&function o6(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new S(-200,`Circular dependency in DI detected for ${t}${n}`)}(we(s[n]));const a=qf(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?An(o.injectImpl):null;bR(t,r,re.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function A9(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=uR(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==u&&An(u),qf(a),o.resolving=!1,MR()}}return i}function jR(t,e,n){return!!(n[e+(t>>FR)]&1<<t)}function HR(t,e){return!(t&re.Self||t&re.Host&&e)}class Fa{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BR(this._tNode,this._lView,e,Af(r),n)}}function U9(){return new Fa(zt(),I())}function qt(t){return vi(()=>{const e=t.prototype.constructor,n=e[wi]||Cv(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[wi]||Cv(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Cv(t){return zy(t)?()=>{const e=Cv(q(t));return e&&e()}:fo(t)}function GR(t){const e=t[k],n=e.type;return 2===n?e.declTNode:1===n?t[sn]:null}const Va="__parameters__";function Ba(t,e,n){return vi(()=>{const r=function Dv(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(Va)?u[Va]:Object.defineProperty(u,Va,{value:[]})[Va];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Jc(t,e){t.forEach(n=>Array.isArray(n)?Jc(n,e):e(n))}function qR(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function qn(t,e,n){let r=ja(t,e);return r>=0?t[1|r]=n:(r=~r,function W9(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function bv(t,e){const n=ja(t,e);if(n>=0)return t[1|n]}function ja(t,e){return function WR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Ye=$c(Ba("Optional"),8),Jf=$c(Ba("SkipSelf"),4);function rp(t){return 128==(128&t.flags)}var cs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(cs||{});const xv=new Map;let _5=0;const Rv="__ngContext__";function an(t,e){Gn(e)?(t[Rv]=e[Wc],function v5(t){xv.set(t[Wc],t)}(e)):t[Rv]=e}let kv;function Pv(t,e){return kv(t,e)}function nl(t){const e=t[Ke];return Nn(e)?e[Ke]:e}function fk(t){return gk(t[zc])}function pk(t){return gk(t[yr])}function gk(t){for(;null!==t&&!Nn(t);)t=t[yr];return t}function za(t,e,n,r,i){if(null!=r){let s,o=!1;Nn(r)?s=r:Gn(r)&&(o=!0,r=r[Dt]);const a=Be(r);0===t&&null!==n?null==i?wk(e,n,a):mo(e,n,a,i||null,!0):1===t&&null!==n?mo(e,n,a,i||null,!0):2===t?function cp(t,e,n){const r=ap(t,e);r&&function V5(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function $5(t,e,n,r,i){const s=n[Ur];s!==Be(n)&&za(e,t,r,s,i);for(let a=on;a<n.length;a++){const u=n[a];il(u[k],u,t,e,r,s)}}(e,t,s,n,i)}}function op(t,e,n){return t.createElement(e,n)}function _k(t,e){const n=t[Na],r=n.indexOf(e);gR(e),n.splice(r,1)}function Fv(t,e){if(t.length<=on)return;const n=on+e,r=t[n];if(r){const i=r[qc];null!==i&&i!==t&&_k(i,r),e>0&&(t[n-1][yr]=r[yr]);const s=Yf(t,on+e);!function x5(t,e){il(t,e,e[J],2,null,null),e[Dt]=null,e[sn]=null}(r[k],r);const o=s[Vr];null!==o&&o.detachView(s[k]),r[Ke]=null,r[yr]=null,r[X]&=-129}return r}function yk(t,e){if(!(256&e[X])){const n=e[J];e[Rf]?.destroy(),e[kf]?.destroy(),n.destroyNode&&il(t,e,n,3,null,null),function k5(t){let e=t[zc];if(!e)return Lv(t[k],t);for(;e;){let n=null;if(Gn(e))n=e[zc];else{const r=e[on];r&&(n=r)}if(!n){for(;e&&!e[yr]&&e!==t;)Gn(e)&&Lv(e[k],e),e=e[Ke];null===e&&(e=t),Gn(e)&&Lv(e[k],e),n=e&&e[yr]}e=n}}(e)}}function Lv(t,e){if(!(256&e[X])){e[X]&=-129,e[X]|=256,function L5(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Yc)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];$r(4,a,u);try{u.call(a)}finally{$r(5,a,u)}}else{$r(4,i,s);try{s.call(i)}finally{$r(5,i,s)}}}}}(t,e),function F5(t,e){const n=t.cleanup,r=e[Sa];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Sa]=null);const i=e[os];if(null!==i){e[os]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[k].type&&e[J].destroy();const n=e[qc];if(null!==n&&Nn(e[Ke])){n!==e[Ke]&&_k(n,e);const r=e[Vr];null!==r&&r.detachView(t)}!function w5(t){xv.delete(t[Wc])}(e)}}function Vv(t,e,n){return function vk(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Dt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===mr.None||s===mr.Emulated)return null}return Rn(r,n)}}(t,e.parent,n)}function mo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function wk(t,e,n){t.appendChild(e,n)}function Ek(t,e,n,r,i){null!==r?mo(t,e,n,r,i):wk(t,e,n)}function ap(t,e){return t.parentNode(e)}let Uv,Hv,Dk=function Ck(t,e,n){return 40&t.type?Rn(t,n):null};function up(t,e,n,r){const i=Vv(t,r,e),s=e[J],a=function Ik(t,e,n){return Dk(t,e,n)}(r.parent||e[sn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Ek(s,i,n[u],a,!1);else Ek(s,i,n,a,!1);void 0!==Uv&&Uv(s,r,e,n,i)}function rl(t,e){if(null!==e){const n=e.type;if(3&n)return Rn(e,t);if(4&n)return Bv(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return rl(t,r);{const i=t[e.index];return Nn(i)?Bv(-1,i):Be(i)}}if(32&n)return Pv(e,t)()||Be(t[e.index]);{const r=Tk(t,e);return null!==r?Array.isArray(r)?r[0]:rl(nl(t[ut]),r):rl(t,e.next)}}return null}function Tk(t,e){return null!==e?t[ut][sn].projection[e.projection]:null}function Bv(t,e){const n=on+t+1;if(n<e.length){const r=e[n],i=r[k].firstChild;if(null!==i)return rl(r,i)}return e[Ur]}function $v(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&an(Be(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)$v(t,e,n.child,r,i,s,!1),za(e,t,i,a,s);else if(32&u){const c=Pv(n,r);let l;for(;l=c();)za(e,t,i,l,s);za(e,t,i,a,s)}else 16&u?Ak(t,e,r,n,i,s):za(e,t,i,a,s);n=o?n.projectionNext:n.next}}function il(t,e,n,r,i,s){$v(n,r,t.firstChild,e,i,s,!1)}function Ak(t,e,n,r,i,s){const o=n[ut],u=o[sn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)za(e,t,i,u[c],s);else{let c=u;const l=o[Ke];rp(r)&&(c.flags|=128),$v(t,e,c,l,i,s,!0)}}function Mk(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function xk(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Zy(t,e,r),null!==i&&Mk(t,e,i),null!==s&&function H5(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class Pk{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class F{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cl=new F("ENVIRONMENT_INITIALIZER"),Gk=new F("INJECTOR",-1),zk=new F("INJECTOR_DEF_TYPES");class qk{get(e,n=Bc){if(n===Bc){const r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return n}}function m7(...t){return{\u0275providers:Kk(0,t),\u0275fromNgModule:!0}}function Kk(t,...e){const n=[],r=new Set;let i;return Jc(e,s=>{const o=s;Qv(o,n,[],r)&&(i||=[],i.push(o))}),void 0!==i&&Qk(i,n),n}function Qk(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];Yv(i,s=>{e.push(s)})}}function Qv(t,e,n,r){if(!(t=q(t)))return!1;let i=null,s=RN(t);const o=!s&&_e(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=RN(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)Qv(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Jc(s.imports,l=>{Qv(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&Qk(c,e)}if(!a){const c=fo(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:pe},{provide:zk,useValue:i,multi:!0},{provide:cl,useValue:()=>$(i),multi:!0})}const u=s.providers;null==u||a||Yv(u,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function Yv(t,e){for(let n of t)qy(n)&&(n=n.\u0275providers),Array.isArray(n)?Yv(n,e):e(n)}const _7=Ie({provide:String,useValue:Ie});function Xv(t){return null!==t&&"object"==typeof t&&_7 in t}function _o(t){return"function"==typeof t}const Jv=new F("Set Injector scope."),fp={},v7={};let Zv;function pp(){return void 0===Zv&&(Zv=new qk),Zv}class bi{}class ew extends bi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nw(e,o=>this.processProvider(o)),this.records.set(Gk,Ka(void 0,this)),i.has("environment")&&this.records.set(bi,Ka(void 0,this));const s=this.records.get(Jv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zk.multi,pe,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ss(this),r=An(void 0);try{return e()}finally{ss(n),An(r)}}get(e,n=Bc,r=re.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(UN))return e[UN](this);r=Af(r);const i=ss(this),s=An(void 0);try{if(!(r&re.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function D7(t){return"function"==typeof t||"object"==typeof t&&t instanceof F}(e)&&bf(e);a=u&&this.injectableDefInScope(u)?Ka(tw(e),fp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&re.Self?pp():this.parent).get(e,n=r&re.Optional&&n===Bc?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Sf]=o[Sf]||[]).unshift(It(e)),i)throw o;return function w6(t,e,n,r){const i=t[Sf];throw e[FN]&&i.unshift(e[FN]),t.message=function E6(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):It(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(g6,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Sf]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{An(s),ss(i)}}resolveInjectorInitializers(){const e=ss(this),n=An(void 0);try{const r=this.get(cl.multi,pe,re.Self);for(const i of r)i()}finally{ss(e),An(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(It(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let n=_o(e=q(e))?e:q(e&&e.provide);const r=function E7(t){return Xv(t)?Ka(void 0,t.useValue):Ka(Jk(t),fp)}(e);if(_o(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ka(void 0,fp,!0),i.factory=()=>Yy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===fp&&(n.value=v7,n.value=n.factory()),"object"==typeof n.value&&n.value&&function C7(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=q(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function tw(t){const e=bf(t),n=null!==e?e.factory:fo(t);if(null!==n)return n;if(t instanceof F)throw new S(204,!1);if(t instanceof Function)return function w7(t){const e=t.length;if(e>0)throw function Zc(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new S(204,!1);const n=function h6(t){return t&&(t[Tf]||t[kN])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new S(204,!1)}function Jk(t,e,n){let r;if(_o(t)){const i=q(t);return fo(i)||tw(i)}if(Xv(t))r=()=>q(t.useValue);else if(function Xk(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Yy(t.deps||[]));else if(function Yk(t){return!(!t||!t.useExisting)}(t))r=()=>$(q(t.useExisting));else{const i=q(t&&(t.useClass||t.provide));if(!function I7(t){return!!t.deps}(t))return fo(i)||tw(i);r=()=>new i(...Yy(t.deps))}return r}function Ka(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function nw(t,e){for(const n of t)Array.isArray(n)?nw(n,e):n&&qy(n)?nw(n.\u0275providers,e):e(n)}const gp=new F("AppId",{providedIn:"root",factory:()=>b7}),b7="ng",Zk=new F("Platform Initializer"),ds=new F("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eP=new F("CSP nonce",{providedIn:"root",factory:()=>function sl(){if(void 0!==Hv)return Hv;if(typeof document<"u")return document;throw new S(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let nP=(t,e)=>null;function rP(t,e){return nP(t,e)}class P7{}class oP{}class F7{resolveComponentFactory(e){throw function O7(t){const e=Error(`No component factory found for ${It(t)}.`);return e.ngComponent=t,e}(e)}}let wp=(()=>{class t{}return t.NULL=new F7,t})();function L7(){return Ya(zt(),I())}function Ya(t,e){return new Wn(Rn(t,e))}let Wn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=L7,t})();class uP{}let Ti=(()=>{class t{constructor(){this.destroyNode=null}}return t.__NG_ELEMENT_ID__=()=>function U7(){const t=I(),n=zn(zt().index,t);return(Gn(n)?n:t)[J]}(),t})(),B7=(()=>{class t{}return t.\u0275prov=j({token:t,providedIn:"root",factory:()=>null}),t})();class Xa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const cP=new Xa("16.1.6"),fw={};function hl(t){for(;t;){t[X]|=64;const e=nl(t);if(nv(t)&&!e)return t;t=e}return null}function pw(t){return t.ngOriginalError}class yo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&pw(e);for(;n&&pw(n);)n=pw(n);return n||null}}const hP=new F("",{providedIn:"root",factory:()=>!1});function Si(t){return t instanceof Function?t():t}class _P extends iR{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){hl(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=Rt(this);this.trackingVersion++;try{e(n,r)}finally{Rt(i)}}destroy(){this.trackingVersion++}}let Ip=null;function yP(){return Ip??=new _P,Ip}function vP(t,e){return t[e]??yP()}function wP(t,e){const n=yP();n.hasReadASignal&&(t[e]=Ip,n.lView=t,Ip=new _P)}const Z={};function bP(t,e=null,n=null,r){const i=TP(t,e,n,r);return i.resolveInjectorInitializers(),i}function TP(t,e=null,n=null,r,i=new Set){const s=[n||pe,m7(t)];return r=r||("object"==typeof t?void 0:It(t)),new ew(s,e||pp(),r||null,i)}let vn=(()=>{class t{static create(n,r){if(Array.isArray(n))return bP({name:""},r,n,"");{const i=n.name??"";return bP({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=Bc,t.NULL=new qk,t.\u0275prov=j({token:t,providedIn:"any",factory:()=>$(Gk)}),t.__NG_ELEMENT_ID__=-1,t})();function b(t,e=re.Default){const n=I();return null===n?$(t,e):BR(zt(),n,q(t),e)}function Cp(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[Dt]=i,d[X]=140|r,(null!==c||t&&2048&t[X])&&(d[X]|=2048),pR(d),d[Ke]=d[Ma]=t,d[at]=n,d[lo]=o||t&&t[lo],d[J]=a||t&&t[J],d[Aa]=u||t&&t[Aa]||null,d[sn]=s,d[Wc]=function y5(){return _5++}(),d[Ei]=l,d[JN]=c,d[ut]=2==e.type?t[ut]:d,d}function Za(t,e,n,r,i){let s=t.data[e];if(null===s)s=function gw(t,e,n,r,i){const s=wR(),o=lv(),u=t.data[e]=function u8(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function ka(){return null!==H.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function y9(){return H.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Qc(){const t=H.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return jr(s,!0),s}function fl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function AP(t,e,n,r,i){const s=vP(e,Rf),o=yn(),a=2&r;try{if(po(-1),a&&e.length>ae&&function EP(t,e,n,r){if(!r)if(3==(3&e[X])){const s=t.preOrderCheckHooks;null!==s&&jf(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Hf(e,s,0,n)}po(n)}(t,e,ae,!1),$r(a?2:0,i),a)s.runInContext(n,r,i);else{const c=Rt(null);try{n(r,i)}finally{Rt(c)}}}finally{a&&null===e[Rf]&&wP(e,Rf),po(o),$r(a?3:1,i)}}function mw(t,e,n){if(tv(e)){const r=Rt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Rt(r)}}}function MP(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vw(t,e,n,r,i,s,o,a,u,c,l){const d=ae+r,h=d+i,f=function n8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Z);return n}(d,h),p="function"==typeof c?c():c;return f[k]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let xP=t=>null;function NP(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?RP(n,e,i,s):r.hasOwnProperty(i)&&RP(n,e,r[i],s)}return n}function RP(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function kP(t,e,n,r,i,s){for(let c=0;c<r.length;c++)Iv(Wf(n,e),t,r[c].type);!function w8(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=fl(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Hc(n.mergedAttrs,l.hostAttrs),E8(t,n,e,u,l),v8(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function c8(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=NP(d.inputs,l,u,h?h.inputs:null),c=NP(d.outputs,l,c,p);const g=null===u||null===o||zN(e)?null:D8(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function PP(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function w9(){return H.lFrame.currentDirectiveIndex}();try{po(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];hv(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&m8(u,c)}}finally{po(-1),hv(o)}}function m8(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ew(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function v8(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vr(e)&&(n[""]=t)}}function E8(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=fo(i.type)),o=new Yc(s,vr(i),b);t.blueprint[r]=o,n[r]=o,function f8(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function p8(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,fl(t,n,i.hostVars,Z),i)}function C8(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)OP(r,n,o[a++],o[a++],o[a++])}function OP(t,e,n,r,i){const s=Rt(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Rt(s)}}function D8(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function LP(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];pv(n[r]),o.contentQueries(2,e[s],s)}}}function Dp(t,e){return t[zc]?t[XN][yr]=e:t[zc]=e,t[XN]=e,e}function Cw(t,e,n){pv(0);const r=Rt(null);try{e(t,n)}finally{Rt(r)}}function $P(t,e){const n=t[Aa],r=n?n.get(yo,null):null;r&&r.handleError(e)}function Dw(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];OP(t.data[o],e[o],r,a,i)}}function b8(t,e){const n=zn(e,t),r=n[k];!function T8(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Dt];null!==i&&null===n[Ei]&&(n[Ei]=rP(i,n[Aa])),bw(r,n,n[at])}function bw(t,e,n){gv(e);try{const r=t.viewQuery;null!==r&&Cw(1,r,n);const i=t.template;null!==i&&AP(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&LP(t,e),t.staticViewQueries&&Cw(2,t.viewQuery,n);const s=t.components;null!==s&&function S8(t,e){for(let n=0;n<e.length;n++)b8(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,mv()}}let jP=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=new Y6(n,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return t.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t}),t})();function bp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Gy(i,a):2==s&&(r=Gy(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function pl(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Be(s)),Nn(s)){for(let a=on;a<s.length;a++){const u=s[a],c=u[k].firstChild;null!==c&&pl(u[k],u,c,r)}s[Ur]!==s[Dt]&&r.push(s[Ur])}const o=n.type;if(8&o)pl(t,e,n.child,r);else if(32&o){const a=Pv(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Tk(e,n);if(Array.isArray(a))r.push(...a);else{const u=nl(e[ut]);pl(u[k],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Tp(t,e,n,r=!0){const i=e[lo].rendererFactory;i.begin&&i.begin();try{HP(t,e,t.template,n)}catch(o){throw r&&$P(e,o),o}finally{i.end&&i.end(),e[lo].effectManager?.flush()}}function HP(t,e,n,r){const i=e[X];if(256!=(256&i)){e[lo].effectManager?.flush(),gv(e);try{pR(e),function IR(t){return H.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&AP(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&jf(e,c,null)}else{const c=t.preOrderHooks;null!==c&&Hf(e,c,0,null),_v(e,0)}if(function R8(t){for(let e=fk(t);null!==e;e=pk(e)){if(!e[ZN])continue;const n=e[Na];for(let r=0;r<n.length;r++){a9(n[r])}}}(e),GP(e,2),null!==t.contentQueries&&LP(t,e),o){const c=t.contentCheckHooks;null!==c&&jf(e,c)}else{const c=t.contentHooks;null!==c&&Hf(e,c,1),_v(e,1)}!function t8(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=vP(e,kf);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)po(~s);else{const o=s,a=n[++i],u=n[++i];v9(a,o),r.runInContext(u,2,e[o])}}}finally{null===e[kf]&&wP(e,kf),po(-1)}}(t,e);const a=t.components;null!==a&&qP(e,a,0);const u=t.viewQuery;if(null!==u&&Cw(2,u,r),o){const c=t.viewCheckHooks;null!==c&&jf(e,c)}else{const c=t.viewHooks;null!==c&&Hf(e,c,2),_v(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[X]&=-73,gR(e)}finally{mv()}}}function GP(t,e){for(let n=fk(t);null!==n;n=pk(n))for(let r=on;r<n.length;r++)zP(n[r],e)}function k8(t,e,n){zP(zn(e,t),n)}function zP(t,e){if(!function s9(t){return 128==(128&t[X])}(t))return;const n=t[k];if(80&t[X]&&0===e||1024&t[X]||2===e)HP(n,t,n.template,t[at]);else if(t[Gc]>0){GP(t,1);const i=t[k].components;null!==i&&qP(t,i,1)}}function qP(t,e,n){for(let r=0;r<e.length;r++)k8(t,e[r],n)}class gl{get rootNodes(){const e=this._lView,n=e[k];return pl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[at]}set context(e){this._lView[at]=e}get destroyed(){return 256==(256&this._lView[X])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ke];if(Nn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Fv(e,r),Yf(n,r))}this._attachedToViewContainer=!1}yk(this._lView[k],this._lView)}onDestroy(e){!function _R(t,e){if(256==(256&t[X]))throw new S(911,!1);null===t[os]&&(t[os]=[]),t[os].push(e)}(this._lView,e)}markForCheck(){hl(this._cdRefInjectingView||this._lView)}detach(){this._lView[X]&=-129}reattach(){this._lView[X]|=128}detectChanges(){Tp(this._lView[k],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function R5(t,e){il(t,e,e[J],2,null,null)}(this._lView[k],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class P8 extends gl{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Tp(e[k],e,e[at],!1)}checkNoChanges(){}get context(){return null}}class WP extends wp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=_e(e);return new ml(n,this.ngModule)}}function KP(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class F8{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Af(r);const i=this.injector.get(e,fw,r);return i!==fw||n===fw?i:this.parentInjector.get(e,n,r)}}class ml extends oP{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=KP(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return KP(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function N6(t){return t.map(x6).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof bi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new F8(e,s):e,a=o.get(uP,null);if(null===a)throw new S(407,!1);const l={rendererFactory:a,sanitizer:o.get(B7,null),effectManager:o.get(jP,null)},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=r?function r8(t,e,n,r){const s=r.get(hP,!1)||n===mr.ShadowDom,o=t.selectRootElement(e,s);return function i8(t){xP(t)}(o),o}(d,r,this.componentDef.encapsulation,o):op(d,h,function O8(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528,w=vw(0,null,null,1,0,null,null,null,null,null,null),y=Cp(null,w,null,_,null,null,l,d,o,null,null);let D,P;gv(y);try{const L=this.componentDef;let K,ot=null;L.findHostDirectiveDefs?(K=[],ot=new Map,L.findHostDirectiveDefs(L,K,ot),K.push(L)):K=[L];const Pr=function V8(t,e){const n=t[k],r=ae;return t[r]=e,Za(n,r,2,"#host",null)}(y,f),so=function U8(t,e,n,r,i,s,o){const a=i[k];!function B8(t,e,n,r){for(const i of t)e.mergedAttrs=Hc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(bp(e,e.mergedAttrs,!0),null!==n&&xk(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=rP(e,i[Aa]));const c=s.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=Cp(i,MP(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&Ew(a,t,r.length-1),Dp(i,d),i[t.index]=d}(Pr,f,L,K,y,l,d);P=function fR(t,e){return t.data[e]}(w,ae),f&&function j8(t,e,n,r){if(r)Zy(t,n,["ng-version",cP.full]);else{const{attrs:i,classes:s}=function R6(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!_r(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Zy(t,n,i),s&&s.length>0&&Mk(t,n,s.join(" "))}}(d,L,f,r),void 0!==n&&function H8(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(P,this.ngContentSelectors,n),D=function $8(t,e,n,r,i,s){const o=zt(),a=i[k],u=Rn(o,i);kP(a,i,o,n,null,r);for(let l=0;l<n.length;l++)an(go(i,a,o.directiveStart+l,o),i);PP(a,i,o),u&&an(u,i);const c=go(i,a,o.directiveStart+o.componentOffset,o);if(t[at]=i[at]=c,null!==s)for(const l of s)l(c,e);return mw(a,o,t),c}(so,L,K,ot,y,[G8]),bw(w,y,null)}finally{mv()}return new L8(this.componentType,D,Ya(P,y),y,P)}}class L8 extends P7{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new P8(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;Dw(s[k],s,i,e,n),this.previousInputValues.set(e,n),hl(zn(this._tNode.index,s))}}get injector(){return new Fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function G8(){const t=zt();$f(I()[k],t)}function Ce(t){let e=function QP(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(vr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Sp(t.inputs),o.inputTransforms=Sp(t.inputTransforms),o.declaredInputs=Sp(t.declaredInputs),o.outputs=Sp(t.outputs);const a=i.hostBindings;a&&K8(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&q8(t,u),c&&W8(t,c),If(t.inputs,i.inputs),If(t.declaredInputs,i.declaredInputs),If(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),If(o.inputTransforms,i.inputTransforms)),vr(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ce&&(n=!1)}}e=Object.getPrototypeOf(e)}!function z8(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Hc(i.hostAttrs,n=Hc(n,i.hostAttrs))}}(r)}function Sp(t){return t===Lr?{}:t===pe?[]:t}function q8(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function W8(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function K8(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Rw(t){return function Ra(t,e){return t[e]}(function _9(){return H.lFrame.contextLView}(),ae+t)}function kw(t,e,n,r,i){const o=i?"class":"style";Dw(t,n,e.inputs[o],o,r)}function ct(t,e,n,r){const i=I(),s=le(),o=ae+t,a=i[J],u=s.firstCreatePass?function DK(t,e,n,r,i,s){const o=e.consts,u=Za(e,t,2,r,as(o,i));return function ww(t,e,n,r){if(vR()){const i=null===r?null:{"":-1},s=function _8(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(qN(e,o.selectors,!1))if(r||(r=[]),vr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Ew(t,e,a.length)}else r.unshift(o),Ew(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&kP(t,e,n,o,i,a),i&&function y8(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new S(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Hc(n.mergedAttrs,n.attrs)}(e,n,u,as(o,s)),null!==u.attrs&&bp(u,u.attrs,!1),null!==u.mergedAttrs&&bp(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=g1(s,i,u,a,e,t);i[o]=c;const l=Of(u);return jr(u,!0),xk(a,c,u),32!=(32&u.flags)&&Bf()&&up(s,i,c,u),0===function c9(){return H.lFrame.elementDepthCount}()&&an(c,i),function l9(){H.lFrame.elementDepthCount++}(),l&&(function _w(t,e,n){vR()&&(function g8(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ho(n)&&function I8(t,e,n){const r=Rn(e,t),i=MP(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Dp(t,Cp(t,i,null,o,r,e,null,t[lo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Wf(n,e),an(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=go(e,t,a,n);an(c,e),null!==o&&C8(0,a-i,c,u,0,o),vr(u)&&(zn(n.index,e)[at]=go(e,t,a,n))}}(t,e,n,Rn(n,e)),64==(64&n.flags)&&PP(t,e,n))}(s,i,u),mw(s,u,i)),null!==r&&function yw(t,e,n=Rn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}(i,u),ct}function Tt(){let t=zt();lv()?function dv(){H.lFrame.isParent=!1}():(t=t.parent,jr(t,!1));const e=t;(function h9(t){return H.skipHydrationRootTNode===t})(e)&&function m9(){H.skipHydrationRootTNode=null}(),function d9(){H.lFrame.elementDepthCount--}();const n=le();return n.firstCreatePass&&($f(n,t),tv(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function N9(t){return 0!=(8&t.flags)}(e)&&kw(n,e,I(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function R9(t){return 0!=(16&t.flags)}(e)&&kw(n,e,I(),e.stylesWithoutHost,!1),Tt}function Wr(t,e,n,r){return ct(t,e,n,r),Tt(),Wr}let g1=(t,e,n,r,i,s)=>(us(!0),op(r,i,function xR(){return H.lFrame.currentNamespace}()));function Fw(){return I()}function El(t){return!!t&&"function"==typeof t.then}function y1(t){return!!t&&"function"==typeof t.subscribe}function Pn(t,e,n,r){const i=I(),s=le(),o=zt();return function w1(t,e,n,r,i,s,o){const a=Of(r),c=t.firstCreatePass&&function UP(t){return t.cleanup||(t.cleanup=[])}(t),l=e[at],d=function VP(t){return t[Sa]||(t[Sa]=[])}(e);let h=!0;if(3&r.type||o){const g=Rn(r,e),_=o?o(g):g,w=d.length,y=o?P=>o(Be(P[r.index])):r.index;let D=null;if(!o&&a&&(D=function xK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Sa],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=s,D.__ngLastListenerFn__=s,h=!1;else{s=I1(r,e,l,s,!1);const P=n.listen(_,i,s);d.push(s,P),c&&c.push(i,y,w,w+1)}}else s=I1(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const L=e[p[_]][p[_+1]].subscribe(s),K=d.length;d.push(s,L),c&&c.push(i,r.index,K,-(K+1))}}}(s,i,i[J],o,t,e,r),Pn}function E1(t,e,n,r){try{return $r(6,e,n),!1!==n(r)}catch(i){return $P(t,i),!1}finally{$r(7,e,n)}}function I1(t,e,n,r,i){return function s(o){if(o===Function)return r;hl(t.componentOffset>-1?zn(t.index,e):e);let u=E1(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=E1(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function kp(t,e){return t<<17|e<<2}function hs(t){return t>>17&32767}function Vw(t){return 2|t}function wo(t){return(131068&t)>>2}function Uw(t,e){return-131069&t|e<<2}function Bw(t){return 1|t}function R1(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?hs(s):wo(s),u=!1;for(;0!==a&&(!1===u||o);){const l=t[a+1];BK(t[a],e)&&(u=!0,t[a+1]=r?Bw(l):Vw(l)),a=r?hs(l):wo(l)}u&&(t[n+1]=r?Vw(s):Bw(s))}function BK(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ja(t,e)>=0}function Pp(t,e){return function wr(t,e,n,r){const i=I(),s=le(),o=function Ci(t){const e=H.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function $1(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[yn()],o=function B1(t,e){return e>=t.expandoStartIndex}(t,n);(function z1(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function QK(t,e,n,r){const i=function fv(t){const e=H.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Il(n=$w(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=$w(i,t,e,n,r),null===s){let u=function YK(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==wo(r))return t[hs(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=$w(null,t,e,u[1],r),u=Il(u,e.attrs,r),function XK(t,e,n,r){t[hs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function JK(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Il(r,t[s].hostAttrs,n);return Il(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function VK(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=hs(o),u=wo(o);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||ja(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=hs(t[a+1]);t[r+1]=kp(h,a),0!==h&&(t[h+1]=Uw(t[h+1],r)),t[a+1]=function FK(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=kp(a,0),0!==a&&(t[a+1]=Uw(t[a+1],r)),a=r;else t[r+1]=kp(u,0),0===a?a=r:t[u+1]=Uw(t[u+1],r),u=r;c&&(t[r+1]=Vw(t[r+1])),R1(t,l,r,!0),R1(t,l,r,!1),function UK(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&ja(s,e)>=0&&(n[r+1]=Bw(n[r+1]))}(e,l,t,r,s),o=kp(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==Z&&function un(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(i,o,e)&&function H1(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function LK(t){return 1==(1&t)}(c)?G1(u,e,n,i,wo(c),o):void 0;Op(l)||(Op(s)||function OK(t){return 2==(2&t)}(c)&&(s=G1(u,null,n,i,a,o)),function j5(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:cs.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=cs.Important),t.setStyle(n,r,i,s))}}(r,o,function Uf(t,e){return Be(e[t])}(yn(),n),i,s))}(s,s.data[yn()],i,i[J],t,i[o+1]=function nQ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=It(function ls(t){return t instanceof Pk?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),Pp}function $w(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Il(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Il(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),qn(t,o,!!n||e[++s]))}return void 0===t?null:t}function G1(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===Z&&(h=d?pe:void 0);let f=d?bv(h,r):l===r?h:void 0;if(c&&!Op(f)&&(f=bv(u,r)),Op(f)&&(a=f,o))return a;const p=t[i+1];i=o?hs(p):wo(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=bv(u,r))}return a}function Op(t){return void 0!==t}function Qn(t,e=""){const n=I(),r=le(),i=t+ae,s=r.firstCreatePass?Za(r,i,1,e,null):r.data[i],o=q1(r,n,s,e,t);n[i]=o,Bf()&&up(r,n,o,s),jr(s,!1)}let q1=(t,e,n,r,i)=>(us(!0),function sp(t,e){return t.createText(e)}(e[J],r));const du="en-US";let gO=du;function zw(t,e,n,r,i){if(t=q(t),Array.isArray(t))for(let s=0;s<t.length;s++)zw(t[s],e,n,r,i);else{const s=le(),o=I();let a=_o(t)?t:q(t.provide),u=Jk(t);const c=zt(),l=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(_o(t)||!t.multi){const f=new Yc(u,i,b),p=Ww(a,e,i?l:l+h,d);-1===p?(Iv(Wf(c,o),s,a),qw(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=Ww(a,e,l+h,d),p=Ww(a,e,l,l+h),_=p>=0&&n[p];if(i&&!_||!i&&!(f>=0&&n[f])){Iv(Wf(c,o),s,a);const w=function IY(t,e,n,r,i){const s=new Yc(t,n,b);return s.multi=[],s.index=e,s.componentProviders=0,BO(s,i,r&&!n),s}(i?EY:wY,n.length,i,r,u);!i&&_&&(n[p].providerFactory=w),qw(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(w),o.push(w)}else qw(s,t,f>-1?f:p,BO(n[i?p:f],u,!i&&r));!i&&r&&_&&n[p].componentProviders++}}}function qw(t,e,n,r){const i=_o(e),s=function y7(t){return!!t.useClass}(e);if(i||s){const u=(s?q(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function BO(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ww(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function wY(t,e,n,r){return Kw(this.multi,[])}function EY(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=go(n,n[k],this.providerFactory.index,r);s=a.slice(0,o),Kw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Kw(i,s);return s}function Kw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ze(t,e=[]){return n=>{n.providersResolver=(r,i)=>function vY(t,e,n){const r=le();if(r.firstCreatePass){const i=vr(t);zw(n,r.data,r.blueprint,i,!0),zw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class hu{}class $O{}class Qw extends hu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new WP(this);const i=Hn(e);this._bootstrapComponents=Si(i.bootstrap),this._r3Injector=TP(e,n,[{provide:hu,useValue:this},{provide:wp,useValue:this.componentFactoryResolver},...r],It(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Yw extends $O{constructor(e){super(),this.moduleType=e}create(e){return new Qw(this.moduleType,e,[])}}class jO extends hu{constructor(e){super(),this.componentFactoryResolver=new WP(this),this.instance=null;const n=new ew([...e.providers,{provide:hu,useValue:this},{provide:wp,useValue:this.componentFactoryResolver}],e.parent||pp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Xw(t,e,n=null){return new jO({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let bY=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Kk(0,n.type),i=r.length>0?Xw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=j({token:t,providedIn:"environment",factory:()=>new t($(bi))}),t})();function HO(t){t.getStandaloneInjector=e=>e.get(bY).getOrCreateStandaloneInjector(t)}function Zw(t){return e=>{setTimeout(t,void 0,e)}}const tt=class XY extends _i{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Zw(s),i&&(i=Zw(i)),o&&(o=Zw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof $n&&e.add(a),a}};let Ir=(()=>{class t{}return t.__NG_ELEMENT_ID__=uX,t})();function uX(){return function oF(t,e){let n;const r=e[t.index];return Nn(r)?n=r:(n=function FP(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}(r,e,null,t),e[t.index]=n,Dp(e,n)),aF(n,e,t,r),new iF(n,t,e)}(zt(),I())}const cX=Ir,iF=class extends cX{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ya(this._hostTNode,this._hostLView)}get injector(){return new Fa(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ev(this._hostTNode,this._hostLView);if(PR(e)){const n=zf(e,this._hostLView),r=Gf(e);return new Fa(n[k].data[r+8],n)}return new Fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=sF(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-on}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Xc(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const u=o?e:new ml(_e(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const _=(o?c:this.parentInjector).get(bi,null);_&&(s=_)}_e(u.componentType??{});const f=u.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView,s=i[k];if(function o9(t){return Nn(t[Ke])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[Ke],l=new iF(c,c[sn],c[Ke]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;if(function P5(t,e,n,r){const i=on+r,s=n.length;r>0&&(n[i-1][yr]=e),r<s-on?(e[yr]=n[i],qR(n,on+r,e)):(n.push(e),e[yr]=null),e[Ke]=n;const o=e[qc];null!==o&&n!==o&&function O5(t,e){const n=t[Na];e[ut]!==e[Ke][Ke][ut]&&(t[ZN]=!0),null===n?t[Na]=[e]:n.push(e)}(o,e);const a=e[Vr];null!==a&&a.insertView(t),e[X]|=128}(s,i,a,o),!r){const u=Bv(o,a),c=i[J],l=ap(c,a[Ur]);null!==l&&function N5(t,e,n,r,i,s){r[Dt]=i,r[sn]=e,il(t,r,n,1,i,s)}(s,a[sn],c,i,l,u)}return e.attachToViewContainerRef(),qR(nE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=sF(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Fv(this._lContainer,n);r&&(Yf(nE(this._lContainer),n),yk(r[k],r))}detach(e){const n=this._adjustIndex(e,-1),r=Fv(this._lContainer,n);return r&&null!=Yf(nE(this._lContainer),n)?new gl(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function sF(t){return t[8]}function nE(t){return t[8]||(t[8]=[])}let aF=function uF(t,e,n,r){if(t[Ur])return;let i;i=8&n.type?Be(r):function lX(t,e){const n=t[J],r=n.createComment(""),i=Rn(e,t);return mo(n,ap(n,i),r,function U5(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ur]=i};const fE=new F("Application Initializer");let pE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=V(fE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(El(s))n.push(s);else if(y1(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kF=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const xi=new F("LocaleId",{providedIn:"root",factory:()=>V(xi,re.Optional|re.SkipSelf)||function $X(){return typeof $localize<"u"&&$localize.locale||du}()});let PF=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nr(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class GX{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let OF=(()=>{class t{compileModuleSync(n){return new Yw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Si(Hn(n).declarations).reduce((o,a)=>{const u=_e(a);return u&&o.push(new ml(u)),o},[]);return new GX(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function VF(...t){}class De{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tt(!1),this.onMicrotaskEmpty=new tt(!1),this.onStable=new tt(!1),this.onError=new tt(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function WX(){const t="function"==typeof Ne.requestAnimationFrame;let e=Ne[t?"requestAnimationFrame":"setTimeout"],n=Ne[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function YX(t){const e=()=>{!function QX(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ne,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mE(t),t.isCheckStableRunning=!0,gE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return UF(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),BF(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return UF(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),BF(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,mE(t),gE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!De.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(De.isInAngularZone())throw new S(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,KX,VF,VF);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const KX={};function gE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function UF(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function BF(t){t._nesting--,gE(t)}class XX{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tt,this.onMicrotaskEmpty=new tt,this.onStable=new tt,this.onError=new tt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const $F=new F("",{providedIn:"root",factory:jF});function jF(){const t=V(De);let e=!0;return function n6(...t){const e=Uc(t),n=function Q3(t,e){return"number"==typeof jy(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?rr(r[0]):Da(n)(Nt(r,e)):Or}(new et(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new et(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{De.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(MN()))}const HF=new F(""),jp=new F("");let vE,_E=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vE||(function JX(t){vE=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)($(De),$(yE),$(jp))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})(),yE=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return vE?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),fs=null;const GF=new F("AllowMultipleToken"),wE=new F("PlatformDestroyListeners"),EE=new F("appBootstrapListener");class qF{constructor(e,n){this.name=e,this.token=n}}function KF(t,e,n=[]){const r=`Platform: ${e}`,i=new F(r);return(s=[])=>{let o=IE();if(!o||o.injector.get(GF,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function tJ(t){if(fs&&!fs.get(GF,!1))throw new S(400,!1);(function zF(){!function K6(t){sR=t}(()=>{throw new S(600,!1)})})(),fs=t;const e=t.get(YF);(function WF(t){t.get(Zk,null)?.forEach(n=>n())})(t)}(function QF(t=[],e){return vn.create({name:e,providers:[{provide:Jv,useValue:"platform"},{provide:wE,useValue:new Set([()=>fs=null])},...t]})}(a,r))}return function rJ(t){const e=IE();if(!e)throw new S(401,!1);return e}()}}function IE(){return fs?.get(YF)??null}let YF=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function iJ(t="zone.js",e){return"noop"===t?new XX:"zone.js"===t?new De(e):t}(r?.ngZone,function XF(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function DY(t,e,n){return new Qw(t,e,n)}(n.moduleType,this.injector,function nL(t){return[{provide:De,useFactory:t},{provide:cl,multi:!0,useFactory:()=>{const e=V(oJ,{optional:!0});return()=>e.initialize()}},{provide:tL,useFactory:sJ},{provide:$F,useFactory:jF}]}(()=>i)),o=s.injector.get(yo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Hp(this._modules,s),a.unsubscribe()})}),function JF(t,e,n){try{const r=n();return El(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(pE);return a.runInitializers(),a.donePromise.then(()=>(function mO(t){ir(t,"Expected localeId to be defined"),"string"==typeof t&&(gO=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(xi,du)||du),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=ZF({},r);return function ZX(t,e,n){const r=new Yw(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(gu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new S(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(wE,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)($(vn))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function ZF(t,e){return Array.isArray(e)?e.reduce(ZF,t):{...t,...e}}let gu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(tL),this.zoneIsStable=V($F),this.componentTypes=[],this.components=[],this.isStable=V(PF).hasPendingTasks.pipe(Fr(n=>n?z(!1):this.zoneIsStable),function r6(t,e=rs){return t=t??i6,xt((n,r)=>{let i,s=!0;n.subscribe(Et(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),MN()),this._injector=V(bi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof oP;if(!this._injector.get(pE).done)throw!i&&function Ta(t){const e=_e(t)||rn(t)||xn(t);return null!==e&&e.standalone}(n),new S(405,!1);let o;o=i?n:this._injector.get(wp).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function eJ(t){return t.isBoundToModule}(o)?void 0:this._injector.get(hu),c=o.create(vn.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(HF,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Hp(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Hp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(EE,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Hp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Hp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const tL=new F("",{providedIn:"root",factory:()=>V(yo).handleError.bind(void 0)});function sJ(){const t=V(De),e=V(yo);return n=>t.runOutsideAngular(()=>e.handleError(n))}let oJ=(()=>{class t{constructor(){this.zone=V(De),this.applicationRef=V(gu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let Gp=(()=>{class t{}return t.__NG_ELEMENT_ID__=uJ,t})();function uJ(t){return function cJ(t,e,n){if(ho(t)&&!n){const r=zn(t.index,e);return new gl(r,r)}return 47&t.type?new gl(e[ut],e):null}(zt(),I(),16==(16&t))}const IJ=KF(null,"core",[]);let CJ=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)($(gu))},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({}),t})();let ME=null;function ps(){return ME}class OJ{}const ur=new F("DocumentToken");let xE=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return V(LJ)},providedIn:"platform"}),t})();const FJ=new F("Location Initialized");let LJ=(()=>{class t extends xE{constructor(){super(),this._doc=V(ur),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ps().getBaseHref(this._doc)}onPopState(n){const r=ps().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ps().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return new t},providedIn:"platform"}),t})();function NE(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function yL(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ni(t){return t&&"?"!==t[0]?"?"+t:t}let gs=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return V(wL)},providedIn:"root"}),t})();const vL=new F("appBaseHref");let wL=(()=>{class t extends gs{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(ur).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return NE(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ni(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Ni(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Ni(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)($(xE),$(vL,8))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EL=(()=>{class t extends gs{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=NE(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ni(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ni(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)($(xE),$(vL,8))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})(),RE=(()=>{class t{constructor(n){this._subject=new tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function BJ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(yL(IL(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ni(r))}normalize(n){return t.stripTrailingSlash(function UJ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,IL(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ni(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ni(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=Ni,t.joinWithSlash=NE,t.stripTrailingSlash=yL,t.\u0275fac=function(n){return new(n||t)($(gs))},t.\u0275prov=j({token:t,factory:function(){return function VJ(){return new RE($(gs))}()},providedIn:"root"}),t})();function IL(t){return t.replace(/\/index.html$/,"")}let WE=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({}),t})();function VL(t){return"server"===t}let iee=(()=>{class t{}return t.\u0275prov=j({token:t,providedIn:"root",factory:()=>new see($(ur),window)}),t})();class see{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function oee(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=UL(this.window.history)||UL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function UL(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class xee extends OJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class YE extends xee{static makeCurrent(){!function PJ(t){ME||(ME=t)}(new YE)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Nee(){return Ol=Ol||document.querySelector("base"),Ol?Ol.getAttribute("href"):null}();return null==n?null:function Ree(t){ag=ag||document.createElement("a"),ag.setAttribute("href",t);const e=ag.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function DZ(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ag,Ol=null,Pee=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const XE=new F("EventManagerPlugins");let GL=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return t.\u0275fac=function(n){return new(n||t)($(XE),$(De))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();class zL{constructor(e){this._doc=e}}const JE="ng-app-id";let qL=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=VL(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${JE}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(JE),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(JE,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)($(ur),$(gp),$(eP,8),$(ds))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const ZE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},eI=/%COMP%/g,Vee=new F("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function KL(t,e){return e.map(n=>n.replace(eI,t))}let QL=(()=>{class t{constructor(n,r,i,s,o,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=VL(a),this.defaultRenderer=new tI(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mr.ShadowDom&&(r={...r,encapsulation:mr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof XL?i.applyToHost(n):i instanceof nI&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case mr.Emulated:s=new XL(u,c,r,this.appId,l,o,a,d);break;case mr.ShadowDom:return new jee(u,c,n,r,o,a,this.nonce,d);default:s=new nI(u,c,r,l,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return t.\u0275fac=function(n){return new(n||t)($(GL),$(qL),$(gp),$(Vee),$(ur),$(ds),$(De),$(eP))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();class tI{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ZE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(YL(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(YL(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=ZE[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=ZE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(cs.DashCase|cs.Important)?e.style.setProperty(n,r,i&cs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&cs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=ps().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function YL(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class jee extends tI{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=KL(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class nI extends tI{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?KL(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class XL extends nI{constructor(e,n,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=function Uee(t){return"_ngcontent-%COMP%".replace(eI,t)}(c),this.hostAttr=function Bee(t){return"_nghost-%COMP%".replace(eI,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Hee=(()=>{class t extends zL{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)($(ur))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const JL=["alt","control","meta","shift"],Gee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zee={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let qee=(()=>{class t extends zL{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ps().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),JL.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=Gee[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),JL.forEach(o=>{o!==i&&(0,zee[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)($(ur))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const eV=[{provide:ds,useValue:"browser"},{provide:Zk,useValue:function Wee(){YE.makeCurrent()},multi:!0},{provide:ur,useFactory:function Qee(){return function W5(t){Hv=t}(document),document},deps:[]}],Yee=KF(IJ,"browser",eV),Xee=new F(""),tV=[{provide:jp,useClass:class kee{addToWindow(e){Ne.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new S(5103,!1);return s},Ne.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ne.getAllAngularRootElements=()=>e.getAllRootElements(),Ne.frameworkStabilizers||(Ne.frameworkStabilizers=[]),Ne.frameworkStabilizers.push(r=>{const i=Ne.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ps().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:HF,useClass:_E,deps:[De,yE,jp]},{provide:_E,useClass:_E,deps:[De,yE,jp]}],nV=[{provide:Jv,useValue:"root"},{provide:yo,useFactory:function Kee(){return new yo},deps:[]},{provide:XE,useClass:Hee,multi:!0,deps:[ur,De,ds]},{provide:XE,useClass:qee,multi:!0,deps:[ur]},QL,qL,GL,{provide:uP,useExisting:QL},{provide:class aee{},useClass:Pee,deps:[]},[]];let Jee=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:gp,useValue:n.appId}]}}}return t.\u0275fac=function(n){return new(n||t)($(Xee,12))},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({providers:[...nV,...tV],imports:[WE,CJ]}),t})(),rV=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)($(ur))},t.\u0275prov=j({token:t,factory:function(n){let r=null;return r=n?new n:function ete(){return new rV($(ur))}(),r},providedIn:"root"}),t})();typeof window<"u"&&window;const{isArray:ste}=Array,{getPrototypeOf:ote,prototype:ate,keys:ute}=Object;function aV(t){if(1===t.length){const e=t[0];if(ste(e))return{args:e,keys:null};if(function cte(t){return t&&"object"==typeof t&&ote(t)===ate}(e)){const n=ute(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:lte}=Array;function uV(t){return xe(e=>function dte(t,e){return lte(e)?t(...e):t(e)}(t,e))}function cV(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let lV=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(b(Ti),b(Wn))},t.\u0275dir=G({type:t}),t})(),Co=(()=>{class t extends lV{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=qt(t)))(r||t)}}(),t.\u0275dir=G({type:t,features:[Ce]}),t})();const Yr=new F("NgValueAccessor"),pte={provide:Yr,useExisting:Pe(()=>Fl),multi:!0},mte=new F("CompositionEventMode");let Fl=(()=>{class t extends lV{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gte(){const t=ps()?ps().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(b(Ti),b(Wn),b(mte,8))},t.\u0275dir=G({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Pn("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ze([pte]),Ce]}),t})();const cn=new F("NgValidators"),ys=new F("NgAsyncValidators");function EV(t){return null!=t}function IV(t){return El(t)?Nt(t):t}function CV(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function DV(t,e){return e.map(n=>n(t))}function bV(t){return t.map(e=>function yte(t){return!t.validate}(e)?e:n=>e.validate(n))}function iI(t){return null!=t?function TV(t){if(!t)return null;const e=t.filter(EV);return 0==e.length?null:function(n){return CV(DV(n,e))}}(bV(t)):null}function sI(t){return null!=t?function SV(t){if(!t)return null;const e=t.filter(EV);return 0==e.length?null:function(n){return function hte(...t){const e=SN(t),{args:n,keys:r}=aV(t),i=new et(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let l=0;l<o;l++){let d=!1;rr(n[l]).subscribe(Et(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?cV(r,a):a),s.complete())}))}});return e?i.pipe(uV(e)):i}(DV(n,e).map(IV)).pipe(xe(CV))}}(bV(t)):null}function AV(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function oI(t){return t?Array.isArray(t)?t:[t]:[]}function cg(t,e){return Array.isArray(t)?t.includes(e):t===e}function NV(t,e){const n=oI(e);return oI(t).forEach(i=>{cg(n,i)||n.push(i)}),n}function RV(t,e){return oI(e).filter(n=>!cg(t,n))}class kV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Cn extends kV{get formDirective(){return null}get path(){return null}}class vs extends kV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class PV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let aI=(()=>{class t extends PV{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(b(vs,2))},t.\u0275dir=G({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Pp("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ce]}),t})(),uI=(()=>{class t extends PV{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(b(Cn,10))},t.\u0275dir=G({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&Pp("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ce]}),t})();const Ll="VALID",dg="INVALID",yu="PENDING",Vl="DISABLED";function dI(t){return(hg(t)?t.validators:t)||null}function hI(t,e){return(hg(e)?e.asyncValidators:t)||null}function hg(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class VV{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ll}get invalid(){return this.status===dg}get pending(){return this.status==yu}get disabled(){return this.status===Vl}get enabled(){return this.status!==Vl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(NV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RV(e,this._rawAsyncValidators))}hasValidator(e){return cg(this._rawValidators,e)}hasAsyncValidator(e){return cg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Vl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ll,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ll||this.status===yu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vl:Ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yu,this._hasOwnPendingAsyncValidator=!0;const n=IV(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new tt,this.statusChanges=new tt}_calculateStatus(){return this._allControlsDisabled()?Vl:this.errors?dg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yu)?yu:this._anyControlsHaveStatus(dg)?dg:Ll}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ite(t){return Array.isArray(t)?iI(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Cte(t){return Array.isArray(t)?sI(t):t||null}(this._rawAsyncValidators)}}class fI extends VV{constructor(e,n,r){super(dI(n),hI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function LV(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function FV(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const vu=new F("CallSetDisabledState",{providedIn:"root",factory:()=>fg}),fg="always";function Ul(t,e,n=fg){pI(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Tte(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&UV(t,e)})}(t,e),function Ate(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Ste(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&UV(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function bte(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function mg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function pI(t,e){const n=function MV(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(AV(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function xV(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(AV(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();mg(e._rawValidators,i),mg(e._rawAsyncValidators,i)}function UV(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const kte={provide:Cn,useExisting:Pe(()=>$l)},Bl=(()=>Promise.resolve())();let $l=(()=>{class t extends Cn{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new tt,this.form=new fI({},iI(n),sI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Bl.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Ul(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Bl.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Bl.then(()=>{const r=this._findContainer(n.path),i=new fI({});(function BV(t,e){pI(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Bl.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Bl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function $V(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return t.\u0275fac=function(n){return new(n||t)(b(cn,10),b(ys,10),b(vu,8))},t.\u0275dir=G({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&Pn("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ze([kte]),Ce]}),t})();function jV(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function HV(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const GV=class extends VV{constructor(e=null,n,r){super(dI(n),hI(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=HV(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){HV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Fte={provide:vs,useExisting:Pe(()=>yg)},WV=(()=>Promise.resolve())();let yg=(()=>{class t extends vs{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new GV,this._registered=!1,this.name="",this.update=new tt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _I(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fl?n=s:function Nte(t){return Object.getPrototypeOf(t.constructor)===Co}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function mI(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ul(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){WV.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function mu(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);WV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function pg(t,e){return[...e.path,t]}(n,this._parent):[n]}}return t.\u0275fac=function(n){return new(n||t)(b(Cn,9),b(cn,10),b(ys,10),b(Yr,10),b(Gp,8),b(vu,8))},t.\u0275dir=G({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ze([Fte]),Ce,sr]}),t})(),yI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=G({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),QV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({}),t})(),one=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[QV]}),t})(),f2=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:vu,useValue:n.callSetDisabledState??fg}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[one]}),t})();function bI(...t){const e=Uc(t),n=SN(t),{args:r,keys:i}=aV(t);if(0===r.length)return Nt([],e);const s=new et(function cne(t,e,n=rs){return r=>{p2(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)p2(e,()=>{const c=Nt(t[u],e);let l=!1;c.subscribe(Et(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>cV(i,o):rs));return n?s.pipe(uV(n)):s}function p2(t,e,n){t?yi(n,t,e):e()}const vg=Lc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function TI(...t){return function lne(){return Da(1)}()(Nt(t,Uc(t)))}function g2(t){return new et(e=>{rr(t()).subscribe(e)})}function jl(t,e){const n=Ae(t)?t:()=>t,r=i=>i.error(n());return new et(e?i=>e.schedule(r,0,i):r)}function SI(){return xt((t,e)=>{let n=null;t._refCount++;const r=Et(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class m2 extends et{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hN(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $n;const n=this.getSubject();e.add(this.source.subscribe(Et(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$n.EMPTY)}return e}refCount(){return SI()(this)}}function wu(t){return t<=0?()=>Or:xt((e,n)=>{let r=0;e.subscribe(Et(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ws(t,e){return xt((n,r)=>{let i=0;n.subscribe(Et(r,s=>t.call(e,s,i++)&&r.next(s)))})}function wg(t){return xt((e,n)=>{let r=!1;e.subscribe(Et(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function _2(t=hne){return xt((e,n)=>{let r=!1;e.subscribe(Et(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function hne(){return new vg}function bo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ws((i,s)=>t(i,s,r)):rs,wu(1),n?wg(e):_2(()=>new vg))}function Hl(t,e){return Ae(e)?Gt(t,e,1):Gt(t,1)}function ln(t,e,n){const r=Ae(t)||e||n?{next:t,error:e,complete:n}:t;return r?xt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Et(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):rs}function To(t){return xt((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Et(n,void 0,void 0,o=>{s=rr(t(o,To(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function AI(t){return t<=0?()=>Or:xt((e,n)=>{let r=[];e.subscribe(Et(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function MI(t){return xt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const te="primary",Gl=Symbol("RouteTitle");class _ne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Eu(t){return new _ne(t)}function yne(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Xr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!y2(t[i],e[i]))return!1;return!0}function y2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function v2(t){return t.length>0?t[t.length-1]:null}function Es(t){return function une(t){return!!t&&(t instanceof et||Ae(t.lift)&&Ae(t.subscribe))}(t)?t:El(t)?Nt(Promise.resolve(t)):z(t)}const wne={exact:function I2(t,e,n){if(!So(t.segments,e.segments)||!Eg(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!I2(t.children[r],e.children[r],n))return!1;return!0},subset:C2},w2={exact:function Ene(t,e){return Xr(t,e)},subset:function Ine(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>y2(t[n],e[n]))},ignored:()=>!0};function E2(t,e,n){return wne[n.paths](t.root,e.root,n.matrixParams)&&w2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function C2(t,e,n){return D2(t,e,e.segments,n)}function D2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!So(i,n)||e.hasChildren()||!Eg(i,n,r))}if(t.segments.length===n.length){if(!So(t.segments,n)||!Eg(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!C2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(So(t.segments,i)&&Eg(t.segments,i,r)&&t.children[te])&&D2(t.children[te],e,s,r)}}function Eg(t,e,n){return e.every((r,i)=>w2[n](t[i].parameters,r.parameters))}class Iu{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eu(this.queryParams)),this._queryParamMap}toString(){return bne.serialize(this)}}class be{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ig(this)}}class zl{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Eu(this.parameters)),this._parameterMap}toString(){return S2(this)}}function So(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let ql=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return new xI},providedIn:"root"}),t})();class xI{parse(e){const n=new Fne(e);return new Iu(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Wl(e.root,!0)}`,r=function Ane(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Cg(n)}=${Cg(i)}`).join("&"):`${Cg(n)}=${Cg(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Tne(t){return encodeURI(t)}(e.fragment)}`:""}`}}const bne=new xI;function Ig(t){return t.segments.map(e=>S2(e)).join("/")}function Wl(t,e){if(!t.hasChildren())return Ig(t);if(e){const n=t.children[te]?Wl(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${Wl(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Dne(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===te?[Wl(t.children[te],!1)]:[`${i}:${Wl(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[te]?`${Ig(t)}/${n[0]}`:`${Ig(t)}/(${n.join("//")})`}}function b2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cg(t){return b2(t).replace(/%3B/gi,";")}function NI(t){return b2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dg(t){return decodeURIComponent(t)}function T2(t){return Dg(t.replace(/\+/g,"%20"))}function S2(t){return`${NI(t.path)}${function Sne(t){return Object.keys(t).map(e=>`;${NI(e)}=${NI(t[e])}`).join("")}(t.parameters)}`}const Mne=/^[^\/()?;#]+/;function RI(t){const e=t.match(Mne);return e?e[0]:""}const xne=/^[^\/()?;=#]+/,Rne=/^[^=?&#]+/,Pne=/^[^&#]+/;class Fne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new be(e,n)),r}parseSegment(){const e=RI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new zl(Dg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Nne(t){const e=t.match(xne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=RI(this.remaining);i&&(r=i,this.capture(r))}e[Dg(n)]=Dg(r)}parseQueryParam(e){const n=function kne(t){const e=t.match(Rne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function One(t){const e=t.match(Pne);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=T2(n),s=T2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=RI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[te]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}}function A2(t){return t.segments.length>0?new be([],{[te]:t}):t}function M2(t){const e={};for(const r of Object.keys(t.children)){const s=M2(t.children[r]);if(r===te&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Lne(t){if(1===t.numberOfChildren&&t.children[te]){const e=t.children[te];return new be(t.segments.concat(e.segments),e.children)}return t}(new be(t.segments,e))}function Ao(t){return t instanceof Iu}function x2(t){let e;const i=A2(function n(s){const o={};for(const u of s.children){const c=n(u);o[u.outlet]=c}const a=new be(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function N2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return kI(i,i,i,n,r);const s=function Une(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new k2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new k2(n,e,r)}(e);if(s.toRoot())return kI(i,i,new be([],{}),n,r);const o=function Bne(t,e,n){if(t.isAbsolute)return new Tg(e,!0,0);if(!n)return new Tg(e,!1,NaN);if(null===n.parent)return new Tg(n,!0,0);const r=bg(t.commands[0])?0:1;return function $ne(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new Tg(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Ql(o.segmentGroup,o.index,s.commands):P2(o.segmentGroup,o.index,s.commands);return kI(i,o.segmentGroup,a,n,r)}function bg(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Kl(t){return"object"==typeof t&&null!=t&&t.outlets}function kI(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:R2(t,e,n);const a=A2(M2(o));return new Iu(a,s,i)}function R2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:R2(s,e,n)}),new be(t.segments,r)}class k2{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&bg(r[0]))throw new S(4003,!1);const i=r.find(Kl);if(i&&i!==v2(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tg{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function P2(t,e,n){if(t||(t=new be([],{})),0===t.segments.length&&t.hasChildren())return Ql(t,e,n);const r=function Hne(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Kl(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!F2(u,c,o))return s;r+=2}else{if(!F2(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new be(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new be(t.segments.slice(r.pathIndex),t.children),Ql(s,0,i)}return r.match&&0===i.length?new be(t.segments,{}):r.match&&!t.hasChildren()?PI(t,e,n):r.match?Ql(t,0,i):PI(t,e,n)}function Ql(t,e,n){if(0===n.length)return new be(t.segments,{});{const r=function jne(t){return Kl(t[0])?t[0].outlets:{[te]:t}}(n),i={};if(!r[te]&&t.children[te]&&1===t.numberOfChildren&&0===t.children[te].segments.length){const s=Ql(t.children[te],e,n);return new be(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=P2(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new be(t.segments,i)}}function PI(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Kl(s)){const u=Gne(s.outlets);return new be(r,u)}if(0===i&&bg(n[0])){r.push(new zl(t.segments[e].path,O2(n[0]))),i++;continue}const o=Kl(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&bg(a)?(r.push(new zl(o,O2(a))),i+=2):(r.push(new zl(o,{})),i++)}return new be(r,{})}function Gne(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=PI(new be([],{}),0,r))}),e}function O2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function F2(t,e,n){return t==n.path&&Xr(e,n.parameters)}const Yl="imperative";class Jr{constructor(e,n){this.id=e,this.url=n}}class OI extends Jr{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mo extends Jr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sg extends Jr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xl extends Jr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class FI extends Jr{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zne extends Jr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qne extends Jr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wne extends Jr{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kne extends Jr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qne extends Jr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yne{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xne{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jne{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zne{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ere{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tre{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class L2{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class nre{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Jl,this.attachRef=null}}let Jl=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new nre,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class V2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=LI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=LI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=VI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return VI(e,this._root).map(n=>n.value)}}function LI(t,e){if(t===e.value)return e;for(const n of e.children){const r=LI(t,n);if(r)return r}return null}function VI(t,e){if(t===e.value)return[e];for(const n of e.children){const r=VI(t,n);if(r.length)return r.unshift(e),r}return[]}class Pi{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Cu(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class U2 extends V2{constructor(e,n){super(e),this.snapshot=n,UI(this,e)}toString(){return this.snapshot.toString()}}function B2(t,e){const n=function rre(t,e){const o=new Ag([],{},{},"",{},te,e,null,{});return new j2("",new Pi(o,[]))}(0,e),r=new nr([new zl("",{})]),i=new nr({}),s=new nr({}),o=new nr({}),a=new nr(""),u=new Du(r,i,o,a,s,te,e,n.root);return u.snapshot=n.root,new U2(new Pi(u,[]),n)}class Du{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(xe(c=>c[Gl]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xe(e=>Eu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xe(e=>Eu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $2(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function ire(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ag{get title(){return this.data?.[Gl]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Eu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class j2 extends V2{constructor(e,n){super(n),this.url=e,UI(this,n)}toString(){return H2(this._root)}}function UI(t,e){e.value._routerState=t,e.children.forEach(n=>UI(t,n))}function H2(t){const e=t.children.length>0?` { ${t.children.map(H2).join(", ")} } `:"";return`${t.value}${e}`}function BI(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Xr(e.params,n.params)||t.paramsSubject.next(n.params),function vne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Xr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function $I(t,e){const n=Xr(t.params,e.params)&&function Cne(t,e){return So(t,e)&&t.every((n,r)=>Xr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||$I(t.parent,e.parent))}let Mg=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new tt,this.deactivateEvents=new tt,this.attachEvents=new tt,this.detachEvents=new tt,this.parentContexts=V(Jl),this.location=V(Ir),this.changeDetector=V(Gp),this.environmentInjector=V(bi),this.inputBinder=V(xg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new sre(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=G({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sr]}),t})();class sre{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Du?this.route:e===Jl?this.childContexts:this.parent.get(e,n)}}const xg=new F("");let G2=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=bI([r.queryParams,r.params,r.data]).pipe(Fr(([s,o,a],u)=>(a={...s,...o,...a},0===u?z(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function kJ(t){const e=_e(t);if(!e)return null;const n=new ml(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();function Zl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function are(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Zl(t,r,i);return Zl(t,r)})}(t,e,n);return new Pi(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zl(t,a)),o}}const r=function ure(t){return new Du(new nr(t.url),new nr(t.params),new nr(t.queryParams),new nr(t.fragment),new nr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Zl(t,s));return new Pi(r,i)}}const jI="ngNavigationCancelingError";function z2(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ao(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=q2(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function q2(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[jI]=!0,r.cancellationCode=e,n&&(r.url=n),r}function W2(t){return K2(t)&&Ao(t.url)}function K2(t){return t&&t[jI]}let Q2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=co({type:t,selectors:[["ng-component"]],standalone:!0,features:[HO],decls:1,vars:0,template:function(n,r){1&n&&Wr(0,"router-outlet")},dependencies:[Mg],encapsulation:2}),t})();function HI(t){const e=t.children&&t.children.map(HI),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=Q2),n}function Tr(t){return t.outlet||te}function ed(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class gre{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),BI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Cu(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Cu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Cu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Cu(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tre(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zne(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(BI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),BI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=ed(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Y2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ng{constructor(e,n){this.component=e,this.route=n}}function mre(t,e,n){const r=t._root;return td(r,e?e._root:null,n,[r.value])}function bu(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function d6(t){return null!==bf(t)}(t)?e.get(t):t:r}function td(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Cu(e);return t.children.forEach(o=>{(function yre(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function vre(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!So(t.url,e.url);case"pathParamsOrQueryParamsChange":return!So(t.url,e.url)||!Xr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$I(t,e)||!Xr(t.queryParams,e.queryParams);default:return!$I(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Y2(r)):(s.data=o.data,s._resolvedData=o._resolvedData),td(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ng(a.outlet.component,o))}else o&&nd(e,a,i),i.canActivateChecks.push(new Y2(r)),td(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>nd(a,n.getContext(o),i)),i}function nd(t,e,n){const r=Cu(t),i=t.value;Object.entries(r).forEach(([s,o])=>{nd(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Ng(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function rd(t){return"function"==typeof t}function X2(t){return t instanceof vg||"EmptyError"===t?.name}const Rg=Symbol("INITIAL_VALUE");function Tu(){return Fr(t=>bI(t.map(e=>e.pipe(wu(1),function dne(...t){const e=Uc(t);return xt((n,r)=>{(e?TI(t,n,e):TI(t,n)).subscribe(r)})}(Rg)))).pipe(xe(e=>{for(const n of e)if(!0!==n){if(n===Rg)return Rg;if(!1===n||n instanceof Iu)return n}return!0}),ws(e=>e!==Rg),wu(1)))}function J2(t){return function p3(...t){return cN(t)}(ln(e=>{if(Ao(e))throw z2(0,e)}),xe(e=>!0===e))}class kg{constructor(e){this.segmentGroup=e||null}}class Z2{constructor(e){this.urlTree=e}}function Su(t){return jl(new kg(t))}function eU(t){return jl(new Z2(t))}class Ure{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new S(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return z(r);if(i.numberOfChildren>1||!i.children[te])return jl(new S(4e3,!1));i=i.children[te]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Iu(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new be(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const GI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bre(t,e,n,r,i){const s=zI(t,e,n);return s.matched?(r=function cre(t,e){return t.providers&&!t._injector&&(t._injector=Xw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Fre(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?z(i.map(o=>{const a=bu(o,t);return Es(function bre(t){return t&&rd(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Tu(),J2()):z(!0)}(r,e,n).pipe(xe(o=>!0===o?s:{...GI}))):z(s)}function zI(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...GI}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||yne)(n,t,e);if(!i)return{...GI};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function tU(t,e,n,r){return n.length>0&&function Hre(t,e,n){return n.some(r=>Pg(t,e,r)&&Tr(r)!==te)}(t,n,r)?{segmentGroup:new be(e,jre(r,new be(n,t.children))),slicedSegments:[]}:0===n.length&&function Gre(t,e,n){return n.some(r=>Pg(t,e,r))}(t,n,r)?{segmentGroup:new be(t.segments,$re(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function $re(t,e,n,r,i){const s={};for(const o of r)if(Pg(t,n,o)&&!i[Tr(o)]){const a=new be([],{});s[Tr(o)]=a}return{...i,...s}}function jre(t,e){const n={};n[te]=e;for(const r of t)if(""===r.path&&Tr(r)!==te){const i=new be([],{});n[Tr(r)]=i}return n}function Pg(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Kre{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Ure(this.urlSerializer,this.urlTree)}noMatchError(e){return new S(4002,!1)}recognize(){const e=tU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,te).pipe(To(n=>{if(n instanceof Z2)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof kg?this.noMatchError(n):n}),xe(n=>{const r=new Ag([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},te,this.rootComponentType,null,{}),i=new Pi(r,n),s=new j2("",i),o=function Vne(t,e,n=null,r=null){return N2(x2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,te).pipe(To(r=>{throw r instanceof kg?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=$2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Nt(i).pipe(Hl(s=>{const o=r.children[s],a=function fre(t,e){const n=t.filter(r=>Tr(r)===e);return n.push(...t.filter(r=>Tr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function pne(t,e){return xt(function fne(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(Et(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),wg(null),function gne(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ws((i,s)=>t(i,s,r)):rs,AI(1),n?wg(e):_2(()=>new vg))}(),Gt(s=>{if(null===s)return Su(r);const o=nU(s);return function Qre(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}(o),z(o)}))}processSegment(e,n,r,i,s,o){return Nt(n).pipe(Hl(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(To(u=>{if(u instanceof kg)return z(null);throw u}))),bo(a=>!!a),To(a=>{if(X2(a))return function qre(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?z([]):Su(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function zre(t,e,n,r){return!!(Tr(t)===r||r!==te&&Pg(e,n,t))&&("**"===t.path||zI(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Su(i):Su(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eU(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Gt(o=>{const a=new be(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=zI(n,i,s);if(!a)return Su(n);const d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?eU(d):this.applyRedirects.lineralizeSegments(i,d).pipe(Gt(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?v2(i).parameters:{};a=z({snapshot:new Ag(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rU(r),Tr(r),r.component??r._loadedComponent??null,r,iU(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=Bre(n,r,i,e).pipe(xe(({matched:u,consumedSegments:c,remainingSegments:l,parameters:d})=>u?{snapshot:new Ag(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rU(r),Tr(r),r.component??r._loadedComponent??null,r,iU(r)),consumedSegments:c,remainingSegments:l}:null));return a.pipe(Fr(u=>null===u?Su(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Fr(({routes:c})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=u,{segmentGroup:p,slicedSegments:g}=tU(n,h,f,c);if(0===g.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(xe(w=>null===w?null:[new Pi(d,w)]));if(0===c.length&&0===g.length)return z([new Pi(d,[])]);const _=Tr(r)===s;return this.processSegment(l,c,p,g,_?te:s,!0).pipe(xe(w=>[new Pi(d,w)]))}))))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?z({routes:n._loadedRoutes,injector:n._loadedInjector}):function Ore(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?z(!0):z(i.map(o=>{const a=bu(o,t);return Es(function Ere(t){return t&&rd(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Tu(),J2())}(e,n,r).pipe(Gt(i=>i?this.configLoader.loadChildren(e,n).pipe(ln(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function Vre(t){return jl(q2(!1,3))}())):z({routes:[],injector:e})}}function Yre(t){const e=t.value.routeConfig;return e&&""===e.path}function nU(t){const e=[],n=new Set;for(const r of t){if(!Yre(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=nU(r.children);e.push(new Pi(r.value,i))}return e.filter(r=>!n.has(r))}function rU(t){return t.data||{}}function iU(t){return t.resolve||{}}function sU(t){return"string"==typeof t.title||null===t.title}function qI(t){return Fr(e=>{const n=t(e);return n?Nt(n).pipe(xe(()=>e)):z(e)})}const Au=new F("ROUTES");let WI=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(OF)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Es(n.loadComponent()).pipe(xe(oU),ln(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),MI(()=>{this.componentLoaders.delete(n)})),i=new m2(r,()=>new _i).pipe(SI());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(xe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c;return Array.isArray(a)?c=a:(u=a.create(n).injector,c=u.get(Au,[],re.Self|re.Optional).flat()),{routes:c.map(HI),injector:u}}),MI(()=>{this.childrenLoaders.delete(r)})),o=new m2(s,()=>new _i).pipe(SI());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return Es(n()).pipe(xe(oU),Gt(r=>r instanceof $O||Array.isArray(r)?z(r):Nt(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function oU(t){return function rie(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Og=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new _i,this.configLoader=V(WI),this.environmentInjector=V(bi),this.urlSerializer=V(ql),this.rootContexts=V(Jl),this.inputBindingEnabled=null!==V(xg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Xne(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Yne(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new nr({id:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yl,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ws(r=>0!==r.id),xe(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),Fr(r=>{let i=!1,s=!1;return z(r).pipe(ln(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fr(o=>{const a=n.browserUrlTree.toString(),u=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const l="";return this.events.next(new Xl(o.id,n.serializeUrl(r.rawUrl),l,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),Or}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return aU(o.source)&&(n.browserUrlTree=o.extractedUrl),z(o).pipe(Fr(l=>{const d=this.transitions?.getValue();return this.events.next(new OI(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Or:Promise.resolve(l)}),function Xre(t,e,n,r,i,s){return Gt(o=>function Wre(t,e,n,r,i,s,o="emptyOnly"){return new Kre(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(xe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ln(l=>{if(r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},"eager"===n.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);n.setBrowserUrl(h,l)}n.browserUrlTree=l.urlAfterRedirects}const d=new zne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=o,g=new OI(l,this.urlSerializer.serialize(d),h,f);this.events.next(g);const _=B2(0,this.rootComponentType).snapshot;return z(r={...o,targetSnapshot:_,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const l="";return this.events.next(new Xl(o.id,n.serializeUrl(r.extractedUrl),l,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),Or}}),ln(o=>{const a=new qne(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),xe(o=>r={...o,guards:mre(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Sre(t,e){return Gt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?z({...n,guardsResult:!0}):function Are(t,e,n,r){return Nt(t).pipe(Gt(i=>function Pre(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?z(s.map(a=>{const u=ed(e)??i,c=bu(a,u);return Es(function Dre(t){return t&&rd(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(bo())})).pipe(Tu()):z(!0)}(i.component,i.route,n,e,r)),bo(i=>!0!==i,!0))}(o,r,i,t).pipe(Gt(a=>a&&function wre(t){return"boolean"==typeof t}(a)?function Mre(t,e,n,r){return Nt(e).pipe(Hl(i=>TI(function Nre(t,e){return null!==t&&e&&e(new Jne(t)),z(!0)}(i.route.parent,r),function xre(t,e){return null!==t&&e&&e(new ere(t)),z(!0)}(i.route,r),function kre(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function _re(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>g2(()=>z(o.guards.map(u=>{const c=ed(o.node)??n,l=bu(u,c);return Es(function Cre(t){return t&&rd(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(bo())})).pipe(Tu())));return z(s).pipe(Tu())}(t,i.path,n),function Rre(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return z(!0);const i=r.map(s=>g2(()=>{const o=ed(e)??n,a=bu(s,o);return Es(function Ire(t){return t&&rd(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(bo())}));return z(i).pipe(Tu())}(t,i.route,n))),bo(i=>!0!==i,!0))}(r,s,t,e):z(a)),xe(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),ln(o=>{if(r.guardsResult=o.guardsResult,Ao(o.guardsResult))throw z2(0,o.guardsResult);const a=new Wne(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ws(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),qI(o=>{if(o.guards.canActivateChecks.length)return z(o).pipe(ln(a=>{const u=new Kne(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Fr(a=>{let u=!1;return z(a).pipe(function Jre(t,e){return Gt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=0;return Nt(i).pipe(Hl(o=>function Zre(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!sU(i)&&(s[Gl]=i.title),function eie(t,e,n,r){const i=function tie(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return z({});const s={};return Nt(i).pipe(Gt(o=>function nie(t,e,n,r){const i=ed(e)??r,s=bu(t,i);return Es(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(bo(),ln(a=>{s[o]=a}))),AI(1),function mne(t){return xe(()=>t)}(s),To(o=>X2(o)?Or:jl(o)))}(s,t,e,r).pipe(xe(o=>(t._resolvedData=o,t.data=$2(t,n).resolve,i&&sU(i)&&(t.data[Gl]=i.title),null)))}(o.route,r,t,e)),ln(()=>s++),AI(1),Gt(o=>s===i.length?z(n):Or))})}(n.paramsInheritanceStrategy,this.environmentInjector),ln({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ln(a=>{const u=new Qne(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),qI(o=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(ln(l=>{u.component=l}),xe(()=>{})));for(const l of u.children)c.push(...a(l));return c};return bI(a(o.targetSnapshot.root)).pipe(wg(),wu(1))}),qI(()=>this.afterPreactivation()),xe(o=>{const a=function ore(t,e,n){const r=Zl(t,e._root,n?n._root:void 0);return new U2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),ln(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n,r)=>xe(i=>(new gre(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),wu(1),ln({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),MI(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),To(o=>{if(s=!0,K2(o)){W2(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Sg(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),W2(o)){const u=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||aU(r.source)};n.scheduleNavigation(u,Yl,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new FI(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(u){r.reject(u)}}return Or}))}))}cancelNavigationTransition(n,r,i){const s=new Sg(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function aU(t){return t!==Yl}let uU=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[Gl]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return V(iie)},providedIn:"root"}),t})(),iie=(()=>{class t extends uU{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)($(rV))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),sie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return V(aie)},providedIn:"root"}),t})();class oie{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let aie=(()=>{class t extends oie{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=qt(t)))(r||t)}}(),t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Fg=new F("",{providedIn:"root",factory:()=>({})});let uie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return V(cie)},providedIn:"root"}),t})(),cie=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var id=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(id||{});function cU(t,e){t.events.pipe(ws(n=>n instanceof Mo||n instanceof Sg||n instanceof FI||n instanceof Xl),xe(n=>n instanceof Mo||n instanceof Xl?id.COMPLETE:n instanceof Sg&&(0===n.code||1===n.code)?id.REDIRECTING:id.FAILED),ws(n=>n!==id.REDIRECTING),wu(1)).subscribe(()=>{e()})}function lie(t){throw t}function die(t,e,n){return e.parse("/")}const hie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=V(kF),this.isNgZoneEnabled=!1,this.options=V(Fg,{optional:!0})||{},this.pendingTasks=V(PF),this.errorHandler=this.options.errorHandler||lie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||die,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=V(uie),this.routeReuseStrategy=V(sie),this.titleStrategy=V(uU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=V(Au,{optional:!0})?.flat()??[],this.navigationTransitions=V(Og),this.urlSerializer=V(ql),this.location=V(RE),this.componentInputBindingEnabled=!!V(xg,{optional:!0}),this.isNgZoneEnabled=V(De)instanceof De&&De.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Iu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=B2(0,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Yl,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(HI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{d=x2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return N2(d,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ao(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Yl,null,r)}navigate(n,r={skipLocationChange:!1}){return function pie(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new S(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...hie}:!1===r?{...fie}:r,Ao(n))return E2(this.currentUrlTree,n,i);const s=this.parseUrl(n);return E2(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});const l=this.pendingTasks.add();return cU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class lU{}let _ie=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ws(n=>n instanceof Mo),Hl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Xw(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Nt(i).pipe(Da())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):z(null);const s=i.pipe(Gt(o=>null===o?z(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?Nt([s,this.loader.loadComponent(r)]).pipe(Da()):s})}}return t.\u0275fac=function(n){return new(n||t)($(dr),$(OF),$(bi),$(lU),$(WI))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const QI=new F("");let dU=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof OI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Mo?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Xl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof L2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new L2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function SP(){throw new Error("invalid")}()},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();function Oi(t,e){return{\u0275kind:t,\u0275providers:e}}function fU(){const t=V(vn);return e=>{const n=t.get(gu);if(e!==n.components[0])return;const r=t.get(dr),i=t.get(pU);1===t.get(YI)&&r.initialNavigation(),t.get(gU,null,re.Optional)?.setUpPreloading(),t.get(QI,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const pU=new F("",{factory:()=>new _i}),YI=new F("",{providedIn:"root",factory:()=>1}),gU=new F("");function Eie(t){return Oi(0,[{provide:gU,useExisting:_ie},{provide:lU,useExisting:t}])}const mU=new F("ROUTER_FORROOT_GUARD"),Cie=[RE,{provide:ql,useClass:xI},dr,Jl,{provide:Du,useFactory:function hU(t){return t.routerState.root},deps:[dr]},WI,[]];function Die(){return new qF("Router",dr)}let xo=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Cie,[],{provide:Au,multi:!0,useValue:n},{provide:mU,useFactory:Aie,deps:[[dr,new Ye,new Jf]]},{provide:Fg,useValue:r||{}},r?.useHash?{provide:gs,useClass:EL}:{provide:gs,useClass:wL},{provide:QI,useFactory:()=>{const t=V(iee),e=V(De),n=V(Fg),r=V(Og),i=V(ql);return n.scrollOffset&&t.setOffset(n.scrollOffset),new dU(i,r,t,e,n)}},r?.preloadingStrategy?Eie(r.preloadingStrategy).\u0275providers:[],{provide:qF,multi:!0,useFactory:Die},r?.initialNavigation?Mie(r):[],r?.bindToComponentInputs?Oi(8,[G2,{provide:xg,useExisting:G2}]).\u0275providers:[],[{provide:_U,useFactory:fU},{provide:EE,multi:!0,useExisting:_U}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Au,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)($(mU,8))},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({}),t})();function Aie(t){return"guarded"}function Mie(t){return["disabled"===t.initialNavigation?Oi(3,[{provide:fE,multi:!0,useFactory:()=>{const e=V(dr);return()=>{e.setUpLocationChangeListener()}}},{provide:YI,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Oi(2,[{provide:YI,useValue:0},{provide:fE,multi:!0,deps:[vn],useFactory:e=>{const n=e.get(FJ,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(dr),s=e.get(pU);cU(i,()=>{r(!0)}),e.get(Og).afterPreactivation=()=>(r(!0),s.closed?z(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const _U=new F("");let Nie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=co({type:t,selectors:[["app-auth"]],decls:7,vars:0,template:function(n,r){1&n&&(ct(0,"h2"),Qn(1,"Auth eader"),Tt(),ct(2,"p"),Qn(3,"auth works!"),Tt(),Wr(4,"router-outlet"),ct(5,"h2"),Qn(6,"Auth footer"),Tt())},dependencies:[Mg]}),t})();function yU(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){yU(s,r,i,o,a,"next",u)}function a(u){yU(s,r,i,o,a,"throw",u)}o(void 0)})}}const x=function(t,e){if(!t)throw Mu(e)},Mu=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},vU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Lg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new kie;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wU=function(t){const e=vU(t);return Lg.encodeByteArray(e,!0)},Vg=function(t){return wU(t).replace(/\./g,"")},Ug=function(t){try{return Lg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Pie(t){return EU(void 0,t)}function EU(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Oie(n)||(t[n]=EU(t[n],e[n]));return t}function Oie(t){return"__proto__"!==t}const Bg=()=>{try{return function Fie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ug(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},IU=t=>{var e,n;return null===(n=null===(e=Bg())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},JI=t=>{const e=IU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CU=()=>{var t;return null===(t=Bg())||void 0===t?void 0:t.config},DU=t=>{var e;return null===(e=Bg())||void 0===e?void 0:e[`_${t}`]};class xu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function bU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vg(JSON.stringify({alg:"none",type:"JWT"})),Vg(JSON.stringify(o)),""].join(".")}function kt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ZI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function eC(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function TU(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function No(){try{return"object"==typeof indexedDB}catch{return!1}}function sd(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function tC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zr.prototype.create)}}class Zr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Hie(t,e){return t.replace(Gie,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new hr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Gie=/\{\$([^}]+)}/g;function od(t){return JSON.parse(t)}function Wt(t){return JSON.stringify(t)}const $g=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=od(Ug(s[0])||""),n=od(Ug(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function Li(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jg(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Hg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(SU(s)&&SU(o)){if(!Hg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function SU(t){return null!==t&&"object"==typeof t}function ad(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ud(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function cd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class Wie{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,l,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),l=1518500249):(c=s^o^a,l=1859775393):d<60?(c=s&o|a&(s|o),l=2400959708):(c=s^o^a,l=3395469782);const h=(i<<5|i>>>27)+c+u+l+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class Qie{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Yie(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=rC),void 0===i.error&&(i.error=rC),void 0===i.complete&&(i.complete=rC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rC(){}const zg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Jie=1e3,Zie=2,ese=144e5,tse=.5;function iC(t,e=Jie,n=Zie){const r=e*Math.pow(n,t),i=Math.round(tse*r*(Math.random()-.5)*2);return Math.min(ese,r+i)}function Kt(t){return t&&t._delegate?t._delegate:t}class Pt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ro="[DEFAULT]";class rse{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function sse(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ro){return this.instances.has(e)}getOptions(e=Ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Ro?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Ro){return this.component?this.component.multipleInstances?e:Ro:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ose{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rse(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const sC=[];var de=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(de||{});const AU={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ase=de.INFO,use={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},cse=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=use[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class ko{constructor(e){this.name=e,this._logLevel=ase,this._logHandler=cse,this._userLogHandler=null,sC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?AU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const lse=(t,e)=>e.some(n=>t instanceof n);let MU,xU;const NU=new WeakMap,oC=new WeakMap,RU=new WeakMap,aC=new WeakMap,uC=new WeakMap;let cC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return oC.get(t);if("objectStoreNames"===e)return t.objectStoreNames||RU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Is(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function _se(t){return"function"==typeof t?function mse(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hse(){return xU||(xU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(lC(this),e),Is(NU.get(this))}:function(...e){return Is(t.apply(lC(this),e))}:function(e,...n){const r=t.call(lC(this),e,...n);return RU.set(r,e.sort?e.sort():[e]),Is(r)}}(t):(t instanceof IDBTransaction&&function pse(t){if(oC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});oC.set(t,e)}(t),lse(t,function dse(){return MU||(MU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,cC):t)}function Is(t){if(t instanceof IDBRequest)return function fse(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Is(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NU.set(n,t)}).catch(()=>{}),uC.set(e,t),e}(t);if(aC.has(t))return aC.get(t);const e=_se(t);return e!==t&&(aC.set(t,e),uC.set(e,t)),e}const lC=t=>uC.get(t),vse=["get","getKey","getAll","getAllKeys","count"],wse=["put","add","delete","clear"],dC=new Map;function kU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(dC.get(e))return dC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=wse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vse.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return dC.set(e,s),s}!function gse(t){cC=t(cC)}(t=>({...t,get:(e,n,r)=>kU(e,n)||t.get(e,n,r),has:(e,n)=>!!kU(e,n)||t.has(e,n)}));class Ese{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Ise(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const hC="@firebase/app",Po=new ko("@firebase/app"),qg="[DEFAULT]",Kse={[hC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Oo=new Map,Wg=new Map;function Qse(t,e){try{t.container.addComponent(e)}catch(n){Po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qt(t){const e=t.name;if(Wg.has(e))return Po.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,t);for(const n of Oo.values())Qse(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Vi=new Zr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}const Ds="9.23.0";function OU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:qg,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Vi.create("bad-app-name",{appName:String(i)});if(n||(n=CU()),!n)throw Vi.create("no-options");const s=Oo.get(i);if(s){if(Hg(n,s.options)&&Hg(r,s.config))return s;throw Vi.create("duplicate-app",{appName:i})}const o=new ose(i);for(const u of Wg.values())o.addComponent(u);const a=new Xse(n,r,o);return Oo.set(i,a),a}function ld(t=qg){const e=Oo.get(t);if(!e&&t===qg&&CU())return OU();if(!e)throw Vi.create("no-app",{appName:t});return e}function FU(){return Array.from(Oo.values())}function Me(t,e,n){var r;let i=null!==(r=Kse[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Po.warn(a.join(" "))}Qt(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Jse="firebase-heartbeat-database",Zse=1,dd="firebase-heartbeat-store";let pC=null;function LU(){return pC||(pC=function yse(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Is(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Is(o.result),u.oldVersion,u.newVersion,Is(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(Jse,Zse,{upgrade:(t,e)=>{0===e&&t.createObjectStore(dd)}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),pC}function gC(){return(gC=m(function*(t){try{return yield(yield LU()).transaction(dd).objectStore(dd).get(UU(t))}catch(e){if(e instanceof hr)Po.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e?.message});Po.warn(n.message)}}})).apply(this,arguments)}function VU(t,e){return mC.apply(this,arguments)}function mC(){return(mC=m(function*(t,e){try{const r=(yield LU()).transaction(dd,"readwrite");yield r.objectStore(dd).put(e,UU(t)),yield r.done}catch(n){if(n instanceof hr)Po.warn(n.message);else{const r=Vi.create("idb-set",{originalErrorMessage:n?.message});Po.warn(r.message)}}})).apply(this,arguments)}function UU(t){return`${t.name}!${t.options.appId}`}class roe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new soe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=BU();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=BU(),{heartbeatsToSend:r,unsentEntries:i}=function ioe(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$U(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$U(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Vg(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function BU(){return(new Date).toISOString().substring(0,10)}class soe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!No()&&sd().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function eoe(t){return gC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return VU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return VU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function $U(t){return Vg(JSON.stringify({version:2,heartbeats:t})).length}!function ooe(t){Qt(new Pt("platform-logger",e=>new Ese(e),"PRIVATE")),Qt(new Pt("heartbeat",e=>new roe(e),"PRIVATE")),Me(hC,"0.9.13",t),Me(hC,"0.9.13","esm2017"),Me("fire-js","")}(""),Me("firebase","9.23.0","app");const coe=(t,e)=>e.some(n=>t instanceof n);let jU,HU;const GU=new WeakMap,_C=new WeakMap,zU=new WeakMap,yC=new WeakMap,vC=new WeakMap;let wC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return _C.get(t);if("objectStoreNames"===e)return t.objectStoreNames||zU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bs(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function moe(t){return"function"==typeof t?function goe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function doe(){return HU||(HU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(EC(this),e),bs(GU.get(this))}:function(...e){return bs(t.apply(EC(this),e))}:function(e,...n){const r=t.call(EC(this),e,...n);return zU.set(r,e.sort?e.sort():[e]),bs(r)}}(t):(t instanceof IDBTransaction&&function foe(t){if(_C.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});_C.set(t,e)}(t),coe(t,function loe(){return jU||(jU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,wC):t)}function bs(t){if(t instanceof IDBRequest)return function hoe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(bs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GU.set(n,t)}).catch(()=>{}),vC.set(e,t),e}(t);if(yC.has(t))return yC.get(t);const e=moe(t);return e!==t&&(yC.set(t,e),vC.set(e,t)),e}const EC=t=>vC.get(t),yoe=["get","getKey","getAll","getAllKeys","count"],voe=["put","add","delete","clear"],IC=new Map;function qU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(IC.get(e))return IC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=voe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!yoe.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return IC.set(e,s),s}!function poe(t){wC=t(wC)}(t=>({...t,get:(e,n,r)=>qU(e,n)||t.get(e,n,r),has:(e,n)=>!!qU(e,n)||t.has(e,n)}));const WU="@firebase/installations",CC="0.6.4",KU=1e4,QU=`w:${CC}`,YU="FIS_v2",woe="https://firebaseinstallations.googleapis.com/v1",Eoe=36e5,Ui=new Zr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function XU(t){return t instanceof hr&&t.code.includes("request-failed")}function DC({projectId:t}){return`${woe}/projects/${t}/installations`}function JU(t){return{token:t.token,requestStatus:2,expiresIn:boe(t.expiresIn),creationTime:Date.now()}}function bC(t,e){return TC.apply(this,arguments)}function TC(){return(TC=m(function*(t,e){const r=(yield e.json()).error;return Ui.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function ZU({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function SC(t){return AC.apply(this,arguments)}function AC(){return(AC=m(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function boe(t){return Number(t.replace("s","000"))}function MC(){return(MC=m(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=DC(t),i=ZU(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:YU,appId:t.appId,sdkVersion:QU})},u=yield SC(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:JU(c.authToken)}}throw yield bC("Create Installation",u)})).apply(this,arguments)}function tB(t){return new Promise(e=>{setTimeout(e,t)})}const Moe=/^[cdef][\w-]{21}$/,xC="";function xoe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Noe(t){return function Aoe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Moe.test(n)?n:xC}catch{return xC}}function Ru(t){return`${t.appName}!${t.appId}`}const ku=new Map;function nB(t,e){const n=Ru(t);rB(n,e),function Poe(t,e){const n=function iB(){return!Fo&&"BroadcastChannel"in self&&(Fo=new BroadcastChannel("[Firebase] FID Change"),Fo.onmessage=t=>{rB(t.data.key,t.data.fid)}),Fo}();n&&n.postMessage({key:t,fid:e}),function sB(){0===ku.size&&Fo&&(Fo.close(),Fo=null)}()}(n,e)}function rB(t,e){const n=ku.get(t);if(n)for(const r of n)r(e)}let Fo=null;const Ooe="firebase-installations-database",Foe=1,Lo="firebase-installations-store";let NC=null;function RC(){return NC||(NC=function _oe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=bs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(bs(o.result),u.oldVersion,u.newVersion,bs(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(Ooe,Foe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Lo)}})),NC}function Kg(t,e){return kC.apply(this,arguments)}function kC(){return(kC=m(function*(t,e){const n=Ru(t),i=(yield RC()).transaction(Lo,"readwrite"),s=i.objectStore(Lo),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&nB(t,e.fid),e})).apply(this,arguments)}function PC(t){return OC.apply(this,arguments)}function OC(){return(OC=m(function*(t){const e=Ru(t),r=(yield RC()).transaction(Lo,"readwrite");yield r.objectStore(Lo).delete(e),yield r.done})).apply(this,arguments)}function hd(t,e){return FC.apply(this,arguments)}function FC(){return(FC=m(function*(t,e){const n=Ru(t),i=(yield RC()).transaction(Lo,"readwrite"),s=i.objectStore(Lo),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&nB(t,a.fid),a})).apply(this,arguments)}function LC(t){return VC.apply(this,arguments)}function VC(){return VC=m(function*(t){let e;const n=yield hd(t.appConfig,r=>{const i=function Loe(t){return aB(t||{fid:xoe(),registrationStatus:0})}(r),s=function Voe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ui.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Uoe(t,e){return UC.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Boe(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===xC?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),VC.apply(this,arguments)}function UC(){return UC=m(function*(t,e){try{const n=yield function Soe(t,e){return MC.apply(this,arguments)}(t,e);return Kg(t.appConfig,n)}catch(n){throw XU(n)&&409===n.customData.serverCode?yield PC(t.appConfig):yield Kg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),UC.apply(this,arguments)}function Boe(t){return BC.apply(this,arguments)}function BC(){return(BC=m(function*(t){let e=yield oB(t.appConfig);for(;1===e.registrationStatus;)yield tB(100),e=yield oB(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield LC(t);return r||n}return e})).apply(this,arguments)}function oB(t){return hd(t,e=>{if(!e)throw Ui.create("installation-not-found");return aB(e)})}function aB(t){return function $oe(t){return 1===t.registrationStatus&&t.registrationTime+KU<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function $C(){return($C=m(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Hoe(t,{fid:e}){return`${DC(t)}/${e}/authTokens:generate`}(t,n),i=function eB(t,{refreshToken:e}){const n=ZU(t);return n.append("Authorization",function Toe(t){return`${YU} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:QU,appId:t.appId}})},u=yield SC(()=>fetch(r,a));if(u.ok)return JU(yield u.json());throw yield bC("Generate Auth Token",u)})).apply(this,arguments)}function jC(t){return HC.apply(this,arguments)}function HC(){return HC=m(function*(t,e=!1){let n;const r=yield hd(t.appConfig,s=>{if(!cB(s))throw Ui.create("not-registered");const o=s.authToken;if(!e&&function qoe(t){return 2===t.requestStatus&&!function Woe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Eoe}(t)}(o))return s;if(1===o.requestStatus)return n=function Goe(t,e){return GC.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Ui.create("app-offline");const a=function Koe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function zoe(t,e){return zC.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),HC.apply(this,arguments)}function GC(){return(GC=m(function*(t,e){let n=yield uB(t.appConfig);for(;1===n.authToken.requestStatus;)yield tB(100),n=yield uB(t.appConfig);const r=n.authToken;return 0===r.requestStatus?jC(t,e):r})).apply(this,arguments)}function uB(t){return hd(t,e=>{if(!cB(e))throw Ui.create("not-registered");return function Qoe(t){return 1===t.requestStatus&&t.requestTime+KU<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function zC(){return zC=m(function*(t,e){try{const n=yield function joe(t,e){return $C.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Kg(t.appConfig,r),n}catch(n){if(!XU(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Kg(t.appConfig,r)}else yield PC(t.appConfig);throw n}}),zC.apply(this,arguments)}function cB(t){return void 0!==t&&2===t.registrationStatus}function qC(){return(qC=m(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield LC(e);return r?r.catch(console.error):jC(e).catch(console.error),n.fid})).apply(this,arguments)}function WC(){return WC=m(function*(t,e=!1){const n=t;return yield function Joe(t){return KC.apply(this,arguments)}(n),(yield jC(n,e)).token}),WC.apply(this,arguments)}function KC(){return(KC=m(function*(t){const{registrationPromise:e}=yield LC(t);e&&(yield e)})).apply(this,arguments)}function XC(t){return Ui.create("missing-app-config-values",{valueName:t})}const lB="installations",rae=t=>{const e=t.getProvider("app").getImmediate(),n=function tae(t){if(!t||!t.options)throw XC("App Configuration");if(!t.name)throw XC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw XC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Cs(e,"heartbeat"),_delete:()=>Promise.resolve()}},iae=t=>{const n=Cs(t.getProvider("app").getImmediate(),lB).getImmediate();return{getId:()=>function Yoe(t){return qC.apply(this,arguments)}(n),getToken:i=>function Xoe(t){return WC.apply(this,arguments)}(n,i)}};(function sae(){Qt(new Pt(lB,rae,"PUBLIC")),Qt(new Pt("installations-internal",iae,"PRIVATE"))})(),Me(WU,CC),Me(WU,CC,"esm2017");const JC="@firebase/remote-config",Fn=new Zr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mae{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function _ae(t=navigator){return t.languages&&t.languages[0]||t.language}class yae{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:_ae()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((w,y)=>{e.signal.addEventListener(()=>{const D=new Error("The operation was aborted.");D.name="AbortError",y(D)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(w){let y="fetch-client-network";throw"AbortError"===w?.name&&(y="fetch-timeout"),Fn.create(y,{originalErrorMessage:w?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,_;if(200===h.status){let w;try{w=yield h.json()}catch(y){throw Fn.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=w.entries,_=w.state}if("INSTANCE_STATE_UNSPECIFIED"===_?f=500:"NO_CHANGE"===_?f=304:("NO_TEMPLATE"===_||"EMPTY_CONFIG"===_)&&(g={}),304!==f&&200!==f)throw Fn.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class Eae{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return m(function*(){yield function vae(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function wae(t){if(!(t instanceof hr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+iC(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Dae{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yg(t,e){const n=t.target.error||void 0;return Fn.create(e,{originalErrorMessage:n&&n?.message})}const Vo="app_namespace_store";class Aae{constructor(e,n,r,i=function Sae(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Yg(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Vo,{keyPath:"compositeKey"})}}catch(n){e(Fn.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Vo],"readonly").objectStore(Vo),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(Yg(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Fn.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([Vo],"readwrite").objectStore(Vo),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(Yg(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Fn.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Vo],"readwrite").objectStore(Vo),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(Yg(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Fn.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Mae{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Nae(){return rD.apply(this,arguments)}function rD(){return(rD=m(function*(){if(!No())return!1;try{return yield sd()}catch{return!1}})).apply(this,arguments)}!function xae(){Qt(new Pt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!No())throw Fn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Fn.create("registration-project-id");if(!o)throw Fn.create("registration-api-key");if(!a)throw Fn.create("registration-app-id");const u=new Aae(a,r.name,n=n||"firebase"),c=new Mae(u),l=new ko(JC);l.logLevel=de.ERROR;const d=new yae(i,Ds,n,s,o,a),h=new Eae(d,u),f=new mae(h,u,c,l),p=new Dae(r,f,c,u,l);return function fae(t){const e=Kt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Me(JC,"0.4.4"),Me(JC,"0.4.4","esm2017")}();const Rae=(t,e)=>e.some(n=>t instanceof n);let pB,gB;const mB=new WeakMap,iD=new WeakMap,_B=new WeakMap,sD=new WeakMap,oD=new WeakMap;let aD={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return iD.get(t);if("objectStoreNames"===e)return t.objectStoreNames||_B.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bi(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Uae(t){return"function"==typeof t?function Vae(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pae(){return gB||(gB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(uD(this),e),Bi(mB.get(this))}:function(...e){return Bi(t.apply(uD(this),e))}:function(e,...n){const r=t.call(uD(this),e,...n);return _B.set(r,e.sort?e.sort():[e]),Bi(r)}}(t):(t instanceof IDBTransaction&&function Fae(t){if(iD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});iD.set(t,e)}(t),Rae(t,function kae(){return pB||(pB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,aD):t)}function Bi(t){if(t instanceof IDBRequest)return function Oae(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Bi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mB.set(n,t)}).catch(()=>{}),oD.set(e,t),e}(t);if(sD.has(t))return sD.get(t);const e=Uae(t);return e!==t&&(sD.set(t,e),oD.set(e,t)),e}const uD=t=>oD.get(t);function yB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Bi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Bi(o.result),u.oldVersion,u.newVersion,Bi(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function cD(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Bi(n).then(()=>{})}const Bae=["get","getKey","getAll","getAllKeys","count"],$ae=["put","add","delete","clear"],lD=new Map;function vB(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(lD.get(e))return lD.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$ae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Bae.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return lD.set(e,s),s}!function Lae(t){aD=t(aD)}(t=>({...t,get:(e,n,r)=>vB(e,n)||t.get(e,n,r),has:(e,n)=>!!vB(e,n)||t.has(e,n)}));const jae="/firebase-messaging-sw.js",Hae="/firebase-cloud-messaging-push-scope",wB="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gae="https://fcmregistrations.googleapis.com/v1",EB="google.c.a.c_id",zae="google.c.a.c_l",qae="google.c.a.ts";var Xg=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Xg||{});function $i(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qae(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const dD="fcm_token_details_db",Yae=5,IB="fcm_token_object_Store";function hD(){return hD=m(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(dD))return null;let e=null;return(yield yB(dD,Yae,{upgrade:(r=m(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(IB))return;const c=a.objectStore(IB),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:$i(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:$i(d.auth),p256dh:$i(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:$i(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:$i(d.auth),p256dh:$i(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:$i(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield cD(dD),yield cD("fcm_vapid_details_db"),yield cD("undefined"),function Jae(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),hD.apply(this,arguments)}const Zae="firebase-messaging-database",eue=1,Uo="firebase-messaging-store";let fD=null;function pD(){return fD||(fD=yB(Zae,eue,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Uo)}})),fD}function CB(t){return gD.apply(this,arguments)}function gD(){return gD=m(function*(t){const e=vD(t),r=yield(yield pD()).transaction(Uo).objectStore(Uo).get(e);if(r)return r;{const i=yield function Xae(t){return hD.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield mD(t,i),i}}),gD.apply(this,arguments)}function mD(t,e){return _D.apply(this,arguments)}function _D(){return(_D=m(function*(t,e){const n=vD(t),i=(yield pD()).transaction(Uo,"readwrite");return yield i.objectStore(Uo).put(e,n),yield i.done,e})).apply(this,arguments)}function yD(){return(yD=m(function*(t){const e=vD(t),r=(yield pD()).transaction(Uo,"readwrite");yield r.objectStore(Uo).delete(e),yield r.done})).apply(this,arguments)}function vD({appConfig:t}){return t.appId}const Yt=new Zr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rue(t,e){return wD.apply(this,arguments)}function wD(){return(wD=m(function*(t,e){const n=yield DD(t),r=bB(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(CD(t.appConfig),i)).json()}catch(o){throw Yt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Yt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Yt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function ED(){return(ED=m(function*(t,e){const n=yield DD(t),r=bB(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${CD(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Yt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Yt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Yt.create("token-update-no-token");return s.token})).apply(this,arguments)}function DB(t,e){return ID.apply(this,arguments)}function ID(){return(ID=m(function*(t,e){const r={method:"DELETE",headers:yield DD(t)};try{const s=yield(yield fetch(`${CD(t.appConfig)}/${e}`,r)).json();if(s.error)throw Yt.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Yt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function CD({projectId:t}){return`${Gae}/projects/${t}/registrations`}function DD(t){return bD.apply(this,arguments)}function bD(){return(bD=m(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function bB({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==wB&&(i.web.applicationPubKey=r),i}const sue=6048e5;function TD(){return TD=m(function*(t){const e=yield function uue(t,e){return xD.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$i(e.getKey("auth")),p256dh:$i(e.getKey("p256dh"))},r=yield CB(t.firebaseDependencies);if(r){if(function cue(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+sue?function aue(t,e){return AD.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield DB(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return SB(t.firebaseDependencies,n)}return SB(t.firebaseDependencies,n)}),TD.apply(this,arguments)}function SD(){return SD=m(function*(t){const e=yield CB(t.firebaseDependencies);e&&(yield DB(t.firebaseDependencies,e.token),yield function tue(t){return yD.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),SD.apply(this,arguments)}function AD(){return AD=m(function*(t,e){try{const n=yield function iue(t,e){return ED.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield mD(t.firebaseDependencies,r),n}catch(n){throw yield function TB(t){return SD.apply(this,arguments)}(t),n}}),AD.apply(this,arguments)}function SB(t,e){return MD.apply(this,arguments)}function MD(){return(MD=m(function*(t,e){const r={token:yield rue(t,e),createTime:Date.now(),subscriptionOptions:e};return yield mD(t,r),r.token})).apply(this,arguments)}function xD(){return(xD=m(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qae(e)})})).apply(this,arguments)}function AB(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function lue(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function due(t,e){e.data&&(t.data=e.data)}(e,t),function hue(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function MB(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function ND(t){return Yt.create("missing-app-config-values",{valueName:t})}MB("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),MB("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gue{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function pue(t){if(!t||!t.options)throw ND("App Configuration Object");if(!t.name)throw ND("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ND(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function RD(){return(RD=m(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(jae,{scope:Hae}),t.swRegistration.update().catch(()=>{})}catch(e){throw Yt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function kD(){return(kD=m(function*(t,e){if(!e&&!t.swRegistration&&(yield function xB(t){return RD.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Yt.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function PD(){return(PD=m(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=wB)})).apply(this,arguments)}function OD(){return OD=m(function*(t,e){if(!navigator)throw Yt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yt.create("permission-blocked");return yield function _ue(t,e){return PD.apply(this,arguments)}(t,e?.vapidKey),yield function mue(t,e){return kD.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function oue(t){return TD.apply(this,arguments)}(t)}),OD.apply(this,arguments)}function FD(){return(FD=m(function*(t,e,n){const r=function vue(t){switch(t){case Xg.NOTIFICATION_CLICKED:return"notification_open";case Xg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[EB],message_name:n[zae],message_time:n[qae],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function LD(){return LD=m(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Xg.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(AB(n)):t.onMessageHandler.next(AB(n)));const r=n.data;(function fue(t){return"object"==typeof t&&!!t&&EB in t})(r)&&"1"===r["google.c.a.e"]&&(yield function yue(t,e,n){return FD.apply(this,arguments)}(t,n.messageType,r))}),LD.apply(this,arguments)}const RB="@firebase/messaging",Eue=t=>{const e=new gue(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function wue(t,e){return LD.apply(this,arguments)}(e,n)),e},Iue=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function NB(t,e){return OD.apply(this,arguments)}(e,r)}};function PB(){return VD.apply(this,arguments)}function VD(){return(VD=m(function*(){try{yield sd()}catch{return!1}return typeof window<"u"&&No()&&tC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cue(){Qt(new Pt("messaging",Eue,"PUBLIC")),Qt(new Pt("messaging-internal",Iue,"PRIVATE")),Me(RB,"0.12.4"),Me(RB,"0.12.4","esm2017")}();const Jg="analytics",Tue="firebase_id",Sue="origin",Aue=6e4,Mue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$D="https://www.googletagmanager.com/gtag/js",Ot=new ko("@firebase/analytics"),Dn=new Zr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Nue(t){if(!t.startsWith($D)){const e=Dn.create("invalid-gtag-resource",{gtagURL:t});return Ot.warn(e.message),""}return t}function OB(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function jD(){return(jD=m(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield OB(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){Ot.error(a)}t("config",i,s)})).apply(this,arguments)}function HD(){return(HD=m(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield OB(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Ot.error(s)}})).apply(this,arguments)}const Bue=30,FB=new class jue{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Hue(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function GD(){return(GD=m(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Hue(r)},s=Mue.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function zD(){return(zD=m(function*(t,e=FB,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Dn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Dn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Kue;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:Aue),LB({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function LB(t,e,n){return qD.apply(this,arguments)}function qD(){return qD=m(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=FB){var s;const{appId:o,measurementId:a}=t;try{yield function que(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function Gue(t){return GD.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function Wue(t){if(!(t instanceof hr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?iC(n,i.intervalMillis,Bue):iC(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),Ot.debug(`Calling attemptFetch again in ${l} millis`),LB(t,d,r,i)}}),qD.apply(this,arguments)}class Kue{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let WD,eb;function KD(){return(KD=m(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function tb(){return(tb=m(function*(){if(!No())return Ot.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield sd()}catch(t){return Ot.warn(Dn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function nb(){return nb=m(function*(t,e,n,r,i,s,o){var a;const u=function zue(t){return zD.apply(this,arguments)}(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Ot.error(f)),e.push(u);const c=function tce(){return tb.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function Uue(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes($D)&&n.src.includes(t))return n;return null})(s)||function kue(t,e){const n=function Rue(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Nue}),r=document.createElement("script"),i=`${$D}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),eb&&(i("consent","default",eb),function VB(t){eb=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Sue]="firebase",h.update=!0,null!=d&&(h[Tue]=d),i("config",l.measurementId,h),WD&&(i("set",WD),function UB(t){WD=t}(void 0)),l.measurementId}),nb.apply(this,arguments)}class rce{constructor(e){this.app=e}_delete(){return delete ei[this.app.options.appId],Promise.resolve()}}let ei={},BB=[];const $B={};let HB,ti,Zg="dataLayer",rb=!1;function sce(t,e,n){!function ice(){const t=[];if(eC()&&t.push("This is a browser extension environment."),tC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Dn.create("invalid-analytics-context",{errorInfo:e});Ot.warn(n.message)}}();const r=t.options.appId;if(!r)throw Dn.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Dn.create("no-api-key");Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ei[r])throw Dn.create("already-exists",{id:r});if(!rb){!function Pue(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Zg);const{wrappedGtag:s,gtagCore:o}=function Vue(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Lue(t,e,n,r){function s(){return s=m(function*(o,...a){try{if("event"===o){const[u,c]=a;yield function Fue(t,e,n,r,i){return HD.apply(this,arguments)}(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield function Oue(t,e,n,r,i,s){return jD.apply(this,arguments)}(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){Ot.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(ei,BB,$B,Zg,"gtag");ti=s,HB=o,rb=!0}return ei[r]=function nce(t,e,n,r,i,s,o){return nb.apply(this,arguments)}(t,BB,$B,e,HB,Zg,n),new rce(t)}function ace(){return ib.apply(this,arguments)}function ib(){return(ib=m(function*(){if(eC()||!tC()||!No())return!1;try{return yield sd()}catch{return!1}})).apply(this,arguments)}const GB="@firebase/analytics";!function cce(){Qt(new Pt(Jg,(e,{options:n})=>sce(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Qt(new Pt("analytics-internal",function t(e){try{const n=e.getProvider(Jg).getImmediate();return{logEvent:(r,i,s)=>function uce(t,e,n,r){t=Kt(t),function Que(t,e,n,r,i){return KD.apply(this,arguments)}(ti,ei[t.app.options.appId],e,n,r).catch(i=>Ot.error(i))}(n,r,i,s)}}catch(n){throw Dn.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Me(GB,"0.10.0"),Me(GB,"0.10.0","esm2017")}();class lce extends $n{constructor(e,n){super()}schedule(e,n=0){return this}}const em={setInterval(t,e,...n){const{delegate:r}=em;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=em;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class qB extends lce{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return em.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&em.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ca(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const WB={now:()=>(WB.delegate||Date).now(),delegate:void 0};class fd{constructor(e,n=fd.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}fd.now=WB.now;class KB extends fd{constructor(e,n=fd.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const fce=new class hce extends KB{}(class dce extends qB{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),pce=new KB(qB),Pu=new Xa("7.6.1"),ob="__angularfire_symbol__analyticsIsSupportedValue",ab="__angularfire_symbol__analyticsIsSupported",ub="__angularfire_symbol__remoteConfigIsSupportedValue",cb="__angularfire_symbol__remoteConfigIsSupported",lb="__angularfire_symbol__messagingIsSupportedValue",db="__angularfire_symbol__messagingIsSupported";function pd(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[ab]||(globalThis[ab]=ace().then(t=>globalThis[ob]=t).catch(()=>globalThis[ob]=!1)),globalThis[db]||(globalThis[db]=PB().then(t=>globalThis[lb]=t).catch(()=>globalThis[lb]=!1)),globalThis[cb]||(globalThis[cb]=Nae().then(t=>globalThis[ub]=t).catch(()=>globalThis[ub]=!1));const gd=(t,e)=>{const n=e?[e]:FU(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Ou(){}class QB{constructor(e,n=fce){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class gce{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ou,{},Ou,Ou)),n.pipe(ln({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let md=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new QB(Zone.current)),this.insideAngular=n.run(()=>new QB(Zone.current,pce)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)($(De))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Bo(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function $o(t){return Bo().ngZone.run(()=>t())}function _ce(t){return Bo(),function yce(t){return function(n){return(n=n.lift(new gce(t.ngZone))).pipe(Ef(t.outsideAngular),wf(t.insideAngular))}}(Bo())(t)}const vce=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),$o(()=>t.apply(void 0,r))},ji=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=$o(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ou,{},Ou,Ou)))),r[s]=vce(r[s],n));const i=function mce(t){return Bo().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof et){const s=Bo();return i.pipe(Ef(s.outsideAngular),wf(s.insideAngular))}return $o(()=>i)}return i instanceof et?i.pipe(_ce):i instanceof Promise?$o(()=>new Promise((s,o)=>i.then(a=>$o(()=>s(a)),a=>$o(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:$o(()=>i)};class Ts{constructor(e){return e}}class _d{constructor(){return FU()}}const fb=new F("angularfire2._apps"),Ece={provide:Ts,useFactory:function wce(t){return t&&1===t.length?t[0]:new Ts(ld())},deps:[[new Ye,fb]]},Ice={provide:_d,deps:[[new Ye,fb]]};function Cce(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Ts(r)}}let Dce=(()=>{class t{constructor(n){Me("angularfire",Pu.full,"core"),Me("angularfire",Pu.full,"app"),Me("angular",cP.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)($(ds))},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({providers:[Ece,Ice]}),t})();function bce(t,...e){return{ngModule:Dce,providers:[{provide:fb,useFactory:Cce(t),multi:!0,deps:[De,vn,md,...e]}]}}const Tce=ji(OU,!0),pb=new Map,YB={activated:!1,tokenObservers:[]},Sce={initialized:!1,enabled:!1};function nt(t){return pb.get(t)||Object.assign({},YB)}function tm(){return Sce}const gb="https://content-firebaseappcheck.googleapis.com/v1",Nce="exchangeDebugToken",XB={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class kce{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return m(function*(){n.stop();try{n.pending=new xu,yield function Pce(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new xu,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Xt=new Zr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mb(t){if(!nt(t).activated)throw Xt.create("use-before-activation",{appName:t.name})}function im(t,e){return yb.apply(this,arguments)}function yb(){return(yb=m(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw Xt.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Xt.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Xt.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Xt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function JB(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${gb}/projects/${n}/apps/${r}:${Nce}?key=${i}`,body:{debug_token:e}}}const Vce="firebase-app-check-database",Uce=1,yd="firebase-app-check-store";let sm=null;function vb(){return(vb=m(function*(t,e){const r=(yield function e$(){return sm||(sm=new Promise((t,e)=>{try{const n=indexedDB.open(Vce,Uce);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Xt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yd,{keyPath:"compositeKey"})}}catch(n){e(Xt.create("storage-open",{originalErrorMessage:n?.message}))}}),sm)}()).transaction(yd,"readwrite"),s=r.objectStore(yd).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Xt.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const vd=new ko("@firebase/app-check");function Ib(t,e){return No()?function $ce(t,e){return function t$(t,e){return vb.apply(this,arguments)}(function r$(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{vd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Db(){return tm().enabled}function bb(){return Tb.apply(this,arguments)}function Tb(){return(Tb=m(function*(){const t=tm();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Wce={error:"UNKNOWN_ERROR"};function Kce(t){return Lg.encodeString(JSON.stringify(t),!1)}function om(t){return Sb.apply(this,arguments)}function Sb(){return(Sb=m(function*(t,e=!1){const n=t.app;mb(n);const r=nt(n);let s,i=r.token;if(i&&!Fu(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Fu(u)?i=u:yield Ib(n,void 0))}if(!e&&i&&Fu(i))return{token:i.token};let a,o=!1;if(Db()){r.exchangeTokenPromise||(r.exchangeTokenPromise=im(JB(n,yield bb()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield Ib(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield nt(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?vd.warn(u.message):vd.error(u),s=u}return i?s?a=Fu(i)?{token:i.token,internalError:s}:a$(s):(a={token:i.token},r.token=i,yield Ib(n,i)):a=a$(s),o&&function o$(t,e){const n=nt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a})).apply(this,arguments)}function i$(t){return Ab.apply(this,arguments)}function Ab(){return(Ab=m(function*(t){const e=t.app;mb(e);const{provider:n}=nt(e);if(Db()){const r=yield bb(),{token:i}=yield im(JB(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function xb(t,e){const n=nt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function s$(t){const{app:e}=t,n=nt(e);let r=n.tokenRefresher;r||(r=function Qce(t){const{app:e}=t;return new kce(m(function*(){let r;if(r=nt(e).token?yield om(t,!0):yield om(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=nt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},XB.RETRIAL_MIN_WAIT,XB.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Fu(t){return t.expireTimeMillis-Date.now()>0}function a$(t){return{token:Kce(Wce),error:t}}class Yce{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=nt(this.app);for(const n of e)xb(this.app,n.next);return Promise.resolve()}}const g$="app-check-internal";!function lle(){Qt(new Pt("app-check",t=>function Xce(t,e){return new Yce(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(g$).initialize()})),Qt(new Pt(g$,t=>function Jce(t){return{getToken:e=>om(t,e),getLimitedUseToken:()=>i$(t),addTokenListener:e=>function Mb(t,e,n,r){const{app:i}=t,s=nt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Fu(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),s$(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>s$(t))}(t,"INTERNAL",e),removeTokenListener:e=>xb(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Me("@firebase/app-check","0.8.0")}();class wd{constructor(){return gd("app-check")}}typeof window<"u"&&window;const gle=function _$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},y$=new Zr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),um=new ko("@firebase/auth");function cm(t,...e){um.logLevel<=de.ERROR&&um.error(`Auth (${Ds}): ${t}`,...e)}function Ln(t,...e){throw Ob(t,...e)}function ni(t,...e){return Ob(t,...e)}function Ob(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return y$.create(t,...e)}function A(t,e,...n){if(!t)throw Ob(e,...n)}function ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cm(e),new Error(e)}function Ss(t,e){t||ri(e)}function Ed(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function w$(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Id{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=ZI()||TU()}get(){return function _le(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Fb(){return"http:"===w$()||"https:"===w$()}()||eC()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lb(t,e){Ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class E${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wle=new Id(3e4,6e4);function Xe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function rt(t,e,n,r){return Vb.apply(this,arguments)}function Vb(){return(Vb=m(function*(t,e,n,r,i={}){return I$(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=ad(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),E$.fetch()(C$(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function I$(t,e,n){return Ub.apply(this,arguments)}function Ub(){return(Ub=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},vle),e);try{const i=new Ele(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Cd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Cd(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw Cd(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw Cd(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function v$(t,e,n){const r=Object.assign(Object.assign({},gle()),{[e]:n});return new Zr("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);Ln(t,l)}}catch(i){if(i instanceof hr)throw i;Ln(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Hi(t,e,n,r){return Bb.apply(this,arguments)}function Bb(){return(Bb=m(function*(t,e,n,r,i={}){const s=yield rt(t,e,n,r,i);return"mfaPendingCredential"in s&&Ln(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function C$(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Lb(t.config,i):`${t.config.apiScheme}://${i}`}class Ele{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),wle.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ni(t,e,r);return i.customData._tokenResponse=n,i}function $b(){return($b=m(function*(t,e){return rt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Hb(){return(Hb=m(function*(t,e){return rt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Dd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Gb(){return(Gb=m(function*(t,e=!1){const n=Kt(t),r=yield n.getIdToken(e),i=lm(r);A(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Dd(zb(i.auth_time)),issuedAtTime:Dd(zb(i.iat)),expirationTime:Dd(zb(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function zb(t){return 1e3*Number(t)}function lm(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return cm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ug(n);return i?JSON.parse(i):(cm("Failed to decode base64 JWT payload"),null)}catch(i){return cm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Gi(t,e){return qb.apply(this,arguments)}function qb(){return(qb=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof hr&&function Sle({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Ale{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class D${constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dd(this.lastLoginAt),this.creationTime=Dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bd(t){return Wb.apply(this,arguments)}function Wb(){return Wb=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Gi(t,function Dle(t,e){return Hb.apply(this,arguments)}(n,{idToken:r}));A(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Nle(t){return t.map(e=>{var{providerId:n}=e,r=Uy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function xle(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new D$(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),Wb.apply(this,arguments)}function Kb(){return(Kb=m(function*(t){const e=Kt(t);yield bd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Qb(){return(Qb=m(function*(t,e){const n=yield I$(t,{},m(function*(){const r=ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=C$(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E$.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Td{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,"internal-error"),A(typeof e.idToken<"u","internal-error"),A(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Tle(t){const e=lm(t);return A(e,"internal-error"),A(typeof e.exp<"u","internal-error"),A(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return A(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Rle(t,e){return Qb.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Td;return r&&(A("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(A("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(A("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Td,this.toJSON())}_performRefresh(){return ri("not implemented")}}function As(t,e){A("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class jo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Uy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ale(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new D$(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield Gi(n,n.stsTokenManager.getToken(n.auth,e));return A(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function ble(t){return Gb.apply(this,arguments)}(this,e)}reload(){return function Mle(t){return Kb.apply(this,arguments)}(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield bd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield Gi(e,function Ile(t,e){return $b.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,_=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,w=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:D,emailVerified:P,isAnonymous:L,providerData:K,stsTokenManager:ot}=n;A(D&&ot,e,"internal-error");const Pr=Td.fromJSON(this.name,ot);A("string"==typeof D,e,"internal-error"),As(d,e.name),As(h,e.name),A("boolean"==typeof P,e,"internal-error"),A("boolean"==typeof L,e,"internal-error"),As(f,e.name),As(p,e.name),As(g,e.name),As(_,e.name),As(w,e.name),As(y,e.name);const so=new jo({uid:D,auth:e,email:h,emailVerified:P,displayName:d,isAnonymous:L,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Pr,createdAt:w,lastLoginAt:y});return K&&Array.isArray(K)&&(so.providerData=K.map(mIe=>Object.assign({},mIe))),_&&(so._redirectEventId=_),so}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new Td;i.updateFromServerResponse(n);const s=new jo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield bd(s),s})()}}const b$=new Map;function zi(t){Ss(t instanceof Function,"Expected a class definition");let e=b$.get(t);return e?(Ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b$.set(t,e),e)}const T$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function dm(t,e,n){return`firebase:${t}:${e}:${n}`}class Vu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=dm(this.userKey,i.apiKey,s),this.fullPersistenceKey=dm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?jo._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new Vu(zi(T$),e,r);const i=(yield Promise.all(n.map(function(){var c=m(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||zi(T$);const o=dm(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=jo._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=m(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Vu(s,e,r)):new Vu(s,e,r)})()}}function S$(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R$(e))return"Blackberry";if(k$(e))return"Webos";if(Yb(e))return"Safari";if((e.includes("chrome/")||M$(e))&&!e.includes("edge/"))return"Chrome";if(N$(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function A$(t=kt()){return/firefox\//i.test(t)}function Yb(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M$(t=kt()){return/crios\//i.test(t)}function x$(t=kt()){return/iemobile/i.test(t)}function N$(t=kt()){return/android/i.test(t)}function R$(t=kt()){return/blackberry/i.test(t)}function k$(t=kt()){return/webos/i.test(t)}function hm(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function P$(t=kt()){return hm(t)||N$(t)||k$(t)||R$(t)||/windows phone/i.test(t)||x$(t)}function O$(t,e=[]){let n;switch(t){case"Browser":n=S$(kt());break;case"Worker":n=`${S$(kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ds}/${r}`}function F$(t,e){return Jb.apply(this,arguments)}function Jb(){return(Jb=m(function*(t,e){return rt(t,"GET","/v2/recaptchaConfig",Xe(t,e))})).apply(this,arguments)}function V$(t){return void 0!==t&&void 0!==t.enterprise}class U${constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}function Zb(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ni("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function Lle(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}function B$(t){return`__${t}${Math.floor(1e6*Math.random())}`}class $${constructor(e){this.type="recaptcha-enterprise",this.auth=Ft(e)}verify(e="verify",n=!1){var r=this;return m(function*(){function s(){return s=m(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=m(function*(c,l){F$(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new U$(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(c,l){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,c){const l=window.grecaptcha;V$(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{u(d)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&V$(window.grecaptcha))o(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));Zb("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,u)}).catch(l=>{u(l)})}}).catch(c=>{u(c)})})})()}}function Ms(t,e,n){return eT.apply(this,arguments)}function eT(){return(eT=m(function*(t,e,n,r=!1){const i=new $$(t);let s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}const o=Object.assign({},e);return Object.assign(o,r?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})).apply(this,arguments)}class $le{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class jle{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j$(this),this.idTokenSubscription=new j$(this),this.beforeStateQueue=new $le(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Vu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return A(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){try{yield bd(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function yle(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?Kt(e):null;return r&&A(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&A(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(zi(e))}))}initializeRecaptchaConfig(){var e=this;return m(function*(){const n=yield F$(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new U$(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new $$(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&zi(e)||n._popupRedirectResolver;A(r,n,"argument-error"),n.redirectPersistenceManager=yield Vu.create(n,[zi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return A(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return m(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function mle(t,...e){um.logLevel<=de.WARN&&um.warn(`Auth (${Ds}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Ft(t){return Kt(t)}class j${constructor(e){this.auth=e,this.observer=null,this.addObserver=function Kie(t,e){const n=new Qie(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function H$(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function G$(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class z${constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,n){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}function W$(t,e){return nT.apply(this,arguments)}function nT(){return(nT=m(function*(t,e){return rt(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function iT(t,e){return sT.apply(this,arguments)}function sT(){return(sT=m(function*(t,e){return Hi(t,"POST","/v1/accounts:signInWithPassword",Xe(t,e))})).apply(this,arguments)}function fT(){return(fT=m(function*(t,e){return Hi(t,"POST","/v1/accounts:signInWithEmailLink",Xe(t,e))})).apply(this,arguments)}function pT(){return(pT=m(function*(t,e){return Hi(t,"POST","/v1/accounts:signInWithEmailLink",Xe(t,e))})).apply(this,arguments)}class Sd extends z${constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){var n=this;return m(function*(){var r;switch(n.signInMethod){case"password":const i={returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(r=e._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const s=yield Ms(e,i,"signInWithPassword");return iT(e,s)}return iT(e,i).catch(function(){var s=m(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield Ms(e,i,"signInWithPassword");return iT(e,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}());case"emailLink":return function Xle(t,e){return fT.apply(this,arguments)}(e,{email:n._email,oobCode:n._password});default:Ln(e,"internal-error")}})()}_linkToIdToken(e,n){var r=this;return m(function*(){switch(r.signInMethod){case"password":return W$(e,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function Jle(t,e){return pT.apply(this,arguments)}(e,{idToken:n,email:r._email,oobCode:r._password});default:Ln(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function qi(t,e){return gT.apply(this,arguments)}function gT(){return(gT=m(function*(t,e){return Hi(t,"POST","/v1/accounts:signInWithIdp",Xe(t,e))})).apply(this,arguments)}class xd{constructor(e){var n,r,i,s,o,a;const u=ud(cd(e)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function sde(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);A(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const n=function ode(t){const e=ud(cd(t)).link,n=e?ud(cd(e)).deep_link_id:null,r=ud(cd(t)).deep_link_id;return(r?ud(cd(r)).link:null)||r||n||e||t}(e);try{return new xd(n)}catch{return null}}}let K$=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Sd._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=xd.parseLink(r);return A(i,"argument-error"),Sd._fromEmailAndCode(n,i.code,i.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class xs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ade extends xs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function gm(t,e){return ET.apply(this,arguments)}function ET(){return(ET=m(function*(t,e){return Hi(t,"POST","/v1/accounts:signUp",Xe(t,e))})).apply(this,arguments)}class fr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(function*(){const s=yield jo._fromIdTokenResponse(e,r,i),o=Q$(r);return new fr({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return m(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Q$(r);return new fr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function Q$(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class mm extends hr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mm.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new mm(e,n,r,i)}}function Y$(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?mm._fromErrorAndOperation(t,s,e,r):s})}function bT(){return(bT=m(function*(t,e,n=!1){const r=yield Gi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return fr._forOperation(t,"link",r)})).apply(this,arguments)}function ST(){return(ST=m(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield Gi(t,Y$(r,i,e,t),n);A(s.idToken,r,"internal-error");const o=lm(s.idToken);A(o,r,"internal-error");const{sub:a}=o;return A(t.uid===a,r,"user-mismatch"),fr._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Ln(r,"user-mismatch"),s}})).apply(this,arguments)}function Z$(t,e){return AT.apply(this,arguments)}function AT(){return(AT=m(function*(t,e,n=!1){const r="signIn",i=yield Y$(t,r,e),s=yield fr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function xT(){return(xT=m(function*(t,e){return Z$(Ft(t),e)})).apply(this,arguments)}function pde(t,e,n){return HT.apply(this,arguments)}function HT(){return HT=m(function*(t,e,n){var r;const i=Ft(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null!==(r=i._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const c=yield Ms(i,s,"signUpPassword");o=gm(i,c)}else o=gm(i,s).catch(function(){var c=m(function*(l){if("auth/missing-recaptcha-token"===l.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=yield Ms(i,s,"signUpPassword");return gm(i,d)}return Promise.reject(l)});return function(l){return c.apply(this,arguments)}}());const a=yield o.catch(c=>Promise.reject(c)),u=yield fr._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(u.user),u}),HT.apply(this,arguments)}function gde(t,e,n){return function MT(t,e){return xT.apply(this,arguments)}(Kt(t),K$.credential(e,n))}const ym="__sak";class tj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ym,"1"),this.storage.removeItem(ym),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rde=(()=>{class t extends tj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mde(){const t=kt();return Yb(t)||hm(t)}()&&function Ole(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=P$(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function Ple(){return function $ie(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return m(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return m(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return m(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),nj=(()=>{class t extends tj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Pde=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return m(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(u).map(function(){var d=m(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function kde(t){return Promise.all(t.map(function(){var e=m(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:l})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function iS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Ode{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return m(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const l=iS("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function yt(){return window}function sS(){return typeof yt().WorkerGlobalScope<"u"&&"function"==typeof yt().importScripts}function oS(){return(oS=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rj="firebaseLocalStorageDb",vm="firebaseLocalStorage",ij="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wm(t,e){return t.transaction([vm],e?"readwrite":"readonly").objectStore(vm)}function aS(){const t=indexedDB.open(rj,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vm,{keyPath:ij})}catch(i){n(i)}}),t.addEventListener("success",m(function*(){const r=t.result;r.objectStoreNames.contains(vm)?e(r):(r.close(),yield function $de(){const t=indexedDB.deleteDatabase(rj);return new Rd(t).toPromise()}(),e(yield aS()))}))})}function sj(t,e,n){return uS.apply(this,arguments)}function uS(){return(uS=m(function*(t,e,n){const r=wm(t,!0).put({[ij]:e,value:n});return new Rd(r).toPromise()})).apply(this,arguments)}function cS(){return(cS=m(function*(t,e){const n=wm(t,!1).get(e),r=yield new Rd(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function oj(t,e){const n=wm(t,!0).delete(e);return new Rd(n).toPromise()}const zde=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return m(function*(){return n.db||(n.db=yield aS()),n.db})()}_withRetries(n){var r=this;return m(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return m(function*(){return sS()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return m(function*(){n.receiver=Pde._getInstance(function Ude(){return sS()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=m(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=m(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return m(function*(){var r,i;if(n.activeServiceWorker=yield function Lde(){return oS.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Ode(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return m(function*(){if(r.sender&&r.activeServiceWorker&&function Vde(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const n=yield aS();return yield sj(n,ym,"1"),yield oj(n,ym),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return m(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(s=>sj(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return m(function*(){const i=yield r._withRetries(s=>function jde(t,e){return cS.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(i=>oj(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return m(function*(){const r=yield n._withRetries(o=>{const a=wm(o,!1).getAll();return new Rd(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();B$("rcb"),new Id(3e4,6e4);class yS extends z${constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ahe(t){return Z$(t.auth,new yS(t),t.bypassAuthState)}function uhe(t){const{auth:e,user:n}=t;return A(n,e,"internal-error"),function J$(t,e){return ST.apply(this,arguments)}(n,new yS(t),t.bypassAuthState)}function che(t){return vS.apply(this,arguments)}function vS(){return(vS=m(function*(t){const{auth:e,user:n}=t;return A(n,e,"internal-error"),function DT(t,e){return bT.apply(this,arguments)}(n,new yS(t),t.bypassAuthState)})).apply(this,arguments)}class lhe{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=m(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(u)(c))}catch(l){n.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ahe;case"linkViaPopup":case"linkViaRedirect":return che;case"reauthViaPopup":case"reauthViaRedirect":return uhe;default:Ln(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Id(2e3,1e4);const dhe="pendingRedirect",kd=new Map;class hhe extends lhe{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return m(function*(){let r=kd.get(n.auth._key());if(!r){try{const s=(yield function fhe(t,e){return DS.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}kd.set(n.auth._key(),r)}return n.bypassAuthState||kd.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return m(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function DS(){return(DS=m(function*(t,e){const n=function cj(t){return dm(dhe,t.config.apiKey,t.name)}(e),r=function uj(t){return zi(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function phe(t,e){kd.set(t._key(),e)}function lj(t,e){return NS.apply(this,arguments)}function NS(){return(NS=m(function*(t,e,n=!1){const r=Ft(t),i=function Go(t,e){return e?zi(e):(A(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),o=yield new hhe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class vhe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function whe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fj(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fj(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hj(e))}saveEventToCache(e){this.cachedEventUids.add(hj(e)),this.lastProcessedEventTime=Date.now()}}function hj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fj({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function kS(){return(kS=m(function*(t,e={}){return rt(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Ihe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Che=/^https?/;function PS(){return PS=m(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function Ehe(t){return kS.apply(this,arguments)}(t);for(const n of e)try{if(bhe(n))return}catch{}Ln(t,"unauthorized-domain")}),PS.apply(this,arguments)}function bhe(t){const e=Ed(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Che.test(n))return!1;if(Ihe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const The=new Id(3e4,6e4);function pj(){const t=yt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Im=null;const Mhe=new Id(5e3,15e3),xhe="__/auth/iframe",Nhe="emulator/auth/iframe",Rhe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},khe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Phe(t){const e=t.config;A(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lb(e,Nhe):`https://${t.config.authDomain}/${xhe}`,r={apiKey:e.apiKey,appName:t.name,v:Ds},i=khe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ad(r).slice(1)}`}function OS(){return OS=m(function*(t){const e=yield function Ahe(t){return Im=Im||function She(t){return new Promise((e,n)=>{var r,i,s;function o(){pj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pj(),n(ni(t,"network-request-failed"))},timeout:The.get()})}if(null!==(i=null===(r=yt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=yt().gapi)||void 0===s||!s.load){const a=B$("iframefcb");return yt()[a]=()=>{gapi.load?o():n(ni(t,"network-request-failed"))},Zb(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}o()}}).catch(e=>{throw Im=null,e})}(t),Im}(t),n=yt().gapi;return A(n,t,"internal-error"),e.open({where:document.body,url:Phe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rhe,dontclear:!0},r=>new Promise(function(){var i=m(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=ni(t,"network-request-failed"),u=yt().setTimeout(()=>{o(a)},Mhe.get());function c(){yt().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),OS.apply(this,arguments)}const Fhe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Hhe="__/auth/handler",Ghe="emulator/auth/handler",zhe=encodeURIComponent("fac");function mj(t,e,n,r,i,s){return FS.apply(this,arguments)}function FS(){return(FS=m(function*(t,e,n,r,i,s){A(t.config.authDomain,t,"auth-domain-config-required"),A(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ds,eventId:i};if(e instanceof xs){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof ade){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const u=yield t._getAppCheckToken(),c=u?`#${zhe}=${encodeURIComponent(u)}`:"";return`${function qhe({config:t}){return t.emulator?Lb(t,Ghe):`https://${t.authDomain}/${Hhe}`}(t)}?${ad(a).slice(1)}${c}`})).apply(this,arguments)}const LS="webStorageSupport",Khe=class Whe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nj,this._completeRedirectFn=lj,this._overrideRedirectResult=phe}_openPopup(e,n,r,i){var s=this;return m(function*(){var o;Ss(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield mj(e,n,r,Ed(),i);return function $he(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Fhe),{width:r.toString(),height:i.toString(),top:s,left:o}),c=kt().toLowerCase();n&&(a=M$(c)?"_blank":n),A$(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function kle(t=kt()){var e;return hm(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function jhe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new gj(null);const d=window.open(e||"",a,l);A(d,t,"popup-blocked");try{d.focus()}catch{}return new gj(d)}(e,a,iS())})()}_openRedirect(e,n,r,i){var s=this;return m(function*(){return yield s._originValidation(e),function Fde(t){yt().location.href=t}(yield mj(e,n,r,Ed(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ss(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return m(function*(){const r=yield function Ohe(t){return OS.apply(this,arguments)}(e),i=new vhe(e);return r.register("authEvent",s=>(A(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(LS,{type:LS},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[LS];void 0!==o&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Dhe(t){return PS.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return P$()||Yb()||hm()}};var vj="@firebase/auth";class Qhe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Zhe=DU("authIdTokenMaxAge")||300;let Ej=null;const efe=t=>function(){var e=m(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Zhe)return;const s=r?.token;Ej!==s&&(Ej=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function tfe(t=ld()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function Hle(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Hg(n.getOptions(),e??{}))return i;Ln(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Khe,persistence:[zde,Rde,nj]}),r=DU("authTokenSyncURL");if(r){const s=efe(r);(function Dde(t,e,n){Kt(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Cde(t,e,n,r){Kt(t).onIdTokenChanged(e,n,r)}(n,o=>s(o))}const i=IU("auth");return i&&function zle(t,e,n){const r=Ft(t);A(r._canInitEmulator,r,"emulator-config-failed"),A(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=H$(e),{host:o,port:a}=function qle(t){const e=H$(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:G$(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:G$(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Wle(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}!function Xhe(t){Qt(new Pt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;A(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O$(t)},c=new jle(r,i,s,u);return function Gle(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qt(new Pt("auth-internal",e=>{const n=Ft(e.getProvider("auth").getImmediate());return new Qhe(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(vj,"0.23.2",function Yhe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Me(vj,"0.23.2","esm2017")}("Browser");class Bu{constructor(e){return e}}class Dm{constructor(){return gd("auth")}}const US=new F("angularfire2.auth-instances");function rfe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Bu(r)}}const ife={provide:Dm,deps:[[new Ye,US]]},sfe={provide:Bu,useFactory:function nfe(t,e){const n=pd("auth",t,e);return n&&new Bu(n)},deps:[[new Ye,US],Ts]};let ofe=(()=>{class t{constructor(){Me("angularfire",Pu.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({providers:[sfe,ife]}),t})();function afe(t,...e){return{ngModule:ofe,providers:[{provide:US,useFactory:rfe(t),multi:!0,deps:[De,vn,md,_d,[new Ye,wd],...e]}]}}const Cj=ji(pde,!0),ufe=ji(tfe,!0),Dj=ji(gde,!0);let cfe=(()=>{class t{constructor(n){this.auth=n}handleLogin(n){Dj(this.auth,n.email,n.password).then(r=>{console.log(r.user)}).catch(r=>{alert(r.message)})}}return t.\u0275fac=function(n){return new(n||t)(b(Bu))},t.\u0275cmp=co({type:t,selectors:[["app-login"]],decls:11,vars:0,consts:[[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","email","ngModel","","placeholder","Email","id","email","type","email",1,"input-field"],["name","password","ngModel","","placeholder","Password","id","password","type","password",1,"input-field"]],template:function(n,r){if(1&n){const i=Fw();ct(0,"p"),Qn(1,"login works!"),Tt(),ct(2,"form",0,1),Pn("ngSubmit",function(){uv(i);const o=Rw(3);return cv(r.handleLogin(o.value))}),ct(4,"div",2)(5,"div",3),Wr(6,"input",4),Tt(),ct(7,"div",3),Wr(8,"input",5),Tt(),ct(9,"button"),Qn(10,"Sign In"),Tt()()()}},dependencies:[yI,Fl,aI,uI,yg,$l],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})();var R,lfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sr={},BS=BS||{},Y=lfe||self;function bm(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Pd(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var $S="closure_uid_"+(1e9*Math.random()>>>0),hfe=0;function ffe(t,e,n){return t.call.apply(t.bind,arguments)}function pfe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function dn(t,e,n){return(dn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ffe:pfe).apply(null,arguments)}function Tm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Lt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ns(){this.s=this.s,this.o=this.o}Ns.prototype.s=!1,Ns.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function dfe(t){Object.prototype.hasOwnProperty.call(t,$S)&&t[$S]||(t[$S]=++hfe)}(this)},Ns.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bj=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function jS(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Tj(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(bm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function hn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var mfe=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Y.addEventListener("test",()=>{},e),Y.removeEventListener("test",()=>{},e)}catch{}return t}();function Od(t){return/^[\s\xa0]*$/.test(t)}function Sm(){var t=Y.navigator;return t&&(t=t.userAgent)?t:""}function ii(t){return-1!=Sm().indexOf(t)}function HS(t){return HS[" "](t),t}HS[" "]=function(){};var zS,t,yfe=ii("Opera"),$u=ii("Trident")||ii("MSIE"),Sj=ii("Edge"),GS=Sj||$u,Aj=ii("Gecko")&&!(-1!=Sm().toLowerCase().indexOf("webkit")&&!ii("Edge"))&&!(ii("Trident")||ii("MSIE"))&&!ii("Edge"),vfe=-1!=Sm().toLowerCase().indexOf("webkit")&&!ii("Edge");function Mj(){var t=Y.document;return t?t.documentMode:void 0}e:{var qS="",WS=(t=Sm(),Aj?/rv:([^\);]+)(\)|;)/.exec(t):Sj?/Edge\/([\d\.]+)/.exec(t):$u?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):vfe?/WebKit\/(\S+)/.exec(t):yfe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(WS&&(qS=WS?WS[1]:""),$u){var KS=Mj();if(null!=KS&&KS>parseFloat(qS)){zS=String(KS);break e}}zS=qS}var wfe=Y.document&&$u&&(Mj()||parseInt(zS,10))||void 0;function Fd(t,e){if(hn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Aj){e:{try{HS(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Efe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Fd.$.h.call(this)}}Lt(Fd,hn);var Efe={2:"touch",3:"pen",4:"mouse"};Fd.prototype.h=function(){Fd.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ld="closure_listenable_"+(1e6*Math.random()|0),Ife=0;function Cfe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Ife,this.fa=this.ia=!1}function Am(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function YS(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Nj(t){const e={};for(const n in t)e[n]=t[n];return e}const Rj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kj(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<Rj.length;s++)n=Rj[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Mm(t){this.src=t,this.g={},this.h=0}function XS(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=bj(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Am(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function JS(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Mm.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=JS(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Cfe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var ZS="closure_lm_"+(1e6*Math.random()|0),e0={};function Pj(t,e,n,r,i){if(r&&r.once)return Fj(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Pj(t,e[s],n,r,i);return null}return n=s0(n),t&&t[Ld]?t.O(e,n,Pd(r)?!!r.capture:!!r,i):Oj(t,e,n,!1,r,i)}function Oj(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Pd(i)?!!i.capture:!!i,a=n0(t);if(a||(t[ZS]=a=new Mm(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function bfe(){const e=Tfe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mfe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Vj(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Fj(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Fj(t,e[s],n,r,i);return null}return n=s0(n),t&&t[Ld]?t.P(e,n,Pd(r)?!!r.capture:!!r,i):Oj(t,e,n,!0,r,i)}function Lj(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Lj(t,e[s],n,r,i);else r=Pd(r)?!!r.capture:!!r,n=s0(n),t&&t[Ld]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=JS(s=t.g[e],n,r,i))&&(Am(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=n0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=JS(e,n,r,i)),(n=-1<t?e[t]:null)&&t0(n))}function t0(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Ld])XS(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Vj(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=n0(e))?(XS(n,t),0==n.h&&(n.src=null,e[ZS]=null)):Am(t)}}}function Vj(t){return t in e0?e0[t]:e0[t]="on"+t}function Tfe(t,e){if(t.fa)t=!0;else{e=new Fd(e,this);var n=t.listener,r=t.la||t.src;t.ia&&t0(t),t=n.call(r,e)}return t}function n0(t){return(t=t[ZS])instanceof Mm?t:null}var r0="__closure_events_fn_"+(1e9*Math.random()>>>0);function s0(t){return"function"==typeof t?t:(t[r0]||(t[r0]=function(e){return t.handleEvent(e)}),t[r0])}function Vt(){Ns.call(this),this.i=new Mm(this),this.S=this,this.J=null}function Jt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new hn(e,t);else if(e instanceof hn)e.target=e.target||t;else{var i=e;kj(e=new hn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=xm(o,r,!0,e)&&i}if(i=xm(o=e.g=t,r,!0,e)&&i,i=xm(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=xm(o=e.g=n[s],r,!1,e)&&i}function xm(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&XS(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Lt(Vt,Ns),Vt.prototype[Ld]=!0,Vt.prototype.removeEventListener=function(t,e,n,r){Lj(this,t,e,n,r)},Vt.prototype.N=function(){if(Vt.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Am(n[r]);delete t.g[e],t.h--}}this.J=null},Vt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Vt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var o0=Y.JSON.stringify;function Afe(){var t=a0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Uj=new class Sfe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new xfe,t=>t.reset());class xfe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Nfe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Rfe(t){Y.setTimeout(()=>{throw t},0)}let Vd,Ud=!1,a0=new class Mfe{constructor(){this.h=this.g=null}add(e,n){const r=Uj.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Bj=()=>{const t=Y.Promise.resolve(void 0);Vd=()=>{t.then(kfe)}};var kfe=()=>{for(var t;t=Afe();){try{t.h.call(t.g)}catch(n){Rfe(n)}var e=Uj;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ud=!1};function Nm(t,e){Vt.call(this),this.h=t||1,this.g=e||Y,this.j=dn(this.qb,this),this.l=Date.now()}function u0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function c0(t,e,n){if("function"==typeof t)n&&(t=dn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=dn(t.handleEvent,t)}return 2147483647<Number(e)?-1:Y.setTimeout(t,e||0)}function $j(t){t.g=c0(()=>{t.g=null,t.i&&(t.i=!1,$j(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Lt(Nm,Vt),(R=Nm.prototype).ga=!1,R.T=null,R.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jt(this,"tick"),this.ga&&(u0(this),this.start()))}},R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},R.N=function(){Nm.$.N.call(this),u0(this),delete this.g};class Pfe extends Ns{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$j(this)}N(){super.N(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bd(t){Ns.call(this),this.h=t,this.g={}}Lt(Bd,Ns);var jj=[];function Hj(t,e,n,r){Array.isArray(n)||(n&&(jj[0]=n.toString()),n=jj);for(var i=0;i<n.length;i++){var s=Pj(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Gj(t){YS(t.g,function(e,n){this.g.hasOwnProperty(n)&&t0(e)},t),t.g={}}function Rm(){this.g=!0}function ju(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Vfe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return o0(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Bd.prototype.N=function(){Bd.$.N.call(this),Gj(this)},Bd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rm.prototype.Ea=function(){this.g=!1},Rm.prototype.info=function(){};var zo={},zj=null;function km(){return zj=zj||new Vt}function qj(t){hn.call(this,zo.Ta,t)}function $d(t){const e=km();Jt(e,new qj(e))}function Wj(t,e){hn.call(this,zo.STAT_EVENT,t),this.stat=e}function bn(t){const e=km();Jt(e,new Wj(e,t))}function Kj(t,e){hn.call(this,zo.Ua,t),this.size=e}function jd(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){t()},e)}zo.Ta="serverreachability",Lt(qj,hn),zo.STAT_EVENT="statevent",Lt(Wj,hn),zo.Ua="timingevent",Lt(Kj,hn);var Pm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qj={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function l0(){}function Xj(){}l0.prototype.h=null;var f0,Hd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function d0(){hn.call(this,"d")}function h0(){hn.call(this,"c")}function Om(){}function Gd(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Bd(this),this.P=Ufe,this.V=new Nm(t=GS?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jj}function Jj(){this.i=null,this.g="",this.h=!1}Lt(d0,hn),Lt(h0,hn),Lt(Om,l0),Om.prototype.g=function(){return new XMLHttpRequest},Om.prototype.i=function(){return{}},f0=new Om;var Ufe=45e3,p0={},Fm={};function g0(t,e,n){t.L=1,t.v=Bm(Wi(e)),t.s=n,t.S=!0,Zj(t,null)}function Zj(t,e){t.G=Date.now(),zd(t),t.A=Wi(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),cH(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Jj,t.g=kH(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Pfe(dn(t.Pa,t,t.g),t.O)),Hj(t.U,t.g,"readystatechange",t.nb),e=t.I?Nj(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),$d(),function Ofe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function eH(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function tH(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=Bfe(t,n),i==Fm){4==e&&(t.o=4,bn(14),r=!1),ju(t.j,t.m,null,"[Incomplete Response]");break}if(i==p0){t.o=4,bn(15),ju(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}ju(t.j,t.m,i,null),m0(t,i)}eH(t)&&i!=Fm&&i!=p0&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,bn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),C0(e),e.M=!0,bn(11))):(ju(t.j,t.m,n,"[Invalid Chunked Response]"),qo(t),qd(t))}function Bfe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Fm:(n=Number(e.substring(n,r)),isNaN(n)?p0:(r+=1)+n>e.length?Fm:(e=e.slice(r,r+n),t.C=r+n,e))}function zd(t){t.Y=Date.now()+t.P,nH(t,t.P)}function nH(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=jd(dn(t.lb,t),e)}function Lm(t){t.B&&(Y.clearTimeout(t.B),t.B=null)}function qd(t){0==t.l.H||t.J||MH(t.l,t)}function qo(t){Lm(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,u0(t.V),Gj(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function m0(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||_0(n.i,t)))if(!t.K&&_0(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;qm(n),Gm(n)}I0(n),bn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=jd(dn(n.ib,n),6e3));if(1>=hH(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ko(n,11)}else if((t.K||n.g==t)&&qm(n),!Od(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(y0(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,$e(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=RH(r,r.J?r.pa:null,r.Y),o.K){fH(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(Lm(a),zd(a)),r.g=o}else SH(r);0<n.j.length&&zm(n)}else"stop"!=c[0]&&"close"!=c[0]||Ko(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ko(n,7):E0(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}$d()}catch{}}function rH(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bm(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function jfe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(bm(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function $fe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(bm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(R=Gd.prototype).setTimeout=function(t){this.P=t},R.nb=function(t){t=t.target;const e=this.M;e&&3==si(t)?e.l():this.Pa(t)},R.Pa=function(t){try{if(t==this.g)e:{const l=si(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||GS||this.g&&(this.h.h||this.g.ja()||EH(this.g)))){this.J||4!=l||7==e||$d(),Lm(this);var n=this.g.da();this.ca=n;t:if(eH(this)){var r=EH(this.g);t="";var i=r.length,s=4==si(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qo(this),qd(this);var o="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function Ffe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Od(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,bn(12),qo(this),qd(this);break e}ju(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,m0(this,n)}this.S?(tH(this,l,o),GS&&this.i&&3==l&&(Hj(this.U,this.V,"tick",this.mb),this.V.start())):(ju(this.j,this.m,o,null),m0(this,o)),4==l&&qo(this),this.i&&!this.J&&(4==l?MH(this.l,this):(this.i=!1,zd(this)))}else(function ope(t){const e={};t=(t.g&&2<=si(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Od(t[r]))continue;var n=Nfe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function Dfe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,bn(12)):(this.o=0,bn(13)),qo(this),qd(this)}}}catch{}},R.mb=function(){if(this.g){var t=si(this.g),e=this.g.ja();this.C<e.length&&(Lm(this),tH(this,t,e),this.i&&4!=t&&zd(this))}},R.cancel=function(){this.J=!0,qo(this)},R.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function Lfe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($d(),bn(17)),qo(this),this.o=2,qd(this)):nH(this,this.Y-t)};var iH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Wo){this.h=t.h,Vm(this,t.j),this.s=t.s,this.g=t.g,Um(this,t.m),this.l=t.l;var e=t.i,n=new Qd;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),sH(this,n),this.o=t.o}else t&&(e=String(t).match(iH))?(this.h=!1,Vm(this,e[1]||"",!0),this.s=Wd(e[2]||""),this.g=Wd(e[3]||"",!0),Um(this,e[4]),this.l=Wd(e[5]||"",!0),sH(this,e[6]||"",!0),this.o=Wd(e[7]||"")):(this.h=!1,this.i=new Qd(null,this.h))}function Wi(t){return new Wo(t)}function Vm(t,e,n){t.j=n?Wd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Um(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sH(t,e,n){e instanceof Qd?(t.i=e,function Qfe(t,e){e&&!t.j&&(Rs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(aH(this,r),cH(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Kd(e,Wfe)),t.i=new Qd(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function Bm(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kd(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Gfe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gfe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Wo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Kd(e,oH,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Kd(e,oH,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kd(n,"/"==n.charAt(0)?qfe:zfe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Kd(n,Kfe)),t.join("")};var oH=/[#\/\?@]/g,zfe=/[#\?:]/g,qfe=/[#\?]/g,Wfe=/[#\?@]/g,Kfe=/#/g;function Qd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Rs(t){t.g||(t.g=new Map,t.h=0,t.i&&function Hfe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function aH(t,e){Rs(t),e=Hu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function uH(t,e){return Rs(t),e=Hu(t,e),t.g.has(e)}function cH(t,e,n){aH(t,e),0<n.length&&(t.i=null,t.g.set(Hu(t,e),jS(n)),t.h+=n.length)}function Hu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function lH(t){this.l=t||Xfe,t=Y.PerformanceNavigationTiming?0<(t=Y.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Y.g&&Y.g.Ka&&Y.g.Ka()&&Y.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(R=Qd.prototype).add=function(t,e){Rs(this),this.i=null,t=Hu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},R.forEach=function(t,e){Rs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},R.ta=function(){Rs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},R.Z=function(t){Rs(this);let e=[];if("string"==typeof t)uH(this,t)&&(e=e.concat(this.g.get(Hu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},R.set=function(t,e){return Rs(this),this.i=null,uH(this,t=Hu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},R.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var Xfe=10;function dH(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hH(t){return t.h?1:t.g?t.g.size:0}function _0(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function y0(t,e){t.g?t.g.add(e):t.h=e}function fH(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pH(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return jS(t.i)}lH.prototype.cancel=function(){if(this.i=pH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Jfe=class{stringify(t){return Y.JSON.stringify(t,void 0)}parse(t){return Y.JSON.parse(t,void 0)}};function Zfe(){this.g=new Jfe}function epe(t,e,n){const r=n||"";try{rH(t,function(i,s){let o=i;Pd(i)&&(o=o0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $m(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yd(t){this.l=t.fc||null,this.j=t.ob||!1}function jm(t,e){Vt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=v0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lt(Yd,l0),Yd.prototype.g=function(){return new jm(this.l,this.j)},Yd.prototype.i=function(t){return function(){return t}}({}),Lt(jm,Vt);var v0=0;function gH(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Xd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Jd(t)}function Jd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(R=jm.prototype).open=function(t,e){if(this.readyState!=v0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Jd(this)},R.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Y).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xd(this)),this.readyState=v0},R.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Jd(this)),this.g&&(this.readyState=3,Jd(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gH(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},R.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xd(this):Jd(this),3==this.readyState&&gH(this)}},R.Za=function(t){this.g&&(this.response=this.responseText=t,Xd(this))},R.Ya=function(t){this.g&&(this.response=t,Xd(this))},R.ka=function(){this.g&&Xd(this)},R.setRequestHeader=function(t,e){this.v.append(t,e)},R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},R.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(jm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var npe=Y.JSON.parse;function it(t){Vt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mH,this.L=this.M=!1}Lt(it,Vt);var mH="",rpe=/^https?$/i,ipe=["POST","PUT"];function _H(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,yH(t),Hm(t)}function yH(t){t.F||(t.F=!0,Jt(t,"complete"),Jt(t,"error"))}function vH(t){if(t.h&&typeof BS<"u"&&(!t.C[1]||4!=si(t)||2!=t.da()))if(t.v&&4==si(t))c0(t.La,0,t);else if(Jt(t,"readystatechange"),4==si(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(iH)[1]||null;!i&&Y.self&&Y.self.location&&(i=Y.self.location.protocol.slice(0,-1)),r=!rpe.test(i?i.toLowerCase():"")}n=r}if(n)Jt(t,"complete"),Jt(t,"success");else{t.m=6;try{var s=2<si(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",yH(t)}}finally{Hm(t)}}}function Hm(t,e){if(t.g){wH(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Jt(t,"ready");try{n.onreadystatechange=r}catch{}}}function wH(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Y.clearTimeout(t.A),t.A=null)}function si(t){return t.g?t.g.readyState:0}function EH(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case mH:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function IH(t){let e="";return YS(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function w0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=IH(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$e(t,e,n))}function Zd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function CH(t){this.Ga=0,this.j=[],this.l=new Rm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zd("baseRetryDelayMs",5e3,t),this.hb=Zd("retryDelaySeedMs",1e4,t),this.eb=Zd("forwardChannelMaxRetries",2,t),this.xa=Zd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new lH(t&&t.concurrentRequestLimit),this.Ja=new Zfe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function E0(t){if(DH(t),3==t.H){var e=t.W++,n=Wi(t.I);if($e(n,"SID",t.K),$e(n,"RID",e),$e(n,"TYPE","terminate"),eh(t,n),(e=new Gd(t,t.l,e)).L=2,e.v=Bm(Wi(n)),n=!1,Y.navigator&&Y.navigator.sendBeacon)try{n=Y.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Y.Image&&((new Image).src=e.v,n=!0),n||(e.g=kH(e.l,null),e.g.ha(e.v)),e.G=Date.now(),zd(e)}NH(t)}function Gm(t){t.g&&(C0(t),t.g.cancel(),t.g=null)}function DH(t){Gm(t),t.u&&(Y.clearTimeout(t.u),t.u=null),qm(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Y.clearTimeout(t.m),t.m=null)}function zm(t){if(!dH(t.i)&&!t.m){t.m=!0;var e=t.Na;Vd||Bj(),Ud||(Vd(),Ud=!0),a0.add(e,t),t.C=0}}function bH(t,e){var n;n=e?e.m:t.W++;const r=Wi(t.I);$e(r,"SID",t.K),$e(r,"RID",n),$e(r,"AID",t.V),eh(t,r),t.o&&t.s&&w0(r,t.o,t.s),n=new Gd(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=TH(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),y0(t.i,n),g0(n,r,e)}function eh(t,e){t.na&&YS(t.na,function(n,r){$e(e,r,n)}),t.h&&rH({},function(n,r){$e(e,r,n)})}function TH(t,e,n){n=Math.min(t.j.length,n);var r=t.h?dn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{epe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function SH(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vd||Bj(),Ud||(Vd(),Ud=!0),a0.add(e,t),t.A=0}}function I0(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=jd(dn(t.Ma,t),xH(t,t.A)),t.A++,0))}function C0(t){null!=t.B&&(Y.clearTimeout(t.B),t.B=null)}function AH(t){t.g=new Gd(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Wi(t.wa);$e(e,"RID","rpc"),$e(e,"SID",t.K),$e(e,"AID",t.V),$e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&$e(e,"TO",t.qa),$e(e,"TYPE","xmlhttp"),eh(t,e),t.o&&t.s&&w0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Bm(Wi(e)),n.s=null,n.S=!0,Zj(n,t)}function qm(t){null!=t.v&&(Y.clearTimeout(t.v),t.v=null)}function MH(t,e){var n=null;if(t.g==e){qm(t),C0(t),t.g=null;var r=2}else{if(!_0(t.i,e))return;n=e.F,fH(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Jt(r=km(),new Kj(r,n)),zm(t)}else SH(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function ape(t,e){return!(hH(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=jd(dn(t.Na,t,e),xH(t,t.C)),t.C++,0)))}(t,e)||2==r&&I0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ko(t,5);break;case 4:Ko(t,10);break;case 3:Ko(t,6);break;default:Ko(t,2)}}function xH(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ko(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=dn(t.pb,t);n||(n=new Wo("//www.google.com/images/cleardot.gif"),Y.location&&"http"==Y.location.protocol||Vm(n,"https"),Bm(n)),function tpe(t,e){const n=new Rm;if(Y.Image){const r=new Image;r.onload=Tm($m,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Tm($m,n,r,"TestLoadImage: error",!1,e),r.onabort=Tm($m,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Tm($m,n,r,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else bn(2);t.H=0,t.h&&t.h.za(e),NH(t),DH(t)}function NH(t){if(t.H=0,t.ma=[],t.h){const e=pH(t.i);(0!=e.length||0!=t.j.length)&&(Tj(t.ma,e),Tj(t.ma,t.j),t.i.i.length=0,jS(t.j),t.j.length=0),t.h.ya()}}function RH(t,e,n){var r=n instanceof Wo?Wi(n):new Wo(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Um(r,r.m);else{var i=Y.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Wo(null);r&&Vm(s,r),e&&(s.g=e),i&&Um(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&$e(r,n,e),$e(r,"VER",t.ra),eh(t,r),r}function kH(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new it(n&&t.Ha&&!t.va?new Yd({ob:!0}):t.va)).Oa(t.J),e}function PH(){}function Wm(){if($u&&!(10<=Number(wfe)))throw Error("Environmental error: no available transport.")}function Xn(t,e){Vt.call(this),this.g=new CH(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Od(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Od(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Gu(this)}function OH(t){d0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function FH(){h0.call(this),this.status=1}function Gu(t){this.g=t}function Ar(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function D0(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Te(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(R=it.prototype).Oa=function(t){this.M=t},R.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():f0.g(),this.C=function Yj(t){return t.h||(t.h=t.i())}(this.u?this.u:f0),this.g.onreadystatechange=dn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void _H(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Y.FormData&&t instanceof Y.FormData,!(0<=bj(ipe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wH(this),0<this.B&&((this.L=function spe(t){return $u&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dn(this.ua,this)):this.A=c0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){_H(this,s)}},R.ua=function(){typeof BS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jt(this,"timeout"),this.abort(8))},R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Jt(this,"complete"),Jt(this,"abort"),Hm(this))},R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hm(this,!0)),it.$.N.call(this)},R.La=function(){this.s||(this.G||this.v||this.l?vH(this):this.kb())},R.kb=function(){vH(this)},R.isActive=function(){return!!this.g},R.da=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},R.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),npe(e)}},R.Ia=function(){return this.m},R.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(R=CH.prototype).ra=8,R.H=1,R.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Gd(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Nj(s),kj(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=TH(this,i,e),$e(n=Wi(this.I),"RID",t),$e(n,"CVER",22),this.F&&$e(n,"X-HTTP-Session-Id",this.F),eh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(IH(s)))+"&"+e:this.o&&w0(n,this.o,s)),y0(this.i,i),this.bb&&$e(n,"TYPE","init"),this.P?($e(n,"$req",e),$e(n,"SID","null"),i.aa=!0,g0(i,n,null)):g0(i,n,e),this.H=2}}else 3==this.H&&(t?bH(this,t):0==this.j.length||dH(this.i)||bH(this))},R.Ma=function(){if(this.u=null,AH(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=jd(dn(this.jb,this),t)}},R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,bn(10),Gm(this),AH(this))},R.ib=function(){null!=this.v&&(this.v=null,Gm(this),I0(this),bn(19))},R.pb=function(t){t?(this.l.info("Successfully pinged google.com"),bn(2)):(this.l.info("Failed to ping google.com"),bn(1))},R.isActive=function(){return!!this.h&&this.h.isActive(this)},(R=PH.prototype).Ba=function(){},R.Aa=function(){},R.za=function(){},R.ya=function(){},R.isActive=function(){return!0},R.Va=function(){},Wm.prototype.g=function(t,e){return new Xn(t,e)},Lt(Xn,Vt),Xn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;bn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=RH(t,null,t.Y),zm(t)},Xn.prototype.close=function(){E0(this.g)},Xn.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=o0(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&zm(e)},Xn.prototype.N=function(){this.g.h=null,delete this.j,E0(this.g),delete this.g,Xn.$.N.call(this)},Lt(OH,d0),Lt(FH,h0),Lt(Gu,PH),Gu.prototype.Ba=function(){Jt(this.g,"a")},Gu.prototype.Aa=function(t){Jt(this.g,new OH(t))},Gu.prototype.za=function(t){Jt(this.g,new FH)},Gu.prototype.ya=function(){Jt(this.g,"b")},Lt(Ar,function upe(){this.blockSize=-1}),Ar.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ar.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)D0(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){D0(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){D0(this,r),i=0;break}}this.h=i,this.i+=e},Ar.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var cpe={};function b0(t){return-128<=t&&128>t?function _fe(t,e){var n=cpe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Te([0|e],0>e?-1:0)}):new Te([0|t],0>t?-1:0)}function oi(t){if(isNaN(t)||!isFinite(t))return zu;if(0>t)return Zt(oi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=T0;return new Te(e,0)}var T0=4294967296,zu=b0(0),S0=b0(1),VH=b0(16777216);function Ki(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function pr(t){return-1==t.h}function Zt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Te(n,~t.h).add(S0)}function Km(t,e){return t.add(Zt(e))}function Qm(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function th(t,e){this.g=t,this.h=e}function Ym(t,e){if(Ki(e))throw Error("division by zero");if(Ki(t))return new th(zu,zu);if(pr(t))return e=Ym(Zt(t),e),new th(Zt(e.g),Zt(e.h));if(pr(e))return e=Ym(t,Zt(e)),new th(Zt(e.g),e.h);if(30<t.g.length){if(pr(t)||pr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=S0,r=e;0>=r.X(t);)n=UH(n),r=UH(r);var i=qu(n,1),s=qu(r,1);for(r=qu(r,2),n=qu(n,2);!Ki(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=qu(r,1),n=qu(n,1)}return e=Km(t,i.R(e)),new th(i,e)}for(i=zu;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=oi(n)).R(e);pr(o)||0<o.X(t);)o=(s=oi(n-=r)).R(e);Ki(s)&&(s=S0),i=i.add(s),t=Km(t,o)}return new th(i,t)}function UH(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Te(n,t.h)}function qu(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Te(i,t.h)}(R=Te.prototype).ea=function(){if(pr(this))return-Zt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:T0+r)*e,e*=T0}return t},R.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ki(this))return"0";if(pr(this))return"-"+Zt(this).toString(t);for(var e=oi(Math.pow(t,6)),n=this,r="";;){var i=Ym(n,e).g,s=((0<(n=Km(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ki(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},R.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},R.X=function(t){return pr(t=Km(this,t))?-1:Ki(t)?0:1},R.abs=function(){return pr(this)?Zt(this):this},R.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Te(n,-2147483648&n[n.length-1]?-1:0)},R.R=function(t){if(Ki(this)||Ki(t))return zu;if(pr(this))return pr(t)?Zt(this).R(Zt(t)):Zt(Zt(this).R(t));if(pr(t))return Zt(this.R(Zt(t)));if(0>this.X(VH)&&0>t.X(VH))return oi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,Qm(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Qm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Qm(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Qm(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Te(n,0)},R.gb=function(t){return Ym(this,t).h},R.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Te(n,this.h&t.h)},R.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Te(n,this.h|t.h)},R.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Te(n,this.h^t.h)},Wm.prototype.createWebChannel=Wm.prototype.g,Xn.prototype.send=Xn.prototype.u,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,Pm.NO_ERROR=0,Pm.TIMEOUT=8,Pm.HTTP_ERROR=6,Qj.COMPLETE="complete",Xj.EventType=Hd,Hd.OPEN="a",Hd.CLOSE="b",Hd.ERROR="c",Hd.MESSAGE="d",Vt.prototype.listen=Vt.prototype.O,it.prototype.listenOnce=it.prototype.P,it.prototype.getLastError=it.prototype.Sa,it.prototype.getLastErrorCode=it.prototype.Ia,it.prototype.getStatus=it.prototype.da,it.prototype.getResponseJson=it.prototype.Wa,it.prototype.getResponseText=it.prototype.ja,it.prototype.send=it.prototype.ha,it.prototype.setWithCredentials=it.prototype.Oa,Ar.prototype.digest=Ar.prototype.l,Ar.prototype.reset=Ar.prototype.reset,Ar.prototype.update=Ar.prototype.j,Te.prototype.add=Te.prototype.add,Te.prototype.multiply=Te.prototype.R,Te.prototype.modulo=Te.prototype.gb,Te.prototype.compare=Te.prototype.X,Te.prototype.toNumber=Te.prototype.ea,Te.prototype.toString=Te.prototype.toString,Te.prototype.getBits=Te.prototype.D,Te.fromNumber=oi,Te.fromString=function LH(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Zt(LH(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=oi(Math.pow(e,8)),r=zu,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=oi(Math.pow(e,s)),r=r.R(s).add(oi(o))):r=(r=r.R(n)).add(oi(o))}return r};var lpe=Sr.createWebChannelTransport=function(){return new Wm},dpe=Sr.getStatEventTarget=function(){return km()},A0=Sr.ErrorCode=Pm,hpe=Sr.EventType=Qj,fpe=Sr.Event=zo,BH=Sr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ppe=Sr.FetchXmlHttpFactory=Yd,Xm=Sr.WebChannel=Xj,gpe=Sr.XhrIo=it,mpe=(Sr.Md5=Ar,Sr.Integer=Te);const $H="@firebase/firestore";class Ut{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");let Wu="9.23.0";const ks=new ko("@firebase/firestore");function M0(){return ks.logLevel}function T(t,...e){if(ks.logLevel<=de.DEBUG){const n=e.map(x0);ks.debug(`Firestore (${Wu}): ${t}`,...n)}}function ht(t,...e){if(ks.logLevel<=de.ERROR){const n=e.map(x0);ks.error(`Firestore (${Wu}): ${t}`,...n)}}function Mr(t,...e){if(ks.logLevel<=de.WARN){const n=e.map(x0);ks.warn(`Firestore (${Wu}): ${t}`,...n)}}function x0(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function O(t="Unexpected state"){const e=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: `+t;throw ht(e),new Error(e)}function U(t,e){t||O()}function N(t,e){return t}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class C extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class At{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class jH{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _pe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class ype{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vpe{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new At;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new At,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new At)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U("string"==typeof r.accessToken),new jH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return U(null===e||"string"==typeof e),new Ut(e)}}class wpe{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Epe{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new wpe(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ipe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,T("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(U("string"==typeof n.token),this.T=n.token,new HH(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Cpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class GH{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Cpe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function W(t,e){return t<e?-1:t>e?1:0}function Ku(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class B{constructor(e){this.timestamp=e}static fromTimestamp(e){return new B(e)}static min(){return new B(new Je(0,0))}static max(){return new B(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nh{constructor(e,n,r){void 0===n?n=0:n>e.length&&O(),void 0===r?r=e.length-n:r>e.length-n&&O(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===nh.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class he extends nh{construct(e,n,r){return new he(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new C(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new he(n)}static emptyPath(){return new he([])}}const Dpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends nh{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return Dpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new C(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new C(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}class M{constructor(e){this.path=e}static fromPath(e){return new M(he.fromString(e))}static fromName(e){return new M(he.fromString(e).popFirst(5))}static empty(){return new M(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===he.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new he(e.slice()))}}function WH(t){return new Jn(t.readTime,t.key,-1)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(B.min(),M.empty(),-1)}static max(){return new Jn(B.max(),M.empty(),-1)}}function R0(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=M.comparator(t.documentKey,e.documentKey),0!==n?n:W(t.largestBatchId,e.largestBatchId))}const KH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Spe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ps(t){return k0.apply(this,arguments)}function k0(){return k0=m(function*(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==KH)throw t;T("LocalStore","Unexpectedly lost primary lease")}),k0.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof v?n:v.resolve(n)}catch(n){return v.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):v.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):v.reject(n)}static resolve(e){return new v((n,r)=>{n(e)})}static reject(e){return new v((n,r)=>{r(e)})}static waitFor(e){return new v((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=v.resolve(!1);for(const r of e)n=n.next(i=>i?v.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new v((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new v((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Os(t){return"IndexedDbTransactionError"===t.name}let Zn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function sh(t){return null==t}function oh(t){return 0===t&&1/t==-1/0}function rG(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Le{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n_(this.root,e,this.comparator,!1)}getReverseIterator(){return new n_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n_(this.root,e,this.comparator,!0)}}class n_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??en.RED,this.left=i??en.EMPTY,this.right=s??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new en(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return en.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();const e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1,en.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(t,e,n,r,i){return this}insert(t,e,n){return new en(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class je{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sG(this.data.getIterator())}getIteratorFrom(e){return new sG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class sG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Vn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new je(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ku(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class oG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new oG("Invalid base64 string: "+i):i}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const Ype=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if(U(!!t),"string"==typeof t){let e=0;const n=Ype.exec(t);if(U(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Qi(t){return"string"==typeof t?Mt.fromBase64String(t):Mt.fromUint8Array(t)}function r_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function i_(t){const e=t.mapValue.fields.__previous_value__;return r_(e)?i_(e):e}function ah(t){const e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}class Xpe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}const Vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?r_(t)?4:lG(t)?9007199254740991:10:O()}function ui(t,e){if(t===e)return!0;const n=Us(t);if(n!==Us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ah(t).isEqual(ah(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ls(r.timestampValue),o=Ls(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Qi(t.bytesValue).isEqual(Qi(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=st(r.doubleValue),o=st(i.doubleValue);return s===o?oh(s)===oh(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Ku(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(rG(s)!==rG(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!ui(s[a],o[a])))return!1;return!0}(t,e);default:return O()}var i}function uh(t,e){return void 0!==(t.values||[]).find(n=>ui(n,e))}function Bs(t,e){if(t===e)return 0;const n=Us(t),r=Us(e);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=st(i.integerValue||i.doubleValue),a=st(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return aG(t.timestampValue,e.timestampValue);case 4:return aG(ah(t),ah(e));case 5:return W(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Qi(i),a=Qi(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=W(o[u],a[u]);if(0!==c)return c}return W(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=W(st(i.latitude),st(s.latitude));return 0!==o?o:W(st(i.longitude),st(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Bs(o[u],a[u]);if(c)return c}return W(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Vs.mapValue&&s===Vs.mapValue)return 0;if(i===Vs.mapValue)return 1;if(s===Vs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=W(a[l],c[l]);if(0!==d)return d;const h=Bs(o[a[l]],u[c[l]]);if(0!==h)return h}return W(a.length,c.length)}(t.mapValue,e.mapValue);default:throw O()}}function aG(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return W(t,e);const n=Ls(t),r=Ls(e),i=W(n.seconds,r.seconds);return 0!==i?i:W(n.nanos,r.nanos)}function Yu(t){return F0(t)}function F0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Ls(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qi(t.bytesValue).toBase64():"referenceValue"in t?M.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=F0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${F0(r.fields[a])}`;return s+"}"}(t.mapValue):O();var e}function L0(t){return!!t&&"integerValue"in t}function ch(t){return!!t&&"arrayValue"in t}function a_(t){return!!t&&"mapValue"in t}function lh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lG(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!a_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=lh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());a_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];a_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new tn(lh(this.value))}}function fG(t){const e=[];return Fs(t.fields,(n,r)=>{const i=new ft([n]);if(a_(r)){const s=fG(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}class He{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new He(e,0,B.min(),B.min(),B.min(),tn.empty(),0)}static newFoundDocument(e,n,r,i){return new He(e,1,n,B.min(),r,i,0)}static newNoDocument(e,n){return new He(e,2,n,B.min(),B.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new He(e,3,n,B.min(),B.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(B.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof He&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new He(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $s{constructor(e,n){this.position=e,this.inclusive=n}}function pG(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?M.comparator(M.fromName(o.referenceValue),n.key):Bs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gG(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}class Xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ege(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class mG{}class ue extends mG{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new tge(e,n,r):"array-contains"===n?new ige(e,r):"in"===n?new IG(e,r):"not-in"===n?new sge(e,r):"array-contains-any"===n?new oge(e,r):new ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new nge(e,r):new rge(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Bs(n,this.value)):null!==n&&Us(this.value)===Us(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Se extends mG{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Se(e,n)}matches(e){return Ju(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Ju(t){return"and"===t.op}function U0(t){return function _G(t){for(const e of t.filters)if(e instanceof Se)return!1;return!0}(t)&&Ju(t)}function B0(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+Yu(t.value);if(U0(t))return t.filters.map(e=>B0(e)).join(",");{const e=t.filters.map(n=>B0(n)).join(",");return`${t.op}(${e})`}}function yG(t,e){return t instanceof ue?(n=t,(r=e)instanceof ue&&n.op===r.op&&n.field.isEqual(r.field)&&ui(n.value,r.value)):t instanceof Se?function(n,r){return r instanceof Se&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&yG(s,r.filters[o]),!0)}(t,e):void O();var n,r}function wG(t){return t instanceof ue?`${(e=t).field.canonicalString()} ${e.op} ${Yu(e.value)}`:t instanceof Se?function(e){return e.op.toString()+" {"+e.getFilters().map(wG).join(" ,")+"}"}(t):"Filter";var e}class tge extends ue{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.matchesComparison(n)}}class nge extends ue{constructor(e,n){super(e,"in",n),this.keys=EG(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rge extends ue{constructor(e,n){super(e,"not-in",n),this.keys=EG(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EG(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class ige extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ch(n)&&uh(n.arrayValue,this.value)}}class IG extends ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&uh(this.value.arrayValue,n)}}class sge extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!uh(this.value.arrayValue,n)}}class oge extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uh(this.value.arrayValue,r))}}class age{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function $0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new age(t,e,n,r,i,s,o)}function Zo(t){const e=N(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>B0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yu(r)).join(",")),e.dt=n}return e.dt}function dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ege(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gG(t.startAt,e.startAt)&&gG(t.endAt,e.endAt)}class Yi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function TG(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ea(t){const e=N(t);if(null===e.wt){e.wt=[];const n=function l_(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function j0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new Xu(n)),e.wt.push(new Xu(ft.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Xu(ft.keyField(),s))}}}return e.wt}function Tn(t){const e=N(t);if(!e._t)if("F"===e.limitType)e._t=$0(e.path,e.collectionGroup,ea(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of ea(e))n.push(new Xu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new $s(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new $s(e.startAt.position,e.startAt.inclusive):null;e._t=$0(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function d_(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hh(t,e){return dh(Tn(t),Tn(e))&&t.limitType===e.limitType}function SG(t){return`${Zo(Tn(t))}|lt:${t.limitType}`}function z0(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>wG(r)).join(", ")}]`),sh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yu(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yu(r)).join(",")),`Target(${n})`}(Tn(t))}; limitType=${t.limitType})`}function fh(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):M.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ea(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=pG(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,ea(n),r)||n.endAt&&!function(i,s,o){const a=pG(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,ea(n),r)));var n,r}function uge(t,e,n){const r=t.field.isKeyField()?M.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?Bs(a,u):O()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return iG(this.inner)}size(){return this.innerSize}}const cge=new Le(M.comparator);function Un(){return cge}const xG=new Le(M.comparator);function ph(...t){let e=xG;for(const n of t)e=e.insert(n.key,n);return e}function NG(t){let e=xG;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ci(){return gh()}function RG(){return gh()}function gh(){return new Xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const lge=new Le(M.comparator),dge=new je(M.comparator);function ne(...t){let e=dge;for(const n of t)e=e.add(n);return e}const hge=new je(W);function kG(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function PG(t){return{integerValue:""+t}}function OG(t,e){return function YH(t){return"number"==typeof t&&Number.isInteger(t)&&!oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?PG(e):kG(t,e)}class h_{constructor(){this._=void 0}}function fge(t,e,n){return t instanceof ec?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&r_(i)&&(i=i_(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof ta?LG(t,e):t instanceof na?VG(t,e):function(r,i){const s=FG(r,i),o=UG(s)+UG(r.gt);return L0(s)&&L0(r.gt)?PG(o):kG(r.serializer,o)}(t,e)}function pge(t,e,n){return t instanceof ta?LG(t,e):t instanceof na?VG(t,e):n}function FG(t,e){return t instanceof tc?L0(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class ec extends h_{}class ta extends h_{constructor(e){super(),this.elements=e}}function LG(t,e){const n=BG(e);for(const r of t.elements)n.some(i=>ui(i,r))||n.push(r);return{arrayValue:{values:n}}}class na extends h_{constructor(e){super(),this.elements=e}}function VG(t,e){let n=BG(e);for(const r of t.elements)n=n.filter(i=>!ui(i,r));return{arrayValue:{values:n}}}class tc extends h_{constructor(e,n){super(),this.serializer=e,this.gt=n}}function UG(t){return st(t.integerValue||t.doubleValue)}function BG(t){return ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class mge{constructor(e,n){this.version=e,this.transformResults=n}}class qe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qe}static exists(e){return new qe(void 0,e)}static updateTime(e){return new qe(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function f_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class p_{}function $G(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new rc(t.key,qe.none()):new nc(t.key,t.data,qe.none());{const n=t.data,r=tn.empty();let i=new je(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ji(t.key,r,new Vn(i.toArray()),qe.none())}}function _ge(t,e,n){t instanceof nc?function(r,i,s){const o=r.value.clone(),a=GG(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ji?function(r,i,s){if(!f_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=GG(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(HG(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function _h(t,e,n,r){return t instanceof nc?function(i,s,o,a){if(!f_(i.precondition,s))return o;const u=i.value.clone(),c=zG(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ji?function(i,s,o,a){if(!f_(i.precondition,s))return o;const u=zG(i.fieldTransforms,a,s),c=s.data;return c.setAll(HG(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,f_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function yge(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=FG(r.transform,i||null);null!=s&&(null===n&&(n=tn.empty()),n.set(r.field,s))}return n||null}function jG(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Ku(n,r,(i,s)=>function gge(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof ta&&r instanceof ta||n instanceof na&&r instanceof na?Ku(n.elements,r.elements,ui):n instanceof tc&&r instanceof tc?ui(n.gt,r.gt):n instanceof ec&&r instanceof ec);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class nc extends p_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ji extends p_{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HG(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function GG(t,e,n){const r=new Map;U(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pge(o,a,n[i]))}return r}function zG(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fge(s,o,e))}return r}class rc extends p_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W0 extends p_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class K0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_ge(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_h(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_h(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RG();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=$G(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(B.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ku(this.mutations,e.mutations,(n,r)=>jG(n,r))&&Ku(this.baseMutations,e.baseMutations,(n,r)=>jG(n,r))}}class Q0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){U(e.mutations.length===r.length);let i=lge;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Q0(e,n,r,i)}}class Y0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var vt,fe;(fe=vt||(vt={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS",new mpe([4294967295,4294967295],0);class Tge{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sge(t,e){return ic(t,e.toTimestamp())}function pt(t){return U(!!t),B.fromTimestamp(function(e){const n=Ls(e);return new Je(n.seconds,n.nanos)}(t))}function eA(t,e){return(n=t,new he(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Eh(t,e){return eA(t.databaseId,e.path)}function iz(t){const e=function rz(t){const e=he.fromString(t);return U(function hz(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?he.emptyPath():function sz(t){return U(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function oz(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function cz(t){let e=iz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){U(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=lz(l);return d instanceof Se&&U0(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new Xu(sc((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,sh(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new $s((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new $s(l.values||[],!l.before)}(n.endAt)),function bG(t,e,n,r,i,s,o,a){return new Yi(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function lz(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=sc(e.unaryFilter.field);return ue.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=sc(e.unaryFilter.field);return ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=sc(e.unaryFilter.field);return ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=sc(e.unaryFilter.field);return ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(t):void 0!==t.fieldFilter?ue.create(sc((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return Se.create(e.compositeFilter.filters.map(n=>lz(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return O()}}(e.compositeFilter.op))}(t):O();var e}function sc(t){return ft.fromServerFormat(t.fieldPath)}function Oge(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}class fz{constructor(e){this.fe=e}}function iA(t){const e=cz({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?d_(e,e.limit,"L"):e}class oa{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(st(e.integerValue));else if("doubleValue"in e){const r=st(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),oh(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Qi(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?lG(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):O()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),M.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}oa.Ve=new oa;class Gge{constructor(){this.rn=new lA}addToCollectionParentIndex(e,n){return this.rn.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(Jn.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}}class lA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(he.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(he.comparator)).toArray()}}new Uint8Array(0);class pn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(41943040,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class ua{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ua(0)}static Mn(){return new ua(-1)}}class Yge{constructor(){this.changes=new Xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,He.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zge{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Uz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&_h(r.mutation,i,Vn.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ph();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Un();const o=gh(),a=gh();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ji)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),_h(l.mutation,c,l.mutation.getFieldMask(),Je.now())):o.set(c.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Zge(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=gh();let i=new Le((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Vn.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||ne()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=RG();l.forEach(h=>{if(!s.has(h)){const f=$G(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return M.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function H0(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(ci());let a=-1,u=s;return o.next(c=>v.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ne())).next(l=>({batchId:a,changes:NG(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=ph();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=ph();return this.indexManager.getCollectionParents(e,i).next(o=>v.forEach(o,a=>{const u=(c=n,l=a.child(i),new Yi(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,He.newInvalidDocument(c)))});let o=ph();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&_h(c.mutation,u,Vn.empty(),Je.now()),fh(n,u)&&(o=o.insert(a,u))}),o})}}class eme{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return v.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:pt(r.createTime)}),v.resolve()}getNamedQuery(e,n){return v.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:iA(r.bundledQuery),readTime:pt(r.readTime)}),v.resolve();var r}}class tme{constructor(){this.overlays=new Le(M.comparator),this.ls=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ci();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){const i=ci(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=ci(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=ci(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return v.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Y0(n,r));let s=this.ls.get(n);void 0===s&&(s=ne(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class dA{constructor(){this.fs=new je($t.ds),this.ws=new je($t._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new $t(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new $t(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new M(new he([])),r=new $t(n,e),i=new $t(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new M(new he([])),r=new $t(n,e),i=new $t(n,e+1);let s=ne();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new $t(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class $t{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return M.comparator(e.key,n.key)||W(e.As,n.As)}static _s(e,n){return W(e.As,n.As)||M.comparator(e.key,n.key)}}class nme{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new je($t.ds)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new K0(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new $t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $t(n,0),i=new $t(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(W);return n.forEach(i=>{const s=new $t(i,0),o=new $t(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),v.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;M.isDocumentKey(s)||(s=s.child(""));const o=new $t(new M(s),0);let a=new je(W);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),v.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){U(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return v.forEach(n.mutations,i=>{const s=new $t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new $t(n,0),i=this.Rs.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class rme{constructor(e){this.Ds=e,this.docs=new Le(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():He.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():He.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un();const o=n.path,a=new M(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||R0(WH(l),r)<=0||(i.has(l.key)||fh(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return v.resolve(s)}getAllFromCollectionGroup(e,n,r,i){O()}Cs(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ime(this)}getSize(e){return v.resolve(this.size)}}class ime extends Yge{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class sme{constructor(e){this.persistence=e,this.xs=new Xi(n=>Zo(n),dh),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Ns=0,this.ks=new dA,this.targetCount=0,this.Ms=ua.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),v.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new ua(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.Fn(n),v.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),v.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.ks.containsKey(n))}}class hA{constructor(e,n){this.$s={},this.overlays={},this.Os=new Zn(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new sme(this),this.indexManager=new Gge,this.remoteDocumentCache=new rme(r=>this.referenceDelegate.Ls(r)),this.serializer=new fz(n),this.qs=new eme(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tme,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new nme(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){T("MemoryPersistence","Starting transaction:",e);const i=new ome(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return v.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class ome extends Spe{constructor(e){super(),this.currentSequenceNumber=e}}class b_{constructor(e){this.persistence=e,this.Qs=new dA,this.js=null}static zs(e){return new b_(e)}get Ws(){if(this.js)return this.js;throw O()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),v.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Ws,r=>{const i=M.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,B.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return v.or([()=>v.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class mA{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mA(e,n.fromCache,r,i)}}class $z{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(TG(n))return v.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=d_(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,d_(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return TG(n)||i.isEqual(B.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(M0()<=de.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),z0(n)),this.Wi(e,o,n,function qH(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=B.fromTimestamp(1e9===r?new Je(n+1,0):new Je(n,r));return new Jn(i,M.empty(),e)}(i,-1)))})}ji(e,n){let r=new je(function MG(t){return(e,n)=>{let r=!1;for(const i of ea(t)){const s=uge(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}(e));return n.forEach((i,s)=>{fh(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return M0()<=de.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",z0(n)),this.Ui.getDocumentsMatchingQuery(e,n,Jn.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class ume{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Le(W),this.Yi=new Xi(s=>Zo(s),dh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uz(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Hz(t,e){return _A.apply(this,arguments)}function _A(){return _A=m(function*(t,e){const n=N(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ne();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),_A.apply(this,arguments)}function dme(t,e){const n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class CA{constructor(){this.activeTargetIds=function q0(){return hge}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xz{constructor(){this.Hr=new CA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new CA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pme{Yr(e){}shutdown(){}}class Jz{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let N_=null;function bA(){return null===N_?N_=268435456+Math.round(2147483648*Math.random()):N_++,"0x"+N_.toString(16)}const gme={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mme{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const gn="WebChannelConnection";class _me extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=bA(),a=this.To(e,n);T("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(T("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Mr("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${gme[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=bA();return new Promise((o,a)=>{const u=new gpe;u.setWithCredentials(!0),u.listenOnce(hpe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case A0.NO_ERROR:const l=u.getResponseJson();T(gn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case A0.TIMEOUT:T(gn,`RPC '${e}' ${s} timed out`),a(new C(E.DEADLINE_EXCEEDED,"Request time out"));break;case A0.HTTP_ERROR:const d=u.getStatus();if(T(gn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const _=g.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(_)>=0?_:E.UNKNOWN}(f.status);a(new C(p,f.message))}else a(new C(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new C(E.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{T(gn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);T(gn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=bA(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lpe(),a=dpe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new ppe({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");T(gn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new mme({ro:_=>{f?T(gn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(T(gn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),T(gn,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},oo:()=>d.close()}),g=(_,w,y)=>{_.listen(w,D=>{try{y(D)}catch(P){setTimeout(()=>{throw P},0)}})};return g(d,Xm.EventType.OPEN,()=>{f||T(gn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,Xm.EventType.CLOSE,()=>{f||(f=!0,T(gn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,Xm.EventType.ERROR,_=>{f||(f=!0,Mr(gn,`RPC '${e}' stream ${i} transport errored:`,_),p.wo(new C(E.UNAVAILABLE,"The operation could not be completed")))}),g(d,Xm.EventType.MESSAGE,_=>{var w;if(!f){const y=_.data[0];U(!!y);const P=y.error||(null===(w=y[0])||void 0===w?void 0:w.error);if(P){T(gn,`RPC '${e}' stream ${i} received error:`,P);const L=P.status;let K=function(Pr){const so=vt[Pr];if(void 0!==so)return function WG(t){if(void 0===t)return ht("GRPC error has no .code"),E.UNKNOWN;switch(t){case vt.OK:return E.OK;case vt.CANCELLED:return E.CANCELLED;case vt.UNKNOWN:return E.UNKNOWN;case vt.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case vt.INTERNAL:return E.INTERNAL;case vt.UNAVAILABLE:return E.UNAVAILABLE;case vt.UNAUTHENTICATED:return E.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case vt.NOT_FOUND:return E.NOT_FOUND;case vt.ALREADY_EXISTS:return E.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return E.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case vt.ABORTED:return E.ABORTED;case vt.OUT_OF_RANGE:return E.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return E.UNIMPLEMENTED;case vt.DATA_LOSS:return E.DATA_LOSS;default:return O()}}(so)}(L),ot=P.message;void 0===K&&(K=E.INTERNAL,ot="Unknown error status: "+L+" with message "+P.message),f=!0,p.wo(new C(K,ot)),d.close()}else T(gn,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,fpe.STAT_EVENT,_=>{_.stat===BH.PROXY?T(gn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===BH.NOPROXY&&T(gn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function R_(){return typeof document<"u"?document:null}function Rh(t){return new Tge(t,!0)}class TA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class yme{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new TA(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return m(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return m(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return m(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(ht(n.toString()),ht("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new C(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(m(function*(){e.state=0,e.start()}))}tu(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wme extends yme{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(U(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function xge(t,e){return t&&t.length>0?(U(void 0!==e),t.map(n=>function(r,i){let s=pt(r.updateTime?r.updateTime:i);return s.isEqual(B.min())&&(s=pt(i)),new mge(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.cu(r,n)}return U(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=function Ih(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Ch(t,e){let n;if(e instanceof nc)n={update:oz(t,e.key,e.value)};else if(e instanceof rc)n={delete:Eh(t,e.key)};else if(e instanceof Ji)n={update:oz(t,e.key,e.data),updateMask:Oge(e.fieldMask)};else{if(!(e instanceof W0))return O();n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof ec)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ta)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof na)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof tc)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw O()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Sge(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:O()),n;var i}(this.serializer,r))};this.Wo(n)}}class Eme extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new C(E.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new C(E.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(E.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Cme{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ht(n),this.mu=!1):T("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Dme{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(m(function*(){var u;qs(o)&&(T("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(c){const l=N(c);l.vu.add(4),yield lc(l),l.bu.set("Unknown"),l.vu.delete(4),yield kh(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new Cme(r,i)}}function kh(t){return AA.apply(this,arguments)}function AA(){return AA=m(function*(t){if(qs(t))for(const e of t.Ru)yield e(!0)}),AA.apply(this,arguments)}function lc(t){return MA.apply(this,arguments)}function MA(){return MA=m(function*(t){for(const e of t.Ru)yield e(!1)}),MA.apply(this,arguments)}function qs(t){return 0===N(t).vu.size}function P_(t,e,n){return FA.apply(this,arguments)}function FA(){return FA=m(function*(t,e,n){if(!Os(e))throw e;t.vu.add(1),yield lc(t),t.bu.set("Offline"),n||(n=()=>function Gz(t){const e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){T("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield kh(t)}))}),FA.apply(this,arguments)}function n4(t,e){return e().catch(n=>P_(t,n,e))}function dc(t){return LA.apply(this,arguments)}function LA(){return LA=m(function*(t){const e=N(t),n=Ws(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Ame(e);)try{const i=yield dme(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,Mme(e,i)}catch(i){yield P_(e,i)}r4(e)&&i4(e)}),LA.apply(this,arguments)}function Ame(t){return qs(t)&&t.Eu.length<10}function Mme(t,e){t.Eu.push(e);const n=Ws(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function r4(t){return qs(t)&&!Ws(t).Uo()&&t.Eu.length>0}function i4(t){Ws(t).start()}function xme(t){return VA.apply(this,arguments)}function VA(){return VA=m(function*(t){Ws(t).hu()}),VA.apply(this,arguments)}function Nme(t){return UA.apply(this,arguments)}function UA(){return UA=m(function*(t){const e=Ws(t);for(const n of t.Eu)e.uu(n.mutations)}),UA.apply(this,arguments)}function Rme(t,e,n){return BA.apply(this,arguments)}function BA(){return BA=m(function*(t,e,n){const r=t.Eu.shift(),i=Q0.from(r,e,n);yield n4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield dc(t)}),BA.apply(this,arguments)}function kme(t,e){return $A.apply(this,arguments)}function $A(){return $A=m(function*(t,e){var n;e&&Ws(t).ou&&(yield(n=m(function*(r,i){if(function qG(t){switch(t){default:return O();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}(s=i.code)&&s!==E.ABORTED){const o=r.Eu.shift();Ws(r).Qo(),yield n4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield dc(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),r4(t)&&i4(t)}),$A.apply(this,arguments)}function s4(t,e){return jA.apply(this,arguments)}function jA(){return jA=m(function*(t,e){const n=N(t);n.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");const r=qs(n);n.vu.add(3),yield lc(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield kh(n)}),jA.apply(this,arguments)}function GA(){return GA=m(function*(t,e){const n=N(t);e?(n.vu.delete(2),yield kh(n)):e||(n.vu.add(2),yield lc(n),n.bu.set("Unknown"))}),GA.apply(this,arguments)}function Ws(t){return t.Du||(t.Du=function(e,n,r){const i=N(e);return i.fu(),new wme(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:xme.bind(null,t),ao:kme.bind(null,t),au:Nme.bind(null,t),cu:Rme.bind(null,t)}),t.Ru.push(function(){var e=m(function*(n){n?(t.Du.Qo(),yield dc(t)):(yield t.Du.stop(),t.Eu.length>0&&(T("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class zA{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new zA(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(t,e){if(ht("AsyncQueue",`${e}: ${t}`),Os(t))return new C(E.UNAVAILABLE,`${e}: ${t}`);throw t}class Ome{constructor(){this.queries=new Xi(e=>SG(e),hh),this.onlineState="Unknown",this.ku=new Set}}class jme{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Xi(a=>SG(a),hh),this._c=new Map,this.mc=new Set,this.gc=new Le(M.comparator),this.yc=new Map,this.Ic=new dA,this.Tc={},this.Ec=new Map,this.Ac=ua.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function nM(){return nM=m(function*(t,e,n){const r=function IM(t){const e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wme.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kme.bind(null,e),e}(t);try{const i=yield function(s,o){const a=N(s),u=Je.now(),c=o.reduce((h,f)=>h.add(f.key),ne());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Un(),p=ne();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((_,w)=>{w.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const _=[];for(const w of o){const y=yge(w,l.get(w.key).overlayedDocument);null!=y&&_.push(new Ji(w.key,y,fG(y.value.mapValue),qe.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,_,o)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:NG(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new Le(W)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield es(r,i.changes),yield dc(r.remoteStore)}catch(i){const s=fc(i,"Failed to persist write");n.reject(s)}}),nM.apply(this,arguments)}function f4(t,e,n){const r=N(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=N(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&function YA(t){t.ku.forEach(e=>{e.next()})}(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wme(t,e){return sM.apply(this,arguments)}function sM(){return sM=m(function*(t,e){const n=N(t),r=e.batch.batchId;try{const i=yield function cme(t,e){const n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=v.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);U(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ne();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);cM(n,r,null),uM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield es(n,i)}catch(i){yield Ps(i)}}),sM.apply(this,arguments)}function Kme(t,e,n){return oM.apply(this,arguments)}function oM(){return oM=m(function*(t,e,n){const r=N(t);try{const i=yield function(s,o){const a=N(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(U(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);cM(r,e,n),uM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield es(r,i)}catch(i){yield Ps(i)}}),oM.apply(this,arguments)}function uM(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function cM(t,e,n){const r=N(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function es(t,e,n){return hM.apply(this,arguments)}function hM(){return hM=m(function*(t,e,n){const r=N(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=mA.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=m(function*(u,c){const l=N(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(c,h=>v.forEach(h.Fi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Bi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Os(d))throw d;T("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ji=l.Ji.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),hM.apply(this,arguments)}function Xme(t,e){return fM.apply(this,arguments)}function fM(){return fM=m(function*(t,e){const n=N(t);if(!n.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());const r=yield Hz(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new C(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield es(n,r.er)}var i}),fM.apply(this,arguments)}class O_{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.serializer=Rh(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function jz(t,e,n,r){return new ume(t,e,n,r)}(this.persistence,new $z,e.initialUser,this.serializer)}createPersistence(e){return new hA(b_.zs,this.serializer)}createSharedClientState(e){return new Xz}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _c{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>f4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Xme.bind(null,r.syncEngine),yield function HA(t,e){return GA.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ome}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),r=new _me(e.databaseInfo);return new Eme(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>f4(this.syncEngine,a,0),o=Jz.D()?new Jz:new pme,new Dme(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new jme(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=m(function*(n){const r=N(n);T("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield lc(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class d_e{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=GH.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){T("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(T("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=fc(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function L_(t,e){return CM.apply(this,arguments)}function CM(){return CM=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield Hz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),CM.apply(this,arguments)}function DM(t,e){return bM.apply(this,arguments)}function bM(){return bM=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function TM(t){return SM.apply(this,arguments)}(t);T("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>s4(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>s4(e.remoteStore,s)),t._onlineComponents=e}),bM.apply(this,arguments)}function SM(){return SM=m(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){T("FirestoreClient","Using user provided OfflineComponentProvider");try{yield L_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function w4(t){return"FirebaseError"===t.name?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),yield L_(t,new O_)}}else T("FirestoreClient","Using default OfflineComponentProvider"),yield L_(t,new O_);return t._offlineComponents}),SM.apply(this,arguments)}function AM(){return AM=m(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(T("FirestoreClient","Using user provided OnlineComponentProvider"),yield DM(t,t._uninitializedComponentsProvider._online)):(T("FirestoreClient","Using default OnlineComponentProvider"),yield DM(t,new _c))),t._onlineComponents}),AM.apply(this,arguments)}function MM(t){return function V_(t){return AM.apply(this,arguments)}(t).then(e=>e.syncEngine)}function T4(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const S4=new Map;function A4(t){if(!M.isDocumentKey(t))throw new C(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function B_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":O()}function ce(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=B_(t);throw new C(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class N4{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new C(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new C(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function w_e(t,e,n,r){if(!0===e&&!0===r)throw new C(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=T4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new C(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N4(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new _pe;switch(n.type){case"firstParty":return new Epe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new C(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=S4.get(e);n&&(T("ComponentProvider","Removing Datastore"),S4.delete(e),n.terminate())}(this),Promise.resolve()}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}}class nn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nn(this.firestore,e,this._query)}}class di extends nn{constructor(e,n,r){super(e,n,function Zu(t){return new Yi(t)}(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new M(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function R4(t,e,...n){if(t=Kt(t),1===arguments.length&&(e=GH.A()),function NM(t,e,n){if(!n)throw new C(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("doc","path",e),t instanceof Oh){const r=he.fromString(e,...n);return A4(r),new gt(t,null,new M(r))}{if(!(t instanceof gt||t instanceof di))throw new C(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return A4(r),new gt(t.firestore,t instanceof di?t.converter:null,new M(r))}}class I_e{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new TA(this,"async_queue_retry"),this.Xc=()=>{const n=R_();n&&T("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=R_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=R_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new At;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return m(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Os(n))throw n;T("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ht("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=zA.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&O()}verifyOperationInProgress(){}sa(){var e=this;return m(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Ge extends Oh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new I_e,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||P4(this),this._firestoreClient.terminate()}}function D_e(t,e){const r="string"==typeof t?t:e||"(default)",i=Cs("object"==typeof t?t:ld(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=JI("firestore");s&&function E_e(t,e,n,r={}){var i;const s=(t=ce(t,Oh))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Ut.MOCK_USER;else{a=bU(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new C(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ut(c)}t._authCredentials=new ype(new jH(a,u))}}(i,...s)}return i}function P4(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Xpe(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,T4(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new d_e(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(Mt.fromBase64String(e))}catch(n){throw new C(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new la(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new C(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class L4{constructor(e){this._methodName=e}}class kM{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}}const T_e=/^__.*__$/;class S_e{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new nc(e,this.data,n,this.fieldTransforms)}}function U4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}class $_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new $_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return H_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(U4(this.ca)&&T_e.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class A_e{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rh(e)}ya(e,n,r,i=!1){return new $_({ca:e,methodName:n,ga:r,path:ft.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wc(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new A_e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PM(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);FM("Data must be an object, but it was:",o,r);const a=G4(r,o);let u,c;if(s.merge)u=new Vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=Vh(e,d,n);if(!o.contains(h))throw new C(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);q4(l,h)||l.push(h)}u=new Vn(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new S_e(new tn(a),u,c)}function da(t,e){if(z4(t=Kt(t)))return FM("Unsupported field value:",e,t),G4(t,e);if(t instanceof L4)return function(n,r){if(!U4(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=da(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Kt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return OG(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Je.fromDate(n);return{timestampValue:ic(r.serializer,i)}}if(n instanceof Je){const i=new Je(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ic(r.serializer,i)}}if(n instanceof kM)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof la)return{bytesValue:nz(r.serializer,n._byteString)};if(n instanceof gt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eA(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${B_(n)}`)}(t,e)}function G4(t,e){const n={};return iG(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,i)=>{const s=da(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function z4(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof kM||t instanceof la||t instanceof gt||t instanceof L4)}function FM(t,e,n){if(!z4(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=B_(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function Vh(t,e,n){if((e=Kt(e))instanceof vc)return e._internalPath;if("string"==typeof e)return function j_(t,e,n){if(e.search(R_e)>=0)throw H_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vc(...e.split("."))._internalPath}catch{throw H_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw H_("Field path arguments must be of type string or ",t,!1,void 0,n)}const R_e=new RegExp("[~\\*/\\[\\]]");function H_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new C(E.INVALID_ARGUMENT,a+t+u)}function q4(t,e){return t.some(n=>n.isEqual(e))}function V_e(t,e,n){t=ce(t,gt);const r=ce(t.firestore,Ge),i=function VM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e,n);return function $h(t,e){return function(n,r){const i=new At;return n.asyncQueue.enqueueAndForget(m(function*(){return function zme(t,e,n){return nM.apply(this,arguments)}(yield MM(n),r,i)})),i.promise}(function wt(t){return t._firestoreClient||P4(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}(r,[PM(wc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,qe.none())])}!function(t,e=!0){Wu=Ds,Qt(new Pt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ge(new vpe(n.getProvider("auth-internal")),new Ipe(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new C(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Me($H,"3.13.0",t),Me($H,"3.13.0","esm2017")}();class Y_{constructor(e){return e}}const tq="firestore",BM=new F("angularfire2.firestore-instances");function J_e(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Y_(r)}}const Z_e={provide:class Y_e{constructor(){return gd(tq)}},deps:[[new Ye,BM]]},eye={provide:Y_,useFactory:function X_e(t,e){const n=pd(tq,t,e);return n&&new Y_(n)},deps:[[new Ye,BM],Ts]};let tye=(()=>{class t{constructor(){Me("angularfire",Pu.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({providers:[eye,Z_e]}),t})();function nye(t,...e){return{ngModule:tye,providers:[{provide:BM,useFactory:J_e(t),multi:!0,deps:[De,vn,md,_d,[new Ye,Dm],[new Ye,wd],...e]}]}}const rye=ji(R4,!0),iye=ji(D_e,!0),sye=ji(V_e,!0),oye=[{path:"auth",component:Nie,children:[{path:"login",component:cfe},{path:"signup",component:(()=>{class t{constructor(n,r){this.auth=n,this.firestore=r,this.title="gestion-de-muestras-de-campo",this.data=[]}handleRegister(n){Cj(this.auth,n.email,n.password).then(r=>{console.log(r.user)}).catch(r=>{alert(r.message)}),this.addData(n)}addData(n){const r=rye(this.firestore,"users",n.email);sye(r,n).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)})}}return t.\u0275fac=function(n){return new(n||t)(b(Bu),b(Y_))},t.\u0275cmp=co({type:t,selectors:[["app-signup"]],decls:11,vars:0,consts:[[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","email","ngModel","","placeholder","Email","id","email","type","email",1,"input-field"],["name","password","ngModel","","placeholder","Password","id","password","type","password",1,"input-field"]],template:function(n,r){if(1&n){const i=Fw();ct(0,"p"),Qn(1,"signup works!"),Tt(),ct(2,"form",0,1),Pn("ngSubmit",function(){uv(i);const o=Rw(3);return cv(r.handleRegister(o.value))}),ct(4,"div",2)(5,"div",3),Wr(6,"input",4),Tt(),ct(7,"div",3),Wr(8,"input",5),Tt(),ct(9,"button"),Qn(10,"Sign Up"),Tt()()()}},dependencies:[yI,Fl,aI,uI,yg,$l],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})()}]}];let aye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[xo.forChild(oye),xo]}),t})(),uye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[WE,f2,xo,aye]}),t})();const cye=[{path:"home",component:(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=co({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(n,r){1&n&&(ct(0,"p"),Qn(1,"home works!"),Tt())}}),t})()}];let lye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[xo.forRoot(cye),xo]}),t})(),dye=(()=>{class t{constructor(n){this.auth=n,this.title="gestion-muestras"}handleRegister(n){Cj(this.auth,n.email,n.password).then(r=>{console.log(r.user)}).catch(r=>{alert(r.message)})}handleLogin(n){Dj(this.auth,n.email,n.password).then(r=>{console.log(r.user)}).catch(r=>{alert(r.message)})}}return t.\u0275fac=function(n){return new(n||t)(b(Bu))},t.\u0275cmp=co({type:t,selectors:[["app-root"]],decls:13,vars:0,consts:[["href","#/auth/login"],["href","#/auth/signup"]],template:function(n,r){1&n&&(ct(0,"div")(1,"h1"),Qn(2,"Header"),Tt()(),ct(3,"div")(4,"a",0),Qn(5,"Log In "),Tt(),Wr(6,"div"),ct(7,"a",1),Qn(8,"Sign Up "),Tt()(),Wr(9,"router-outlet"),ct(10,"div")(11,"h1"),Qn(12,"Footer"),Tt()())},dependencies:[Mg],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})();const hye_firebase={projectId:"gestion-de-muestras-de-campo",appId:"1:956362829056:web:235ab7e9c2cbd05ffe97e5",databaseURL:"https://gestion-de-muestras-de-campo-default-rtdb.firebaseio.com",storageBucket:"gestion-de-muestras-de-campo.appspot.com",apiKey:"AIzaSyDeImqmNn3CZpIAB1A9_q78bnqPVNM1ji8",authDomain:"gestion-de-muestras-de-campo.firebaseapp.com",messagingSenderId:"956362829056",measurementId:"G-T5SRLVHLR3"},nq="@firebase/database";let $M="";class pye{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:od(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class gye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return Li(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iq=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pye(e)}}catch{}return new gye},fa=iq("localStorage"),jM=iq("sessionStorage"),Cc=new ko("@firebase/database"),sq=function(){let t=1;return function(){return t++}}(),oq=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,x(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Wie;n.update(e);const r=n.digest();return Lg.encodeByteArray(r)},jh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jh.apply(null,r):e+="object"==typeof r?Wt(r):r,e+=" "}return e};let pa=null,aq=!0;const jt=function(...t){if(!0===aq&&(aq=!1,null===pa&&!0===jM.get("logging_enabled")&&function(t,e){x(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Cc.logLevel=de.VERBOSE,pa=Cc.log.bind(Cc),e&&jM.set("logging_enabled",!0)):"function"==typeof t?pa=t:(pa=null,jM.remove("logging_enabled"))}(!0)),pa){const e=jh.apply(null,t);pa(e)}},Hh=function(t){return function(...e){jt(t,...e)}},HM=function(...t){const e="FIREBASE INTERNAL ERROR: "+jh(...t);Cc.error(e)},hi=function(...t){const e=`FIREBASE FATAL ERROR: ${jh(...t)}`;throw Cc.error(e),new Error(e)},mn=function(...t){const e="FIREBASE WARNING: "+jh(...t);Cc.warn(e)},X_=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Qs="[MIN_NAME]",ts="[MAX_NAME]",ga=function(t,e){if(t===e)return 0;if(t===Qs||e===ts)return-1;if(e===Qs||t===ts)return 1;{const n=dq(t),r=dq(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},yye=function(t,e){return t===e?0:t<e?-1:1},Gh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Wt(e))},GM=function(t){if("object"!=typeof t||null===t)return Wt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=Wt(e[r]),n+=":",n+=GM(t[e[r]]);return n+="}",n},cq=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function Ht(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const lq=function(t){x(!X_(t),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(u=52;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const l=c.join("");let d="";for(u=0;u<64;u+=8){let h=parseInt(l.substr(u,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Iye=new RegExp("^-?(0*)\\d{1,10}$"),dq=function(t){if(Iye.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Dc=function(t){try{t()}catch(e){setTimeout(()=>{throw mn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},zh=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class Tye{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){mn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Sye{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mn(e)}}let qh=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const mq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vq="websocket",wq="long_polling";class qM{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fa.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Eq(t,e,n){let r;if(x("string"==typeof e,"typeof type must == string"),x("object"==typeof n,"typeof params must == object"),e===vq)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==wq)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function Aye(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return Ht(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Mye{constructor(){this.counters_={}}incrementCounter(e,n=1){Li(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Pie(this.counters_)}}const WM={},KM={};function QM(t){const e=t.toString();return WM[e]||(WM[e]=new Mye),WM[e]}class Nye{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Dc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ys{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hh(e),this.stats_=QM(n),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),Eq(n,wq,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Nye(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new YM((...s)=>{const[o,a,u,c,l]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&mq.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ys.forceAllow_=!0}static forceDisallow(){Ys.forceDisallow_=!0}static isAvailable(){return!(!Ys.forceAllow_&&(Ys.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Wt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=wU(n),i=cq(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Wt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class YM{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sq(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=YM.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){jt("frame writing exception"),a.stack&&jt(a.stack),jt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||jt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{jt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Z_=null;typeof MozWebSocket<"u"?Z_=MozWebSocket:typeof WebSocket<"u"&&(Z_=WebSocket);let bc=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hh(this.connId),this.stats_=QM(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&mq.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),Eq(n,vq,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Z_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Z_&&!t.forceDisallow_}static previouslyFailed(){return fa.isInMemoryStorage||!0===fa.get("previous_websocket_failure")}markConnectionHealthy(){fa.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=od(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(x(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Wt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cq(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),Aq=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ys,bc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=bc&&bc.isAvailable();let i=r&&!bc.previouslyFailed();if(n.webSocketOnly&&(r||mn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bc];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class Oq{constructor(e,n,r,i,s,o,a,u,c,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hh("c:"+this.id+":"),this.transportManager_=new Aq(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gh("t",e),r=Gh("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gh("t",e),r=Gh("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gh("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?HM("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HM("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&mn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),zh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Fq{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class Lq{constructor(e){this.allowedEvents_=e,this.listeners_={},x(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){x(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class ey extends Lq{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ZI()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ey}getInitialEvent(e){return x("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ee{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function ge(){return new Ee("")}function ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xs(t){return t.pieces_.length-t.pieceNum_}function ke(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ee(t.pieces_,e)}function JM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Wh(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Bq(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ee(e,0)}function We(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ee)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ee(n,0)}function se(t){return t.pieceNum_>=t.pieces_.length}function Sn(t,e){const n=ie(t),r=ie(e);if(null===n)return e;if(n===r)return Sn(ke(t),ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ZM(t,e){if(Xs(t)!==Xs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xs(t)>Xs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class eve{constructor(e,n){this.errorPrefix_=n,this.parts_=Wh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zg(this.parts_[r]);$q(this)}}function $q(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ma(t))}function ma(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class ex extends Lq{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ex}getInitialEvent(e){return x("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Kh=1e3;let ny,_a=(()=>{class t extends Fq{constructor(n,r,i,s,o,a,u,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Hh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ex.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&ey.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Wt(o)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new xu,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,u=>{const c=u.d,l=u.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),"ok"!==l&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&Li(n,"w")){const i=Nu(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();mn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=$g(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=$g(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Wt(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):HM("Unrecognized action received from server: "+Wt(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kh,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Kh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Kh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return m(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let u=!1,c=null;const l=function(){c?c.close():(u=!0,s())};n.realtime_={close:l,sendRequest:function(f){x(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);u?jt("getToken() completed but was canceled"):(jt("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,c=new Oq(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{mn(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),u||(n.repoInfo_.nodeAdmin&&mn(f),l())}}})()}interrupt(n){jt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){jt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],nC(this.interruptReasons_)&&(this.reconnectDelay_=Kh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>GM(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Ee(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){jt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){jt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+$M.replace(/\./g,"-")]=1,ZI()?n["framework.cordova"]=1:TU()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=ey.getInstance().currentlyOnline();return nC(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class oe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new oe(e,n)}}class ty{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new oe(Qs,e),i=new oe(Qs,n);return 0!==this.compare(r,i)}minPost(){return oe.MIN}}class Gq extends ty{static get __EMPTY_NODE(){return ny}static set __EMPTY_NODE(e){ny=e}compare(e,n){return ga(e.name,n.name)}isDefinedOn(e){throw Mu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return oe.MIN}maxPost(){return new oe(ts,ny)}makePost(e,n){return x("string"==typeof e,"KeyIndex indexValue must always be a string."),new oe(e,ny)}toString(){return".key"}}const fi=new Gq;class ry{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let nx,Nr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Bn.EMPTY_NODE,this.right=o??Bn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Bn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Bn{constructor(e,n=Bn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ry(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ry(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ry(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ry(this.root_,null,this.comparator_,!0,e)}}function uve(t,e){return ga(t.name,e.name)}function tx(t,e){return ga(t,e)}Bn.EMPTY_NODE=new class ave{copy(e,n,r,i,s){return this}insert(e,n,r){return new Nr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zq=function(t){return"number"==typeof t?"number:"+lq(t):"string:"+t},qq=function(t){if(t.isLeafNode()){const e=t.val();x("string"==typeof e||"number"==typeof e||"object"==typeof e&&Li(e,".sv"),"Priority must be a string or number.")}else x(t===nx||t.isEmpty(),"priority of unexpected type.");x(t===nx||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Wq,Kq,Qq,Tc=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,x(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qq(this.priorityNode_)}static set __childrenNodeConstructor(n){Wq=n}static get __childrenNodeConstructor(){return Wq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return se(n)?this:".priority"===ie(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=ie(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(x(".priority"!==i||1===Xs(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+zq(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?lq(this.value_):this.value_,this.lazyHash_=oq(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(x(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return x(s>=0,"Unknown leaf type: "+r),x(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Ve=new class hve extends ty{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?ga(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return oe.MIN}maxPost(){return new oe(ts,new Tc("[PRIORITY-POST]",Qq))}makePost(e,n){const r=Kq(e);return new oe(n,new Tc("[PRIORITY-POST]",r))}toString(){return".priority"}},fve=Math.log(2);class pve{constructor(e){this.count=parseInt(Math.log(e+1)/fve,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const iy=function(t,e,n,r){t.sort(e);const i=function(u,c){const l=c-u;let d,h;if(0===l)return null;if(1===l)return d=t[u],h=n?n(d):d,new Nr(h,d.node,Nr.BLACK,null,null);{const f=parseInt(l/2,10)+u,p=i(u,f),g=i(f+1,c);return d=t[f],h=n?n(d):d,new Nr(h,d.node,Nr.BLACK,p,g)}},a=function(u){let c=null,l=null,d=t.length;const h=function(p,g){const _=d-p,w=d;d-=p;const y=i(_+1,w),D=t[_],P=n?n(D):D;f(new Nr(P,D.node,g,null,y))},f=function(p){c?(c.left=p,c=p):(l=p,c=p)};for(let p=0;p<u.count;++p){const g=u.nextBitIsOne(),_=Math.pow(2,u.count-(p+1));g?h(_,Nr.BLACK):(h(_,Nr.BLACK),h(_,Nr.RED))}return l}(new pve(t.length));return new Bn(r||e,a)};let rx;const Sc={};class ns{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return x(Sc&&Ve,"ChildrenNode.ts has not been loaded"),rx=rx||new ns({".priority":Sc},{".priority":Ve}),rx}get(e){const n=Nu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bn?n:null}hasIndex(e){return Li(this.indexSet_,e.toString())}addIndex(e,n){x(e!==fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(oe.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?iy(r,e.getCompare()):Sc;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const l=Object.assign({},this.indexes_);return l[u]=a,new ns(l,c)}addToIndexes(e,n){const r=jg(this.indexes_,(i,s)=>{const o=Nu(this.indexSet_,s);if(x(o,"Missing index implementation for "+s),i===Sc){if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(oe.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),iy(a,o.getCompare())}return Sc}{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new oe(e.name,a))),u.insert(e,e.node)}});return new ns(r,this.indexSet_)}removeFromIndexes(e,n){const r=jg(this.indexes_,i=>{if(i===Sc)return i;{const s=n.get(e.name);return s?i.remove(new oe(e.name,s)):i}});return new ns(r,this.indexSet_)}}let Qh,ee=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qq(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qh||(Qh=new t(new Bn(tx),null,ns.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qh}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Qh:r}}getChild(n){const r=ie(n);return null===r?this:this.getImmediateChild(r).getChild(ke(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(x(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new oe(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Qh:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=ie(n);if(null===i)return r;{x(".priority"!==ie(n)||1===Xs(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ke(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Ve,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+zq(this.getPriority().val())+":"),this.forEachChild(Ve,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":oq(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new oe(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new oe(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new oe(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,oe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,oe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Yh?-1:0}withIndex(n){if(n===fi||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===fi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ve),s=r.getIterator(Ve);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===fi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Yh=new class gve extends ee{constructor(){super(new Bn(tx),ee.EMPTY_NODE,ns.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(oe,{MIN:{value:new oe(Qs,ee.EMPTY_NODE)},MAX:{value:new oe(ts,Yh)}}),Gq.__EMPTY_NODE=ee.EMPTY_NODE,Tc.__childrenNodeConstructor=ee,function cve(t){nx=t}(Yh),function dve(t){Qq=t}(Yh);const mve=!0;function Ze(t,e=null){if(null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),x(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Tc(t,Ze(e));if(t instanceof Array||!mve){let n=ee.EMPTY_NODE;return Ht(t,(r,i)=>{if(Li(t,r)&&"."!==r.substring(0,1)){const s=Ze(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ze(e))}{const n=[];let r=!1;if(Ht(t,(o,a)=>{if("."!==o.substring(0,1)){const u=Ze(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new oe(o,u)))}}),0===n.length)return ee.EMPTY_NODE;const s=iy(n,uve,o=>o.name,tx);if(r){const o=iy(n,Ve.getCompare());return new ee(s,Ze(e),new ns({".priority":o},{".priority":Ve}))}return new ee(s,Ze(e),ns.Default)}}!function lve(t){Kq=t}(Ze);class ix extends ty{constructor(e){super(),this.indexPath_=e,x(!se(e)&&".priority"!==ie(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?ga(e.name,n.name):s}makePost(e,n){const r=Ze(e),i=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new oe(n,i)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,Yh);return new oe(ts,e)}toString(){return Wh(this.indexPath_,0).join("/")}}const sx=new class _ve extends ty{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?ga(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return oe.MIN}maxPost(){return oe.MAX}makePost(e,n){const r=Ze(e);return new oe(n,r)}toString(){return".value"}};function Jh(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class ax{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ve}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qs}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ve}copy(){const e=new ax;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Xq(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ve?n="$priority":t.index_===sx?n="$value":t.index_===fi?n="$key":(x(t.index_ instanceof ix,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Wt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Wt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Wt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Wt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Wt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Jq(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ve&&(e.i=t.index_.toString()),e}class oy extends Fq{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Hh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(x(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=oy.getListenId_(e,r),a={};this.listens_[o]=a;const u=Xq(e._queryParams);this.restRequest_(s+".json",u,(c,l)=>{let d=l;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),Nu(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,n){const r=oy.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Xq(e._queryParams),r=e._path.toString(),i=new xu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ad(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=od(a.responseText)}catch{mn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&mn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class bve{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function ay(){return{value:null,children:new Map}}function Mc(t,e,n){if(se(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ie(e);t.children.has(r)||t.children.set(r,ay()),Mc(t.children.get(r),e=ke(e),n)}}function dx(t,e,n){null!==t.value?n(e,t.value):function Tve(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{dx(i,new Ee(e.toString()+"/"+r),n)})}class Sve{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ht(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class xve{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Sve(e);const r=1e4+2e4*Math.random();zh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ht(e,(i,s)=>{s>0&&Li(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),zh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pi=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(pi||{});function px(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class uy{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=pi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(se(this.path)){if(null!=this.affectedTree.value)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ee(e));return new uy(ge(),n,this.revert)}}return x(ie(this.path)===e,"operationForChild called for unrelated child."),new uy(ke(this.path),this.affectedTree,this.revert)}}class ya{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=pi.OVERWRITE}operationForChild(e){return se(this.path)?new ya(this.source,ge(),this.snap.getImmediateChild(e)):new ya(this.source,ke(this.path),this.snap)}}class xc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=pi.MERGE}operationForChild(e){if(se(this.path)){const n=this.children.subtree(new Ee(e));return n.isEmpty()?null:n.value?new ya(this.source,ge(),n.value):new xc(this.source,ge(),n)}return x(ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xc(this.source,ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Js{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(se(e))return this.isFullyInitialized()&&!this.filtered_;const n=ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function tf(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>function Pve(t,e,n){if(null==e.childName||null==n.childName)throw Mu("Should only compare child_ events.");const r=new oe(e.childName,e.snapshotNode),i=new oe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,u)),o.forEach(a=>{const u=function kve(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function cy(t,e){return{eventCache:t,serverCache:e}}function nf(t,e,n,r){return cy(new Js(e,n,r),t.serverCache)}function eW(t,e,n,r){return cy(t.eventCache,new Js(e,n,r))}function ly(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function va(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let gx;class Ue{constructor(e,n=(()=>(gx||(gx=new Bn(yye)),gx))()){this.value=e,this.children=n}static fromObject(e){let n=new Ue(null);return Ht(e,(r,i)=>{n=n.set(new Ee(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:ge(),value:this.value};if(se(e))return null;{const r=ie(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ke(e),n);return null!=s?{path:We(new Ee(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(se(e))return this;{const n=ie(e),r=this.children.get(n);return null!==r?r.subtree(ke(e)):new Ue(null)}}set(e,n){if(se(e))return new Ue(n,this.children);{const r=ie(e),s=(this.children.get(r)||new Ue(null)).set(ke(e),n),o=this.children.insert(r,s);return new Ue(this.value,o)}}remove(e){if(se(e))return this.children.isEmpty()?new Ue(null):new Ue(null,this.children);{const n=ie(e),r=this.children.get(n);if(r){const i=r.remove(ke(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new Ue(null):new Ue(this.value,s)}return this}}get(e){if(se(e))return this.value;{const n=ie(e),r=this.children.get(n);return r?r.get(ke(e)):null}}setTree(e,n){if(se(e))return n;{const r=ie(e),s=(this.children.get(r)||new Ue(null)).setTree(ke(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Ue(this.value,o)}}fold(e){return this.fold_(ge(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(We(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ge(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(se(e))return null;{const s=ie(e),o=this.children.get(s);return o?o.findOnPath_(ke(e),We(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ge(),n)}foreachOnPath_(e,n,r){if(se(e))return this;{this.value&&r(n,this.value);const i=ie(e),s=this.children.get(i);return s?s.foreachOnPath_(ke(e),We(n,i),r):new Ue(null)}}foreach(e){this.foreach_(ge(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(We(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class Rr{constructor(e){this.writeTree_=e}static empty(){return new Rr(new Ue(null))}}function rf(t,e,n){if(se(e))return new Rr(new Ue(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Sn(i,e);return s=s.updateChild(o,n),new Rr(t.writeTree_.set(i,s))}{const i=new Ue(n),s=t.writeTree_.setTree(e,i);return new Rr(s)}}}function mx(t,e,n){let r=t;return Ht(n,(i,s)=>{r=rf(r,We(e,i),s)}),r}function tW(t,e){if(se(e))return Rr.empty();{const n=t.writeTree_.setTree(e,new Ue(null));return new Rr(n)}}function _x(t,e){return null!=wa(t,e)}function wa(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Sn(n.path,e)):null}function nW(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ve,(r,i)=>{e.push(new oe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new oe(r,i.value))}),e}function Zs(t,e){if(se(e))return t;{const n=wa(t,e);return new Rr(null!=n?new Ue(n):t.writeTree_.subtree(e))}}function yx(t){return t.writeTree_.isEmpty()}function Nc(t,e){return rW(ge(),t.writeTree_,e)}function rW(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(x(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=rW(We(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(We(t,".priority"),r)),n}}function dy(t,e){return uW(e,t)}function Bve(t,e){if(t.snap)return gr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gr(We(t.path,n),e))return!0;return!1}function jve(t){return t.visible}function iW(t,e,n){let r=Rr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)gr(n,o)?(a=Sn(n,o),r=rf(r,a,s.snap)):gr(o,n)&&(a=Sn(o,n),r=rf(r,ge(),s.snap.getChild(a)));else{if(!s.children)throw Mu("WriteRecord should have .snap or .children");if(gr(n,o))a=Sn(n,o),r=mx(r,a,s.children);else if(gr(o,n))if(a=Sn(o,n),se(a))r=mx(r,ge(),s.children);else{const u=Nu(s.children,ie(a));if(u){const c=u.getChild(ke(a));r=rf(r,ge(),c)}}}}}return r}function sW(t,e,n,r,i){if(r||i){const s=Zs(t.visibleWrites,e);return!i&&yx(s)?n:i||null!=n||_x(s,ge())?Nc(iW(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(gr(c.path,e)||gr(e,c.path))},e),n||ee.EMPTY_NODE):null}{const s=wa(t.visibleWrites,e);if(null!=s)return s;{const o=Zs(t.visibleWrites,e);return yx(o)?n:null!=n||_x(o,ge())?Nc(o,n||ee.EMPTY_NODE):null}}}function hy(t,e,n,r){return sW(t.writeTree,t.treePath,e,n,r)}function vx(t,e){return function Hve(t,e,n){let r=ee.EMPTY_NODE;const i=wa(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ve,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Zs(t.visibleWrites,e);return n.forEachChild(Ve,(o,a)=>{const u=Nc(Zs(s,new Ee(o)),a);r=r.updateImmediateChild(o,u)}),nW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return nW(Zs(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function oW(t,e,n,r){return function Gve(t,e,n,r,i){x(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=We(e,n);if(_x(t.visibleWrites,s))return null;{const o=Zs(t.visibleWrites,s);return yx(o)?i.getChild(n):Nc(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function fy(t,e){return function qve(t,e){return wa(t.visibleWrites,e)}(t.writeTree,We(t.treePath,e))}function wx(t,e,n){return function zve(t,e,n,r){const i=We(e,n),s=wa(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Nc(Zs(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function aW(t,e){return uW(We(t.treePath,e),t.writeTree)}function uW(t,e){return{treePath:t,writeTree:e}}class Yve{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;x("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),x(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,Jh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,function Xh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,function Ac(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw Mu("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Jh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cW=new class Xve{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class Ex{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Js(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:va(this.viewCache_),s=function Qve(t,e,n,r,i,s){return function Wve(t,e,n,r,i,s,o){let a;const u=Zs(t.visibleWrites,e),c=wa(u,ge());if(null!=c)a=c;else{if(null==n)return[];a=Nc(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&l.length<i;)0!==d(f,r)&&l.push(f),f=h.getNext();return l}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function lW(t,e,n,r,i,s){const o=e.eventCache;if(null!=fy(r,n))return e;{let a,u;if(se(n))if(x(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=va(e),d=vx(r,c instanceof ee?c:ee.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=hy(r,va(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ie(n);if(".priority"===c){x(1===Xs(n),"Can't have a priority with additional path components");const l=o.getNode();u=e.serverCache.getNode();const d=oW(r,n,l,u);a=null!=d?t.filter.updatePriority(l,d):o.getNode()}else{const l=ke(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const h=oW(r,n,o.getNode(),u);d=null!=h?o.getNode().getImmediateChild(c).updateChild(l,h):o.getNode().getImmediateChild(c)}else d=wx(r,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,l,i,s):o.getNode()}}return nf(e,a,o.isFullyInitialized()||se(n),t.filter.filtersNodes())}}function py(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const l=o?t.filter:t.filter.getIndexedFilter();if(se(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){const f=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),f,null)}else{const f=ie(n);if(!u.isCompleteForPath(n)&&Xs(n)>1)return e;const p=ke(n),_=u.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?l.updatePriority(u.getNode(),_):l.updateChild(u.getNode(),f,_,p,cW,null)}const d=eW(e,c,u.isFullyInitialized()||se(n),l.filtersNodes());return lW(t,d,n,i,new Ex(i,d,s),a)}function Ix(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const l=new Ex(i,e,s);if(se(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=nf(e,c,!0,t.filter.filtersNodes());else{const d=ie(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),r),u=nf(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=ke(n),f=a.getNode().getImmediateChild(d);let p;if(se(h))p=r;else{const g=l.getCompleteChild(d);p=null!=g?".priority"===JM(h)&&g.getChild(Bq(h)).isEmpty()?g:g.updateChild(h,r):ee.EMPTY_NODE}u=f.equals(p)?e:nf(e,t.filter.updateChild(a.getNode(),d,p,h,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function dW(t,e){return t.eventCache.isCompleteForChild(e)}function hW(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Cx(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=se(n)?r:new Ue(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const p=hW(0,e.serverCache.getNode().getImmediateChild(d),h);u=py(t,u,new Ee(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!l.hasChild(d)&&!f){const g=hW(0,e.serverCache.getNode().getImmediateChild(d),h);u=py(t,u,new Ee(d),g,i,s,o,a)}}),u}function cwe(t,e){const n=va(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!se(e)&&!n.getImmediateChild(ie(e)).isEmpty())?n.getChild(e):null}function gW(t,e,n,r){e.type===pi.MERGE&&null!==e.source.queryId&&(x(va(t.viewCache_),"We should always have a full cache before handling merges"),x(ly(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function ewe(t,e,n,r,i){const s=new Yve;let o,a;if(n.type===pi.OVERWRITE){const c=n;c.source.fromUser?o=Ix(t,e,c.path,c.snap,r,i,s):(x(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!se(c.path),o=py(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===pi.MERGE){const c=n;c.source.fromUser?o=function nwe(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const l=We(n,u);dW(e,ie(l))&&(a=Ix(t,a,l,c,i,s,o))}),r.foreach((u,c)=>{const l=We(n,u);dW(e,ie(l))||(a=Ix(t,a,l,c,i,s,o))}),a}(t,e,c.path,c.children,r,i,s):(x(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Cx(t,e,c.path,c.children,r,i,a,s))}else if(n.type===pi.ACK_USER_WRITE){const c=n;o=c.revert?function swe(t,e,n,r,i,s){let o;if(null!=fy(r,n))return e;{const a=new Ex(r,e,i),u=e.eventCache.getNode();let c;if(se(n)||".priority"===ie(n)){let l;if(e.serverCache.isFullyInitialized())l=hy(r,va(e));else{const d=e.serverCache.getNode();x(d instanceof ee,"serverChildren would be complete if leaf node"),l=vx(r,d)}c=t.filter.updateFullNode(u,l,s)}else{const l=ie(n);let d=wx(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=u.getImmediateChild(l)),c=null!=d?t.filter.updateChild(u,l,d,ke(n),a,s):e.eventCache.getNode().hasChild(l)?t.filter.updateChild(u,l,ee.EMPTY_NODE,ke(n),a,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=hy(r,va(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=fy(r,ge()),nf(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,r,i,s):function rwe(t,e,n,r,i,s,o){if(null!=fy(i,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(se(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return py(t,e,n,u.getNode().getChild(n),i,s,a,o);if(se(n)){let c=new Ue(null);return u.getNode().forEachChild(fi,(l,d)=>{c=c.set(new Ee(l),d)}),Cx(t,e,n,c,i,s,a,o)}return e}{let c=new Ue(null);return r.foreach((l,d)=>{const h=We(n,l);u.isCompleteForPath(h)&&(c=c.set(l,u.getNode().getChild(h)))}),Cx(t,e,n,c,i,s,a,o)}}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==pi.LISTEN_COMPLETE)throw Mu("Unknown operation type: "+n.type);o=function iwe(t,e,n,r,i){const s=e.serverCache;return lW(t,eW(e,s.getNode(),s.isFullyInitialized()||se(n),s.isFiltered()),n,r,cW,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function twe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ly(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function Yq(t){return{type:"value",snapshotNode:t}}(ly(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,i,e,n,r);return function Zve(t,e){x(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),x(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),x(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,function mW(t,e,n,r){return function Rve(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function yve(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),tf(t,i,"child_removed",e,r,n),tf(t,i,"child_added",e,r,n),tf(t,i,"child_moved",s,r,n),tf(t,i,"child_changed",e,r,n),tf(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,s.changes,s.viewCache.eventCache.getNode(),null)}let gy,_y;function Dx(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return x(null!=s,"SyncTree gave us an op for an invalid query."),gW(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(gW(o,e,n,r));return s}}function eo(t,e){let n=null;for(const r of t.views.values())n=n||cwe(r,e);return n}class IW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ue(null),this.pendingWriteTree_=function Kve(){return{visibleWrites:Rr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bx(t,e,n,r,i){return function Fve(t,e,n,r,i){x(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=rf(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Rc(t,new ya({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function no(t,e,n=!1){const r=function Vve(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function Uve(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);x(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Bve(a,r.path)?i=!1:gr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function $ve(t){t.visibleWrites=iW(t.allWrites,jve,ge()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tW(t.visibleWrites,r.path):Ht(r.children,u=>{t.visibleWrites=tW(t.visibleWrites,We(r.path,u))}),!0))}(t.pendingWriteTree_,e)){let s=new Ue(null);return null!=r.snap?s=s.set(ge(),!0):Ht(r.children,o=>{s=s.set(new Ee(o),!0)}),Rc(t,new uy(r.path,s,n))}return[]}function sf(t,e,n){return Rc(t,new ya({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function vy(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=eo(a,Sn(o,e));if(c)return c});return sW(i,e,s,n,!0)}function Rc(t,e){return DW(e,t.syncPointTree_,null,dy(t.pendingWriteTree_,ge()))}function DW(t,e,n,r){if(se(t.path))return bW(t,e,n,r);{const i=e.get(ge());null==n&&null!=i&&(n=eo(i,ge()));let s=[];const o=ie(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,l=aW(r,o);s=s.concat(DW(a,u,c,l))}return i&&(s=s.concat(Dx(i,t,r,n))),s}}function bW(t,e,n,r){const i=e.get(ge());null==n&&null!=i&&(n=eo(i,ge()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=aW(r,o),l=t.operationForChild(o);l&&(s=s.concat(bW(l,a,u,c)))}),i&&(s=s.concat(Dx(i,t,r,n))),s}function Sx(t,e){return t.tagToQueryMap.get(e)}function Ax(t){const e=t.indexOf("$");return x(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ee(t.substr(0,e))}}function Mx(t,e,n){const r=t.syncPointTree_.get(e);return x(r,"Missing sync point for query tag that we're tracking"),Dx(r,n,dy(t.pendingWriteTree_,e),null)}class xx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new xx(n)}node(){return this.node_}}class Nx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=We(this.path_,e);return new Nx(this.syncTree_,n)}node(){return vy(this.syncTree_,this.path_)}}const xwe=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},SW=function(t,e,n){return t&&"object"==typeof t?(x(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Nwe(t[".sv"],e,n):"object"==typeof t[".sv"]?Rwe(t[".sv"],e):void x(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Nwe=function(t,e,n){if("timestamp"===t)return n.timestamp;x(!1,"Unexpected server value: "+t)},Rwe=function(t,e,n){t.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&x(!1,"Unexpected increment value: "+r);const i=e.node();if(x(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},AW=function(t,e,n,r){return kx(e,new Nx(n,t),r)},Rx=function(t,e,n){return kx(t,new xx(e),n)};function kx(t,e,n){const r=t.getPriority().val(),i=SW(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=SW(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Tc(a,Ze(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Tc(i))),o.forEachChild(Ve,(a,u)=>{const c=kx(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}class Px{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ey(t,e){let n=e instanceof Ee?e:new Ee(e),r=t,i=ie(n);for(;null!==i;){const s=Nu(r.node.children,i)||{children:{},childCount:0};r=new Px(i,r,s),n=ke(n),i=ie(n)}return r}function Ea(t){return t.node.value}function Ox(t,e){t.node.value=e,Fx(t)}function MW(t){return t.node.childCount>0}function Iy(t,e){Ht(t.node.children,(n,r)=>{e(new Px(n,t,r))})}function xW(t,e,n,r){n&&!r&&e(t),Iy(t,i=>{xW(i,e,!0,r)}),n&&r&&e(t)}function cf(t){return new Ee(null===t.parent?t.name:cf(t.parent)+"/"+t.name)}function Fx(t){null!==t.parent&&function Owe(t,e,n){const r=function kwe(t){return void 0===Ea(t)&&!MW(t)}(n),i=Li(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Fx(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Fx(t))}(t.parent,t.name,t)}const Fwe=/[\[\].#$\/\u0000-\u001F\u007F]/,Lwe=/[\[\].#$\u0000-\u001F\u007F]/,Lx=10485760,Cy=function(t){return"string"==typeof t&&0!==t.length&&!Fwe.test(t)},df=function(t,e,n){const r=n instanceof Ee?new eve(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+ma(r));if("function"==typeof e)throw new Error(t+"contains a function "+ma(r)+" with contents = "+e.toString());if(X_(e))throw new Error(t+"contains "+e.toString()+" "+ma(r));if("string"==typeof e&&e.length>Lx/3&&zg(e)>Lx)throw new Error(t+"contains a string greater than "+Lx+" utf8 bytes "+ma(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ht(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Cy(o)))throw new Error(t+" contains an invalid key ("+o+") "+ma(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function tve(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zg(e),$q(t)})(r,o),df(t,a,r),function nve(t){const e=t.parts_.pop();t.byteLength_-=zg(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+ma(r)+" in addition to actual children.")}},kW=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Cy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!Lwe.test(t)}(t)}(n))throw new Error(function Gg(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $we{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function er(t,e,n){(function Dy(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!ZM(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function OW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(jwe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>gr(r,e)||gr(e,r))}function jwe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();pa&&jt("event: "+n.toString()),Dc(r)}}}const Hwe=25;class Gwe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $we,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ay(),this.transactionQueueTree_=new Px,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LW(t){const n=t.infoData_.getNode(new Ee(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function ff(t){return xwe({timestamp:LW(t)})}function VW(t,e,n,r,i){t.dataUpdateCount++;const s=new Ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=jg(n,c=>Ze(c));o=function Dwe(t,e,n,r){const i=Sx(t,r);if(i){const s=Ax(i),o=s.path,a=s.queryId,u=Sn(o,e),c=Ue.fromObject(n);return Mx(t,o,new xc(px(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{const u=Ze(n);o=function CW(t,e,n,r){const i=Sx(t,r);if(null!=i){const s=Ax(i),o=s.path,a=s.queryId,u=Sn(o,e);return Mx(t,o,new ya(px(a),u,n))}return[]}(t.serverSyncTree_,s,u,i)}else if(r){const u=jg(n,c=>Ze(c));o=function Ewe(t,e,n){const r=Ue.fromObject(n);return Rc(t,new xc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,u)}else{const u=Ze(n);o=sf(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Pc(t,s)),er(t.eventQueue_,a,o)}function UW(t,e){Bx(t,"connected",e),!1===e&&function Qwe(t){kc(t,"onDisconnectEvents");const e=ff(t),n=ay();dx(t.onDisconnect_,ge(),(i,s)=>{const o=AW(i,s,t.serverSyncTree_,e);Mc(n,i,o)});let r=[];dx(n,ge(),(i,s)=>{r=r.concat(sf(t.serverSyncTree_,i,s));const o=function Gx(t,e){const n=cf(jW(t,e)),r=Ey(t.transactionQueueTree_,e);return function Pwe(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{zx(t,i)}),zx(t,r),xW(r,i=>{zx(t,i)}),n}(t,i);Pc(t,o)}),t.onDisconnect_=ay(),er(t.eventQueue_,ge(),r)}(t)}function Bx(t,e,n){const r=new Ee("/.info/"+e),i=Ze(n);t.infoData_.updateSnapshot(r,i);const s=sf(t.infoSyncTree_,r,i);er(t.eventQueue_,r,s)}function by(t){return t.nextWriteId_++}function kc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),jt(n,...e)}function Hx(t,e,n){return vy(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function Ty(t,e=t.transactionQueueTree_){if(e||Sy(t,e),Ea(e)){const n=HW(t,e);x(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function nEe(t,e,n){const r=n.map(c=>c.currentWriteId),i=Hx(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const l=n[c];x(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=Sn(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{kc(t,"transaction put response",{path:u.toString(),status:c});let l=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(no(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Sy(t,Ey(t.transactionQueueTree_,e)),Ty(t,t.transactionQueueTree_),er(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)Dc(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{mn("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Pc(t,e)}},o)}(t,cf(e),n)}else MW(e)&&Iy(e,n=>{Ty(t,n)})}function Pc(t,e){const n=jW(t,e),r=cf(n);return function rEe(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Sn(n,u.path);let d,l=!1;if(x(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,d=u.abortReason,i=i.concat(no(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=Hwe)l=!0,d="maxretry",i=i.concat(no(t.serverSyncTree_,u.currentWriteId,!0));else{const h=Hx(t,u.path,o);u.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){df("transaction failed: Data returned ",f,u.path);let p=Ze(f);"object"==typeof f&&null!=f&&Li(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=u.currentWriteId,w=ff(t),y=Rx(p,h,w);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=by(t),o.splice(o.indexOf(_),1),i=i.concat(bx(t.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally)),i=i.concat(no(t.serverSyncTree_,_,!0))}else l=!0,d="nodata",i=i.concat(no(t.serverSyncTree_,u.currentWriteId,!0))}er(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Sy(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Dc(r[a]);Ty(t,t.transactionQueueTree_)}(t,HW(t,n),r),r}function jW(t,e){let n,r=t.transactionQueueTree_;for(n=ie(e);null!==n&&void 0===Ea(r);)r=Ey(r,n),n=ie(e=ke(e));return r}function HW(t,e){const n=[];return GW(t,e,n),n.sort((r,i)=>r.order-i.order),n}function GW(t,e,n){const r=Ea(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Iy(e,i=>{GW(t,i,n)})}function Sy(t,e){const n=Ea(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ox(e,n.length>0?n:void 0)}Iy(e,r=>{Sy(t,r)})}function zx(t,e){const n=Ea(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(x(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(x(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(no(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ox(e,void 0):n.length=s+1,er(t.eventQueue_,cf(e),i);for(let o=0;o<r.length;o++)Dc(r[o])}}const qx=function(t,e){const n=oEe(t),r=n.namespace;return"firebase.com"===n.domain&&hi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qM(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Ee(n.pathString)}},oEe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=function iEe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(l,d)));const h=function sEe(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mn(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class tr{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return se(this._path)?null:JM(this._path)}get ref(){return new kr(this._repo,this._path)}get _queryIdentifier(){const e=Jq(this._queryParams),n=GM(e);return"{}"===n?"default":n}get _queryObject(){return Jq(this._queryParams)}isEqual(e){if(!((e=Kt(e))instanceof tr))return!1;const n=this._repo===e._repo,r=ZM(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Jye(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class kr extends tr{constructor(e,n){super(e,n,new ax,!1)}get parent(){const e=Bq(this._path);return null===e?null:new kr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function hwe(t){x(!gy,"__referenceConstructor has already been defined"),gy=t})(kr),function _we(t){x(!_y,"__referenceConstructor has already been defined"),_y=t}(kr);const Kx={};class TEe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function zwe(t,e,n){if(t.stats_=QM(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new oy(t.repoInfo_,(r,i,s,o)=>{VW(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>UW(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new _a(t.repoInfo_,e,(r,i,s,o)=>{VW(t,r,i,s,o)},r=>{UW(t,r)},r=>{!function qwe(t,e){Ht(e,(n,r)=>{Bx(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function xye(t,e){const n=t.toString();return KM[n]||(KM[n]=e()),KM[n]}(t.repoInfo_,()=>new xve(t.stats_,t.server_)),t.infoData_=new bve,t.infoSyncTree_=new IW({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=sf(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Bx(t,"connected",!1),t.serverSyncTree_=new IW({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);er(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new kr(this._repo,ge())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CEe(t,e){const n=Kx[e];(!n||n[t.key]!==t)&&hi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function $W(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&hi("Cannot call "+e+" on a deleted database.")}}function SEe(t=ld(),e){const n=Cs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=JI("database");r&&function AEe(t,e,n,r={}){(t=Kt(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&hi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&hi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new qh(qh.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:bU(r.mockUserToken,t.app.options.projectId);s=new qh(o)}!function EEe(t,e,n,r){t.repoInfo_=new qM(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(n,...r)}return n}_a.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},_a.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function MEe(t){(function fye(t){$M=t})(Ds),Qt(new Pt("database",(e,{instanceIdentifier:n})=>function IEe(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u,c,o=qx(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=qx(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const l=i&&u?new qh(qh.OWNER):new Sye(t.name,t.options,e);kW("Invalid Firebase Database URL",o),se(o.path)||hi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function DEe(t,e,n,r){let i=Kx[e.name];i||(i={},Kx[e.name]=i);let s=i[t.toURLString()];return s&&hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Gwe(t,!1,n,r),i[t.toURLString()]=s,s}(a,t,l,new Tye(t.name,n));return new TEe(d,t)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Me(nq,"0.14.4",t),Me(nq,"0.14.4","esm2017")}();class Qx{constructor(e){return e}}const ZW="database",Yx=new F("angularfire2.database-instances");function PEe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Qx(r)}}const OEe={provide:class REe{constructor(){return gd(ZW)}},deps:[[new Ye,Yx]]},FEe={provide:Qx,useFactory:function kEe(t,e){const n=pd(ZW,t,e);return n&&new Qx(n)},deps:[[new Ye,Yx],Ts]};let LEe=(()=>{class t{constructor(){Me("angularfire",Pu.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({providers:[FEe,OEe]}),t})();function VEe(t,...e){return{ngModule:LEe,providers:[{provide:Yx,useFactory:PEe(t),multi:!0,deps:[De,vn,md,_d,[new Ye,Dm],[new Ye,wd],...e]}]}}const UEe=ji(SEe,!0),Jx="functions";class GEe{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return m(function*(){if(e.auth)try{const n=yield e.auth.getToken();return n?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return m(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var n=this;return m(function*(){if(n.appCheck){const r=e?yield n.appCheck.getLimitedUseToken():yield n.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var n=this;return m(function*(){return{authToken:yield n.getAuthToken(),messagingToken:yield n.getMessagingToken(),appCheckToken:yield n.getAppCheckToken(e)}})()}}const Zx="us-central1";class qEe{constructor(e,n,r,i,s=Zx,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new GEe(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=Zx}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}const r3="@firebase/functions";function nIe(t=ld(),e=Zx){const r=Cs(Kt(t),Jx).getImmediate({identifier:e}),i=JI("functions");return i&&function rIe(t,e,n){!function WEe(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}(Kt(t),e,n)}(r,...i),r}!function tIe(t,e){Qt(new Pt(Jx,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),u=r.getProvider("app-check-internal");return new qEe(s,o,a,u,i,t)},"PUBLIC").setMultipleInstances(!0)),Me(r3,"0.10.0",e),Me(r3,"0.10.0","esm2017")}(fetch.bind(self));class nN{constructor(e){return e}}const s3="functions",rN=new F("angularfire2.functions-instances");function oIe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new nN(r)}}const aIe={provide:class iIe{constructor(){return gd(s3)}},deps:[[new Ye,rN]]},uIe={provide:nN,useFactory:function sIe(t,e){const n=pd(s3,t,e);return n&&new nN(n)},deps:[[new Ye,rN],Ts]};let cIe=(()=>{class t{constructor(){Me("angularfire",Pu.full,"fn")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({providers:[uIe,aIe]}),t})();function lIe(t,...e){return{ngModule:cIe,providers:[{provide:rN,useFactory:oIe(t),multi:!0,deps:[De,vn,md,_d,[new Ye,Dm],[new Ye,wd],...e]}]}}const dIe=ji(nIe,!0),hIe=[];let fIe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[xo.forChild(hIe),xo]}),t})(),pIe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t}),t.\u0275inj=mt({imports:[WE,fIe]}),t})(),gIe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ct({type:t,bootstrap:[dye]}),t.\u0275inj=mt({providers:[{provide:gs,useClass:EL}],imports:[Jee,lye,f2,uye,bce(()=>Tce(hye_firebase)),afe(()=>ufe()),VEe(()=>UEe()),nye(()=>iye()),lIe(()=>dIe()),pIe]}),t})();Yee().bootstrapModule(gIe).catch(t=>console.error(t))}},Ae=>{Ae(Ae.s=839)}]);