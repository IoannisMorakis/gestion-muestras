"use strict";(self.webpackChunkgestion_muestras=self.webpackChunkgestion_muestras||[]).push([[179],{1187:(ce,C,M)=>{function O(t){return"function"==typeof t}function F(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const P=F(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function x(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class L{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(O(r))try{r()}catch(s){e=s instanceof P?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{U(s)}catch(o){e=e??[],o instanceof P?e=[...e,...o.errors]:e.push(o)}}if(e)throw new P(e)}}add(e){var n;if(e&&e!==this)if(this.closed)U(e);else{if(e instanceof L){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&x(n,e)}remove(e){const{_finalizers:n}=this;n&&x(n,e),e instanceof L&&e._removeParent(this)}}L.EMPTY=(()=>{const t=new L;return t.closed=!0,t})();const B=L.EMPTY;function A(t){return t instanceof L||t&&"closed"in t&&O(t.remove)&&O(t.add)&&O(t.unsubscribe)}function U(t){O(t)?t():t.unsubscribe()}const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},f={setTimeout(t,e,...n){const{delegate:r}=f;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=f;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function p(t){f.setTimeout(()=>{const{onUnhandledError:e}=I;if(!e)throw t;e(t)})}function _(){}const m=T("C",void 0,void 0);function T(t,e,n){return{kind:t,value:e,error:n}}let j=null;function K(t){if(I.useDeprecatedSynchronousErrorHandling){const e=!j;if(e&&(j={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=j;if(j=null,n)throw r}}else t()}class it extends L{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,A(e)&&e.add(this)):this.destination=Tt}static create(e,n,r){return new Ls(e,n,r)}next(e){this.isStopped?st(function b(t){return T("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?st(function v(t){return T("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?st(m,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Er=Function.prototype.bind;function Pr(t,e){return Er.call(t,e)}class Wo{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Vs(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Vs(r)}else Vs(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Vs(n)}}}class Ls extends it{constructor(e,n,r){let i;if(super(),O(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&I.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Pr(e.next,s),error:e.error&&Pr(e.error,s),complete:e.complete&&Pr(e.complete,s)}):i=e}this.destination=new Wo(i)}}function Vs(t){I.useDeprecatedSynchronousErrorHandling?function te(t){I.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=t)}(t):p(t)}function st(t,e){const{onStoppedNotification:n}=I;n&&f.setTimeout(()=>n(t,e))}const Tt={closed:!0,next:_,error:function Re(t){throw t},complete:_},tt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ue(t){return t}function ip(t){return 0===t.length?Ue:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Et=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function Lq(t){return t&&t instanceof it||function Fq(t){return t&&O(t.next)&&O(t.error)&&O(t.complete)}(t)&&A(t)}(n)?n:new Ls(n,r,i);return K(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Bx(r))((i,s)=>{const o=new Ls({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[tt](){return this}pipe(...n){return ip(n)(this)}toPromise(n){return new(n=Bx(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Bx(t){var e;return null!==(e=t??I.Promise)&&void 0!==e?e:Promise}const Vq=F(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Xi=(()=>{class t extends Et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new $x(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Vq}next(n){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?B:(this.currentObservers=null,s.push(n),new L(()=>{this.currentObservers=null,x(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Et;return n.source=this,n}}return t.create=(e,n)=>new $x(e,n),t})();class $x extends Xi{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:B}}class Fr extends Xi{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function jx(t){return O(t?.lift)}function cn(t){return e=>{if(jx(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tn(t,e,n,r,i){return new Uq(t,e,n,r,i)}class Uq extends it{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ot(t,e){return cn((n,r)=>{let i=0;n.subscribe(tn(r,s=>{r.next(t.call(e,s,i++))}))})}function wv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Us(t){return this instanceof Us?(this.v=t,this):new Us(t)}function Wx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Iv(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const qx=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Kx(t){return O(t?.then)}function Qx(t){return O(t[tt])}function Yx(t){return Symbol.asyncIterator&&O(t?.[Symbol.asyncIterator])}function Xx(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Jx=function o6(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Zx(t){return O(t?.[Jx])}function eN(t){return function zx(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(g){return new Promise(function(y,E){s.push([h,g,y,E])>1||a(h,g)})})}function a(h,g){try{!function u(h){h.value instanceof Us?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](g))}catch(y){d(s[0][3],y)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,g){h(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Us(n.read());if(i)return yield Us(void 0);yield yield Us(r)}}finally{n.releaseLock()}})}function tN(t){return O(t?.getReader)}function Lr(t){if(t instanceof Et)return t;if(null!=t){if(Qx(t))return function a6(t){return new Et(e=>{const n=t[tt]();if(O(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(qx(t))return function u6(t){return new Et(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Kx(t))return function c6(t){return new Et(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,p)})}(t);if(Yx(t))return nN(t);if(Zx(t))return function l6(t){return new Et(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(tN(t))return function d6(t){return nN(eN(t))}(t)}throw Xx(t)}function nN(t){return new Et(e=>{(function h6(t,e){var n,r,i,s;return function Hx(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Wx(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ji(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Cn(t,e,n=1/0){return O(e)?Cn((r,i)=>ot((s,o)=>e(r,s,i,o))(Lr(t(r,i))),n):("number"==typeof e&&(n=e),cn((r,i)=>function f6(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},g=E=>c<r?y(E):u.push(E),y=E=>{s&&e.next(E),c++;let D=!1;Lr(n(E,l++)).subscribe(tn(e,R=>{i?.(R),s?g(R):e.next(R)},()=>{D=!0},void 0,()=>{if(D)try{for(c--;u.length&&c<r;){const R=u.shift();o?Ji(e,o,()=>y(R)):y(R)}h()}catch(R){e.error(R)}}))};return t.subscribe(tn(e,g,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function cu(t=1/0){return Cn(Ue,t)}const mi=new Et(t=>t.complete());function Cv(t){return t[t.length-1]}function rN(t){return O(Cv(t))?t.pop():void 0}function Al(t){return function g6(t){return t&&O(t.schedule)}(Cv(t))?t.pop():void 0}function sp(t,e=0){return cn((n,r)=>{n.subscribe(tn(r,i=>Ji(r,t,()=>r.next(i),e),()=>Ji(r,t,()=>r.complete(),e),i=>Ji(r,t,()=>r.error(i),e)))})}function op(t,e=0){return cn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function iN(t,e){if(!t)throw new Error("Iterable cannot be null");return new Et(n=>{Ji(n,e,()=>{const r=t[Symbol.asyncIterator]();Ji(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ln(t,e){return e?function I6(t,e){if(null!=t){if(Qx(t))return function _6(t,e){return Lr(t).pipe(op(e),sp(e))}(t,e);if(qx(t))return function v6(t,e){return new Et(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Kx(t))return function y6(t,e){return Lr(t).pipe(op(e),sp(e))}(t,e);if(Yx(t))return iN(t,e);if(Zx(t))return function w6(t,e){return new Et(n=>{let r;return Ji(n,e,()=>{r=t[Jx](),Ji(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>O(r?.return)&&r.return()})}(t,e);if(tN(t))return function E6(t,e){return iN(eN(t),e)}(t,e)}throw Xx(t)}(t,e):Lr(t)}function ge(...t){return ln(t,Al(t))}function sN(t={}){const{connector:e=(()=>new Xi),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},g=()=>{h(),o=u=void 0,l=d=!1},y=()=>{const E=o;g(),E?.unsubscribe()};return cn((E,D)=>{c++,!d&&!l&&h();const R=u=u??e();D.add(()=>{c--,0===c&&!d&&!l&&(a=bv(y,i))}),R.subscribe(D),!o&&c>0&&(o=new Ls({next:S=>R.next(S),error:S=>{d=!0,h(),a=bv(g,n,S),R.error(S)},complete:()=>{l=!0,h(),a=bv(g,r),R.complete()}}),Lr(E).subscribe(o))})(s)}}function bv(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Ls({next:()=>{r.unsubscribe(),t()}});return Lr(e(...n)).subscribe(r)}function _i(t,e){return cn((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(tn(r,u=>{i?.unsubscribe();let c=0;const l=s++;Lr(t(u,l)).subscribe(i=tn(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function D6(t,e){return t===e}function Qe(t){for(let e in t)if(t[e]===Qe)return e;throw Error("Could not find renamed property on target object.")}function ap(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(nn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Dv(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const T6=Qe({__forward_ref__:Qe});function lt(t){return t.__forward_ref__=lt,t.toString=function(){return nn(this())},t}function me(t){return Tv(t)?t():t}function Tv(t){return"function"==typeof t&&t.hasOwnProperty(T6)&&t.__forward_ref__===lt}function Sv(t){return t&&!!t.\u0275providers}class W extends Error{constructor(e,n){super(function up(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ve(t){return"string"==typeof t?t:null==t?"":String(t)}function cp(t,e){throw new W(-201,!1)}function Vr(t,e){null==t&&function je(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function de(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $t(t){return{providers:t.providers||[],imports:t.imports||[]}}function lp(t){return aN(t,dp)||aN(t,cN)}function aN(t,e){return t.hasOwnProperty(e)?t[e]:null}function uN(t){return t&&(t.hasOwnProperty(Av)||t.hasOwnProperty(k6))?t[Av]:null}const dp=Qe({\u0275prov:Qe}),Av=Qe({\u0275inj:Qe}),cN=Qe({ngInjectableDef:Qe}),k6=Qe({ngInjectorDef:Qe});var Se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Se||{});let Mv;function ur(t){const e=Mv;return Mv=t,e}function dN(t,e,n){const r=lp(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Se.Optional?null:void 0!==e?e:void cp(nn(t))}const at=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ml={},xv="__NG_DI_FLAG__",hp="ngTempTokenPath",F6=/\n/gm,hN="__source";let lu;function Bs(t){const e=lu;return lu=t,e}function U6(t,e=Se.Default){if(void 0===lu)throw new W(-203,!1);return null===lu?dN(t,void 0,e):lu.get(t,e&Se.Optional?null:void 0,e)}function le(t,e=Se.Default){return(function lN(){return Mv}()||U6)(me(t),e)}function se(t,e=Se.Default){return le(t,fp(e))}function fp(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Nv(t){const e=[];for(let n=0;n<t.length;n++){const r=me(t[n]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,s=Se.Default;for(let o=0;o<r.length;o++){const a=r[o],u=B6(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(le(i,s))}else e.push(le(r))}return e}function xl(t,e){return t[xv]=e,t.prototype[xv]=e,t}function B6(t){return t[xv]}function Zi(t){return{toString:t}.toString()}var pp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(pp||{}),Qr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Qr||{});const yi={},Be=[],gp=Qe({\u0275cmp:Qe}),Rv=Qe({\u0275dir:Qe}),Ov=Qe({\u0275pipe:Qe}),pN=Qe({\u0275mod:Qe}),es=Qe({\u0275fac:Qe}),Nl=Qe({__NG_ELEMENT_ID__:Qe}),gN=Qe({__NG_ENV_ID__:Qe});function mN(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function kv(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];yN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function _N(t){return 3===t||4===t||6===t}function yN(t){return 64===t.charCodeAt(0)}function Rl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||vN(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function vN(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const wN="ng-template";function H6(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==mN(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function EN(t){return 4===t.type&&t.value!==wN}function G6(t,e,n){return e===(4!==t.type||n?t.value:wN)}function z6(t,e,n){let r=4;const i=t.attrs||[],s=function K6(t){for(let e=0;e<t.length;e++)if(_N(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!G6(t,u,n)||""===u&&1===e.length){if(Yr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!H6(t.attrs,c,n)){if(Yr(r))return!1;o=!0}continue}const d=W6(8&r?"class":u,i,EN(t),n);if(-1===d){if(Yr(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const g=8&r?h:null;if(g&&-1!==mN(g,c,0)||2&r&&c!==h){if(Yr(r))return!1;o=!0}}}}else{if(!o&&!Yr(r)&&!Yr(u))return!1;if(o&&Yr(u))continue;o=!1,r=u|1&r}}return Yr(r)||o}function Yr(t){return 0==(1&t)}function W6(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Q6(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function IN(t,e,n=!1){for(let r=0;r<e.length;r++)if(z6(t,e[r],n))return!0;return!1}function CN(t,e){return t?":not("+e.trim()+")":e}function X6(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Yr(o)&&(e+=CN(s,i),i=""),r=o,s=s||!Yr(r);n++}return""!==i&&(e+=CN(s,i)),e}function bn(t){return Zi(()=>{const e=DN(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Qr.Emulated,styles:t.styles||Be,_:null,schemas:t.schemas||null,tView:null,id:""};TN(n);const r=t.dependencies;return n.directiveDefs=mp(r,!1),n.pipeDefs=mp(r,!0),n.id=function s9(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function t9(t){return He(t)||Fn(t)}function n9(t){return null!==t}function Yt(t){return Zi(()=>({type:t.type,bootstrap:t.bootstrap||Be,declarations:t.declarations||Be,imports:t.imports||Be,exports:t.exports||Be,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function bN(t,e){if(null==t)return yi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function pe(t){return Zi(()=>{const e=DN(t);return TN(e),e})}function He(t){return t[gp]||null}function Fn(t){return t[Rv]||null}function lr(t){return t[Ov]||null}function Cr(t,e){const n=t[pN]||null;if(!n&&!0===e)throw new Error(`Type ${nn(t)} does not have '\u0275mod' property.`);return n}function DN(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||yi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Be,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bN(t.inputs,e),outputs:bN(t.outputs)}}function TN(t){t.features?.forEach(e=>e(t))}function mp(t,e){if(!t)return null;const n=e?lr:t9;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(n9)}const rn=0,Z=1,Ee=2,St=3,Xr=4,Ol=5,Ln=6,hu=7,jt=8,fu=9,Ko=10,Ie=11,kl=12,SN=13,pu=14,Ht=15,Pl=16,gu=17,vi=18,Fl=19,AN=20,$s=21,ts=22,_p=23,yp=24,Ne=25,Pv=1,MN=2,wi=7,mu=9,Vn=11;function br(t){return Array.isArray(t)&&"object"==typeof t[Pv]}function dr(t){return Array.isArray(t)&&!0===t[Pv]}function Fv(t){return 0!=(4&t.flags)}function Qo(t){return t.componentOffset>-1}function wp(t){return 1==(1&t.flags)}function Jr(t){return!!t.template}function Lv(t){return 0!=(512&t[Ee])}function Yo(t,e){return t.hasOwnProperty(es)?t[es]:null}let d9=at.WeakRef??class l9{constructor(e){this.ref=e}deref(){return this.ref}},f9=0,Ei=null,Ep=!1;function dn(t){const e=Ei;return Ei=t,e}class kN{constructor(){this.id=f9++,this.ref=function h9(t){return new d9(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(null!=r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Ep;Ep=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{Ep=e}}producerAccessed(){if(Ep)throw new Error("");if(null===Ei)return;let e=Ei.producers.get(this.id);void 0===e?(e={consumerNode:Ei.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Ei.trackingVersion},Ei.producers.set(this.id,e),this.consumers.set(Ei.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Ei.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Ei?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let PN=null;const LN=()=>{};class _9 extends kN{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=LN,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=dn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=LN,this.watch(this.registerOnCleanup)}finally{dn(e)}}cleanup(){this.cleanupFn()}}class y9{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ur(){return VN}function VN(t){return t.type.prototype.ngOnChanges&&(t.setInput=w9),v9}function v9(){const t=BN(this),e=t?.current;if(e){const n=t.previous;if(n===yi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function w9(t,e,n,r){const i=this.declaredInputs[n],s=BN(t)||function E9(t,e){return t[UN]=e}(t,{previous:yi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new y9(u&&u.currentValue,e,a===yi),t[r]=e}Ur.ngInherit=!0;const UN="__ngSimpleChanges__";function BN(t){return t[UN]||null}const Ii=function(t,e,n){};function mt(t){for(;Array.isArray(t);)t=t[rn];return t}function bp(t,e){return mt(e[t])}function hr(t,e){return mt(e[t.index])}function HN(t,e){return t.data[e]}function Dr(t,e){const n=e[t];return br(n)?n:n[rn]}function js(t,e){return null==e?null:t[e]}function GN(t){t[gu]=0}function A9(t){1024&t[Ee]||(t[Ee]|=1024,WN(t,1))}function zN(t){1024&t[Ee]&&(t[Ee]&=-1025,WN(t,-1))}function WN(t,e){let n=t[St];if(null===n)return;n[Ol]+=e;let r=n;for(n=n[St];null!==n&&(1===e&&1===r[Ol]||-1===e&&0===r[Ol]);)n[Ol]+=e,r=n,n=n[St]}const fe={lFrame:rR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function QN(){return fe.bindingsEnabled}function $(){return fe.lFrame.lView}function Pe(){return fe.lFrame.tView}function Hs(t){return fe.lFrame.contextLView=t,t[jt]}function Gs(t){return fe.lFrame.contextLView=null,t}function Dn(){let t=YN();for(;null!==t&&64===t.type;)t=t.parent;return t}function YN(){return fe.lFrame.currentTNode}function Ci(t,e){const n=fe.lFrame;n.currentTNode=t,n.isParent=e}function Hv(){return fe.lFrame.isParent}function ns(){return fe.lFrame.bindingIndex}function rs(t){const e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function B9(t,e){const n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,zv(e)}function zv(t){fe.lFrame.currentDirectiveIndex=t}function qv(t){fe.lFrame.currentQueryIndex=t}function j9(t){const e=t[Z];return 2===e.type?e.declTNode:1===e.type?t[Ln]:null}function tR(t,e,n){if(n&Se.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Se.Host||(i=j9(s),null===i||(s=s[pu],10&i.type))););if(null===i)return!1;e=i,t=s}const r=fe.lFrame=nR();return r.currentTNode=e,r.lView=t,!0}function Kv(t){const e=nR(),n=t[Z];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function nR(){const t=fe.lFrame,e=null===t?null:t.child;return null===e?rR(t):e}function rR(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function iR(){const t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const sR=iR;function Qv(){const t=iR();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Xn(){return fe.lFrame.selectedIndex}function Xo(t){fe.lFrame.selectedIndex=t}function Yv(){fe.lFrame.currentNamespace="svg"}let uR=!0;function Dp(){return uR}function zs(t){uR=t}function Tp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function Sp(t,e,n){cR(t,e,3,n)}function Ap(t,e,n,r){(3&t[Ee])===n&&cR(t,e,n,r)}function Xv(t,e){let n=t[Ee];(3&n)===e&&(n&=8191,n+=1,t[Ee]=n)}function cR(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[gu]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[gu]+=65536),(a<s||-1==s)&&(K9(t,n,e,u),t[gu]=(4294901760&t[gu])+u+2),u++}function lR(t,e){Ii(4,t,e);const n=dn(null);try{e.call(t)}finally{dn(n),Ii(5,t,e)}}function K9(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ee]>>13<t[gu]>>16&&(3&t[Ee])===e&&(t[Ee]+=8192,lR(a,s)):lR(a,s)}const wu=-1;class Ul{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function dR(t){return t!==wu}function Mp(t){return 32767&t}function xp(t,e){let n=function J9(t){return t>>16}(t),r=e;for(;n>0;)r=r[pu],n--;return r}let Zv=!0;function Np(t){const e=Zv;return Zv=t,e}const hR=255,fR=5;let Z9=0;const bi={};function Rp(t,e){const n=pR(t,e);if(-1!==n)return n;const r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,ew(r.data,t),ew(e,null),ew(r.blueprint,null));const i=tw(t,e),s=t.injectorIndex;if(dR(i)){const o=Mp(i),a=xp(i,e),u=a[Z].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function ew(t,e){t.push(0,0,0,0,0,0,0,0,e)}function pR(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function tw(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=ER(i),null===r)return wu;if(n++,i=i[pu],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return wu}function nw(t,e,n){!function e5(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Nl)&&(r=n[Nl]),null==r&&(r=n[Nl]=Z9++);const i=r&hR;e.data[t+(i>>fR)]|=1<<i}(t,e,n)}function gR(t,e,n){if(n&Se.Optional||void 0!==t)return t;cp()}function mR(t,e,n,r){if(n&Se.Optional&&void 0===r&&(r=null),!(n&(Se.Self|Se.Host))){const i=t[fu],s=ur(void 0);try{return i?i.get(e,r,n&Se.Optional):dN(e,r,n&Se.Optional)}finally{ur(s)}}return gR(r,0,n)}function _R(t,e,n,r=Se.Default,i){if(null!==t){if(2048&e[Ee]&&!(r&Se.Self)){const o=function s5(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ee]&&!(512&o[Ee]);){const a=yR(s,o,n,r|Se.Self,bi);if(a!==bi)return a;let u=s.parent;if(!u){const c=o[AN];if(c){const l=c.get(n,bi,r);if(l!==bi)return l}u=ER(o),o=o[pu]}s=u}return i}(t,e,n,r,bi);if(o!==bi)return o}const s=yR(t,e,n,r,bi);if(s!==bi)return s}return mR(e,n,r,i)}function yR(t,e,n,r,i){const s=function r5(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Nl)?t[Nl]:void 0;return"number"==typeof e?e>=0?e&hR:i5:e}(n);if("function"==typeof s){if(!tR(e,t,r))return r&Se.Host?gR(i,0,r):mR(e,n,r,i);try{const o=s(r);if(null!=o||r&Se.Optional)return o;cp()}finally{sR()}}else if("number"==typeof s){let o=null,a=pR(t,e),u=wu,c=r&Se.Host?e[Ht][Ln]:null;for((-1===a||r&Se.SkipSelf)&&(u=-1===a?tw(t,e):e[a+8],u!==wu&&wR(r,!1)?(o=e[Z],a=Mp(u),e=xp(u,e)):a=-1);-1!==a;){const l=e[Z];if(vR(s,a,l.data)){const d=n5(a,e,n,o,r,c);if(d!==bi)return d}u=e[a+8],u!==wu&&wR(r,e[Z].data[a+8]===c)&&vR(s,a,e)?(o=l,a=Mp(u),e=xp(u,e)):a=-1}}return i}function n5(t,e,n,r,i,s){const o=e[Z],a=o.data[t+8],l=function Op(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let g=r?a:a+l;g<h;g++){const y=o[g];if(g<u&&n===y||g>=u&&y.type===n)return g}if(i){const g=o[u];if(g&&Jr(g)&&g.type===n)return u}return null}(a,o,n,null==r?Qo(a)&&Zv:r!=o&&0!=(3&a.type),i&Se.Host&&s===a);return null!==l?Jo(e,o,l,a):bi}function Jo(t,e,n,r){let i=t[n];const s=e.data;if(function Q9(t){return t instanceof Ul}(i)){const o=i;o.resolving&&function S6(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,`Circular dependency in DI detected for ${t}${n}`)}(function qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ve(t)}(s[n]));const a=Np(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?ur(o.injectImpl):null;tR(t,r,Se.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function q9(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=VN(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==u&&ur(u),Np(a),o.resolving=!1,sR()}}return i}function vR(t,e,n){return!!(n[e+(t>>fR)]&1<<t)}function wR(t,e){return!(t&Se.Self||t&Se.Host&&e)}class Eu{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return _R(this._tNode,this._lView,e,fp(r),n)}}function i5(){return new Eu(Dn(),$())}function Tn(t){return Zi(()=>{const e=t.prototype.constructor,n=e[es]||rw(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[es]||rw(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function rw(t){return Tv(t)?()=>{const e=rw(me(t));return e&&e()}:Yo(t)}function ER(t){const e=t[Z],n=e.type;return 2===n?e.declTNode:1===n?t[Ln]:null}const Cu="__parameters__";function Du(t,e,n){return Zi(()=>{const r=function iw(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(Cu)?u[Cu]:Object.defineProperty(u,Cu,{value:[]})[Cu];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function $l(t,e){t.forEach(n=>Array.isArray(n)?$l(n,e):e(n))}function CR(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Pp(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Tr(t,e,n){let r=Su(t,e);return r>=0?t[1|r]=n:(r=~r,function h5(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function sw(t,e){const n=Su(t,e);if(n>=0)return t[1|n]}function Su(t,e){return function bR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Mt=xl(Du("Optional"),8),Lp=xl(Du("SkipSelf"),4);function jp(t){return 128==(128&t.flags)}var Ws=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ws||{});const lw=new Map;let F5=0;const hw="__ngContext__";function Un(t,e){br(e)?(t[hw]=e[Fl],function V5(t){lw.set(t[Fl],t)}(e)):t[hw]=e}let fw;function pw(t,e){return fw(t,e)}function zl(t){const e=t[St];return dr(e)?e[St]:e}function GR(t){return WR(t[kl])}function zR(t){return WR(t[Xr])}function WR(t){for(;null!==t&&!dr(t);)t=t[Xr];return t}function xu(t,e,n,r,i){if(null!=r){let s,o=!1;dr(r)?s=r:br(r)&&(o=!0,r=r[rn]);const a=mt(r);0===t&&null!==n?null==i?XR(e,n,a):Zo(e,n,a,i||null,!0):1===t&&null!==n?Zo(e,n,a,i||null,!0):2===t?function Kp(t,e,n){const r=Wp(t,e);r&&function r7(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function o7(t,e,n,r,i){const s=n[wi];s!==mt(n)&&xu(e,t,r,s,i);for(let a=Vn;a<n.length;a++){const u=n[a];ql(u[Z],u,t,e,r,s)}}(e,t,s,n,i)}}function zp(t,e,n){return t.createElement(e,n)}function KR(t,e){const n=t[mu],r=n.indexOf(e);zN(e),n.splice(r,1)}function mw(t,e){if(t.length<=Vn)return;const n=Vn+e,r=t[n];if(r){const i=r[Pl];null!==i&&i!==t&&KR(i,r),e>0&&(t[n-1][Xr]=r[Xr]);const s=Pp(t,Vn+e);!function Q5(t,e){ql(t,e,e[Ie],2,null,null),e[rn]=null,e[Ln]=null}(r[Z],r);const o=s[vi];null!==o&&o.detachView(s[Z]),r[St]=null,r[Xr]=null,r[Ee]&=-129}return r}function QR(t,e){if(!(256&e[Ee])){const n=e[Ie];e[_p]?.destroy(),e[yp]?.destroy(),n.destroyNode&&ql(t,e,n,3,null,null),function J5(t){let e=t[kl];if(!e)return _w(t[Z],t);for(;e;){let n=null;if(br(e))n=e[kl];else{const r=e[Vn];r&&(n=r)}if(!n){for(;e&&!e[Xr]&&e!==t;)br(e)&&_w(e[Z],e),e=e[St];null===e&&(e=t),br(e)&&_w(e[Z],e),n=e&&e[Xr]}e=n}}(e)}}function _w(t,e){if(!(256&e[Ee])){e[Ee]&=-129,e[Ee]|=256,function n7(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ul)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Ii(4,a,u);try{u.call(a)}finally{Ii(5,a,u)}}else{Ii(4,i,s);try{s.call(i)}finally{Ii(5,i,s)}}}}}(t,e),function t7(t,e){const n=t.cleanup,r=e[hu];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[hu]=null);const i=e[$s];if(null!==i){e[$s]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[Z].type&&e[Ie].destroy();const n=e[Pl];if(null!==n&&dr(e[St])){n!==e[St]&&KR(n,e);const r=e[vi];null!==r&&r.detachView(t)}!function U5(t){lw.delete(t[Fl])}(e)}}function yw(t,e,n){return function YR(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[rn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Qr.None||s===Qr.Emulated)return null}return hr(r,n)}}(t,e.parent,n)}function Zo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XR(t,e,n){t.appendChild(e,n)}function JR(t,e,n,r,i){null!==r?Zo(t,e,n,r,i):XR(t,e,n)}function Wp(t,e){return t.parentNode(e)}let vw,Cw,tO=function eO(t,e,n){return 40&t.type?hr(t,n):null};function qp(t,e,n,r){const i=yw(t,r,e),s=e[Ie],a=function ZR(t,e,n){return tO(t,e,n)}(r.parent||e[Ln],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)JR(s,i,n[u],a,!1);else JR(s,i,n,a,!1);void 0!==vw&&vw(s,r,e,n,i)}function Wl(t,e){if(null!==e){const n=e.type;if(3&n)return hr(e,t);if(4&n)return ww(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Wl(t,r);{const i=t[e.index];return dr(i)?ww(-1,i):mt(i)}}if(32&n)return pw(e,t)()||mt(t[e.index]);{const r=rO(t,e);return null!==r?Array.isArray(r)?r[0]:Wl(zl(t[Ht]),r):Wl(t,e.next)}}return null}function rO(t,e){return null!==e?t[Ht][Ln].projection[e.projection]:null}function ww(t,e){const n=Vn+t+1;if(n<e.length){const r=e[n],i=r[Z].firstChild;if(null!==i)return Wl(r,i)}return e[wi]}function Ew(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Un(mt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Ew(t,e,n.child,r,i,s,!1),xu(e,t,i,a,s);else if(32&u){const c=pw(n,r);let l;for(;l=c();)xu(e,t,i,l,s);xu(e,t,i,a,s)}else 16&u?sO(t,e,r,n,i,s):xu(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ql(t,e,n,r,i,s){Ew(n,r,t.firstChild,e,i,s,!1)}function sO(t,e,n,r,i,s){const o=n[Ht],u=o[Ln].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)xu(e,t,i,u[c],s);else{let c=u;const l=o[St];jp(r)&&(c.flags|=128),Ew(t,e,c,l,i,s,!0)}}function oO(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function aO(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&kv(t,e,r),null!==i&&oO(t,e,i),null!==s&&function u7(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class dO{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class re{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jl=new re("ENVIRONMENT_INITIALIZER"),EO=new re("INJECTOR",-1),IO=new re("INJECTOR_DEF_TYPES");class CO{get(e,n=Ml){if(n===Ml){const r=new Error(`NullInjectorError: No provider for ${nn(e)}!`);throw r.name="NullInjectorError",r}return n}}function P7(...t){return{\u0275providers:DO(0,t),\u0275fromNgModule:!0}}function DO(t,...e){const n=[],r=new Set;let i;return $l(e,s=>{const o=s;Mw(o,n,[],r)&&(i||=[],i.push(o))}),void 0!==i&&TO(i,n),n}function TO(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];xw(i,s=>{e.push(s)})}}function Mw(t,e,n,r){if(!(t=me(t)))return!1;let i=null,s=uN(t);const o=!s&&He(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=uN(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)Mw(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{$l(s.imports,l=>{Mw(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&TO(c,e)}if(!a){const c=Yo(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:Be},{provide:IO,useValue:i,multi:!0},{provide:Jl,useValue:()=>le(i),multi:!0})}const u=s.providers;null==u||a||xw(u,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function xw(t,e){for(let n of t)Sv(n)&&(n=n.\u0275providers),Array.isArray(n)?xw(n,e):e(n)}const F7=Qe({provide:String,useValue:Qe});function Nw(t){return null!==t&&"object"==typeof t&&F7 in t}function ea(t){return"function"==typeof t}const Rw=new re("Set Injector scope."),Jp={},V7={};let Ow;function Zp(){return void 0===Ow&&(Ow=new CO),Ow}class ss{}class kw extends ss{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fw(e,o=>this.processProvider(o)),this.records.set(EO,Ou(void 0,this)),i.has("environment")&&this.records.set(ss,Ou(void 0,this));const s=this.records.get(Rw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(IO.multi,Be,Se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Bs(this),r=ur(void 0);try{return e()}finally{Bs(n),ur(r)}}get(e,n=Ml,r=Se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(gN))return e[gN](this);r=fp(r);const i=Bs(this),s=ur(void 0);try{if(!(r&Se.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function H7(t){return"function"==typeof t||"object"==typeof t&&t instanceof re}(e)&&lp(e);a=u&&this.injectableDefInScope(u)?Ou(Pw(e),Jp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Se.Self?Zp():this.parent).get(e,n=r&Se.Optional&&n===Ml?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[hp]=o[hp]||[]).unshift(nn(e)),i)throw o;return function $6(t,e,n,r){const i=t[hp];throw e[hN]&&i.unshift(e[hN]),t.message=function j6(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=nn(e);if(Array.isArray(e))i=e.map(nn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):nn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(F6,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[hp]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{ur(s),Bs(i)}}resolveInjectorInitializers(){const e=Bs(this),n=ur(void 0);try{const r=this.get(Jl.multi,Be,Se.Self);for(const i of r)i()}finally{Bs(e),ur(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(nn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){let n=ea(e=me(e))?e:me(e&&e.provide);const r=function B7(t){return Nw(t)?Ou(void 0,t.useValue):Ou(MO(t),Jp)}(e);if(ea(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ou(void 0,Jp,!0),i.factory=()=>Nv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Jp&&(n.value=V7,n.value=n.factory()),"object"==typeof n.value&&n.value&&function j7(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=me(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Pw(t){const e=lp(t),n=null!==e?e.factory:Yo(t);if(null!==n)return n;if(t instanceof re)throw new W(204,!1);if(t instanceof Function)return function U7(t){const e=t.length;if(e>0)throw function jl(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new W(204,!1);const n=function O6(t){return t&&(t[dp]||t[cN])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new W(204,!1)}function MO(t,e,n){let r;if(ea(t)){const i=me(t);return Yo(i)||Pw(i)}if(Nw(t))r=()=>me(t.useValue);else if(function AO(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Nv(t.deps||[]));else if(function SO(t){return!(!t||!t.useExisting)}(t))r=()=>le(me(t.useExisting));else{const i=me(t&&(t.useClass||t.provide));if(!function $7(t){return!!t.deps}(t))return Yo(i)||Pw(i);r=()=>new i(...Nv(t.deps))}return r}function Ou(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fw(t,e){for(const n of t)Array.isArray(n)?Fw(n,e):n&&Sv(n)?Fw(n.\u0275providers,e):e(n)}const eg=new re("AppId",{providedIn:"root",factory:()=>G7}),G7="ng",xO=new re("Platform Initializer"),Ks=new re("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),NO=new re("CSP nonce",{providedIn:"root",factory:()=>function Kl(){if(void 0!==Cw)return Cw;if(typeof document<"u")return document;throw new W(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let OO=(t,e)=>null;function kO(t,e){return OO(t,e)}class Z7{}class LO{}class t8{resolveComponentFactory(e){throw function e8(t){const e=Error(`No component factory found for ${nn(t)}.`);return e.ngComponent=t,e}(e)}}let sg=(()=>{class t{}return t.NULL=new t8,t})();function n8(){return Pu(Dn(),$())}function Pu(t,e){return new Sr(hr(t,e))}let Sr=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=n8,t})();class UO{}let os=(()=>{class t{constructor(){this.destroyNode=null}}return t.__NG_ELEMENT_ID__=()=>function i8(){const t=$(),n=Dr(Dn().index,t);return(br(n)?n:t)[Ie]}(),t})(),s8=(()=>{class t{}return t.\u0275prov=de({token:t,providedIn:"root",factory:()=>null}),t})();class Fu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const BO=new Fu("16.1.6"),qw={};function td(t){for(;t;){t[Ee]|=64;const e=zl(t);if(Lv(t)&&!e)return t;t=e}return null}function Kw(t){return t.ngOriginalError}class ta{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Kw(e);for(;n&&Kw(n);)n=Kw(n);return n||null}}const HO=new re("",{providedIn:"root",factory:()=>!1});function as(t){return t instanceof Function?t():t}class KO extends kN{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){td(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=dn(this);this.trackingVersion++;try{e(n,r)}finally{dn(i)}}destroy(){this.trackingVersion++}}let ag=null;function QO(){return ag??=new KO,ag}function YO(t,e){return t[e]??QO()}function XO(t,e){const n=QO();n.hasReadASignal&&(t[e]=ag,n.lView=t,ag=new KO)}const Ce={};function na(t){JO(Pe(),$(),Xn()+t,!1)}function JO(t,e,n,r){if(!r)if(3==(3&e[Ee])){const s=t.preOrderCheckHooks;null!==s&&Sp(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Ap(e,s,0,n)}Xo(n)}function nk(t,e=null,n=null,r){const i=rk(t,e,n,r);return i.resolveInjectorInitializers(),i}function rk(t,e=null,n=null,r,i=new Set){const s=[n||Be,P7(t)];return r=r||("object"==typeof t?void 0:nn(t)),new kw(s,e||Zp(),r||null,i)}let Jn=(()=>{class t{static create(n,r){if(Array.isArray(n))return nk({name:""},r,n,"");{const i=n.name??"";return nk({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=Ml,t.NULL=new CO,t.\u0275prov=de({token:t,providedIn:"any",factory:()=>le(EO)}),t.__NG_ELEMENT_ID__=-1,t})();function V(t,e=Se.Default){const n=$();return null===n?le(t,e):_R(Dn(),n,me(t),e)}function ug(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[rn]=i,d[Ee]=140|r,(null!==c||t&&2048&t[Ee])&&(d[Ee]|=2048),GN(d),d[St]=d[pu]=t,d[jt]=n,d[Ko]=o||t&&t[Ko],d[Ie]=a||t&&t[Ie],d[fu]=u||t&&t[fu]||null,d[Ln]=s,d[Fl]=function L5(){return F5++}(),d[ts]=l,d[AN]=c,d[Ht]=2==e.type?t[Ht]:d,d}function Vu(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Qw(t,e,n,r,i){const s=YN(),o=Hv(),u=t.data[e]=function T8(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function yu(){return null!==fe.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function U9(){return fe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Vl(){const t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ci(s,!0),s}function nd(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function sk(t,e,n,r,i){const s=YO(e,_p),o=Xn(),a=2&r;try{if(Xo(-1),a&&e.length>Ne&&JO(t,e,Ne,!1),Ii(a?2:0,i),a)s.runInContext(n,r,i);else{const c=dn(null);try{n(r,i)}finally{dn(c)}}}finally{a&&null===e[_p]&&XO(e,_p),Xo(o),Ii(a?3:1,i)}}function Yw(t,e,n){if(Fv(e)){const r=dn(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{dn(r)}}}function Xw(t,e,n){QN()&&(function O8(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Qo(n)&&function B8(t,e,n){const r=hr(e,t),i=ok(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=cg(t,ug(t,i,null,o,r,e,null,t[Ko].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Rp(n,e),Un(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=Jo(e,t,a,n);Un(c,e),null!==o&&$8(0,a-i,c,u,0,o),Jr(u)&&(Dr(n.index,e)[jt]=Jo(e,t,a,n))}}(t,e,n,hr(n,e)),64==(64&n.flags)&&dk(t,e,n))}function Jw(t,e,n=hr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function ok(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Zw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Zw(t,e,n,r,i,s,o,a,u,c,l){const d=Ne+r,h=d+i,g=function w8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ce);return n}(d,h),y="function"==typeof c?c():c;return g[Z]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:y,incompleteFirstPass:!1,ssrId:l}}let ak=t=>null;function uk(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?ck(n,e,i,s):r.hasOwnProperty(i)&&ck(n,e,r[i],s)}return n}function ck(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function eE(t,e,n,r){if(QN()){const i=null===r?null:{"":-1},s=function P8(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(IN(e,o.selectors,!1))if(r||(r=[]),Jr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),tE(t,e,a.length)}else r.unshift(o),tE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lk(t,e,n,o,i,a),i&&function F8(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new W(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Rl(n.mergedAttrs,n.attrs)}function lk(t,e,n,r,i,s){for(let c=0;c<r.length;c++)nw(Rp(n,e),t,r[c].type);!function V8(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=nd(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Rl(n.mergedAttrs,l.hostAttrs),U8(t,n,e,u,l),L8(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function S8(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,y=h?h.outputs:null;u=uk(d.inputs,l,u,h?h.inputs:null),c=uk(d.outputs,l,c,y);const E=null===u||null===o||EN(e)?null:j8(u,l,o);a.push(E)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function dk(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function $9(){return fe.lFrame.currentDirectiveIndex}();try{Xo(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];zv(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&k8(u,c)}}finally{Xo(-1),zv(o)}}function k8(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function tE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function L8(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Jr(e)&&(n[""]=t)}}function U8(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Yo(i.type)),o=new Ul(s,Jr(i),V);t.blueprint[r]=o,n[r]=o,function N8(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function R8(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,nd(t,n,i.hostVars,Ce),i)}function $8(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)hk(r,n,o[a++],o[a++],o[a++])}function hk(t,e,n,r,i){const s=dn(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{dn(s)}}function j8(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fk(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function pk(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];qv(n[r]),o.contentQueries(2,e[s],s)}}}function cg(t,e){return t[kl]?t[SN][Xr]=e:t[kl]=e,t[SN]=e,e}function rE(t,e,n){qv(0);const r=dn(null);try{e(t,n)}finally{dn(r)}}function yk(t,e){const n=t[fu],r=n?n.get(ta,null):null;r&&r.handleError(e)}function iE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];hk(t.data[o],e[o],r,a,i)}}function us(t,e,n){const r=bp(e,t);!function qR(t,e,n){t.setValue(e,n)}(t[Ie],r,n)}function H8(t,e){const n=Dr(e,t),r=n[Z];!function G8(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[rn];null!==i&&null===n[ts]&&(n[ts]=kO(i,n[fu])),sE(r,n,n[jt])}function sE(t,e,n){Kv(e);try{const r=t.viewQuery;null!==r&&rE(1,r,n);const i=t.template;null!==i&&sk(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&pk(t,e),t.staticViewQueries&&rE(2,t.viewQuery,n);const s=t.components;null!==s&&function z8(t,e){for(let n=0;n<e.length;n++)H8(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ee]&=-5,Qv()}}let vk=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=new _9(n,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return t.\u0275prov=de({token:t,providedIn:"root",factory:()=>new t}),t})();function lg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Dv(i,a):2==s&&(r=Dv(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function rd(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(mt(s)),dr(s)){for(let a=Vn;a<s.length;a++){const u=s[a],c=u[Z].firstChild;null!==c&&rd(u[Z],u,c,r)}s[wi]!==s[rn]&&r.push(s[wi])}const o=n.type;if(8&o)rd(t,e,n.child,r);else if(32&o){const a=pw(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=rO(e,n);if(Array.isArray(a))r.push(...a);else{const u=zl(e[Ht]);rd(u[Z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function dg(t,e,n,r=!0){const i=e[Ko].rendererFactory;i.begin&&i.begin();try{wk(t,e,t.template,n)}catch(o){throw r&&yk(e,o),o}finally{i.end&&i.end(),e[Ko].effectManager?.flush()}}function wk(t,e,n,r){const i=e[Ee];if(256!=(256&i)){e[Ko].effectManager?.flush(),Kv(e);try{GN(e),function JN(t){return fe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&sk(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&Sp(e,c,null)}else{const c=t.preOrderHooks;null!==c&&Ap(e,c,0,null),Xv(e,0)}if(function Y8(t){for(let e=GR(t);null!==e;e=zR(e)){if(!e[MN])continue;const n=e[mu];for(let r=0;r<n.length;r++){A9(n[r])}}}(e),Ek(e,2),null!==t.contentQueries&&pk(t,e),o){const c=t.contentCheckHooks;null!==c&&Sp(e,c)}else{const c=t.contentHooks;null!==c&&Ap(e,c,1),Xv(e,1)}!function v8(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=YO(e,yp);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Xo(~s);else{const o=s,a=n[++i],u=n[++i];B9(a,o),r.runInContext(u,2,e[o])}}}finally{null===e[yp]&&XO(e,yp),Xo(-1)}}(t,e);const a=t.components;null!==a&&Ck(e,a,0);const u=t.viewQuery;if(null!==u&&rE(2,u,r),o){const c=t.viewCheckHooks;null!==c&&Sp(e,c)}else{const c=t.viewHooks;null!==c&&Ap(e,c,2),Xv(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ee]&=-73,zN(e)}finally{Qv()}}}function Ek(t,e){for(let n=GR(t);null!==n;n=zR(n))for(let r=Vn;r<n.length;r++)Ik(n[r],e)}function X8(t,e,n){Ik(Dr(e,t),n)}function Ik(t,e){if(!function T9(t){return 128==(128&t[Ee])}(t))return;const n=t[Z];if(80&t[Ee]&&0===e||1024&t[Ee]||2===e)wk(n,t,n.template,t[jt]);else if(t[Ol]>0){Ek(t,1);const i=t[Z].components;null!==i&&Ck(t,i,1)}}function Ck(t,e,n){for(let r=0;r<e.length;r++)X8(t,e[r],n)}class id{get rootNodes(){const e=this._lView,n=e[Z];return rd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return 256==(256&this._lView[Ee])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[St];if(dr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(mw(e,r),Pp(n,r))}this._attachedToViewContainer=!1}QR(this._lView[Z],this._lView)}onDestroy(e){!function qN(t,e){if(256==(256&t[Ee]))throw new W(911,!1);null===t[$s]&&(t[$s]=[]),t[$s].push(e)}(this._lView,e)}markForCheck(){td(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ee]&=-129}reattach(){this._lView[Ee]|=128}detectChanges(){dg(this._lView[Z],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function X5(t,e){ql(t,e,e[Ie],2,null,null)}(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e}}class J8 extends id{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dg(e[Z],e,e[jt],!1)}checkNoChanges(){}get context(){return null}}class bk extends sg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=He(e);return new sd(n,this.ngModule)}}function Dk(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class eK{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=fp(r);const i=this.injector.get(e,qw,r);return i!==qw||n===qw?i:this.parentInjector.get(e,n,r)}}class sd extends LO{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=Dk(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Dk(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function J6(t){return t.map(X6).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof ss?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new eK(e,s):e,a=o.get(UO,null);if(null===a)throw new W(407,!1);const l={rendererFactory:a,sanitizer:o.get(s8,null),effectManager:o.get(vk,null)},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",g=r?function E8(t,e,n,r){const s=r.get(HO,!1)||n===Qr.ShadowDom,o=t.selectRootElement(e,s);return function I8(t){ak(t)}(o),o}(d,r,this.componentDef.encapsulation,o):zp(d,h,function Z8(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),D=this.componentDef.signals?4608:this.componentDef.onPush?576:528,R=Zw(0,null,null,1,0,null,null,null,null,null,null),S=ug(null,R,null,D,null,null,l,d,o,null,null);let G,ee;Kv(S);try{const ie=this.componentDef;let ye,Bt=null;ie.findHostDirectiveDefs?(ye=[],Bt=new Map,ie.findHostDirectiveDefs(ie,ye,Bt),ye.push(ie)):ye=[ie];const gi=function nK(t,e){const n=t[Z],r=Ne;return t[r]=e,Vu(n,r,2,"#host",null)}(S,g),zo=function rK(t,e,n,r,i,s,o){const a=i[Z];!function iK(t,e,n,r){for(const i of t)e.mergedAttrs=Rl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(lg(e,e.mergedAttrs,!0),null!==n&&aO(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=kO(e,i[fu]));const c=s.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=ug(i,ok(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&tE(a,t,r.length-1),cg(i,d),i[t.index]=d}(gi,g,ie,ye,S,l,d);ee=HN(R,Ne),g&&function oK(t,e,n,r){if(r)kv(t,n,["ng-version",BO.full]);else{const{attrs:i,classes:s}=function Z6(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Yr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&kv(t,n,i),s&&s.length>0&&oO(t,n,s.join(" "))}}(d,ie,g,r),void 0!==n&&function aK(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(ee,this.ngContentSelectors,n),G=function sK(t,e,n,r,i,s){const o=Dn(),a=i[Z],u=hr(o,i);lk(a,i,o,n,null,r);for(let l=0;l<n.length;l++)Un(Jo(i,a,o.directiveStart+l,o),i);dk(a,i,o),u&&Un(u,i);const c=Jo(i,a,o.directiveStart+o.componentOffset,o);if(t[jt]=i[jt]=c,null!==s)for(const l of s)l(c,e);return Yw(a,o,t),c}(zo,ie,ye,Bt,S,[uK]),sE(R,S,null)}finally{Qv()}return new tK(this.componentType,G,Pu(ee,S),S,ee)}}class tK extends Z7{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new J8(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;iE(s[Z],s,i,e,n),this.previousInputValues.set(e,n),td(Dr(this._tNode.index,s))}}get injector(){return new Eu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function uK(){const t=Dn();Tp($()[Z],t)}function Ye(t){let e=function Tk(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Jr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=hg(t.inputs),o.inputTransforms=hg(t.inputTransforms),o.declaredInputs=hg(t.declaredInputs),o.outputs=hg(t.outputs);const a=i.hostBindings;a&&hK(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&lK(t,u),c&&dK(t,c),ap(t.inputs,i.inputs),ap(t.declaredInputs,i.declaredInputs),ap(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),ap(o.inputTransforms,i.inputTransforms)),Jr(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ye&&(n=!1)}}e=Object.getPrototypeOf(e)}!function cK(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rl(i.hostAttrs,n=Rl(n,i.hostAttrs))}}(r)}function hg(t){return t===yi?{}:t===Be?[]:t}function lK(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function dK(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function hK(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function fg(t){return!!function oE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Bn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ra(t,e,n,r){const i=Bn(t,e,n);return Bn(t,e+1,r)||i}function ju(t,e,n,r,i,s,o,a){const c=function pg(t,e,n,r,i){const s=ra(t,e,n,r);return Bn(t,e+2,i)||s}(t,ns(),n,i,o);return rs(3),c?e+ve(n)+r+ve(i)+s+ve(o)+a:Ce}function Hu(t,e,n,r,i,s,o,a,u,c){const d=function $r(t,e,n,r,i,s){const o=ra(t,e,n,r);return ra(t,e+2,i,s)||o}(t,ns(),n,i,o,u);return rs(4),d?e+ve(n)+r+ve(i)+s+ve(o)+a+ve(u)+c:Ce}function yg(t,e,n,r,i,s,o,a){const u=$(),c=Pe(),l=t+Ne,d=c.firstCreatePass?function LK(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Vu(e,t,4,o||null,js(c,a));eE(e,n,l,js(c,u)),Tp(e,l);const d=l.tView=Zw(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Ci(d,!1);const h=Hk(c,u,d,t);Dp()&&qp(c,u,h,d),Un(h,u),cg(u,u[l]=fk(h,u,h,d)),wp(d)&&Xw(c,u,d),null!=o&&Jw(u,d,a)}let Hk=function Gk(t,e,n,r){return zs(!0),e[Ie].createComment("")};function Ku(t){return function _u(t,e){return t[e]}(function V9(){return fe.lFrame.contextLView}(),Ne+t)}function ld(t,e,n){const r=$();return Bn(r,function vu(){return fe.lFrame.bindingIndex++}(),e)&&function Ar(t,e,n,r,i,s,o,a){const u=hr(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(iE(t,n,l,r,i),Qo(e)&&function M8(t,e){const n=Dr(e,t);16&n[Ee]||(n[Ee]|=64)}(n,e.index)):3&e.type&&(r=function A8(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(Pe(),function At(){const t=fe.lFrame;return HN(t.tView,t.selectedIndex)}(),r,t,e,r[Ie],n,!1),ld}function hE(t,e,n,r,i){const o=i?"class":"style";iE(t,n,e.inputs[o],o,r)}function ue(t,e,n,r){const i=$(),s=Pe(),o=Ne+t,a=i[Ie],u=s.firstCreatePass?function $K(t,e,n,r,i,s){const o=e.consts,u=Vu(e,t,2,r,js(o,i));return eE(e,n,u,js(o,s)),null!==u.attrs&&lg(u,u.attrs,!1),null!==u.mergedAttrs&&lg(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=zk(s,i,u,a,e,t);i[o]=c;const l=wp(u);return Ci(u,!0),aO(a,c,u),32!=(32&u.flags)&&Dp()&&qp(s,i,c,u),0===function x9(){return fe.lFrame.elementDepthCount}()&&Un(c,i),function N9(){fe.lFrame.elementDepthCount++}(),l&&(Xw(s,i,u),Yw(s,u,i)),null!==r&&Jw(i,u),ue}function he(){let t=Dn();Hv()?function Gv(){fe.lFrame.isParent=!1}():(t=t.parent,Ci(t,!1));const e=t;(function O9(t){return fe.skipHydrationRootTNode===t})(e)&&function L9(){fe.skipHydrationRootTNode=null}(),function R9(){fe.lFrame.elementDepthCount--}();const n=Pe();return n.firstCreatePass&&(Tp(n,t),Fv(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Y9(t){return 0!=(8&t.flags)}(e)&&hE(n,e,$(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function X9(t){return 0!=(16&t.flags)}(e)&&hE(n,e,$(),e.stylesWithoutHost,!1),he}function nt(t,e,n,r){return ue(t,e,n,r),he(),nt}let zk=(t,e,n,r,i,s)=>(zs(!0),zp(r,i,function aR(){return fe.lFrame.currentNamespace}()));function ia(){return $()}function dd(t){return!!t&&"function"==typeof t.then}function Kk(t){return!!t&&"function"==typeof t.subscribe}function It(t,e,n,r){const i=$(),s=Pe(),o=Dn();return function Yk(t,e,n,r,i,s,o){const a=wp(r),c=t.firstCreatePass&&function mk(t){return t.cleanup||(t.cleanup=[])}(t),l=e[jt],d=function gk(t){return t[hu]||(t[hu]=[])}(e);let h=!0;if(3&r.type||o){const E=hr(r,e),D=o?o(E):E,R=d.length,S=o?ee=>o(mt(ee[r.index])):r.index;let G=null;if(!o&&a&&(G=function qK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[hu],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,h=!1;else{s=Jk(r,e,l,s,!1);const ee=n.listen(D,i,s);d.push(s,ee),c&&c.push(i,S,R,R+1)}}else s=Jk(r,e,l,s,!1);const g=r.outputs;let y;if(h&&null!==g&&(y=g[i])){const E=y.length;if(E)for(let D=0;D<E;D+=2){const ie=e[y[D]][y[D+1]].subscribe(s),ye=d.length;d.push(s,ie),c&&c.push(i,r.index,ye,-(ye+1))}}}(s,i,i[Ie],o,t,e,r),It}function Xk(t,e,n,r){try{return Ii(6,e,n),!1!==n(r)}catch(i){return yk(t,i),!1}finally{Ii(7,e,n)}}function Jk(t,e,n,r,i){return function s(o){if(o===Function)return r;td(t.componentOffset>-1?Dr(t.index,e):e);let u=Xk(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=Xk(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function gE(t=1){return function H9(t){return(fe.lFrame.contextLView=function G9(t,e){for(;t>0;)e=e[pu],t--;return e}(t,fe.lFrame.contextLView))[jt]}(t)}function vg(t,e){return t<<17|e<<2}function Qs(t){return t>>17&32767}function _E(t){return 2|t}function sa(t){return(131068&t)>>2}function yE(t,e){return-131069&t|e<<2}function vE(t){return 1|t}function uP(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Qs(s):sa(s),u=!1;for(;0!==a&&(!1===u||o);){const l=t[a+1];nQ(t[a],e)&&(u=!0,t[a+1]=r?vE(l):_E(l)),a=r?Qs(l):sa(l)}u&&(t[n+1]=r?_E(s):vE(s))}function nQ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Su(t,e)>=0}function wg(t,e){return function Zr(t,e,n,r){const i=$(),s=Pe(),o=rs(2);s.firstUpdatePass&&function _P(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Xn()],o=function mP(t,e){return e>=t.expandoStartIndex}(t,n);(function EP(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function dQ(t,e,n,r){const i=function Wv(t){const e=fe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=hd(n=wE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=wE(i,t,e,n,r),null===s){let u=function hQ(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==sa(r))return t[Qs(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=wE(null,t,e,u[1],r),u=hd(u,e.attrs,r),function fQ(t,e,n,r){t[Qs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function pQ(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=hd(r,t[s].hostAttrs,n);return hd(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function eQ(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Qs(o),u=sa(o);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||Su(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=Qs(t[a+1]);t[r+1]=vg(h,a),0!==h&&(t[h+1]=yE(t[h+1],r)),t[a+1]=function JK(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=vg(a,0),0!==a&&(t[a+1]=yE(t[a+1],r)),a=r;else t[r+1]=vg(u,0),0===a?a=r:t[u+1]=yE(t[u+1],r),u=r;c&&(t[r+1]=_E(t[r+1])),uP(t,l,r,!0),uP(t,l,r,!1),function tQ(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Su(s,e)>=0&&(n[r+1]=vE(n[r+1]))}(e,l,t,r,s),o=vg(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==Ce&&Bn(i,o,e)&&function vP(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function ZK(t){return 1==(1&t)}(c)?wP(u,e,n,i,sa(c),o):void 0;Eg(l)||(Eg(s)||function XK(t){return 2==(2&t)}(c)&&(s=wP(u,null,n,i,a,o)),function a7(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Ws.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ws.Important),t.setStyle(n,r,i,s))}}(r,o,bp(Xn(),n),i,s))}(s,s.data[Xn()],i,i[Ie],t,i[o+1]=function yQ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=nn(function qs(t){return t instanceof dO?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),wg}function wE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=hd(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function hd(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tr(t,o,!!n||e[++s]))}return void 0===t?null:t}function wP(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===Ce&&(h=d?Be:void 0);let g=d?sw(h,r):l===r?h:void 0;if(c&&!Eg(g)&&(g=sw(u,r)),Eg(g)&&(a=g,o))return a;const y=t[i+1];i=o?Qs(y):sa(y)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=sw(u,r))}return a}function Eg(t){return void 0!==t}function Ge(t,e=""){const n=$(),r=Pe(),i=t+Ne,s=r.firstCreatePass?Vu(r,i,1,e,null):r.data[i],o=IP(r,n,s,e,t);n[i]=o,Dp()&&qp(r,n,o,s),Ci(s,!1)}let IP=(t,e,n,r,i)=>(zs(!0),function Gp(t,e){return t.createText(e)}(e[Ie],r));function Ig(t,e,n,r,i,s,o){const a=$(),u=ju(a,t,e,n,r,i,s,o);return u!==Ce&&us(a,Xn(),u),Ig}function IE(t,e,n,r,i,s,o,a,u){const c=$(),l=Hu(c,t,e,n,r,i,s,o,a,u);return l!==Ce&&us(c,Xn(),l),IE}const Xu="en-US";let HP=Xu;function DE(t,e,n,r,i){if(t=me(t),Array.isArray(t))for(let s=0;s<t.length;s++)DE(t[s],e,n,r,i);else{const s=Pe(),o=$();let a=ea(t)?t:me(t.provide),u=MO(t);const c=Dn(),l=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ea(t)||!t.multi){const g=new Ul(u,i,V),y=SE(a,e,i?l:l+h,d);-1===y?(nw(Rp(c,o),s,a),TE(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(g),o.push(g)):(n[y]=g,o[y]=g)}else{const g=SE(a,e,l+h,d),y=SE(a,e,l,l+h),D=y>=0&&n[y];if(i&&!D||!i&&!(g>=0&&n[g])){nw(Rp(c,o),s,a);const R=function VY(t,e,n,r,i){const s=new Ul(t,n,V);return s.multi=[],s.index=e,s.componentProviders=0,pF(s,i,r&&!n),s}(i?LY:FY,n.length,i,r,u);!i&&D&&(n[y].providerFactory=R),TE(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(R),o.push(R)}else TE(s,t,g>-1?g:y,pF(n[i?y:g],u,!i&&r));!i&&r&&D&&n[y].componentProviders++}}}function TE(t,e,n,r){const i=ea(e),s=function L7(t){return!!t.useClass}(e);if(i||s){const u=(s?me(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function pF(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function SE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function FY(t,e,n,r){return AE(this.multi,[])}function LY(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Jo(n,n[Z],this.providerFactory.index,r);s=a.slice(0,o),AE(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],AE(i,s);return s}function AE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ct(t,e=[]){return n=>{n.providersResolver=(r,i)=>function PY(t,e,n){const r=Pe();if(r.firstCreatePass){const i=Jr(t);DE(n,r.data,r.blueprint,i,!0),DE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Ju{}class gF{}class ME extends Ju{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bk(this);const i=Cr(e);this._bootstrapComponents=as(i.bootstrap),this._r3Injector=rk(e,n,[{provide:Ju,useValue:this},{provide:sg,useValue:this.componentFactoryResolver},...r],nn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class xE extends gF{constructor(e){super(),this.moduleType=e}create(e){return new ME(this.moduleType,e,[])}}class mF extends Ju{constructor(e){super(),this.componentFactoryResolver=new bk(this),this.instance=null;const n=new kw([...e.providers,{provide:Ju,useValue:this},{provide:sg,useValue:this.componentFactoryResolver}],e.parent||Zp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function NE(t,e,n=null){return new mF({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let $Y=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=DO(0,n.type),i=r.length>0?NE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=de({token:t,providedIn:"environment",factory:()=>new t(le(ss))}),t})();function _F(t){t.getStandaloneInjector=e=>e.get($Y).getOrCreateStandaloneInjector(t)}function OE(t){return e=>{setTimeout(t,void 0,e)}}const kt=class fX extends Xi{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=OE(s),i&&(i=OE(i)),o&&(o=OE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof L&&e.add(a),a}};let cs=(()=>{class t{}return t.__NG_ELEMENT_ID__=_X,t})();const gX=cs,mX=class extends gX{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n,null)}createEmbeddedViewImpl(e,n,r){const o=this._declarationTContainer.tView,a=ug(this._declarationLView,o,e,4096&this._declarationLView[Ee]?4096:16,null,o.declTNode,null,null,null,n||null,r||null);a[Pl]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[vi];return null!==c&&(a[vi]=c.createEmbeddedView(o)),sE(o,a,e),new id(a)}};function _X(){return function Sg(t,e){return 4&t.type?new mX(e,t,Pu(t,e)):null}(Dn(),$())}let ti=(()=>{class t{}return t.__NG_ELEMENT_ID__=bX,t})();function bX(){return function kF(t,e){let n;const r=e[t.index];return dr(r)?n=r:(n=fk(r,e,null,t),e[t.index]=n,cg(e,n)),PF(n,e,t,r),new RF(n,t,e)}(Dn(),$())}const DX=ti,RF=class extends DX{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Pu(this._hostTNode,this._hostLView)}get injector(){return new Eu(this._hostTNode,this._hostLView)}get parentInjector(){const e=tw(this._hostTNode,this._hostLView);if(dR(e)){const n=xp(e,this._hostLView),r=Mp(e);return new Eu(n[Z].data[r+8],n)}return new Eu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=OF(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Bl(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const u=o?e:new sd(He(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const D=(o?c:this.parentInjector).get(ss,null);D&&(s=D)}He(u.componentType??{});const g=u.create(c,i,null,s);return this.insertImpl(g.hostView,a,false),g}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView,s=i[Z];if(function S9(t){return dr(t[St])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[St],l=new RF(c,c[Ln],c[St]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;if(function Z5(t,e,n,r){const i=Vn+r,s=n.length;r>0&&(n[i-1][Xr]=e),r<s-Vn?(e[Xr]=n[i],CR(n,Vn+r,e)):(n.push(e),e[Xr]=null),e[St]=n;const o=e[Pl];null!==o&&n!==o&&function e7(t,e){const n=t[mu];e[Ht]!==e[St][St][Ht]&&(t[MN]=!0),null===n?t[mu]=[e]:n.push(e)}(o,e);const a=e[vi];null!==a&&a.insertView(t),e[Ee]|=128}(s,i,a,o),!r){const u=ww(o,a),c=i[Ie],l=Wp(c,a[wi]);null!==l&&function Y5(t,e,n,r,i,s){r[rn]=i,r[Ln]=e,ql(t,r,n,1,i,s)}(s,a[Ln],c,i,l,u)}return e.attachToViewContainerRef(),CR(FE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=OF(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=mw(this._lContainer,n);r&&(Pp(FE(this._lContainer),n),QR(r[Z],r))}detach(e){const n=this._adjustIndex(e,-1),r=mw(this._lContainer,n);return r&&null!=Pp(FE(this._lContainer),n)?new id(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function OF(t){return t[8]}function FE(t){return t[8]||(t[8]=[])}let PF=function FF(t,e,n,r){if(t[wi])return;let i;i=8&n.type?mt(r):function TX(t,e){const n=t[Ie],r=n.createComment(""),i=hr(e,t);return Zo(n,Wp(n,i),r,function i7(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[wi]=i};const qE=new re("Application Initializer");let KE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=se(qE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(dd(s))n.push(s);else if(Kk(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aL=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const ls=new re("LocaleId",{providedIn:"root",factory:()=>se(ls,Se.Optional|Se.SkipSelf)||function rJ(){return typeof $localize<"u"&&$localize.locale||Xu}()});let uL=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Fr(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class oJ{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let cL=(()=>{class t{compileModuleSync(n){return new xE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=as(Cr(n).declarations).reduce((o,a)=>{const u=He(a);return u&&o.push(new sd(u)),o},[]);return new oJ(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hL(...t){}class Xe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kt(!1),this.onMicrotaskEmpty=new kt(!1),this.onStable=new kt(!1),this.onError=new kt(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function cJ(){const t="function"==typeof at.requestAnimationFrame;let e=at[t?"requestAnimationFrame":"setTimeout"],n=at[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function hJ(t){const e=()=>{!function dJ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(at,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,YE(t),t.isCheckStableRunning=!0,QE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),YE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return fL(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),pL(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return fL(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),pL(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,YE(t),QE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xe.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(Xe.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,lJ,hL,hL);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const lJ={};function QE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function fL(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pL(t){t._nesting--,QE(t)}class fJ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kt,this.onMicrotaskEmpty=new kt,this.onStable=new kt,this.onError=new kt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const gL=new re("",{providedIn:"root",factory:mL});function mL(){const t=se(Xe);let e=!0;return function C6(...t){const e=Al(t),n=function m6(t,e){return"number"==typeof Cv(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Lr(r[0]):cu(n)(ln(r,e)):mi}(new Et(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Et(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(sN()))}const _L=new re(""),Mg=new re("");let ZE,XE=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ZE||(function pJ(t){ZE=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(le(Xe),le(JE),le(Mg))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),JE=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ZE?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Ys=null;const yL=new re("AllowMultipleToken"),e0=new re("PlatformDestroyListeners"),t0=new re("appBootstrapListener");class wL{constructor(e,n){this.name=e,this.token=n}}function IL(t,e,n=[]){const r=`Platform: ${e}`,i=new re(r);return(s=[])=>{let o=n0();if(!o||o.injector.get(yL,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function _J(t){if(Ys&&!Ys.get(yL,!1))throw new W(400,!1);(function vL(){!function g9(t){PN=t}(()=>{throw new W(600,!1)})})(),Ys=t;const e=t.get(bL);(function EL(t){t.get(xO,null)?.forEach(n=>n())})(t)}(function CL(t=[],e){return Jn.create({name:e,providers:[{provide:Rw,useValue:"platform"},{provide:e0,useValue:new Set([()=>Ys=null])},...t]})}(a,r))}return function vJ(t){const e=n0();if(!e)throw new W(401,!1);return e}()}}function n0(){return Ys?.get(bL)??null}let bL=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function wJ(t="zone.js",e){return"noop"===t?new fJ:"zone.js"===t?new Xe(e):t}(r?.ngZone,function DL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function BY(t,e,n){return new ME(t,e,n)}(n.moduleType,this.injector,function xL(t){return[{provide:Xe,useFactory:t},{provide:Jl,multi:!0,useFactory:()=>{const e=se(IJ,{optional:!0});return()=>e.initialize()}},{provide:ML,useFactory:EJ},{provide:gL,useFactory:mL}]}(()=>i)),o=s.injector.get(ta,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{xg(this._modules,s),a.unsubscribe()})}),function TL(t,e,n){try{const r=n();return dd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(KE);return a.runInitializers(),a.donePromise.then(()=>(function GP(t){Vr(t,"Expected localeId to be defined"),"string"==typeof t&&(HP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ls,Xu)||Xu),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=SL({},r);return function gJ(t,e,n){const r=new xE(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(tc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new W(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(e0,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(le(Jn))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function SL(t,e){return Array.isArray(e)?e.reduce(SL,t):{...t,...e}}let tc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=se(ML),this.zoneIsStable=se(gL),this.componentTypes=[],this.components=[],this.isStable=se(uL).hasPendingTasks.pipe(_i(n=>n?ge(!1):this.zoneIsStable),function b6(t,e=Ue){return t=t??D6,cn((n,r)=>{let i,s=!0;n.subscribe(tn(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),sN()),this._injector=se(ss)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof LO;if(!this._injector.get(KE).done)throw!i&&function du(t){const e=He(t)||Fn(t)||lr(t);return null!==e&&e.standalone}(n),new W(405,!1);let o;o=i?n:this._injector.get(sg).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function mJ(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Ju),c=o.create(Jn.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(_L,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),xg(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;xg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(t0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ML=new re("",{providedIn:"root",factory:()=>se(ta).handleError.bind(void 0)});function EJ(){const t=se(Xe),e=se(ta);return n=>t.runOutsideAngular(()=>e.handleError(n))}let IJ=(()=>{class t{constructor(){this.zone=se(Xe),this.applicationRef=se(tc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let Ng=(()=>{class t{}return t.__NG_ELEMENT_ID__=bJ,t})();function bJ(t){return function DJ(t,e,n){if(Qo(t)&&!n){const r=Dr(t.index,e);return new id(r,r)}return 47&t.type?new id(e[Ht],e):null}(Dn(),$(),16==(16&t))}class kL{constructor(){}supports(e){return fg(e)}create(e){return new NJ(e)}}const xJ=(t,e)=>e;class NJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||xJ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<FL(r,i,s)?n:r,a=FL(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const g=h<s.length?s[h]:s[h]=0,y=g+h;l<=y&&y<c&&(s[h]=g+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!fg(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function vK(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new RJ(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new PL),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class RJ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class PL{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new OJ,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FL(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function VL(){return new kg([new kL])}let kg=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||VL()),deps:[[t,new Lp,new Mt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new W(901,!1)}}return t.\u0275prov=de({token:t,providedIn:"root",factory:VL}),t})();const VJ=IL(null,"core",[]);let UJ=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(le(tc))},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({}),t})();let l0=null;function Xs(){return l0}class XJ{}const jr=new re("DocumentToken");let d0=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return se(ZJ)},providedIn:"platform"}),t})();const JJ=new re("Location Initialized");let ZJ=(()=>{class t extends d0{constructor(){super(),this._doc=se(jr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xs().getBaseHref(this._doc)}onPopState(n){const r=Xs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Xs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return new t},providedIn:"platform"}),t})();function h0(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function WL(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ds(t){return t&&"?"!==t[0]?"?"+t:t}let Js=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return se(KL)},providedIn:"root"}),t})();const qL=new re("appBaseHref");let KL=(()=>{class t extends Js{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??se(jr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return h0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ds(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+ds(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+ds(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(le(d0),le(qL,8))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),QL=(()=>{class t extends Js{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=h0(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+ds(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+ds(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(le(d0),le(qL,8))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),f0=(()=>{class t{constructor(n){this._subject=new kt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function nZ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(WL(YL(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ds(r))}normalize(n){return t.stripTrailingSlash(function tZ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,YL(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ds(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ds(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=ds,t.joinWithSlash=h0,t.stripTrailingSlash=WL,t.\u0275fac=function(n){return new(n||t)(le(Js))},t.\u0275prov=de({token:t,factory:function(){return function eZ(){return new f0(le(Js))}()},providedIn:"root"}),t})();function YL(t){return t.replace(/\/index.html$/,"")}class HZ{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wg=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new HZ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),a2(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{a2(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(V(ti),V(cs),V(kg))},t.\u0275dir=pe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function a2(t,e){t.context.$implicit=e.item}let qg=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({}),t})();function h2(t){return"server"===t}let vee=(()=>{class t{}return t.\u0275prov=de({token:t,providedIn:"root",factory:()=>new wee(le(jr),window)}),t})();class wee{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function Eee(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=f2(this.window.history)||f2(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function f2(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zee extends XJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class x0 extends zee{static makeCurrent(){!function YJ(t){l0||(l0=t)}(new x0)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Wee(){return Dd=Dd||document.querySelector("base"),Dd?Dd.getAttribute("href"):null}();return null==n?null:function qee(t){Yg=Yg||document.createElement("a"),Yg.setAttribute("href",t);const e=Yg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Dd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function BZ(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Yg,Dd=null,Qee=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const N0=new re("EventManagerPlugins");let y2=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return t.\u0275fac=function(n){return new(n||t)(le(N0),le(Xe))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();class v2{constructor(e){this._doc=e}}const R0="ng-app-id";let w2=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=h2(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${R0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(R0),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(R0,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(le(jr),le(eg),le(NO,8),le(Ks))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const O0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},k0=/%COMP%/g,Zee=new re("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function I2(t,e){return e.map(n=>n.replace(k0,t))}let C2=(()=>{class t{constructor(n,r,i,s,o,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=h2(a),this.defaultRenderer=new P0(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Qr.ShadowDom&&(r={...r,encapsulation:Qr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof D2?i.applyToHost(n):i instanceof F0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Qr.Emulated:s=new D2(u,c,r,this.appId,l,o,a,d);break;case Qr.ShadowDom:return new rte(u,c,n,r,o,a,this.nonce,d);default:s=new F0(u,c,r,l,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return t.\u0275fac=function(n){return new(n||t)(le(y2),le(w2),le(eg),le(Zee),le(jr),le(Ks),le(Xe),le(NO))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();class P0{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(O0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(b2(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(b2(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=O0[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=O0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ws.DashCase|Ws.Important)?e.style.setProperty(n,r,i&Ws.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ws.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Xs().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function b2(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class rte extends P0{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=I2(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class F0 extends P0{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?I2(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class D2 extends F0{constructor(e,n,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=function ete(t){return"_ngcontent-%COMP%".replace(k0,t)}(c),this.hostAttr=function tte(t){return"_nghost-%COMP%".replace(k0,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let ite=(()=>{class t extends v2{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(le(jr))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const T2=["alt","control","meta","shift"],ste={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ote={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ate=(()=>{class t extends v2{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xs().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),T2.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=ste[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),T2.forEach(o=>{o!==i&&(0,ote[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(le(jr))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const A2=[{provide:Ks,useValue:"browser"},{provide:xO,useValue:function ute(){x0.makeCurrent()},multi:!0},{provide:jr,useFactory:function lte(){return function h7(t){Cw=t}(document),document},deps:[]}],dte=IL(VJ,"browser",A2),hte=new re(""),M2=[{provide:Mg,useClass:class Kee{addToWindow(e){at.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new W(5103,!1);return s},at.getAllAngularTestabilities=()=>e.getAllTestabilities(),at.getAllAngularRootElements=()=>e.getAllRootElements(),at.frameworkStabilizers||(at.frameworkStabilizers=[]),at.frameworkStabilizers.push(r=>{const i=at.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Xs().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:_L,useClass:XE,deps:[Xe,JE,Mg]},{provide:XE,useClass:XE,deps:[Xe,JE,Mg]}],x2=[{provide:Rw,useValue:"root"},{provide:ta,useFactory:function cte(){return new ta},deps:[]},{provide:N0,useClass:ite,multi:!0,deps:[jr,Xe,Ks]},{provide:N0,useClass:ate,multi:!0,deps:[jr]},C2,w2,y2,{provide:UO,useExisting:C2},{provide:class Iee{},useClass:Qee,deps:[]},[]];let fte=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:eg,useValue:n.appId}]}}}return t.\u0275fac=function(n){return new(n||t)(le(hte,12))},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({providers:[...x2,...M2],imports:[qg,UJ]}),t})(),N2=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(le(jr))},t.\u0275prov=de({token:t,factory:function(n){let r=null;return r=n?new n:function gte(){return new N2(le(jr))}(),r},providedIn:"root"}),t})();typeof window<"u"&&window;const{isArray:wte}=Array,{getPrototypeOf:Ete,prototype:Ite,keys:Cte}=Object;function P2(t){if(1===t.length){const e=t[0];if(wte(e))return{args:e,keys:null};if(function bte(t){return t&&"object"==typeof t&&Ete(t)===Ite}(e)){const n=Cte(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Dte}=Array;function F2(t){return ot(e=>function Tte(t,e){return Dte(e)?t(...e):t(e)}(t,e))}function L2(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let V2=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(V(os),V(Sr))},t.\u0275dir=pe({type:t}),t})(),ua=(()=>{class t extends V2{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tn(t)))(r||t)}}(),t.\u0275dir=pe({type:t,features:[Ye]}),t})();const xi=new re("NgValueAccessor"),Mte={provide:xi,useExisting:lt(()=>eo),multi:!0},Nte=new re("CompositionEventMode");let eo=(()=>{class t extends V2{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xte(){const t=Xs()?Xs().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(V(os),V(Sr),V(Nte,8))},t.\u0275dir=pe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&It("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Ct([Mte]),Ye]}),t})();const $n=new re("NgValidators"),no=new re("NgAsyncValidators");function Q2(t){return null!=t}function Y2(t){return dd(t)?ln(t):t}function X2(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function J2(t,e){return e.map(n=>n(t))}function Z2(t){return t.map(e=>function Ote(t){return!t.validate}(e)?e:n=>e.validate(n))}function V0(t){return null!=t?function eV(t){if(!t)return null;const e=t.filter(Q2);return 0==e.length?null:function(n){return X2(J2(n,e))}}(Z2(t)):null}function U0(t){return null!=t?function tV(t){if(!t)return null;const e=t.filter(Q2);return 0==e.length?null:function(n){return function Ste(...t){const e=rN(t),{args:n,keys:r}=P2(t),i=new Et(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let l=0;l<o;l++){let d=!1;Lr(n[l]).subscribe(tn(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?L2(r,a):a),s.complete())}))}});return e?i.pipe(F2(e)):i}(J2(n,e).map(Y2)).pipe(ot(X2))}}(Z2(t)):null}function nV(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function B0(t){return t?Array.isArray(t)?t:[t]:[]}function Jg(t,e){return Array.isArray(t)?t.includes(e):t===e}function sV(t,e){const n=B0(e);return B0(t).forEach(i=>{Jg(n,i)||n.push(i)}),n}function oV(t,e){return B0(e).filter(n=>!Jg(t,n))}class aV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=V0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=U0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class nr extends aV{get formDirective(){return null}get path(){return null}}class ro extends aV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class uV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ic=(()=>{class t extends uV{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(V(ro,2))},t.\u0275dir=pe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&wg("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ye]}),t})(),sc=(()=>{class t extends uV{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(V(nr,10))},t.\u0275dir=pe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&wg("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ye]}),t})();const Td="VALID",em="INVALID",oc="PENDING",Sd="DISABLED";function H0(t){return(tm(t)?t.validators:t)||null}function G0(t,e){return(tm(e)?e.asyncValidators:t)||null}function tm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class hV{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Td}get invalid(){return this.status===em}get pending(){return this.status==oc}get disabled(){return this.status===Sd}get enabled(){return this.status!==Sd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oV(e,this._rawAsyncValidators))}hasValidator(e){return Jg(this._rawValidators,e)}hasAsyncValidator(e){return Jg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=oc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Sd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Td,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Td||this.status===oc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sd:Td}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=oc,this._hasOwnPendingAsyncValidator=!0;const n=Y2(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new kt,this.statusChanges=new kt}_calculateStatus(){return this._allControlsDisabled()?Sd:this.errors?em:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oc)?oc:this._anyControlsHaveStatus(em)?em:Td}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Lte(t){return Array.isArray(t)?V0(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Vte(t){return Array.isArray(t)?U0(t):t||null}(this._rawAsyncValidators)}}class z0 extends hV{constructor(e,n,r){super(H0(n),G0(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function dV(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new W(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function lV(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new W(1e3,"");if(!r[n])throw new W(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ac=new re("CallSetDisabledState",{providedIn:"root",factory:()=>nm}),nm="always";function Ad(t,e,n=nm){W0(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function $te(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&fV(t,e)})}(t,e),function Hte(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function jte(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&fV(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Bte(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function sm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function W0(t,e){const n=function rV(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(nV(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function iV(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(nV(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();sm(e._rawValidators,i),sm(e._rawAsyncValidators,i)}function fV(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Kte={provide:nr,useExisting:lt(()=>io)},Md=(()=>Promise.resolve())();let io=(()=>{class t extends nr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new kt,this.form=new z0({},V0(n),U0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Md.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Ad(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Md.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Md.then(()=>{const r=this._findContainer(n.path),i=new z0({});(function pV(t,e){W0(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Md.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Md.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function gV(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return t.\u0275fac=function(n){return new(n||t)(V($n,10),V(no,10),V(ac,8))},t.\u0275dir=pe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&It("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ct([Kte]),Ye]}),t})();function mV(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function _V(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const yV=class extends hV{constructor(e=null,n,r){super(H0(n),G0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=_V(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){_V(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Xte={provide:ro,useExisting:lt(()=>ca)},EV=(()=>Promise.resolve())();let ca=(()=>{class t extends ro{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new yV,this._registered=!1,this.name="",this.update=new kt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Q0(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===eo?n=s:function Wte(t){return Object.getPrototypeOf(t.constructor)===ua}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function K0(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ad(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){EV.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function nc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);EV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function rm(t,e){return[...e.path,t]}(n,this._parent):[n]}}return t.\u0275fac=function(n){return new(n||t)(V(nr,9),V($n,10),V(no,10),V(xi,10),V(Ng,8),V(ac,8))},t.\u0275dir=pe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ct([Xte]),Ye,Ur]}),t})(),uc=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=pe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),CV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({}),t})();const ane={provide:xi,useExisting:lt(()=>Z0),multi:!0};function xV(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Z0=(()=>{class t extends ua{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const i=xV(this._getOptionId(n),n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function une(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tn(t)))(r||t)}}(),t.\u0275dir=pe({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&It("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ct([ane]),Ye]}),t})(),NV=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(xV(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(V(Sr),V(os),V(Z0,9))},t.\u0275dir=pe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const cne={provide:xi,useExisting:lt(()=>eI),multi:!0};function RV(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let eI=(()=>{class t extends ua{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);i.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,n(i)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function lne(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tn(t)))(r||t)}}(),t.\u0275dir=pe({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&It("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ct([cne]),Ye]}),t})(),OV=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(RV(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(RV(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(V(Sr),V(os),V(eI,9))},t.\u0275dir=pe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),vne=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[CV]}),t})(),nI=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:ac,useValue:n.callSetDisabledState??nm}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[vne]}),t})();function rI(...t){const e=Al(t),n=rN(t),{args:r,keys:i}=P2(t);if(0===r.length)return ln([],e);const s=new Et(function Ine(t,e,n=Ue){return r=>{HV(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)HV(e,()=>{const c=ln(t[u],e);let l=!1;c.subscribe(tn(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>L2(i,o):Ue));return n?s.pipe(F2(n)):s}function HV(t,e,n){t?Ji(n,t,e):e()}const am=F(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function iI(...t){return function Cne(){return cu(1)}()(ln(t,Al(t)))}function GV(t){return new Et(e=>{Lr(t()).subscribe(e)})}function xd(t,e){const n=O(t)?t:()=>t,r=i=>i.error(n());return new Et(e?i=>e.schedule(r,0,i):r)}function sI(){return cn((t,e)=>{let n=null;t._refCount++;const r=tn(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class zV extends Et{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,jx(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new L;const n=this.getSubject();e.add(this.source.subscribe(tn(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=L.EMPTY)}return e}refCount(){return sI()(this)}}function cc(t){return t<=0?()=>mi:cn((e,n)=>{let r=0;e.subscribe(tn(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function so(t,e){return cn((n,r)=>{let i=0;n.subscribe(tn(r,s=>t.call(e,s,i++)&&r.next(s)))})}function um(t){return cn((e,n)=>{let r=!1;e.subscribe(tn(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function WV(t=Dne){return cn((e,n)=>{let r=!1;e.subscribe(tn(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Dne(){return new am}function da(t,e){const n=arguments.length>=2;return r=>r.pipe(t?so((i,s)=>t(i,s,r)):Ue,cc(1),n?um(e):WV(()=>new am))}function Nd(t,e){return O(e)?Cn(t,e,1):Cn(t,1)}function jn(t,e,n){const r=O(t)||e||n?{next:t,error:e,complete:n}:t;return r?cn((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(tn(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ue}function ha(t){return cn((e,n)=>{let s,r=null,i=!1;r=e.subscribe(tn(n,void 0,void 0,o=>{s=Lr(t(o,ha(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function oI(t){return t<=0?()=>mi:cn((e,n)=>{let r=[];e.subscribe(tn(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function aI(t){return cn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const De="primary",Rd=Symbol("RouteTitle");class xne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function lc(t){return new xne(t)}function Nne(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ni(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!qV(t[i],e[i]))return!1;return!0}function qV(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function KV(t){return t.length>0?t[t.length-1]:null}function oo(t){return function Ene(t){return!!t&&(t instanceof Et||O(t.lift)&&O(t.subscribe))}(t)?t:dd(t)?ln(Promise.resolve(t)):ge(t)}const One={exact:function XV(t,e,n){if(!fa(t.segments,e.segments)||!cm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!XV(t.children[r],e.children[r],n))return!1;return!0},subset:JV},QV={exact:function kne(t,e){return Ni(t,e)},subset:function Pne(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qV(t[n],e[n]))},ignored:()=>!0};function YV(t,e,n){return One[n.paths](t.root,e.root,n.matrixParams)&&QV[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function JV(t,e,n){return ZV(t,e,e.segments,n)}function ZV(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!fa(i,n)||e.hasChildren()||!cm(i,n,r))}if(t.segments.length===n.length){if(!fa(t.segments,n)||!cm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!JV(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(fa(t.segments,i)&&cm(t.segments,i,r)&&t.children[De])&&ZV(t.children[De],e,s,r)}}function cm(t,e,n){return e.every((r,i)=>QV[n](t[i].parameters,r.parameters))}class dc{constructor(e=new Je([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lc(this.queryParams)),this._queryParamMap}toString(){return Vne.serialize(this)}}class Je{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lm(this)}}class Od{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=lc(this.parameters)),this._parameterMap}toString(){return nU(this)}}function fa(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let kd=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return new uI},providedIn:"root"}),t})();class uI{parse(e){const n=new Qne(e);return new dc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Pd(e.root,!0)}`,r=function $ne(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${dm(n)}=${dm(i)}`).join("&"):`${dm(n)}=${dm(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Une(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Vne=new uI;function lm(t){return t.segments.map(e=>nU(e)).join("/")}function Pd(t,e){if(!t.hasChildren())return lm(t);if(e){const n=t.children[De]?Pd(t.children[De],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==De&&r.push(`${i}:${Pd(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Lne(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===De&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==De&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===De?[Pd(t.children[De],!1)]:[`${i}:${Pd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[De]?`${lm(t)}/${n[0]}`:`${lm(t)}/(${n.join("//")})`}}function eU(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dm(t){return eU(t).replace(/%3B/gi,";")}function cI(t){return eU(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hm(t){return decodeURIComponent(t)}function tU(t){return hm(t.replace(/\+/g,"%20"))}function nU(t){return`${cI(t.path)}${function Bne(t){return Object.keys(t).map(e=>`;${cI(e)}=${cI(t[e])}`).join("")}(t.parameters)}`}const jne=/^[^\/()?;#]+/;function lI(t){const e=t.match(jne);return e?e[0]:""}const Hne=/^[^\/()?;=#]+/,zne=/^[^=?&#]+/,qne=/^[^&#]+/;class Qne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Je([],{}):new Je([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[De]=new Je(e,n)),r}parseSegment(){const e=lI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Od(hm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Gne(t){const e=t.match(Hne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=lI(this.remaining);i&&(r=i,this.capture(r))}e[hm(n)]=hm(r)}parseQueryParam(e){const n=function Wne(t){const e=t.match(zne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function Kne(t){const e=t.match(qne);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=tU(n),s=tU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=De);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[De]:new Je([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}}function rU(t){return t.segments.length>0?new Je([],{[De]:t}):t}function iU(t){const e={};for(const r of Object.keys(t.children)){const s=iU(t.children[r]);if(r===De&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Yne(t){if(1===t.numberOfChildren&&t.children[De]){const e=t.children[De];return new Je(t.segments.concat(e.segments),e.children)}return t}(new Je(t.segments,e))}function pa(t){return t instanceof dc}function sU(t){let e;const i=rU(function n(s){const o={};for(const u of s.children){const c=n(u);o[u.outlet]=c}const a=new Je(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function oU(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return dI(i,i,i,n,r);const s=function Jne(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new uU(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new uU(n,e,r)}(e);if(s.toRoot())return dI(i,i,new Je([],{}),n,r);const o=function Zne(t,e,n){if(t.isAbsolute)return new pm(e,!0,0);if(!n)return new pm(e,!1,NaN);if(null===n.parent)return new pm(n,!0,0);const r=fm(t.commands[0])?0:1;return function ere(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new pm(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Ld(o.segmentGroup,o.index,s.commands):cU(o.segmentGroup,o.index,s.commands);return dI(i,o.segmentGroup,a,n,r)}function fm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fd(t){return"object"==typeof t&&null!=t&&t.outlets}function dI(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:aU(t,e,n);const a=rU(iU(o));return new dc(a,s,i)}function aU(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:aU(s,e,n)}),new Je(t.segments,r)}class uU{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&fm(r[0]))throw new W(4003,!1);const i=r.find(Fd);if(i&&i!==KV(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pm{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function cU(t,e,n){if(t||(t=new Je([],{})),0===t.segments.length&&t.hasChildren())return Ld(t,e,n);const r=function nre(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Fd(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!dU(u,c,o))return s;r+=2}else{if(!dU(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Je(t.segments.slice(0,r.pathIndex),{});return s.children[De]=new Je(t.segments.slice(r.pathIndex),t.children),Ld(s,0,i)}return r.match&&0===i.length?new Je(t.segments,{}):r.match&&!t.hasChildren()?hI(t,e,n):r.match?Ld(t,0,i):hI(t,e,n)}function Ld(t,e,n){if(0===n.length)return new Je(t.segments,{});{const r=function tre(t){return Fd(t[0])?t[0].outlets:{[De]:t}}(n),i={};if(!r[De]&&t.children[De]&&1===t.numberOfChildren&&0===t.children[De].segments.length){const s=Ld(t.children[De],e,n);return new Je(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=cU(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Je(t.segments,i)}}function hI(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Fd(s)){const u=rre(s.outlets);return new Je(r,u)}if(0===i&&fm(n[0])){r.push(new Od(t.segments[e].path,lU(n[0]))),i++;continue}const o=Fd(s)?s.outlets[De]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&fm(a)?(r.push(new Od(o,lU(a))),i+=2):(r.push(new Od(o,{})),i++)}return new Je(r,{})}function rre(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=hI(new Je([],{}),0,r))}),e}function lU(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dU(t,e,n){return t==n.path&&Ni(e,n.parameters)}const Vd="imperative";class Ri{constructor(e,n){this.id=e,this.url=n}}class fI extends Ri{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ga extends Ri{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gm extends Ri{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ud extends Ri{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class pI extends Ri{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ire extends Ri{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sre extends Ri{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ore extends Ri{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class are extends Ri{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ure extends Ri{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cre{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lre{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dre{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hre{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fre{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pre{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hU{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gre{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bd,this.attachRef=null}}let Bd=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new gre,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class fU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=gI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=gI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=mI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mI(e,this._root).map(n=>n.value)}}function gI(t,e){if(t===e.value)return e;for(const n of e.children){const r=gI(t,n);if(r)return r}return null}function mI(t,e){if(t===e.value)return[e];for(const n of e.children){const r=mI(t,n);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function hc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class pU extends fU{constructor(e,n){super(e),this.snapshot=n,_I(this,e)}toString(){return this.snapshot.toString()}}function gU(t,e){const n=function mre(t,e){const o=new mm([],{},{},"",{},De,e,null,{});return new _U("",new ps(o,[]))}(0,e),r=new Fr([new Od("",{})]),i=new Fr({}),s=new Fr({}),o=new Fr({}),a=new Fr(""),u=new si(r,i,o,a,s,De,e,n.root);return u.snapshot=n.root,new pU(new ps(u,[]),n)}class si{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ot(c=>c[Rd]))??ge(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ot(e=>lc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ot(e=>lc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mU(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function _re(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class mm{get title(){return this.data?.[Rd]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _U extends fU{constructor(e,n){super(n),this.url=e,_I(this,n)}toString(){return yU(this._root)}}function _I(t,e){e.value._routerState=t,e.children.forEach(n=>_I(t,n))}function yU(t){const e=t.children.length>0?` { ${t.children.map(yU).join(", ")} } `:"";return`${t.value}${e}`}function yI(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ni(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ni(e.params,n.params)||t.paramsSubject.next(n.params),function Rne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ni(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Ni(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vI(t,e){const n=Ni(t.params,e.params)&&function Fne(t,e){return fa(t,e)&&t.every((n,r)=>Ni(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||vI(t.parent,e.parent))}let $d=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=De,this.activateEvents=new kt,this.deactivateEvents=new kt,this.attachEvents=new kt,this.detachEvents=new kt,this.parentContexts=se(Bd),this.location=se(ti),this.changeDetector=se(Ng),this.environmentInjector=se(ss),this.inputBinder=se(_m,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new yre(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=pe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ur]}),t})();class yre{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===si?this.route:e===Bd?this.childContexts:this.parent.get(e,n)}}const _m=new re("");let vU=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=rI([r.queryParams,r.params,r.data]).pipe(_i(([s,o,a],u)=>(a={...s,...o,...a},0===u?ge(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function QJ(t){const e=He(t);if(!e)return null;const n=new sd(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();function jd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function wre(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return jd(t,r,i);return jd(t,r)})}(t,e,n);return new ps(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jd(t,a)),o}}const r=function Ere(t){return new si(new Fr(t.url),new Fr(t.params),new Fr(t.queryParams),new Fr(t.fragment),new Fr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>jd(t,s));return new ps(r,i)}}const wI="ngNavigationCancelingError";function wU(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=pa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EU(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function EU(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[wI]=!0,r.cancellationCode=e,n&&(r.url=n),r}function IU(t){return CU(t)&&pa(t.url)}function CU(t){return t&&t[wI]}let bU=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=bn({type:t,selectors:[["ng-component"]],standalone:!0,features:[_F],decls:1,vars:0,template:function(n,r){1&n&&nt(0,"router-outlet")},dependencies:[$d],encapsulation:2}),t})();function EI(t){const e=t.children&&t.children.map(EI),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==De&&(n.component=bU),n}function oi(t){return t.outlet||De}function Hd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Are{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),yI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=hc(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=hc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=hc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=hc(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new pre(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hre(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(yI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Hd(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class DU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ym{constructor(e,n){this.component=e,this.route=n}}function Mre(t,e,n){const r=t._root;return Gd(r,e?e._root:null,n,[r.value])}function fc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function R6(t){return null!==lp(t)}(t)?e.get(t):t:r}function Gd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=hc(e);return t.children.forEach(o=>{(function Nre(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function Rre(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fa(t.url,e.url)||!Ni(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vI(t,e)||!Ni(t.queryParams,e.queryParams);default:return!vI(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new DU(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Gd(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ym(a.outlet.component,o))}else o&&zd(e,a,i),i.canActivateChecks.push(new DU(r)),Gd(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>zd(a,n.getContext(o),i)),i}function zd(t,e,n){const r=hc(t),i=t.value;Object.entries(r).forEach(([s,o])=>{zd(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new ym(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Wd(t){return"function"==typeof t}function TU(t){return t instanceof am||"EmptyError"===t?.name}const vm=Symbol("INITIAL_VALUE");function pc(){return _i(t=>rI(t.map(e=>e.pipe(cc(1),function bne(...t){const e=Al(t);return cn((n,r)=>{(e?iI(t,n,e):iI(t,n)).subscribe(r)})}(vm)))).pipe(ot(e=>{for(const n of e)if(!0!==n){if(n===vm)return vm;if(!1===n||n instanceof dc)return n}return!0}),so(e=>e!==vm),cc(1)))}function SU(t){return function ar(...t){return ip(t)}(jn(e=>{if(pa(e))throw wU(0,e)}),ot(e=>!0===e))}class wm{constructor(e){this.segmentGroup=e||null}}class AU{constructor(e){this.urlTree=e}}function gc(t){return xd(new wm(t))}function MU(t){return xd(new AU(t))}class Jre{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new W(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ge(r);if(i.numberOfChildren>1||!i.children[De])return xd(new W(4e3,!1));i=i.children[De]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new dc(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Je(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const II={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zre(t,e,n,r,i){const s=CI(t,e,n);return s.matched?(r=function Ire(t,e){return t.providers&&!t._injector&&(t._injector=NE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Qre(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ge(i.map(o=>{const a=fc(o,t);return oo(function Vre(t){return t&&Wd(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(pc(),SU()):ge(!0)}(r,e,n).pipe(ot(o=>!0===o?s:{...II}))):ge(s)}function CI(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...II}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Nne)(n,t,e);if(!i)return{...II};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xU(t,e,n,r){return n.length>0&&function nie(t,e,n){return n.some(r=>Em(t,e,r)&&oi(r)!==De)}(t,n,r)?{segmentGroup:new Je(e,tie(r,new Je(n,t.children))),slicedSegments:[]}:0===n.length&&function rie(t,e,n){return n.some(r=>Em(t,e,r))}(t,n,r)?{segmentGroup:new Je(t.segments,eie(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Je(t.segments,t.children),slicedSegments:n}}function eie(t,e,n,r,i){const s={};for(const o of r)if(Em(t,n,o)&&!i[oi(o)]){const a=new Je([],{});s[oi(o)]=a}return{...i,...s}}function tie(t,e){const n={};n[De]=e;for(const r of t)if(""===r.path&&oi(r)!==De){const i=new Je([],{});n[oi(r)]=i}return n}function Em(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class aie{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Jre(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,!1)}recognize(){const e=xU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,De).pipe(ha(n=>{if(n instanceof AU)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof wm?this.noMatchError(n):n}),ot(n=>{const r=new mm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},De,this.rootComponentType,null,{}),i=new ps(r,n),s=new _U("",i),o=function Xne(t,e,n=null,r=null){return oU(sU(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,De).pipe(ha(r=>{throw r instanceof wm?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=mU(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return ln(i).pipe(Nd(s=>{const o=r.children[s],a=function Tre(t,e){const n=t.filter(r=>oi(r)===e);return n.push(...t.filter(r=>oi(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function Sne(t,e){return cn(function Tne(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(tn(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),um(null),function Ane(t,e){const n=arguments.length>=2;return r=>r.pipe(t?so((i,s)=>t(i,s,r)):Ue,oI(1),n?um(e):WV(()=>new am))}(),Cn(s=>{if(null===s)return gc(r);const o=NU(s);return function uie(t){t.sort((e,n)=>e.value.outlet===De?-1:n.value.outlet===De?1:e.value.outlet.localeCompare(n.value.outlet))}(o),ge(o)}))}processSegment(e,n,r,i,s,o){return ln(n).pipe(Nd(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(ha(u=>{if(u instanceof wm)return ge(null);throw u}))),da(a=>!!a),ha(a=>{if(TU(a))return function sie(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?ge([]):gc(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function iie(t,e,n,r){return!!(oi(t)===r||r!==De&&Em(e,n,t))&&("**"===t.path||CI(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):gc(i):gc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?MU(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Cn(o=>{const a=new Je(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=CI(n,i,s);if(!a)return gc(n);const d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?MU(d):this.applyRedirects.lineralizeSegments(i,d).pipe(Cn(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?KV(i).parameters:{};a=ge({snapshot:new mm(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,RU(r),oi(r),r.component??r._loadedComponent??null,r,OU(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=Zre(n,r,i,e).pipe(ot(({matched:u,consumedSegments:c,remainingSegments:l,parameters:d})=>u?{snapshot:new mm(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,RU(r),oi(r),r.component??r._loadedComponent??null,r,OU(r)),consumedSegments:c,remainingSegments:l}:null));return a.pipe(_i(u=>null===u?gc(n):this.getChildConfig(e=r._injector??e,r,i).pipe(_i(({routes:c})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:g}=u,{segmentGroup:y,slicedSegments:E}=xU(n,h,g,c);if(0===E.length&&y.hasChildren())return this.processChildren(l,c,y).pipe(ot(R=>null===R?null:[new ps(d,R)]));if(0===c.length&&0===E.length)return ge([new ps(d,[])]);const D=oi(r)===s;return this.processSegment(l,c,y,E,D?De:s,!0).pipe(ot(R=>[new ps(d,R)]))}))))}getChildConfig(e,n,r){return n.children?ge({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ge({routes:n._loadedRoutes,injector:n._loadedInjector}):function Kre(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ge(!0):ge(i.map(o=>{const a=fc(o,t);return oo(function kre(t){return t&&Wd(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(pc(),SU())}(e,n,r).pipe(Cn(i=>i?this.configLoader.loadChildren(e,n).pipe(jn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function Xre(t){return xd(EU(!1,3))}())):ge({routes:[],injector:e})}}function cie(t){const e=t.value.routeConfig;return e&&""===e.path}function NU(t){const e=[],n=new Set;for(const r of t){if(!cie(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=NU(r.children);e.push(new ps(r.value,i))}return e.filter(r=>!n.has(r))}function RU(t){return t.data||{}}function OU(t){return t.resolve||{}}function kU(t){return"string"==typeof t.title||null===t.title}function bI(t){return _i(e=>{const n=t(e);return n?ln(n).pipe(ot(()=>e)):ge(e)})}const mc=new re("ROUTES");let DI=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=se(cL)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ge(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=oo(n.loadComponent()).pipe(ot(PU),jn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),aI(()=>{this.componentLoaders.delete(n)})),i=new zV(r,()=>new Xi).pipe(sI());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ot(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c;return Array.isArray(a)?c=a:(u=a.create(n).injector,c=u.get(mc,[],Se.Self|Se.Optional).flat()),{routes:c.map(EI),injector:u}}),aI(()=>{this.childrenLoaders.delete(r)})),o=new zV(s,()=>new Xi).pipe(sI());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return oo(n()).pipe(ot(PU),Cn(r=>r instanceof gF||Array.isArray(r)?ge(r):ln(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function PU(t){return function mie(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Im=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Xi,this.configLoader=se(DI),this.environmentInjector=se(ss),this.urlSerializer=se(kd),this.rootContexts=se(Bd),this.inputBindingEnabled=null!==se(_m,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ge(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new lre(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new cre(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new Fr({id:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Vd,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(so(r=>0!==r.id),ot(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),_i(r=>{let i=!1,s=!1;return ge(r).pipe(jn(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_i(o=>{const a=n.browserUrlTree.toString(),u=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const l="";return this.events.next(new Ud(o.id,n.serializeUrl(r.rawUrl),l,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),mi}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return FU(o.source)&&(n.browserUrlTree=o.extractedUrl),ge(o).pipe(_i(l=>{const d=this.transitions?.getValue();return this.events.next(new fI(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?mi:Promise.resolve(l)}),function lie(t,e,n,r,i,s){return Cn(o=>function oie(t,e,n,r,i,s,o="emptyOnly"){return new aie(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ot(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),jn(l=>{if(r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},"eager"===n.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);n.setBrowserUrl(h,l)}n.browserUrlTree=l.urlAfterRedirects}const d=new ire(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:l,extractedUrl:d,source:h,restoredState:g,extras:y}=o,E=new fI(l,this.urlSerializer.serialize(d),h,g);this.events.next(E);const D=gU(0,this.rootComponentType).snapshot;return ge(r={...o,targetSnapshot:D,urlAfterRedirects:d,extras:{...y,skipLocationChange:!1,replaceUrl:!1}})}{const l="";return this.events.next(new Ud(o.id,n.serializeUrl(r.extractedUrl),l,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),mi}}),jn(o=>{const a=new sre(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ot(o=>r={...o,guards:Mre(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Bre(t,e){return Cn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?ge({...n,guardsResult:!0}):function $re(t,e,n,r){return ln(t).pipe(Cn(i=>function qre(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ge(s.map(a=>{const u=Hd(e)??i,c=fc(a,u);return oo(function Lre(t){return t&&Wd(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(da())})).pipe(pc()):ge(!0)}(i.component,i.route,n,e,r)),da(i=>!0!==i,!0))}(o,r,i,t).pipe(Cn(a=>a&&function Ore(t){return"boolean"==typeof t}(a)?function jre(t,e,n,r){return ln(e).pipe(Nd(i=>iI(function Gre(t,e){return null!==t&&e&&e(new dre(t)),ge(!0)}(i.route.parent,r),function Hre(t,e){return null!==t&&e&&e(new fre(t)),ge(!0)}(i.route,r),function Wre(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function xre(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>GV(()=>ge(o.guards.map(u=>{const c=Hd(o.node)??n,l=fc(u,c);return oo(function Fre(t){return t&&Wd(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(da())})).pipe(pc())));return ge(s).pipe(pc())}(t,i.path,n),function zre(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ge(!0);const i=r.map(s=>GV(()=>{const o=Hd(e)??n,a=fc(s,o);return oo(function Pre(t){return t&&Wd(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(da())}));return ge(i).pipe(pc())}(t,i.route,n))),da(i=>!0!==i,!0))}(r,s,t,e):ge(a)),ot(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),jn(o=>{if(r.guardsResult=o.guardsResult,pa(o.guardsResult))throw wU(0,o.guardsResult);const a=new ore(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),so(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),bI(o=>{if(o.guards.canActivateChecks.length)return ge(o).pipe(jn(a=>{const u=new are(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),_i(a=>{let u=!1;return ge(a).pipe(function die(t,e){return Cn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ge(n);let s=0;return ln(i).pipe(Nd(o=>function hie(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!kU(i)&&(s[Rd]=i.title),function fie(t,e,n,r){const i=function pie(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return ge({});const s={};return ln(i).pipe(Cn(o=>function gie(t,e,n,r){const i=Hd(e)??r,s=fc(t,i);return oo(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(da(),jn(a=>{s[o]=a}))),oI(1),function Mne(t){return ot(()=>t)}(s),ha(o=>TU(o)?mi:xd(o)))}(s,t,e,r).pipe(ot(o=>(t._resolvedData=o,t.data=mU(t,n).resolve,i&&kU(i)&&(t.data[Rd]=i.title),null)))}(o.route,r,t,e)),jn(()=>s++),oI(1),Cn(o=>s===i.length?ge(n):mi))})}(n.paramsInheritanceStrategy,this.environmentInjector),jn({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),jn(a=>{const u=new ure(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),bI(o=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(jn(l=>{u.component=l}),ot(()=>{})));for(const l of u.children)c.push(...a(l));return c};return rI(a(o.targetSnapshot.root)).pipe(um(),cc(1))}),bI(()=>this.afterPreactivation()),ot(o=>{const a=function vre(t,e,n){const r=jd(t,e._root,n?n._root:void 0);return new pU(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),jn(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n,r)=>ot(i=>(new Are(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),cc(1),jn({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new ga(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),aI(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ha(o=>{if(s=!0,CU(o)){IU(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new gm(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),IU(o)){const u=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||FU(r.source)};n.scheduleNavigation(u,Vd,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new pI(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(u){r.reject(u)}}return mi}))}))}cancelNavigationTransition(n,r,i){const s=new gm(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function FU(t){return t!==Vd}let LU=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===De);return r}getResolvedTitleForRoute(n){return n.data[Rd]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return se(_ie)},providedIn:"root"}),t})(),_ie=(()=>{class t extends LU{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(le(N2))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return se(wie)},providedIn:"root"}),t})();class vie{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let wie=(()=>{class t extends vie{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tn(t)))(r||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Cm=new re("",{providedIn:"root",factory:()=>({})});let Eie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:function(){return se(Iie)},providedIn:"root"}),t})(),Iie=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var qd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(qd||{});function VU(t,e){t.events.pipe(so(n=>n instanceof ga||n instanceof gm||n instanceof pI||n instanceof Ud),ot(n=>n instanceof ga||n instanceof Ud?qd.COMPLETE:n instanceof gm&&(0===n.code||1===n.code)?qd.REDIRECTING:qd.FAILED),so(n=>n!==qd.REDIRECTING),cc(1)).subscribe(()=>{e()})}function Cie(t){throw t}function bie(t,e,n){return e.parse("/")}const Die={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xt=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=se(aL),this.isNgZoneEnabled=!1,this.options=se(Cm,{optional:!0})||{},this.pendingTasks=se(uL),this.errorHandler=this.options.errorHandler||Cie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=se(Eie),this.routeReuseStrategy=se(yie),this.titleStrategy=se(LU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=se(mc,{optional:!0})?.flat()??[],this.navigationTransitions=se(Im),this.urlSerializer=se(kd),this.location=se(f0),this.componentInputBindingEnabled=!!se(_m,{optional:!0}),this.isNgZoneEnabled=se(Xe)instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new dc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gU(0,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Vd,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(EI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{d=sU(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return oU(d,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=pa(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Vd,null,r)}navigate(n,r={skipLocationChange:!1}){return function Sie(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new W(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...Die}:!1===r?{...Tie}:r,pa(n))return YV(this.currentUrlTree,n,i);const s=this.parseUrl(n);return YV(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});const l=this.pendingTasks.add();return VU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class UU{}let xie=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(so(n=>n instanceof ga),Nd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=NE(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ln(i).pipe(cu())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ge(null);const s=i.pipe(Cn(o=>null===o?ge(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?ln([s,this.loader.loadComponent(r)]).pipe(cu()):s})}}return t.\u0275fac=function(n){return new(n||t)(le(xt),le(cL),le(ss),le(UU),le(DI))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const SI=new re("");let BU=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof fI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ga?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Ud&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof hU&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hU(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function ik(){throw new Error("invalid")}()},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();function gs(t,e){return{\u0275kind:t,\u0275providers:e}}function jU(){const t=se(Jn);return e=>{const n=t.get(tc);if(e!==n.components[0])return;const r=t.get(xt),i=t.get(HU);1===t.get(AI)&&r.initialNavigation(),t.get(GU,null,Se.Optional)?.setUpPreloading(),t.get(SI,null,Se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const HU=new re("",{factory:()=>new Xi}),AI=new re("",{providedIn:"root",factory:()=>1}),GU=new re("");function kie(t){return gs(0,[{provide:GU,useExisting:xie},{provide:UU,useExisting:t}])}const zU=new re("ROUTER_FORROOT_GUARD"),Fie=[f0,{provide:kd,useClass:uI},xt,Bd,{provide:si,useFactory:function $U(t){return t.routerState.root},deps:[xt]},DI,[]];function Lie(){return new wL("Router",xt)}let ma=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Fie,[],{provide:mc,multi:!0,useValue:n},{provide:zU,useFactory:$ie,deps:[[xt,new Mt,new Lp]]},{provide:Cm,useValue:r||{}},r?.useHash?{provide:Js,useClass:QL}:{provide:Js,useClass:KL},{provide:SI,useFactory:()=>{const t=se(vee),e=se(Xe),n=se(Cm),r=se(Im),i=se(kd);return n.scrollOffset&&t.setOffset(n.scrollOffset),new BU(i,r,t,e,n)}},r?.preloadingStrategy?kie(r.preloadingStrategy).\u0275providers:[],{provide:wL,multi:!0,useFactory:Lie},r?.initialNavigation?jie(r):[],r?.bindToComponentInputs?gs(8,[vU,{provide:_m,useExisting:vU}]).\u0275providers:[],[{provide:WU,useFactory:jU},{provide:t0,multi:!0,useExisting:WU}]]}}static forChild(n){return{ngModule:t,providers:[{provide:mc,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(le(zU,8))},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({}),t})();function $ie(t){return"guarded"}function jie(t){return["disabled"===t.initialNavigation?gs(3,[{provide:qE,multi:!0,useFactory:()=>{const e=se(xt);return()=>{e.setUpLocationChangeListener()}}},{provide:AI,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?gs(2,[{provide:AI,useValue:0},{provide:qE,multi:!0,deps:[Jn],useFactory:e=>{const n=e.get(JJ,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(xt),s=e.get(HU);VU(i,()=>{r(!0)}),e.get(Im).afterPreactivation=()=>(r(!0),s.closed?ge(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const WU=new re("");function qU(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function w(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){qU(s,r,i,o,a,"next",u)}function a(u){qU(s,r,i,o,a,"throw",u)}o(void 0)})}}const Y=function(t,e){if(!t)throw _c(e)},_c=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},KU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},bm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,g=63&c;u||(g=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new zie;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QU=function(t){const e=KU(t);return bm.encodeByteArray(e,!0)},Dm=function(t){return QU(t).replace(/\./g,"")},Tm=function(t){try{return bm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Wie(t){return YU(void 0,t)}function YU(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qie(n)||(t[n]=YU(t[n],e[n]));return t}function qie(t){return"__proto__"!==t}const Sm=()=>{try{return function Kie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tm(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},XU=t=>{var e,n;return null===(n=null===(e=Sm())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},xI=t=>{const e=XU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JU=()=>{var t;return null===(t=Sm())||void 0===t?void 0:t.config},ZU=t=>{var e;return null===(e=Sm())||void 0===e?void 0:e[`_${t}`]};class yc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function eB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dm(JSON.stringify({alg:"none",type:"JWT"})),Dm(JSON.stringify(o)),""].join(".")}function hn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function NI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function RI(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function tB(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _a(){try{return"object"==typeof indexedDB}catch{return!1}}function Kd(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function OI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oi.prototype.create)}}class Oi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function tse(t,e){return t.replace(nse,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new zr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const nse=/\{\$([^}]+)}/g;function Qd(t){return JSON.parse(t)}function Sn(t){return JSON.stringify(t)}const Am=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Qd(Tm(s[0])||""),n=Qd(Tm(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function _s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mm(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function xm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(nB(s)&&nB(o)){if(!xm(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nB(t){return null!==t&&"object"==typeof t}function Yd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Jd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class sse{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,l,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),l=1518500249):(c=s^o^a,l=1859775393):d<60?(c=s&o|a&(s|o),l=2400959708):(c=s^o^a,l=3395469782);const h=(i<<5|i>>>27)+c+u+l+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class ase{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function use(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=PI),void 0===i.error&&(i.error=PI),void 0===i.complete&&(i.complete=PI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PI(){}const Rm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},lse=1e3,dse=2,hse=144e5,fse=.5;function FI(t,e=lse,n=dse){const r=e*Math.pow(n,t),i=Math.round(fse*r*(Math.random()-.5)*2);return Math.min(hse,r+i)}function Pt(t){return t&&t._delegate?t._delegate:t}class fn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ya="[DEFAULT]";class gse{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function _se(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return w(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===ya?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gse(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const LI=[];var Fe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Fe||{});const rB={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},vse=Fe.INFO,wse={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Ese=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=wse[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class va{constructor(e){this.name=e,this._logLevel=vse,this._logHandler=Ese,this._userLogHandler=null,LI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?rB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const Ise=(t,e)=>e.some(n=>t instanceof n);let iB,sB;const oB=new WeakMap,VI=new WeakMap,aB=new WeakMap,UI=new WeakMap,BI=new WeakMap;let $I={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return VI.get(t);if("objectStoreNames"===e)return t.objectStoreNames||aB.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ao(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Mse(t){return"function"==typeof t?function Ase(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bse(){return sB||(sB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(jI(this),e),ao(oB.get(this))}:function(...e){return ao(t.apply(jI(this),e))}:function(e,...n){const r=t.call(jI(this),e,...n);return aB.set(r,e.sort?e.sort():[e]),ao(r)}}(t):(t instanceof IDBTransaction&&function Tse(t){if(VI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});VI.set(t,e)}(t),Ise(t,function Cse(){return iB||(iB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,$I):t)}function ao(t){if(t instanceof IDBRequest)return function Dse(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ao(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oB.set(n,t)}).catch(()=>{}),BI.set(e,t),e}(t);if(UI.has(t))return UI.get(t);const e=Mse(t);return e!==t&&(UI.set(t,e),BI.set(e,t)),e}const jI=t=>BI.get(t),Nse=["get","getKey","getAll","getAllKeys","count"],Rse=["put","add","delete","clear"],HI=new Map;function uB(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(HI.get(e))return HI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Rse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Nse.includes(n))return;const s=function(){var o=w(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return HI.set(e,s),s}!function Sse(t){$I=t($I)}(t=>({...t,get:(e,n,r)=>uB(e,n)||t.get(e,n,r),has:(e,n)=>!!uB(e,n)||t.has(e,n)}));class Ose{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function kse(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const GI="@firebase/app",wa=new va("@firebase/app"),Om="[DEFAULT]",ooe={[GI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ea=new Map,km=new Map;function aoe(t,e){try{t.container.addComponent(e)}catch(n){wa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function An(t){const e=t.name;if(km.has(e))return wa.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,t);for(const n of Ea.values())aoe(n,t);return!0}function uo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ys=new Oi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class coe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}const co="9.23.0";function lB(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Om,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ys.create("bad-app-name",{appName:String(i)});if(n||(n=JU()),!n)throw ys.create("no-options");const s=Ea.get(i);if(s){if(xm(n,s.options)&&xm(r,s.config))return s;throw ys.create("duplicate-app",{appName:i})}const o=new yse(i);for(const u of km.values())o.addComponent(u);const a=new coe(n,r,o);return Ea.set(i,a),a}function Zd(t=Om){const e=Ea.get(t);if(!e&&t===Om&&JU())return lB();if(!e)throw ys.create("no-app",{appName:t});return e}function dB(){return Array.from(Ea.values())}function rt(t,e,n){var r;let i=null!==(r=ooe[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void wa.warn(a.join(" "))}An(new fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const loe="firebase-heartbeat-database",doe=1,eh="firebase-heartbeat-store";let WI=null;function hB(){return WI||(WI=function xse(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ao(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ao(o.result),u.oldVersion,u.newVersion,ao(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(loe,doe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(eh)}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),WI}function qI(){return(qI=w(function*(t){try{return yield(yield hB()).transaction(eh).objectStore(eh).get(pB(t))}catch(e){if(e instanceof zr)wa.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e?.message});wa.warn(n.message)}}})).apply(this,arguments)}function fB(t,e){return KI.apply(this,arguments)}function KI(){return(KI=w(function*(t,e){try{const r=(yield hB()).transaction(eh,"readwrite");yield r.objectStore(eh).put(e,pB(t)),yield r.done}catch(n){if(n instanceof zr)wa.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n?.message});wa.warn(r.message)}}})).apply(this,arguments)}function pB(t){return`${t.name}!${t.options.appId}`}class goe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _oe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return w(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gB();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return w(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=gB(),{heartbeatsToSend:r,unsentEntries:i}=function moe(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mB(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Dm(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function gB(){return(new Date).toISOString().substring(0,10)}class _oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(function*(){return!!_a()&&Kd().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return w(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function hoe(t){return qI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return w(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return fB(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return w(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return fB(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function mB(t){return Dm(JSON.stringify({version:2,heartbeats:t})).length}!function yoe(t){An(new fn("platform-logger",e=>new Ose(e),"PRIVATE")),An(new fn("heartbeat",e=>new goe(e),"PRIVATE")),rt(GI,"0.9.13",t),rt(GI,"0.9.13","esm2017"),rt("fire-js","")}(""),rt("firebase","9.23.0","app");const Eoe=(t,e)=>e.some(n=>t instanceof n);let _B,yB;const vB=new WeakMap,QI=new WeakMap,wB=new WeakMap,YI=new WeakMap,XI=new WeakMap;let JI={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return QI.get(t);if("objectStoreNames"===e)return t.objectStoreNames||wB.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Aoe(t){return"function"==typeof t?function Soe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Coe(){return yB||(yB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(ZI(this),e),lo(vB.get(this))}:function(...e){return lo(t.apply(ZI(this),e))}:function(e,...n){const r=t.call(ZI(this),e,...n);return wB.set(r,e.sort?e.sort():[e]),lo(r)}}(t):(t instanceof IDBTransaction&&function Doe(t){if(QI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});QI.set(t,e)}(t),Eoe(t,function Ioe(){return _B||(_B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,JI):t)}function lo(t){if(t instanceof IDBRequest)return function boe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(lo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vB.set(n,t)}).catch(()=>{}),XI.set(e,t),e}(t);if(YI.has(t))return YI.get(t);const e=Aoe(t);return e!==t&&(YI.set(t,e),XI.set(e,t)),e}const ZI=t=>XI.get(t),xoe=["get","getKey","getAll","getAllKeys","count"],Noe=["put","add","delete","clear"],eC=new Map;function EB(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(eC.get(e))return eC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Noe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!xoe.includes(n))return;const s=function(){var o=w(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return eC.set(e,s),s}!function Toe(t){JI=t(JI)}(t=>({...t,get:(e,n,r)=>EB(e,n)||t.get(e,n,r),has:(e,n)=>!!EB(e,n)||t.has(e,n)}));const IB="@firebase/installations",tC="0.6.4",CB=1e4,bB=`w:${tC}`,DB="FIS_v2",Roe="https://firebaseinstallations.googleapis.com/v1",Ooe=36e5,vs=new Oi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function TB(t){return t instanceof zr&&t.code.includes("request-failed")}function nC({projectId:t}){return`${Roe}/projects/${t}/installations`}function SB(t){return{token:t.token,requestStatus:2,expiresIn:Loe(t.expiresIn),creationTime:Date.now()}}function rC(t,e){return iC.apply(this,arguments)}function iC(){return(iC=w(function*(t,e){const r=(yield e.json()).error;return vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function AB({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function sC(t){return oC.apply(this,arguments)}function oC(){return(oC=w(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Loe(t){return Number(t.replace("s","000"))}function aC(){return(aC=w(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=nC(t),i=AB(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:DB,appId:t.appId,sdkVersion:bB})},u=yield sC(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:SB(c.authToken)}}throw yield rC("Create Installation",u)})).apply(this,arguments)}function xB(t){return new Promise(e=>{setTimeout(e,t)})}const $oe=/^[cdef][\w-]{21}$/,uC="";function joe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Hoe(t){return function Boe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return $oe.test(n)?n:uC}catch{return uC}}function wc(t){return`${t.appName}!${t.appId}`}const Ec=new Map;function NB(t,e){const n=wc(t);RB(n,e),function Woe(t,e){const n=function OB(){return!Ia&&"BroadcastChannel"in self&&(Ia=new BroadcastChannel("[Firebase] FID Change"),Ia.onmessage=t=>{RB(t.data.key,t.data.fid)}),Ia}();n&&n.postMessage({key:t,fid:e}),function kB(){0===Ec.size&&Ia&&(Ia.close(),Ia=null)}()}(n,e)}function RB(t,e){const n=Ec.get(t);if(n)for(const r of n)r(e)}let Ia=null;const qoe="firebase-installations-database",Koe=1,Ca="firebase-installations-store";let cC=null;function lC(){return cC||(cC=function Moe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=lo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(lo(o.result),u.oldVersion,u.newVersion,lo(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(qoe,Koe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ca)}})),cC}function Pm(t,e){return dC.apply(this,arguments)}function dC(){return(dC=w(function*(t,e){const n=wc(t),i=(yield lC()).transaction(Ca,"readwrite"),s=i.objectStore(Ca),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&NB(t,e.fid),e})).apply(this,arguments)}function hC(t){return fC.apply(this,arguments)}function fC(){return(fC=w(function*(t){const e=wc(t),r=(yield lC()).transaction(Ca,"readwrite");yield r.objectStore(Ca).delete(e),yield r.done})).apply(this,arguments)}function th(t,e){return pC.apply(this,arguments)}function pC(){return(pC=w(function*(t,e){const n=wc(t),i=(yield lC()).transaction(Ca,"readwrite"),s=i.objectStore(Ca),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&NB(t,a.fid),a})).apply(this,arguments)}function gC(t){return mC.apply(this,arguments)}function mC(){return mC=w(function*(t){let e;const n=yield th(t.appConfig,r=>{const i=function Qoe(t){return FB(t||{fid:joe(),registrationStatus:0})}(r),s=function Yoe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(vs.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Xoe(t,e){return _C.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Joe(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===uC?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),mC.apply(this,arguments)}function _C(){return _C=w(function*(t,e){try{const n=yield function Uoe(t,e){return aC.apply(this,arguments)}(t,e);return Pm(t.appConfig,n)}catch(n){throw TB(n)&&409===n.customData.serverCode?yield hC(t.appConfig):yield Pm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),_C.apply(this,arguments)}function Joe(t){return yC.apply(this,arguments)}function yC(){return(yC=w(function*(t){let e=yield PB(t.appConfig);for(;1===e.registrationStatus;)yield xB(100),e=yield PB(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield gC(t);return r||n}return e})).apply(this,arguments)}function PB(t){return th(t,e=>{if(!e)throw vs.create("installation-not-found");return FB(e)})}function FB(t){return function Zoe(t){return 1===t.registrationStatus&&t.registrationTime+CB<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function vC(){return(vC=w(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function tae(t,{fid:e}){return`${nC(t)}/${e}/authTokens:generate`}(t,n),i=function MB(t,{refreshToken:e}){const n=AB(t);return n.append("Authorization",function Voe(t){return`${DB} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:bB,appId:t.appId}})},u=yield sC(()=>fetch(r,a));if(u.ok)return SB(yield u.json());throw yield rC("Generate Auth Token",u)})).apply(this,arguments)}function wC(t){return EC.apply(this,arguments)}function EC(){return EC=w(function*(t,e=!1){let n;const r=yield th(t.appConfig,s=>{if(!VB(s))throw vs.create("not-registered");const o=s.authToken;if(!e&&function iae(t){return 2===t.requestStatus&&!function sae(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ooe}(t)}(o))return s;if(1===o.requestStatus)return n=function nae(t,e){return IC.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw vs.create("app-offline");const a=function oae(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function rae(t,e){return CC.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),EC.apply(this,arguments)}function IC(){return(IC=w(function*(t,e){let n=yield LB(t.appConfig);for(;1===n.authToken.requestStatus;)yield xB(100),n=yield LB(t.appConfig);const r=n.authToken;return 0===r.requestStatus?wC(t,e):r})).apply(this,arguments)}function LB(t){return th(t,e=>{if(!VB(e))throw vs.create("not-registered");return function aae(t){return 1===t.requestStatus&&t.requestTime+CB<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function CC(){return CC=w(function*(t,e){try{const n=yield function eae(t,e){return vC.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Pm(t.appConfig,r),n}catch(n){if(!TB(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Pm(t.appConfig,r)}else yield hC(t.appConfig);throw n}}),CC.apply(this,arguments)}function VB(t){return void 0!==t&&2===t.registrationStatus}function bC(){return(bC=w(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield gC(e);return r?r.catch(console.error):wC(e).catch(console.error),n.fid})).apply(this,arguments)}function DC(){return DC=w(function*(t,e=!1){const n=t;return yield function lae(t){return TC.apply(this,arguments)}(n),(yield wC(n,e)).token}),DC.apply(this,arguments)}function TC(){return(TC=w(function*(t){const{registrationPromise:e}=yield gC(t);e&&(yield e)})).apply(this,arguments)}function MC(t){return vs.create("missing-app-config-values",{valueName:t})}const UB="installations",gae=t=>{const e=t.getProvider("app").getImmediate(),n=function fae(t){if(!t||!t.options)throw MC("App Configuration");if(!t.name)throw MC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw MC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:uo(e,"heartbeat"),_delete:()=>Promise.resolve()}},mae=t=>{const n=uo(t.getProvider("app").getImmediate(),UB).getImmediate();return{getId:()=>function uae(t){return bC.apply(this,arguments)}(n),getToken:i=>function cae(t){return DC.apply(this,arguments)}(n,i)}};(function _ae(){An(new fn(UB,gae,"PUBLIC")),An(new fn("installations-internal",mae,"PRIVATE"))})(),rt(IB,tC),rt(IB,tC,"esm2017");const xC="@firebase/remote-config",gr=new Oi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Aae{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return w(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Mae(t=navigator){return t.languages&&t.languages[0]||t.language}class xae{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return w(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:Mae()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((R,S)=>{e.signal.addEventListener(()=>{const G=new Error("The operation was aborted.");G.name="AbortError",S(G)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(R){let S="fetch-client-network";throw"AbortError"===R?.name&&(S="fetch-timeout"),gr.create(S,{originalErrorMessage:R?.message})}let g=h.status;const y=h.headers.get("ETag")||void 0;let E,D;if(200===h.status){let R;try{R=yield h.json()}catch(S){throw gr.create("fetch-client-parse",{originalErrorMessage:S?.message})}E=R.entries,D=R.state}if("INSTANCE_STATE_UNSPECIFIED"===D?g=500:"NO_CHANGE"===D?g=304:("NO_TEMPLATE"===D||"EMPTY_CONFIG"===D)&&(E={}),304!==g&&200!==g)throw gr.create("fetch-status",{httpStatus:g});return{status:g,eTag:y,config:E}})()}}class Oae{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return w(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return w(function*(){yield function Nae(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(gr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function Rae(t){if(!(t instanceof zr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+FI(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Fae{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lm(t,e){const n=t.target.error||void 0;return gr.create(e,{originalErrorMessage:n&&n?.message})}const ba="app_namespace_store";class Bae{constructor(e,n,r,i=function Uae(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Lm(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ba,{keyPath:"compositeKey"})}}catch(n){e(gr.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return w(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([ba],"readonly").objectStore(ba),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(Lm(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(gr.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return w(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([ba],"readwrite").objectStore(ba),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(Lm(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(gr.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return w(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([ba],"readwrite").objectStore(ba),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(Lm(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(gr.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class $ae{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return w(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Hae(){return PC.apply(this,arguments)}function PC(){return(PC=w(function*(){if(!_a())return!1;try{return yield Kd()}catch{return!1}})).apply(this,arguments)}!function jae(){An(new fn("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gr.create("registration-window");if(!_a())throw gr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw gr.create("registration-project-id");if(!o)throw gr.create("registration-api-key");if(!a)throw gr.create("registration-app-id");const u=new Bae(a,r.name,n=n||"firebase"),c=new $ae(u),l=new va(xC);l.logLevel=Fe.ERROR;const d=new xae(i,co,n,s,o,a),h=new Oae(d,u),g=new Aae(h,u,c,l),y=new Fae(r,g,c,u,l);return function Dae(t){const e=Pt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(y),y},"PUBLIC").setMultipleInstances(!0)),rt(xC,"0.4.4"),rt(xC,"0.4.4","esm2017")}();const Gae=(t,e)=>e.some(n=>t instanceof n);let HB,GB;const zB=new WeakMap,FC=new WeakMap,WB=new WeakMap,LC=new WeakMap,VC=new WeakMap;let UC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return FC.get(t);if("objectStoreNames"===e)return t.objectStoreNames||WB.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Xae(t){return"function"==typeof t?function Yae(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Wae(){return GB||(GB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(BC(this),e),ws(zB.get(this))}:function(...e){return ws(t.apply(BC(this),e))}:function(e,...n){const r=t.call(BC(this),e,...n);return WB.set(r,e.sort?e.sort():[e]),ws(r)}}(t):(t instanceof IDBTransaction&&function Kae(t){if(FC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});FC.set(t,e)}(t),Gae(t,function zae(){return HB||(HB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,UC):t)}function ws(t){if(t instanceof IDBRequest)return function qae(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ws(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zB.set(n,t)}).catch(()=>{}),VC.set(e,t),e}(t);if(LC.has(t))return LC.get(t);const e=Xae(t);return e!==t&&(LC.set(t,e),VC.set(e,t)),e}const BC=t=>VC.get(t);function qB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ws(o.result),u.oldVersion,u.newVersion,ws(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function $C(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),ws(n).then(()=>{})}const Jae=["get","getKey","getAll","getAllKeys","count"],Zae=["put","add","delete","clear"],jC=new Map;function KB(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(jC.get(e))return jC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Zae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Jae.includes(n))return;const s=function(){var o=w(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return jC.set(e,s),s}!function Qae(t){UC=t(UC)}(t=>({...t,get:(e,n,r)=>KB(e,n)||t.get(e,n,r),has:(e,n)=>!!KB(e,n)||t.has(e,n)}));const eue="/firebase-messaging-sw.js",tue="/firebase-cloud-messaging-push-scope",QB="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nue="https://fcmregistrations.googleapis.com/v1",YB="google.c.a.c_id",rue="google.c.a.c_l",iue="google.c.a.ts";var Vm=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Vm||{});function Es(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function aue(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const HC="fcm_token_details_db",uue=5,XB="fcm_token_object_Store";function GC(){return GC=w(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(HC))return null;let e=null;return(yield qB(HC,uue,{upgrade:(r=w(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(XB))return;const c=a.objectStore(XB),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Es(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Es(d.auth),p256dh:Es(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Es(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Es(d.auth),p256dh:Es(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Es(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield $C(HC),yield $C("fcm_vapid_details_db"),yield $C("undefined"),function lue(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),GC.apply(this,arguments)}const due="firebase-messaging-database",hue=1,Da="firebase-messaging-store";let zC=null;function WC(){return zC||(zC=qB(due,hue,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Da)}})),zC}function JB(t){return qC.apply(this,arguments)}function qC(){return qC=w(function*(t){const e=XC(t),r=yield(yield WC()).transaction(Da).objectStore(Da).get(e);if(r)return r;{const i=yield function cue(t){return GC.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield KC(t,i),i}}),qC.apply(this,arguments)}function KC(t,e){return QC.apply(this,arguments)}function QC(){return(QC=w(function*(t,e){const n=XC(t),i=(yield WC()).transaction(Da,"readwrite");return yield i.objectStore(Da).put(e,n),yield i.done,e})).apply(this,arguments)}function YC(){return(YC=w(function*(t){const e=XC(t),r=(yield WC()).transaction(Da,"readwrite");yield r.objectStore(Da).delete(e),yield r.done})).apply(this,arguments)}function XC({appConfig:t}){return t.appId}const Mn=new Oi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function gue(t,e){return JC.apply(this,arguments)}function JC(){return(JC=w(function*(t,e){const n=yield nb(t),r=e$(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(tb(t.appConfig),i)).json()}catch(o){throw Mn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Mn.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Mn.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function ZC(){return(ZC=w(function*(t,e){const n=yield nb(t),r=e$(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${tb(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Mn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Mn.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Mn.create("token-update-no-token");return s.token})).apply(this,arguments)}function ZB(t,e){return eb.apply(this,arguments)}function eb(){return(eb=w(function*(t,e){const r={method:"DELETE",headers:yield nb(t)};try{const s=yield(yield fetch(`${tb(t.appConfig)}/${e}`,r)).json();if(s.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Mn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function tb({projectId:t}){return`${nue}/projects/${t}/registrations`}function nb(t){return rb.apply(this,arguments)}function rb(){return(rb=w(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function e$({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==QB&&(i.web.applicationPubKey=r),i}const _ue=6048e5;function ib(){return ib=w(function*(t){const e=yield function wue(t,e){return ub.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Es(e.getKey("auth")),p256dh:Es(e.getKey("p256dh"))},r=yield JB(t.firebaseDependencies);if(r){if(function Eue(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+_ue?function vue(t,e){return ob.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield ZB(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return n$(t.firebaseDependencies,n)}return n$(t.firebaseDependencies,n)}),ib.apply(this,arguments)}function sb(){return sb=w(function*(t){const e=yield JB(t.firebaseDependencies);e&&(yield ZB(t.firebaseDependencies,e.token),yield function fue(t){return YC.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),sb.apply(this,arguments)}function ob(){return ob=w(function*(t,e){try{const n=yield function mue(t,e){return ZC.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield KC(t.firebaseDependencies,r),n}catch(n){throw yield function t$(t){return sb.apply(this,arguments)}(t),n}}),ob.apply(this,arguments)}function n$(t,e){return ab.apply(this,arguments)}function ab(){return(ab=w(function*(t,e){const r={token:yield gue(t,e),createTime:Date.now(),subscriptionOptions:e};return yield KC(t,r),r.token})).apply(this,arguments)}function ub(){return(ub=w(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:aue(e)})})).apply(this,arguments)}function r$(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function Iue(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function Cue(t,e){e.data&&(t.data=e.data)}(e,t),function bue(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function i$(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function cb(t){return Mn.create("missing-app-config-values",{valueName:t})}i$("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),i$("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Sue{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Tue(t){if(!t||!t.options)throw cb("App Configuration Object");if(!t.name)throw cb("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw cb(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function lb(){return(lb=w(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(eue,{scope:tue}),t.swRegistration.update().catch(()=>{})}catch(e){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function db(){return(db=w(function*(t,e){if(!e&&!t.swRegistration&&(yield function s$(t){return lb.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function hb(){return(hb=w(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=QB)})).apply(this,arguments)}function fb(){return fb=w(function*(t,e){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield function Mue(t,e){return hb.apply(this,arguments)}(t,e?.vapidKey),yield function Aue(t,e){return db.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function yue(t){return ib.apply(this,arguments)}(t)}),fb.apply(this,arguments)}function pb(){return(pb=w(function*(t,e,n){const r=function Nue(t){switch(t){case Vm.NOTIFICATION_CLICKED:return"notification_open";case Vm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[YB],message_name:n[rue],message_time:n[iue],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gb(){return gb=w(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Vm.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(r$(n)):t.onMessageHandler.next(r$(n)));const r=n.data;(function Due(t){return"object"==typeof t&&!!t&&YB in t})(r)&&"1"===r["google.c.a.e"]&&(yield function xue(t,e,n){return pb.apply(this,arguments)}(t,n.messageType,r))}),gb.apply(this,arguments)}const a$="@firebase/messaging",Oue=t=>{const e=new Sue(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Rue(t,e){return gb.apply(this,arguments)}(e,n)),e},kue=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function o$(t,e){return fb.apply(this,arguments)}(e,r)}};function c$(){return mb.apply(this,arguments)}function mb(){return(mb=w(function*(){try{yield Kd()}catch{return!1}return typeof window<"u"&&_a()&&OI()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pue(){An(new fn("messaging",Oue,"PUBLIC")),An(new fn("messaging-internal",kue,"PRIVATE")),rt(a$,"0.12.4"),rt(a$,"0.12.4","esm2017")}();const Um="analytics",Vue="firebase_id",Uue="origin",Bue=6e4,$ue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vb="https://www.googletagmanager.com/gtag/js",pn=new va("@firebase/analytics"),rr=new Oi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Hue(t){if(!t.startsWith(vb)){const e=rr.create("invalid-gtag-resource",{gtagURL:t});return pn.warn(e.message),""}return t}function l$(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function wb(){return(wb=w(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield l$(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){pn.error(a)}t("config",i,s)})).apply(this,arguments)}function Eb(){return(Eb=w(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield l$(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){pn.error(s)}})).apply(this,arguments)}const Jue=30,d$=new class ece{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function tce(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Ib(){return(Ib=w(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:tce(r)},s=$ue.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw rr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Cb(){return(Cb=w(function*(t,e=d$,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw rr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw rr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new oce;return setTimeout(w(function*(){a.abort()}),void 0!==n?n:Bue),h$({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function h$(t,e,n){return bb.apply(this,arguments)}function bb(){return bb=w(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=d$){var s;const{appId:o,measurementId:a}=t;try{yield function ice(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(rr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function nce(t){return Ib.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function sce(t){if(!(t instanceof zr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?FI(n,i.intervalMillis,Jue):FI(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),pn.debug(`Calling attemptFetch again in ${l} millis`),h$(t,d,r,i)}}),bb.apply(this,arguments)}class oce{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Db,Rb;function Tb(){return(Tb=w(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function Ob(){return(Ob=w(function*(){if(!_a())return pn.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Kd()}catch(t){return pn.warn(rr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function kb(){return kb=w(function*(t,e,n,r,i,s,o){var a;const u=function rce(t){return Cb.apply(this,arguments)}(t);u.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>pn.error(g)),e.push(u);const c=function fce(){return Ob.apply(this,arguments)}().then(g=>{if(g)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function Xue(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(vb)&&n.src.includes(t))return n;return null})(s)||function zue(t,e){const n=function Gue(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Hue}),r=document.createElement("script"),i=`${vb}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),Rb&&(i("consent","default",Rb),function f$(t){Rb=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Uue]="firebase",h.update=!0,null!=d&&(h[Vue]=d),i("config",l.measurementId,h),Db&&(i("set",Db),function p$(t){Db=t}(void 0)),l.measurementId}),kb.apply(this,arguments)}class gce{constructor(e){this.app=e}_delete(){return delete ki[this.app.options.appId],Promise.resolve()}}let ki={},g$=[];const m$={};let y$,Pi,Bm="dataLayer",Pb=!1;function _ce(t,e,n){!function mce(){const t=[];if(RI()&&t.push("This is a browser extension environment."),OI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=rr.create("invalid-analytics-context",{errorInfo:e});pn.warn(n.message)}}();const r=t.options.appId;if(!r)throw rr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw rr.create("no-api-key");pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ki[r])throw rr.create("already-exists",{id:r});if(!Pb){!function Wue(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Bm);const{wrappedGtag:s,gtagCore:o}=function Yue(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Que(t,e,n,r){function s(){return s=w(function*(o,...a){try{if("event"===o){const[u,c]=a;yield function Kue(t,e,n,r,i){return Eb.apply(this,arguments)}(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield function que(t,e,n,r,i,s){return wb.apply(this,arguments)}(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){pn.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(ki,g$,m$,Bm,"gtag");Pi=s,y$=o,Pb=!0}return ki[r]=function pce(t,e,n,r,i,s,o){return kb.apply(this,arguments)}(t,g$,m$,e,y$,Bm,n),new gce(t)}function vce(){return Fb.apply(this,arguments)}function Fb(){return(Fb=w(function*(){if(RI()||!OI()||!_a())return!1;try{return yield Kd()}catch{return!1}})).apply(this,arguments)}const v$="@firebase/analytics";!function Ece(){An(new fn(Um,(e,{options:n})=>_ce(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),An(new fn("analytics-internal",function t(e){try{const n=e.getProvider(Um).getImmediate();return{logEvent:(r,i,s)=>function wce(t,e,n,r){t=Pt(t),function ace(t,e,n,r,i){return Tb.apply(this,arguments)}(Pi,ki[t.app.options.appId],e,n,r).catch(i=>pn.error(i))}(n,r,i,s)}}catch(n){throw rr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),rt(v$,"0.10.0"),rt(v$,"0.10.0","esm2017")}();class Ice extends L{constructor(e,n){super()}schedule(e,n=0){return this}}const $m={setInterval(t,e,...n){const{delegate:r}=$m;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=$m;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class E$ extends Ice{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return $m.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&$m.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,x(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const I$={now:()=>(I$.delegate||Date).now(),delegate:void 0};class nh{constructor(e,n=nh.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}nh.now=I$.now;class C$ extends nh{constructor(e,n=nh.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Dce=new class bce extends C${}(class Cce extends E${constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),Tce=new C$(E$),Ic=new Fu("7.6.1"),Vb="__angularfire_symbol__analyticsIsSupportedValue",Ub="__angularfire_symbol__analyticsIsSupported",Bb="__angularfire_symbol__remoteConfigIsSupportedValue",$b="__angularfire_symbol__remoteConfigIsSupported",jb="__angularfire_symbol__messagingIsSupportedValue",Hb="__angularfire_symbol__messagingIsSupported";function rh(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[Ub]||(globalThis[Ub]=vce().then(t=>globalThis[Vb]=t).catch(()=>globalThis[Vb]=!1)),globalThis[Hb]||(globalThis[Hb]=c$().then(t=>globalThis[jb]=t).catch(()=>globalThis[jb]=!1)),globalThis[$b]||(globalThis[$b]=Hae().then(t=>globalThis[Bb]=t).catch(()=>globalThis[Bb]=!1));const ih=(t,e)=>{const n=e?[e]:dB(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Cc(){}class b${constructor(e,n=Dce){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class Sce{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cc,{},Cc,Cc)),n.pipe(jn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sh=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new b$(Zone.current)),this.insideAngular=n.run(()=>new b$(Zone.current,Tce)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(le(Xe))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ta(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Sa(t){return Ta().ngZone.run(()=>t())}function Mce(t){return Ta(),function xce(t){return function(n){return(n=n.lift(new Sce(t.ngZone))).pipe(op(t.outsideAngular),sp(t.insideAngular))}}(Ta())(t)}const Nce=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Sa(()=>t.apply(void 0,r))},mr=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=Sa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cc,{},Cc,Cc)))),r[s]=Nce(r[s],n));const i=function Ace(t){return Ta().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof Et){const s=Ta();return i.pipe(op(s.outsideAngular),sp(s.insideAngular))}return Sa(()=>i)}return i instanceof Et?i.pipe(Mce):i instanceof Promise?Sa(()=>new Promise((s,o)=>i.then(a=>Sa(()=>s(a)),a=>Sa(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Sa(()=>i)};class ho{constructor(e){return e}}class oh{constructor(){return dB()}}const zb=new re("angularfire2._apps"),Oce={provide:ho,useFactory:function Rce(t){return t&&1===t.length?t[0]:new ho(Zd())},deps:[[new Mt,zb]]},kce={provide:oh,deps:[[new Mt,zb]]};function Pce(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new ho(r)}}let Fce=(()=>{class t{constructor(n){rt("angularfire",Ic.full,"core"),rt("angularfire",Ic.full,"app"),rt("angular",BO.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(le(Ks))},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({providers:[Oce,kce]}),t})();function Lce(t,...e){return{ngModule:Fce,providers:[{provide:zb,useFactory:Pce(t),multi:!0,deps:[Xe,Jn,sh,...e]}]}}const Vce=mr(lB,!0),Wb=new Map,D$={activated:!1,tokenObservers:[]},Uce={initialized:!1,enabled:!1};function Ft(t){return Wb.get(t)||Object.assign({},D$)}function jm(){return Uce}const qb="https://content-firebaseappcheck.googleapis.com/v1",Hce="exchangeDebugToken",T$={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class zce{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return w(function*(){n.stop();try{n.pending=new yc,yield function Wce(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new yc,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const xn=new Oi("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Kb(t){if(!Ft(t).activated)throw xn.create("use-before-activation",{appName:t.name})}function zm(t,e){return Yb.apply(this,arguments)}function Yb(){return(Yb=w(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw xn.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw xn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw xn.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw xn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function S$(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${qb}/projects/${n}/apps/${r}:${Hce}?key=${i}`,body:{debug_token:e}}}const Yce="firebase-app-check-database",Xce=1,ah="firebase-app-check-store";let Wm=null;function Xb(){return(Xb=w(function*(t,e){const r=(yield function M$(){return Wm||(Wm=new Promise((t,e)=>{try{const n=indexedDB.open(Yce,Xce);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(xn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ah,{keyPath:"compositeKey"})}}catch(n){e(xn.create("storage-open",{originalErrorMessage:n?.message}))}}),Wm)}()).transaction(ah,"readwrite"),s=r.objectStore(ah).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(xn.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const uh=new va("@firebase/app-check");function eD(t,e){return _a()?function Zce(t,e){return function x$(t,e){return Xb.apply(this,arguments)}(function R$(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{uh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function nD(){return jm().enabled}function rD(){return iD.apply(this,arguments)}function iD(){return(iD=w(function*(){const t=jm();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const sle={error:"UNKNOWN_ERROR"};function ole(t){return bm.encodeString(JSON.stringify(t),!1)}function qm(t){return sD.apply(this,arguments)}function sD(){return(sD=w(function*(t,e=!1){const n=t.app;Kb(n);const r=Ft(n);let s,i=r.token;if(i&&!bc(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(bc(u)?i=u:yield eD(n,void 0))}if(!e&&i&&bc(i))return{token:i.token};let a,o=!1;if(nD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zm(S$(n,yield rD()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield eD(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Ft(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?uh.warn(u.message):uh.error(u),s=u}return i?s?a=bc(i)?{token:i.token,internalError:s}:F$(s):(a={token:i.token},r.token=i,yield eD(n,i)):a=F$(s),o&&function P$(t,e){const n=Ft(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a})).apply(this,arguments)}function O$(t){return oD.apply(this,arguments)}function oD(){return(oD=w(function*(t){const e=t.app;Kb(e);const{provider:n}=Ft(e);if(nD()){const r=yield rD(),{token:i}=yield zm(S$(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function uD(t,e){const n=Ft(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function k$(t){const{app:e}=t,n=Ft(e);let r=n.tokenRefresher;r||(r=function ale(t){const{app:e}=t;return new zce(w(function*(){let r;if(r=Ft(e).token?yield qm(t,!0):yield qm(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=Ft(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},T$.RETRIAL_MIN_WAIT,T$.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function bc(t){return t.expireTimeMillis-Date.now()>0}function F$(t){return{token:ole(sle),error:t}}class ule{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ft(this.app);for(const n of e)uD(this.app,n.next);return Promise.resolve()}}const G$="app-check-internal";!function Ile(){An(new fn("app-check",t=>function cle(t,e){return new ule(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(G$).initialize()})),An(new fn(G$,t=>function lle(t){return{getToken:e=>qm(t,e),getLimitedUseToken:()=>O$(t),addTokenListener:e=>function aD(t,e,n,r){const{app:i}=t,s=Ft(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&bc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),k$(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>k$(t))}(t,"INTERNAL",e),removeTokenListener:e=>uD(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),rt("@firebase/app-check","0.8.0")}();class ch{constructor(){return ih("app-check")}}typeof window<"u"&&window;const Sle=function W$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},q$=new Oi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qm=new va("@firebase/auth");function Ym(t,...e){Qm.logLevel<=Fe.ERROR&&Qm.error(`Auth (${co}): ${t}`,...e)}function _r(t,...e){throw fD(t,...e)}function Fi(t,...e){return fD(t,...e)}function fD(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return q$.create(t,...e)}function q(t,e,...n){if(!t)throw fD(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ym(e),new Error(e)}function fo(t,e){t||Li(e)}function lh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Q$(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class dh{constructor(e,n){this.shortDelay=e,this.longDelay=n,fo(n>e,"Short delay should be less than long delay!"),this.isMobile=NI()||tB()}get(){return function Mle(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function pD(){return"http:"===Q$()||"https:"===Q$()}()||RI()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gD(t,e){fo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Y${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Rle=new dh(3e4,6e4);function Nt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Lt(t,e,n,r){return mD.apply(this,arguments)}function mD(){return(mD=w(function*(t,e,n,r,i={}){return X$(t,i,w(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Yd(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Y$.fetch()(J$(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function X$(t,e,n){return _D.apply(this,arguments)}function _D(){return(_D=w(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Nle),e);try{const i=new Ole(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw hh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw hh(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw hh(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw hh(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function K$(t,e,n){const r=Object.assign(Object.assign({},Sle()),{[e]:n});return new Oi("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);_r(t,l)}}catch(i){if(i instanceof zr)throw i;_r(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Is(t,e,n,r){return yD.apply(this,arguments)}function yD(){return(yD=w(function*(t,e,n,r,i={}){const s=yield Lt(t,e,n,r,i);return"mfaPendingCredential"in s&&_r(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function J$(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?gD(t.config,i):`${t.config.apiScheme}://${i}`}class Ole{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fi(this.auth,"network-request-failed")),Rle.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fi(t,e,r);return i.customData._tokenResponse=n,i}function vD(){return(vD=w(function*(t,e){return Lt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function ED(){return(ED=w(function*(t,e){return Lt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function fh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ID(){return(ID=w(function*(t,e=!1){const n=Pt(t),r=yield n.getIdToken(e),i=Xm(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:fh(CD(i.auth_time)),issuedAtTime:fh(CD(i.iat)),expirationTime:fh(CD(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function CD(t){return 1e3*Number(t)}function Xm(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Ym("JWT malformed, contained fewer than 3 sections"),null;try{const i=Tm(n);return i?JSON.parse(i):(Ym("Failed to decode base64 JWT payload"),null)}catch(i){return Ym("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Cs(t,e){return bD.apply(this,arguments)}function bD(){return(bD=w(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof zr&&function Ule({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Ble{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(w(function*(){yield n.iteration()}),r)}iteration(){var e=this;return w(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class Z${constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fh(this.lastLoginAt),this.creationTime=fh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ph(t){return DD.apply(this,arguments)}function DD(){return DD=w(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Cs(t,function Fle(t,e){return ED.apply(this,arguments)}(n,{idToken:r}));q(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Hle(t){return t.map(e=>{var{providerId:n}=e,r=wv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function jle(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Z$(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),DD.apply(this,arguments)}function TD(){return(TD=w(function*(t){const e=Pt(t);yield ph(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function SD(){return(SD=w(function*(t,e){const n=yield X$(t,{},w(function*(){const r=Yd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=J$(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Y$.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class gh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Vle(t){const e=Xm(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return w(function*(){return q(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return w(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Gle(t,e){return SD.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new gh;return r&&(q("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(q("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(q("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gh,this.toJSON())}_performRefresh(){return Li("not implemented")}}function po(t,e){q("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Aa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ble(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Z$(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return w(function*(){const r=yield Cs(n,n.stsTokenManager.getToken(n.auth,e));return q(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Lle(t){return ID.apply(this,arguments)}(this,e)}reload(){return function $le(t){return TD.apply(this,arguments)}(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Aa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return w(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield ph(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return w(function*(){const n=yield e.getIdToken();return yield Cs(e,function kle(t,e){return vD.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,y=null!==(o=n.photoURL)&&void 0!==o?o:void 0,E=null!==(a=n.tenantId)&&void 0!==a?a:void 0,D=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,R=null!==(c=n.createdAt)&&void 0!==c?c:void 0,S=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:G,emailVerified:ee,isAnonymous:ie,providerData:ye,stsTokenManager:Bt}=n;q(G&&Bt,e,"internal-error");const gi=gh.fromJSON(this.name,Bt);q("string"==typeof G,e,"internal-error"),po(d,e.name),po(h,e.name),q("boolean"==typeof ee,e,"internal-error"),q("boolean"==typeof ie,e,"internal-error"),po(g,e.name),po(y,e.name),po(E,e.name),po(D,e.name),po(R,e.name),po(S,e.name);const zo=new Aa({uid:G,auth:e,email:h,emailVerified:ee,displayName:d,isAnonymous:ie,photoURL:y,phoneNumber:g,tenantId:E,stsTokenManager:gi,createdAt:R,lastLoginAt:S});return ye&&Array.isArray(ye)&&(zo.providerData=ye.map($0e=>Object.assign({},$0e))),D&&(zo._redirectEventId=D),zo}static _fromIdTokenResponse(e,n,r=!1){return w(function*(){const i=new gh;i.updateFromServerResponse(n);const s=new Aa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ph(s),s})()}}const ej=new Map;function bs(t){fo(t instanceof Function,"Expected a class definition");let e=ej.get(t);return e?(fo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ej.set(t,e),e)}const tj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(function*(){return!0})()}_set(n,r){var i=this;return w(function*(){i.storage[n]=r})()}_get(n){var r=this;return w(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return w(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Jm(t,e,n){return`firebase:${t}:${e}:${n}`}class Tc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return w(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Aa._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return w(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(function*(){if(!n.length)return new Tc(bs(tj),e,r);const i=(yield Promise.all(n.map(function(){var c=w(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||bs(tj);const o=Jm(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=Aa._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=w(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Tc(s,e,r)):new Tc(s,e,r)})()}}function nj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aj(e))return"Blackberry";if(uj(e))return"Webos";if(AD(e))return"Safari";if((e.includes("chrome/")||ij(e))&&!e.includes("edge/"))return"Chrome";if(oj(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function rj(t=hn()){return/firefox\//i.test(t)}function AD(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ij(t=hn()){return/crios\//i.test(t)}function sj(t=hn()){return/iemobile/i.test(t)}function oj(t=hn()){return/android/i.test(t)}function aj(t=hn()){return/blackberry/i.test(t)}function uj(t=hn()){return/webos/i.test(t)}function Zm(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cj(t=hn()){return Zm(t)||oj(t)||uj(t)||aj(t)||/windows phone/i.test(t)||sj(t)}function lj(t,e=[]){let n;switch(t){case"Browser":n=nj(hn());break;case"Worker":n=`${nj(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}function dj(t,e){return xD.apply(this,arguments)}function xD(){return(xD=w(function*(t,e){return Lt(t,"GET","/v2/recaptchaConfig",Nt(t,e))})).apply(this,arguments)}function fj(t){return void 0!==t&&void 0!==t.enterprise}class pj{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}function ND(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Fi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function Qle(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}function gj(t){return`__${t}${Math.floor(1e6*Math.random())}`}class mj{constructor(e){this.type="recaptcha-enterprise",this.auth=gn(e)}verify(e="verify",n=!1){var r=this;return w(function*(){function s(){return s=w(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=w(function*(c,l){dj(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new pj(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(c,l){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,c){const l=window.grecaptcha;fj(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{u(d)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&fj(window.grecaptcha))o(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));ND("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,u)}).catch(l=>{u(l)})}}).catch(c=>{u(c)})})})()}}function go(t,e,n){return RD.apply(this,arguments)}function RD(){return(RD=w(function*(t,e,n,r=!1){const i=new mj(t);let s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}const o=Object.assign({},e);return Object.assign(o,r?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})).apply(this,arguments)}class Zle{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return w(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class ede{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _j(this),this.idTokenSubscription=new _j(this),this.beforeStateQueue=new Zle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(w(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Tc.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return w(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return w(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return q(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return w(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return w(function*(){try{yield ph(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function xle(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return w(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return w(function*(){const r=e?Pt(e):null;return r&&q(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return w(function*(){if(!r._deleted)return e&&q(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(w(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return w(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(w(function*(){yield n.assertedPersistence.setPersistence(bs(e))}))}initializeRecaptchaConfig(){var e=this;return w(function*(){const n=yield dj(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new pj(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new mj(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return w(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return w(function*(){if(!n.redirectPersistenceManager){const r=e&&bs(e)||n._popupRedirectResolver;q(r,n,"argument-error"),n.redirectPersistenceManager=yield Tc.create(n,[bs(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return w(function*(){var r,i;return n._isInitialized&&(yield n.queue(w(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return w(function*(){if(e===n.currentUser)return n.queue(w(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return q(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return w(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return w(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return w(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Ale(t,...e){Qm.logLevel<=Fe.WARN&&Qm.warn(`Auth (${co}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function gn(t){return Pt(t)}class _j{constructor(e){this.auth=e,this.observer=null,this.addObserver=function ose(t,e){const n=new ase(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class wj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}function Ij(t,e){return kD.apply(this,arguments)}function kD(){return(kD=w(function*(t,e){return Lt(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function FD(t,e){return LD.apply(this,arguments)}function LD(){return(LD=w(function*(t,e){return Is(t,"POST","/v1/accounts:signInWithPassword",Nt(t,e))})).apply(this,arguments)}function zD(){return(zD=w(function*(t,e){return Is(t,"POST","/v1/accounts:signInWithEmailLink",Nt(t,e))})).apply(this,arguments)}function WD(){return(WD=w(function*(t,e){return Is(t,"POST","/v1/accounts:signInWithEmailLink",Nt(t,e))})).apply(this,arguments)}class mh extends wj{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new mh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){var n=this;return w(function*(){var r;switch(n.signInMethod){case"password":const i={returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(r=e._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const s=yield go(e,i,"signInWithPassword");return FD(e,s)}return FD(e,i).catch(function(){var s=w(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield go(e,i,"signInWithPassword");return FD(e,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}());case"emailLink":return function cde(t,e){return zD.apply(this,arguments)}(e,{email:n._email,oobCode:n._password});default:_r(e,"internal-error")}})()}_linkToIdToken(e,n){var r=this;return w(function*(){switch(r.signInMethod){case"password":return Ij(e,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function lde(t,e){return WD.apply(this,arguments)}(e,{idToken:n,email:r._email,oobCode:r._password});default:_r(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ds(t,e){return qD.apply(this,arguments)}function qD(){return(qD=w(function*(t,e){return Is(t,"POST","/v1/accounts:signInWithIdp",Nt(t,e))})).apply(this,arguments)}class vh{constructor(e){var n,r,i,s,o,a;const u=Xd(Jd(e)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function _de(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);q(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const n=function yde(t){const e=Xd(Jd(t)).link,n=e?Xd(Jd(e)).deep_link_id:null,r=Xd(Jd(t)).deep_link_id;return(r?Xd(Jd(r)).link:null)||r||n||e||t}(e);try{return new vh(n)}catch{return null}}}let Cj=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return mh._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=vh.parseLink(r);return q(i,"argument-error"),mh._fromEmailAndCode(n,i.code,i.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class mo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vde extends mo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function n_(t,e){return ZD.apply(this,arguments)}function ZD(){return(ZD=w(function*(t,e){return Is(t,"POST","/v1/accounts:signUp",Nt(t,e))})).apply(this,arguments)}class Wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(function*(){const s=yield Aa._fromIdTokenResponse(e,r,i),o=bj(r);return new Wr({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return w(function*(){yield e._updateTokensIfNecessary(r,!0);const i=bj(r);return new Wr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function bj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class r_ extends zr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,r_.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new r_(e,n,r,i)}}function Dj(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?r_._fromErrorAndOperation(t,s,e,r):s})}function rT(){return(rT=w(function*(t,e,n=!1){const r=yield Cs(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Wr._forOperation(t,"link",r)})).apply(this,arguments)}function sT(){return(sT=w(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield Cs(t,Dj(r,i,e,t),n);q(s.idToken,r,"internal-error");const o=Xm(s.idToken);q(o,r,"internal-error");const{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),Wr._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&_r(r,"user-mismatch"),s}})).apply(this,arguments)}function Aj(t,e){return oT.apply(this,arguments)}function oT(){return(oT=w(function*(t,e,n=!1){const r="signIn",i=yield Dj(t,r,e),s=yield Wr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function uT(){return(uT=w(function*(t,e){return Aj(gn(t),e)})).apply(this,arguments)}function Tde(t,e,n){return ET.apply(this,arguments)}function ET(){return ET=w(function*(t,e,n){var r;const i=gn(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null!==(r=i._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const c=yield go(i,s,"signUpPassword");o=n_(i,c)}else o=n_(i,s).catch(function(){var c=w(function*(l){if("auth/missing-recaptcha-token"===l.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=yield go(i,s,"signUpPassword");return n_(i,d)}return Promise.reject(l)});return function(l){return c.apply(this,arguments)}}());const a=yield o.catch(c=>Promise.reject(c)),u=yield Wr._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(u.user),u}),ET.apply(this,arguments)}function Sde(t,e,n){return function aT(t,e){return uT.apply(this,arguments)}(Pt(t),Cj.credential(e,n))}function Lde(t){return Pt(t).signOut()}const s_="__sak";class xj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(s_,"1"),this.storage.removeItem(s_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zde=(()=>{class t extends xj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jde(){const t=hn();return AD(t)||Zm(t)}()&&function qle(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=cj(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function Wle(){return function Zie(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return w(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return w(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return w(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),Nj=(()=>{class t extends xj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let qde=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return w(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(u).map(function(){var d=w(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function Wde(t){return Promise.all(t.map(function(){var e=w(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:l})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function FT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Kde{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return w(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const l=FT("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const g=h;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Jt(){return window}function LT(){return typeof Jt().WorkerGlobalScope<"u"&&"function"==typeof Jt().importScripts}function VT(){return(VT=w(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Rj="firebaseLocalStorageDb",o_="firebaseLocalStorage",Oj="fbase_key";class Eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function a_(t,e){return t.transaction([o_],e?"readwrite":"readonly").objectStore(o_)}function UT(){const t=indexedDB.open(Rj,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(o_,{keyPath:Oj})}catch(i){n(i)}}),t.addEventListener("success",w(function*(){const r=t.result;r.objectStoreNames.contains(o_)?e(r):(r.close(),yield function ehe(){const t=indexedDB.deleteDatabase(Rj);return new Eh(t).toPromise()}(),e(yield UT()))}))})}function kj(t,e,n){return BT.apply(this,arguments)}function BT(){return(BT=w(function*(t,e,n){const r=a_(t,!0).put({[Oj]:e,value:n});return new Eh(r).toPromise()})).apply(this,arguments)}function $T(){return($T=w(function*(t,e){const n=a_(t,!1).get(e),r=yield new Eh(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Pj(t,e){const n=a_(t,!0).delete(e);return new Eh(n).toPromise()}const ihe=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return w(function*(){return n.db||(n.db=yield UT()),n.db})()}_withRetries(n){var r=this;return w(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return w(function*(){return LT()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return w(function*(){n.receiver=qde._getInstance(function Jde(){return LT()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=w(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=w(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return w(function*(){var r,i;if(n.activeServiceWorker=yield function Yde(){return VT.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Kde(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return w(function*(){if(r.sender&&r.activeServiceWorker&&function Xde(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return w(function*(){try{if(!indexedDB)return!1;const n=yield UT();return yield kj(n,s_,"1"),yield Pj(n,s_),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return w(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return w(function*(){return i._withPendingWrite(w(function*(){return yield i._withRetries(s=>kj(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return w(function*(){const i=yield r._withRetries(s=>function the(t,e){return $T.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return w(function*(){return r._withPendingWrite(w(function*(){return yield r._withRetries(i=>Pj(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return w(function*(){const r=yield n._withRetries(o=>{const a=a_(o,!1).getAll();return new Eh(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(w(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();gj("rcb"),new dh(3e4,6e4);class YT extends wj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function whe(t){return Aj(t.auth,new YT(t),t.bypassAuthState)}function Ehe(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),function Sj(t,e){return sT.apply(this,arguments)}(n,new YT(t),t.bypassAuthState)}function Ihe(t){return XT.apply(this,arguments)}function XT(){return(XT=w(function*(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),function nT(t,e){return rT.apply(this,arguments)}(n,new YT(t),t.bypassAuthState)})).apply(this,arguments)}class Che{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=w(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return w(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(u)(c))}catch(l){n.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return whe;case"linkViaPopup":case"linkViaRedirect":return Ihe;case"reauthViaPopup":case"reauthViaRedirect":return Ehe;default:_r(this.auth,"internal-error")}}resolve(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new dh(2e3,1e4);const bhe="pendingRedirect",Ih=new Map;class Dhe extends Che{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return w(function*(){let r=Ih.get(n.auth._key());if(!r){try{const s=(yield function The(t,e){return nS.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Ih.set(n.auth._key(),r)}return n.bypassAuthState||Ih.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return w(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return w(function*(){})()}cleanUp(){}}function nS(){return(nS=w(function*(t,e){const n=function Vj(t){return Jm(bhe,t.config.apiKey,t.name)}(e),r=function Lj(t){return bs(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function She(t,e){Ih.set(t._key(),e)}function Uj(t,e){return cS.apply(this,arguments)}function cS(){return(cS=w(function*(t,e,n=!1){const r=gn(t),i=function xa(t,e){return e?bs(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),o=yield new Dhe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class Rhe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Ohe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jj(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jj(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($j(e))}saveEventToCache(e){this.cachedEventUids.add($j(e)),this.lastProcessedEventTime=Date.now()}}function $j(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jj({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function dS(){return(dS=w(function*(t,e={}){return Lt(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Phe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fhe=/^https?/;function hS(){return hS=w(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function khe(t){return dS.apply(this,arguments)}(t);for(const n of e)try{if(Vhe(n))return}catch{}_r(t,"unauthorized-domain")}),hS.apply(this,arguments)}function Vhe(t){const e=lh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Fhe.test(n))return!1;if(Phe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Uhe=new dh(3e4,6e4);function Hj(){const t=Jt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let c_=null;const jhe=new dh(5e3,15e3),Hhe="__/auth/iframe",Ghe="emulator/auth/iframe",zhe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Whe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qhe(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gD(e,Ghe):`https://${t.config.authDomain}/${Hhe}`,r={apiKey:e.apiKey,appName:t.name,v:co},i=Whe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Yd(r).slice(1)}`}function fS(){return fS=w(function*(t){const e=yield function $he(t){return c_=c_||function Bhe(t){return new Promise((e,n)=>{var r,i,s;function o(){Hj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hj(),n(Fi(t,"network-request-failed"))},timeout:Uhe.get()})}if(null!==(i=null===(r=Jt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Jt().gapi)||void 0===s||!s.load){const a=gj("iframefcb");return Jt()[a]=()=>{gapi.load?o():n(Fi(t,"network-request-failed"))},ND(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}o()}}).catch(e=>{throw c_=null,e})}(t),c_}(t),n=Jt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:qhe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zhe,dontclear:!0},r=>new Promise(function(){var i=w(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Fi(t,"network-request-failed"),u=Jt().setTimeout(()=>{o(a)},jhe.get());function c(){Jt().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),fS.apply(this,arguments)}const Qhe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const nfe="__/auth/handler",rfe="emulator/auth/handler",ife=encodeURIComponent("fac");function zj(t,e,n,r,i,s){return pS.apply(this,arguments)}function pS(){return(pS=w(function*(t,e,n,r,i,s){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:i};if(e instanceof mo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof vde){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const u=yield t._getAppCheckToken(),c=u?`#${ife}=${encodeURIComponent(u)}`:"";return`${function sfe({config:t}){return t.emulator?gD(t,rfe):`https://${t.authDomain}/${nfe}`}(t)}?${Yd(a).slice(1)}${c}`})).apply(this,arguments)}const gS="webStorageSupport",afe=class ofe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nj,this._completeRedirectFn=Uj,this._overrideRedirectResult=She}_openPopup(e,n,r,i){var s=this;return w(function*(){var o;fo(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield zj(e,n,r,lh(),i);return function efe(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Qhe),{width:r.toString(),height:i.toString(),top:s,left:o}),c=hn().toLowerCase();n&&(a=ij(c)?"_blank":n),rj(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((h,[g,y])=>`${h}${g}=${y},`,"");if(function zle(t=hn()){var e;return Zm(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function tfe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new Gj(null);const d=window.open(e||"",a,l);q(d,t,"popup-blocked");try{d.focus()}catch{}return new Gj(d)}(e,a,FT())})()}_openRedirect(e,n,r,i){var s=this;return w(function*(){return yield s._originValidation(e),function Qde(t){Jt().location.href=t}(yield zj(e,n,r,lh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(fo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return w(function*(){const r=yield function Khe(t){return fS.apply(this,arguments)}(e),i=new Rhe(e);return r.register("authEvent",s=>(q(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gS,{type:gS},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[gS];void 0!==o&&n(!!o),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Lhe(t){return hS.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cj()||AD()||Zm()}};var Kj="@firebase/auth";class ufe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return w(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const hfe=ZU("authIdTokenMaxAge")||300;let Yj=null;const ffe=t=>function(){var e=w(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>hfe)return;const s=r?.token;Yj!==s&&(Yj=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function pfe(t=Zd()){const e=uo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function tde(t,e){const n=uo(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(xm(n.getOptions(),e??{}))return i;_r(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:afe,persistence:[ihe,zde,Nj]}),r=ZU("authTokenSyncURL");if(r){const s=ffe(r);(function Fde(t,e,n){Pt(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Pde(t,e,n,r){Pt(t).onIdTokenChanged(e,n,r)}(n,o=>s(o))}const i=XU("auth");return i&&function rde(t,e,n){const r=gn(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=yj(e),{host:o,port:a}=function ide(t){const e=yj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vj(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:vj(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function sde(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}!function lfe(t){An(new fn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lj(t)},c=new ede(r,i,s,u);return function nde(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(bs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),An(new fn("auth-internal",e=>{const n=gn(e.getProvider("auth").getImmediate());return new ufe(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(Kj,"0.23.2",function cfe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),rt(Kj,"0.23.2","esm2017")}("Browser");class Hn{constructor(e){return e}}class d_{constructor(){return ih("auth")}}const _S=new re("angularfire2.auth-instances");function mfe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Hn(r)}}const _fe={provide:d_,deps:[[new Mt,_S]]},yfe={provide:Hn,useFactory:function gfe(t,e){const n=rh("auth",t,e);return n&&new Hn(n)},deps:[[new Mt,_S],ho]};let vfe=(()=>{class t{constructor(){rt("angularfire",Ic.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({providers:[yfe,_fe]}),t})();function wfe(t,...e){return{ngModule:vfe,providers:[{provide:_S,useFactory:mfe(t),multi:!0,deps:[Xe,Jn,sh,oh,[new Mt,ch],...e]}]}}const Efe=mr(Tde,!0),Ife=mr(pfe,!0),Cfe=mr(Sde,!0),bfe=mr(Lde,!0);let Jj=(()=>{class t{constructor(n,r){this.auth=n,this.router=r}Login(){this.router.navigate(["/auth/login"])}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(xt))},t.\u0275cmp=bn({type:t,selectors:[["app-auth"]],decls:1,vars:0,template:function(n,r){1&n&&nt(0,"router-outlet")},dependencies:[$d],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})(),Dfe=(()=>{class t{constructor(n,r){this.auth=n,this.router=r,this.nid=1}Signup(){this.router.navigate(["/auth/signup"])}handleLogin(n){Cfe(this.auth,n.email,n.password).then(r=>{console.log(r.user),console.log(r.user.email)}).catch(r=>{alert(r.message)}),this.router.navigate(["/admin"])}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(xt))},t.\u0275cmp=bn({type:t,selectors:[["app-login"]],decls:14,vars:0,consts:[["id","login",3,"click"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","email","ngModel","","placeholder","Email","id","email","type","email",1,"input-field"],["name","password","ngModel","","placeholder","Password","id","password","type","password",1,"input-field"]],template:function(n,r){if(1&n){const i=ia();ue(0,"p"),Ge(1,"login works!"),he(),ue(2,"div")(3,"button",0),It("click",function(){return r.Signup()}),Ge(4,"Sign up"),he()(),ue(5,"form",1,2),It("ngSubmit",function(){Hs(i);const o=Ku(6);return Gs(r.handleLogin(o.value))}),ue(7,"div",3)(8,"div",4),nt(9,"input",5),he(),ue(10,"div",4),nt(11,"input",6),he(),ue(12,"button"),Ge(13,"Log In"),he()()()}},dependencies:[uc,eo,ic,sc,ca,io],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})();var J,Tfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ai={},yS=yS||{},we=Tfe||self;function h_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ch(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var vS="closure_uid_"+(1e9*Math.random()>>>0),Afe=0;function Mfe(t,e,n){return t.call.apply(t.bind,arguments)}function xfe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Gn(t,e,n){return(Gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mfe:xfe).apply(null,arguments)}function f_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function _o(){this.s=this.s,this.o=this.o}_o.prototype.s=!1,_o.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Sfe(t){Object.prototype.hasOwnProperty.call(t,vS)&&t[vS]||(t[vS]=++Afe)}(this)},_o.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zj=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wS(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eH(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(h_(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function zn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zn.prototype.h=function(){this.defaultPrevented=!0};var Rfe=function(){if(!we.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{we.addEventListener("test",()=>{},e),we.removeEventListener("test",()=>{},e)}catch{}return t}();function bh(t){return/^[\s\xa0]*$/.test(t)}function p_(){var t=we.navigator;return t&&(t=t.userAgent)?t:""}function Vi(t){return-1!=p_().indexOf(t)}function ES(t){return ES[" "](t),t}ES[" "]=function(){};var CS,t,kfe=Vi("Opera"),Ac=Vi("Trident")||Vi("MSIE"),tH=Vi("Edge"),IS=tH||Ac,nH=Vi("Gecko")&&!(-1!=p_().toLowerCase().indexOf("webkit")&&!Vi("Edge"))&&!(Vi("Trident")||Vi("MSIE"))&&!Vi("Edge"),Pfe=-1!=p_().toLowerCase().indexOf("webkit")&&!Vi("Edge");function rH(){var t=we.document;return t?t.documentMode:void 0}e:{var bS="",DS=(t=p_(),nH?/rv:([^\);]+)(\)|;)/.exec(t):tH?/Edge\/([\d\.]+)/.exec(t):Ac?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Pfe?/WebKit\/(\S+)/.exec(t):kfe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(DS&&(bS=DS?DS[1]:""),Ac){var TS=rH();if(null!=TS&&TS>parseFloat(bS)){CS=String(TS);break e}}CS=bS}var Ffe=we.document&&Ac&&(rH()||parseInt(CS,10))||void 0;function Dh(t,e){if(zn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(nH){e:{try{ES(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Lfe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dh.$.h.call(this)}}mn(Dh,zn);var Lfe={2:"touch",3:"pen",4:"mouse"};Dh.prototype.h=function(){Dh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Th="closure_listenable_"+(1e6*Math.random()|0),Vfe=0;function Ufe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Vfe,this.fa=this.ia=!1}function g_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function AS(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function sH(t){const e={};for(const n in t)e[n]=t[n];return e}const oH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aH(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<oH.length;s++)n=oH[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function m_(t){this.src=t,this.g={},this.h=0}function MS(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=Zj(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(g_(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function xS(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}m_.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=xS(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Ufe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var NS="closure_lm_"+(1e6*Math.random()|0),RS={};function uH(t,e,n,r,i){if(r&&r.once)return lH(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)uH(t,e[s],n,r,i);return null}return n=FS(n),t&&t[Th]?t.O(e,n,Ch(r)?!!r.capture:!!r,i):cH(t,e,n,!1,r,i)}function cH(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ch(i)?!!i.capture:!!i,a=kS(t);if(a||(t[NS]=a=new m_(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function $fe(){const e=jfe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Rfe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(hH(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lH(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)lH(t,e[s],n,r,i);return null}return n=FS(n),t&&t[Th]?t.P(e,n,Ch(r)?!!r.capture:!!r,i):cH(t,e,n,!0,r,i)}function dH(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)dH(t,e[s],n,r,i);else r=Ch(r)?!!r.capture:!!r,n=FS(n),t&&t[Th]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=xS(s=t.g[e],n,r,i))&&(g_(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=kS(t))&&(e=t.g[e.toString()],t=-1,e&&(t=xS(e,n,r,i)),(n=-1<t?e[t]:null)&&OS(n))}function OS(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Th])MS(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hH(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kS(e))?(MS(n,t),0==n.h&&(n.src=null,e[NS]=null)):g_(t)}}}function hH(t){return t in RS?RS[t]:RS[t]="on"+t}function jfe(t,e){if(t.fa)t=!0;else{e=new Dh(e,this);var n=t.listener,r=t.la||t.src;t.ia&&OS(t),t=n.call(r,e)}return t}function kS(t){return(t=t[NS])instanceof m_?t:null}var PS="__closure_events_fn_"+(1e9*Math.random()>>>0);function FS(t){return"function"==typeof t?t:(t[PS]||(t[PS]=function(e){return t.handleEvent(e)}),t[PS])}function _n(){_o.call(this),this.i=new m_(this),this.S=this,this.J=null}function Nn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new zn(e,t);else if(e instanceof zn)e.target=e.target||t;else{var i=e;aH(e=new zn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=__(o,r,!0,e)&&i}if(i=__(o=e.g=t,r,!0,e)&&i,i=__(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=__(o=e.g=n[s],r,!1,e)&&i}function __(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&MS(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mn(_n,_o),_n.prototype[Th]=!0,_n.prototype.removeEventListener=function(t,e,n,r){dH(this,t,e,n,r)},_n.prototype.N=function(){if(_n.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)g_(n[r]);delete t.g[e],t.h--}}this.J=null},_n.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_n.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var LS=we.JSON.stringify;function Gfe(){var t=VS;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var fH=new class Hfe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Wfe,t=>t.reset());class Wfe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qfe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Kfe(t){we.setTimeout(()=>{throw t},0)}let Sh,Ah=!1,VS=new class zfe{constructor(){this.h=this.g=null}add(e,n){const r=fH.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},pH=()=>{const t=we.Promise.resolve(void 0);Sh=()=>{t.then(Qfe)}};var Qfe=()=>{for(var t;t=Gfe();){try{t.h.call(t.g)}catch(n){Kfe(n)}var e=fH;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ah=!1};function y_(t,e){_n.call(this),this.h=t||1,this.g=e||we,this.j=Gn(this.qb,this),this.l=Date.now()}function US(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function BS(t,e,n){if("function"==typeof t)n&&(t=Gn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Gn(t.handleEvent,t)}return 2147483647<Number(e)?-1:we.setTimeout(t,e||0)}function gH(t){t.g=BS(()=>{t.g=null,t.i&&(t.i=!1,gH(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}mn(y_,_n),(J=y_.prototype).ga=!1,J.T=null,J.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nn(this,"tick"),this.ga&&(US(this),this.start()))}},J.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},J.N=function(){y_.$.N.call(this),US(this),delete this.g};class Yfe extends _o{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gH(this)}N(){super.N(),this.g&&(we.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mh(t){_o.call(this),this.h=t,this.g={}}mn(Mh,_o);var mH=[];function _H(t,e,n,r){Array.isArray(n)||(n&&(mH[0]=n.toString()),n=mH);for(var i=0;i<n.length;i++){var s=uH(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function yH(t){AS(t.g,function(e,n){this.g.hasOwnProperty(n)&&OS(e)},t),t.g={}}function v_(){this.g=!0}function Mc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function epe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return LS(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Mh.prototype.N=function(){Mh.$.N.call(this),yH(this)},Mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},v_.prototype.Ea=function(){this.g=!1},v_.prototype.info=function(){};var Na={},vH=null;function w_(){return vH=vH||new _n}function wH(t){zn.call(this,Na.Ta,t)}function xh(t){const e=w_();Nn(e,new wH(e))}function EH(t,e){zn.call(this,Na.STAT_EVENT,t),this.stat=e}function ir(t){const e=w_();Nn(e,new EH(e,t))}function IH(t,e){zn.call(this,Na.Ua,t),this.size=e}function Nh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return we.setTimeout(function(){t()},e)}Na.Ta="serverreachability",mn(wH,zn),Na.STAT_EVENT="statevent",mn(EH,zn),Na.Ua="timingevent",mn(IH,zn);var E_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},CH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $S(){}function DH(){}$S.prototype.h=null;var GS,Rh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jS(){zn.call(this,"d")}function HS(){zn.call(this,"c")}function I_(){}function Oh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Mh(this),this.P=tpe,this.V=new y_(t=IS?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new TH}function TH(){this.i=null,this.g="",this.h=!1}mn(jS,zn),mn(HS,zn),mn(I_,$S),I_.prototype.g=function(){return new XMLHttpRequest},I_.prototype.i=function(){return{}},GS=new I_;var tpe=45e3,zS={},C_={};function WS(t,e,n){t.L=1,t.v=S_(Ts(e)),t.s=n,t.S=!0,SH(t,null)}function SH(t,e){t.G=Date.now(),kh(t),t.A=Ts(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),LH(n.i,"t",r),t.C=0,n=t.l.J,t.h=new TH,t.g=aG(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Yfe(Gn(t.Pa,t,t.g),t.O)),_H(t.U,t.g,"readystatechange",t.nb),e=t.I?sH(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),xh(),function Xfe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function AH(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function MH(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=npe(t,n),i==C_){4==e&&(t.o=4,ir(14),r=!1),Mc(t.j,t.m,null,"[Incomplete Response]");break}if(i==zS){t.o=4,ir(15),Mc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Mc(t.j,t.m,i,null),qS(t,i)}AH(t)&&i!=C_&&i!=zS&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ir(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),eA(e),e.M=!0,ir(11))):(Mc(t.j,t.m,n,"[Invalid Chunked Response]"),Ra(t),Ph(t))}function npe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?C_:(n=Number(e.substring(n,r)),isNaN(n)?zS:(r+=1)+n>e.length?C_:(e=e.slice(r,r+n),t.C=r+n,e))}function kh(t){t.Y=Date.now()+t.P,xH(t,t.P)}function xH(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Nh(Gn(t.lb,t),e)}function b_(t){t.B&&(we.clearTimeout(t.B),t.B=null)}function Ph(t){0==t.l.H||t.J||rG(t.l,t)}function Ra(t){b_(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,US(t.V),yH(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function qS(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||KS(n.i,t)))if(!t.K&&KS(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;O_(n),N_(n)}ZS(n),ir(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Nh(Gn(n.ib,n),6e3));if(1>=BH(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ka(n,11)}else if((t.K||n.g==t)&&O_(n),!bh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=t.g;if(g){const y=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||-1==y.indexOf("spdy")&&-1==y.indexOf("quic")&&-1==y.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(QS(s,s.h),s.h=null))}if(r.F){const E=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,_t(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=oG(r,r.J?r.pa:null,r.Y),o.K){$H(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(b_(a),kh(a)),r.g=o}else tG(r);0<n.j.length&&R_(n)}else"stop"!=c[0]&&"close"!=c[0]||ka(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ka(n,7):JS(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}xh()}catch{}}function NH(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function ipe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(h_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function rpe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(h_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(J=Oh.prototype).setTimeout=function(t){this.P=t},J.nb=function(t){t=t.target;const e=this.M;e&&3==Ui(t)?e.l():this.Pa(t)},J.Pa=function(t){try{if(t==this.g)e:{const l=Ui(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||IS||this.g&&(this.h.h||this.g.ja()||QH(this.g)))){this.J||4!=l||7==e||xh(),b_(this);var n=this.g.da();this.ca=n;t:if(AH(this)){var r=QH(this.g);t="";var i=r.length,s=4==Ui(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ra(this),Ph(this);var o="";break t}this.h.i=new we.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function Jfe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bh(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ir(12),Ra(this),Ph(this);break e}Mc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qS(this,n)}this.S?(MH(this,l,o),IS&&this.i&&3==l&&(_H(this.U,this.V,"tick",this.mb),this.V.start())):(Mc(this.j,this.m,o,null),qS(this,o)),4==l&&Ra(this),this.i&&!this.J&&(4==l?rG(this.l,this):(this.i=!1,kh(this)))}else(function Ipe(t){const e={};t=(t.g&&2<=Ui(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(bh(t[r]))continue;var n=qfe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function Bfe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ir(12)):(this.o=0,ir(13)),Ra(this),Ph(this)}}}catch{}},J.mb=function(){if(this.g){var t=Ui(this.g),e=this.g.ja();this.C<e.length&&(b_(this),MH(this,t,e),this.i&&4!=t&&kh(this))}},J.cancel=function(){this.J=!0,Ra(this)},J.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function Zfe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(xh(),ir(17)),Ra(this),this.o=2,Ph(this)):xH(this,this.Y-t)};var RH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Oa){this.h=t.h,D_(this,t.j),this.s=t.s,this.g=t.g,T_(this,t.m),this.l=t.l;var e=t.i,n=new Vh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),OH(this,n),this.o=t.o}else t&&(e=String(t).match(RH))?(this.h=!1,D_(this,e[1]||"",!0),this.s=Fh(e[2]||""),this.g=Fh(e[3]||"",!0),T_(this,e[4]),this.l=Fh(e[5]||"",!0),OH(this,e[6]||"",!0),this.o=Fh(e[7]||"")):(this.h=!1,this.i=new Vh(null,this.h))}function Ts(t){return new Oa(t)}function D_(t,e,n){t.j=n?Fh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function T_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function OH(t,e,n){e instanceof Vh?(t.i=e,function dpe(t,e){e&&!t.j&&(yo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(PH(this,r),LH(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Lh(e,cpe)),t.i=new Vh(e,t.h))}function _t(t,e,n){t.i.set(e,n)}function S_(t){return _t(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ope),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ope(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lh(e,kH,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Lh(e,kH,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Lh(n,"/"==n.charAt(0)?upe:ape,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lh(n,lpe)),t.join("")};var kH=/[#\/\?@]/g,ape=/[#\?:]/g,upe=/[#\?]/g,cpe=/[#\?@]/g,lpe=/#/g;function Vh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function yo(t){t.g||(t.g=new Map,t.h=0,t.i&&function spe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function PH(t,e){yo(t),e=xc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function FH(t,e){return yo(t),e=xc(t,e),t.g.has(e)}function LH(t,e,n){PH(t,e),0<n.length&&(t.i=null,t.g.set(xc(t,e),wS(n)),t.h+=n.length)}function xc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function VH(t){this.l=t||fpe,t=we.PerformanceNavigationTiming?0<(t=we.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(we.g&&we.g.Ka&&we.g.Ka()&&we.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(J=Vh.prototype).add=function(t,e){yo(this),this.i=null,t=xc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},J.forEach=function(t,e){yo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},J.ta=function(){yo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},J.Z=function(t){yo(this);let e=[];if("string"==typeof t)FH(this,t)&&(e=e.concat(this.g.get(xc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},J.set=function(t,e){return yo(this),this.i=null,FH(this,t=xc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},J.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},J.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var fpe=10;function UH(t){return!!t.h||!!t.g&&t.g.size>=t.j}function BH(t){return t.h?1:t.g?t.g.size:0}function KS(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function QS(t,e){t.g?t.g.add(e):t.h=e}function $H(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function jH(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return wS(t.i)}VH.prototype.cancel=function(){if(this.i=jH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ppe=class{stringify(t){return we.JSON.stringify(t,void 0)}parse(t){return we.JSON.parse(t,void 0)}};function gpe(){this.g=new ppe}function mpe(t,e,n){const r=n||"";try{NH(t,function(i,s){let o=i;Ch(i)&&(o=LS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function A_(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Uh(t){this.l=t.fc||null,this.j=t.ob||!1}function M_(t,e){_n.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=YS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mn(Uh,$S),Uh.prototype.g=function(){return new M_(this.l,this.j)},Uh.prototype.i=function(t){return function(){return t}}({}),mn(M_,_n);var YS=0;function HH(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Bh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$h(t)}function $h(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(J=M_.prototype).open=function(t,e){if(this.readyState!=YS)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$h(this)},J.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||we).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},J.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bh(this)),this.readyState=YS},J.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$h(this)),this.g&&(this.readyState=3,$h(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof we.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;HH(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},J.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Bh(this):$h(this),3==this.readyState&&HH(this)}},J.Za=function(t){this.g&&(this.response=this.responseText=t,Bh(this))},J.Ya=function(t){this.g&&(this.response=t,Bh(this))},J.ka=function(){this.g&&Bh(this)},J.setRequestHeader=function(t,e){this.v.append(t,e)},J.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},J.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(M_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ype=we.JSON.parse;function Vt(t){_n.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=GH,this.L=this.M=!1}mn(Vt,_n);var GH="",vpe=/^https?$/i,wpe=["POST","PUT"];function zH(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,WH(t),x_(t)}function WH(t){t.F||(t.F=!0,Nn(t,"complete"),Nn(t,"error"))}function qH(t){if(t.h&&typeof yS<"u"&&(!t.C[1]||4!=Ui(t)||2!=t.da()))if(t.v&&4==Ui(t))BS(t.La,0,t);else if(Nn(t,"readystatechange"),4==Ui(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(RH)[1]||null;!i&&we.self&&we.self.location&&(i=we.self.location.protocol.slice(0,-1)),r=!vpe.test(i?i.toLowerCase():"")}n=r}if(n)Nn(t,"complete"),Nn(t,"success");else{t.m=6;try{var s=2<Ui(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",WH(t)}}finally{x_(t)}}}function x_(t,e){if(t.g){KH(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Nn(t,"ready");try{n.onreadystatechange=r}catch{}}}function KH(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(we.clearTimeout(t.A),t.A=null)}function Ui(t){return t.g?t.g.readyState:0}function QH(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case GH:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function YH(t){let e="";return AS(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function XS(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=YH(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):_t(t,e,n))}function jh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function XH(t){this.Ga=0,this.j=[],this.l=new v_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jh("baseRetryDelayMs",5e3,t),this.hb=jh("retryDelaySeedMs",1e4,t),this.eb=jh("forwardChannelMaxRetries",2,t),this.xa=jh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new VH(t&&t.concurrentRequestLimit),this.Ja=new gpe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function JS(t){if(JH(t),3==t.H){var e=t.W++,n=Ts(t.I);if(_t(n,"SID",t.K),_t(n,"RID",e),_t(n,"TYPE","terminate"),Hh(t,n),(e=new Oh(t,t.l,e)).L=2,e.v=S_(Ts(n)),n=!1,we.navigator&&we.navigator.sendBeacon)try{n=we.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&we.Image&&((new Image).src=e.v,n=!0),n||(e.g=aG(e.l,null),e.g.ha(e.v)),e.G=Date.now(),kh(e)}sG(t)}function N_(t){t.g&&(eA(t),t.g.cancel(),t.g=null)}function JH(t){N_(t),t.u&&(we.clearTimeout(t.u),t.u=null),O_(t),t.i.cancel(),t.m&&("number"==typeof t.m&&we.clearTimeout(t.m),t.m=null)}function R_(t){if(!UH(t.i)&&!t.m){t.m=!0;var e=t.Na;Sh||pH(),Ah||(Sh(),Ah=!0),VS.add(e,t),t.C=0}}function ZH(t,e){var n;n=e?e.m:t.W++;const r=Ts(t.I);_t(r,"SID",t.K),_t(r,"RID",n),_t(r,"AID",t.V),Hh(t,r),t.o&&t.s&&XS(r,t.o,t.s),n=new Oh(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=eG(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),QS(t.i,n),WS(n,r,e)}function Hh(t,e){t.na&&AS(t.na,function(n,r){_t(e,r,n)}),t.h&&NH({},function(n,r){_t(e,r,n)})}function eG(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Gn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{mpe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function tG(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sh||pH(),Ah||(Sh(),Ah=!0),VS.add(e,t),t.A=0}}function ZS(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Nh(Gn(t.Ma,t),iG(t,t.A)),t.A++,0))}function eA(t){null!=t.B&&(we.clearTimeout(t.B),t.B=null)}function nG(t){t.g=new Oh(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ts(t.wa);_t(e,"RID","rpc"),_t(e,"SID",t.K),_t(e,"AID",t.V),_t(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&_t(e,"TO",t.qa),_t(e,"TYPE","xmlhttp"),Hh(t,e),t.o&&t.s&&XS(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=S_(Ts(e)),n.s=null,n.S=!0,SH(n,t)}function O_(t){null!=t.v&&(we.clearTimeout(t.v),t.v=null)}function rG(t,e){var n=null;if(t.g==e){O_(t),eA(t),t.g=null;var r=2}else{if(!KS(t.i,e))return;n=e.F,$H(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Nn(r=w_(),new IH(r,n)),R_(t)}else tG(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Cpe(t,e){return!(BH(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Nh(Gn(t.Na,t,e),iG(t,t.C)),t.C++,0)))}(t,e)||2==r&&ZS(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ka(t,5);break;case 4:ka(t,10);break;case 3:ka(t,6);break;default:ka(t,2)}}function iG(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ka(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Gn(t.pb,t);n||(n=new Oa("//www.google.com/images/cleardot.gif"),we.location&&"http"==we.location.protocol||D_(n,"https"),S_(n)),function _pe(t,e){const n=new v_;if(we.Image){const r=new Image;r.onload=f_(A_,n,r,"TestLoadImage: loaded",!0,e),r.onerror=f_(A_,n,r,"TestLoadImage: error",!1,e),r.onabort=f_(A_,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=f_(A_,n,r,"TestLoadImage: timeout",!1,e),we.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ir(2);t.H=0,t.h&&t.h.za(e),sG(t),JH(t)}function sG(t){if(t.H=0,t.ma=[],t.h){const e=jH(t.i);(0!=e.length||0!=t.j.length)&&(eH(t.ma,e),eH(t.ma,t.j),t.i.i.length=0,wS(t.j),t.j.length=0),t.h.ya()}}function oG(t,e,n){var r=n instanceof Oa?Ts(n):new Oa(n);if(""!=r.g)e&&(r.g=e+"."+r.g),T_(r,r.m);else{var i=we.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Oa(null);r&&D_(s,r),e&&(s.g=e),i&&T_(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&_t(r,n,e),_t(r,"VER",t.ra),Hh(t,r),r}function aG(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vt(n&&t.Ha&&!t.va?new Uh({ob:!0}):t.va)).Oa(t.J),e}function uG(){}function k_(){if(Ac&&!(10<=Number(Ffe)))throw Error("Environmental error: no available transport.")}function xr(t,e){_n.call(this),this.g=new XH(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!bh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bh(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Nc(this)}function cG(t){jS.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function lG(){HS.call(this),this.status=1}function Nc(t){this.g=t}function ui(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function tA(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Ze(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(J=Vt.prototype).Oa=function(t){this.M=t},J.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():GS.g(),this.C=function bH(t){return t.h||(t.h=t.i())}(this.u?this.u:GS),this.g.onreadystatechange=Gn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void zH(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=we.FormData&&t instanceof we.FormData,!(0<=Zj(wpe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{KH(this),0<this.B&&((this.L=function Epe(t){return Ac&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.ua,this)):this.A=BS(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){zH(this,s)}},J.ua=function(){typeof yS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nn(this,"timeout"),this.abort(8))},J.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nn(this,"complete"),Nn(this,"abort"),x_(this))},J.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),x_(this,!0)),Vt.$.N.call(this)},J.La=function(){this.s||(this.G||this.v||this.l?qH(this):this.kb())},J.kb=function(){qH(this)},J.isActive=function(){return!!this.g},J.da=function(){try{return 2<Ui(this)?this.g.status:-1}catch{return-1}},J.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},J.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ype(e)}},J.Ia=function(){return this.m},J.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(J=XH.prototype).ra=8,J.H=1,J.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Oh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=sH(s),aH(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=eG(this,i,e),_t(n=Ts(this.I),"RID",t),_t(n,"CVER",22),this.F&&_t(n,"X-HTTP-Session-Id",this.F),Hh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(YH(s)))+"&"+e:this.o&&XS(n,this.o,s)),QS(this.i,i),this.bb&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",e),_t(n,"SID","null"),i.aa=!0,WS(i,n,null)):WS(i,n,e),this.H=2}}else 3==this.H&&(t?ZH(this,t):0==this.j.length||UH(this.i)||ZH(this))},J.Ma=function(){if(this.u=null,nG(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Nh(Gn(this.jb,this),t)}},J.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ir(10),N_(this),nG(this))},J.ib=function(){null!=this.v&&(this.v=null,N_(this),ZS(this),ir(19))},J.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ir(2)):(this.l.info("Failed to ping google.com"),ir(1))},J.isActive=function(){return!!this.h&&this.h.isActive(this)},(J=uG.prototype).Ba=function(){},J.Aa=function(){},J.za=function(){},J.ya=function(){},J.isActive=function(){return!0},J.Va=function(){},k_.prototype.g=function(t,e){return new xr(t,e)},mn(xr,_n),xr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ir(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=oG(t,null,t.Y),R_(t)},xr.prototype.close=function(){JS(this.g)},xr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=LS(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&R_(e)},xr.prototype.N=function(){this.g.h=null,delete this.j,JS(this.g),delete this.g,xr.$.N.call(this)},mn(cG,jS),mn(lG,HS),mn(Nc,uG),Nc.prototype.Ba=function(){Nn(this.g,"a")},Nc.prototype.Aa=function(t){Nn(this.g,new cG(t))},Nc.prototype.za=function(t){Nn(this.g,new lG)},Nc.prototype.ya=function(){Nn(this.g,"b")},mn(ui,function bpe(){this.blockSize=-1}),ui.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ui.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)tA(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){tA(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){tA(this,r),i=0;break}}this.h=i,this.i+=e},ui.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Dpe={};function nA(t){return-128<=t&&128>t?function Ofe(t,e){var n=Dpe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Ze([0|e],0>e?-1:0)}):new Ze([0|t],0>t?-1:0)}function Bi(t){if(isNaN(t)||!isFinite(t))return Rc;if(0>t)return Rn(Bi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=rA;return new Ze(e,0)}var rA=4294967296,Rc=nA(0),iA=nA(1),hG=nA(16777216);function Ss(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function qr(t){return-1==t.h}function Rn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ze(n,~t.h).add(iA)}function P_(t,e){return t.add(Rn(e))}function F_(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Gh(t,e){this.g=t,this.h=e}function L_(t,e){if(Ss(e))throw Error("division by zero");if(Ss(t))return new Gh(Rc,Rc);if(qr(t))return e=L_(Rn(t),e),new Gh(Rn(e.g),Rn(e.h));if(qr(e))return e=L_(t,Rn(e)),new Gh(Rn(e.g),e.h);if(30<t.g.length){if(qr(t)||qr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=iA,r=e;0>=r.X(t);)n=fG(n),r=fG(r);var i=Oc(n,1),s=Oc(r,1);for(r=Oc(r,2),n=Oc(n,2);!Ss(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Oc(r,1),n=Oc(n,1)}return e=P_(t,i.R(e)),new Gh(i,e)}for(i=Rc;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Bi(n)).R(e);qr(o)||0<o.X(t);)o=(s=Bi(n-=r)).R(e);Ss(s)&&(s=iA),i=i.add(s),t=P_(t,o)}return new Gh(i,t)}function fG(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ze(n,t.h)}function Oc(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ze(i,t.h)}(J=Ze.prototype).ea=function(){if(qr(this))return-Rn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:rA+r)*e,e*=rA}return t},J.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ss(this))return"0";if(qr(this))return"-"+Rn(this).toString(t);for(var e=Bi(Math.pow(t,6)),n=this,r="";;){var i=L_(n,e).g,s=((0<(n=P_(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ss(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},J.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},J.X=function(t){return qr(t=P_(this,t))?-1:Ss(t)?0:1},J.abs=function(){return qr(this)?Rn(this):this},J.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Ze(n,-2147483648&n[n.length-1]?-1:0)},J.R=function(t){if(Ss(this)||Ss(t))return Rc;if(qr(this))return qr(t)?Rn(this).R(Rn(t)):Rn(Rn(this).R(t));if(qr(t))return Rn(this.R(Rn(t)));if(0>this.X(hG)&&0>t.X(hG))return Bi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,F_(n,2*r+2*i),n[2*r+2*i+1]+=s*u,F_(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,F_(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,F_(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ze(n,0)},J.gb=function(t){return L_(this,t).h},J.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ze(n,this.h&t.h)},J.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ze(n,this.h|t.h)},J.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ze(n,this.h^t.h)},k_.prototype.createWebChannel=k_.prototype.g,xr.prototype.send=xr.prototype.u,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,E_.NO_ERROR=0,E_.TIMEOUT=8,E_.HTTP_ERROR=6,CH.COMPLETE="complete",DH.EventType=Rh,Rh.OPEN="a",Rh.CLOSE="b",Rh.ERROR="c",Rh.MESSAGE="d",_n.prototype.listen=_n.prototype.O,Vt.prototype.listenOnce=Vt.prototype.P,Vt.prototype.getLastError=Vt.prototype.Sa,Vt.prototype.getLastErrorCode=Vt.prototype.Ia,Vt.prototype.getStatus=Vt.prototype.da,Vt.prototype.getResponseJson=Vt.prototype.Wa,Vt.prototype.getResponseText=Vt.prototype.ja,Vt.prototype.send=Vt.prototype.ha,Vt.prototype.setWithCredentials=Vt.prototype.Oa,ui.prototype.digest=ui.prototype.l,ui.prototype.reset=ui.prototype.reset,ui.prototype.update=ui.prototype.j,Ze.prototype.add=Ze.prototype.add,Ze.prototype.multiply=Ze.prototype.R,Ze.prototype.modulo=Ze.prototype.gb,Ze.prototype.compare=Ze.prototype.X,Ze.prototype.toNumber=Ze.prototype.ea,Ze.prototype.toString=Ze.prototype.toString,Ze.prototype.getBits=Ze.prototype.D,Ze.fromNumber=Bi,Ze.fromString=function dG(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Rn(dG(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Bi(Math.pow(e,8)),r=Rc,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Bi(Math.pow(e,s)),r=r.R(s).add(Bi(o))):r=(r=r.R(n)).add(Bi(o))}return r};var Tpe=ai.createWebChannelTransport=function(){return new k_},Spe=ai.getStatEventTarget=function(){return w_()},sA=ai.ErrorCode=E_,Ape=ai.EventType=CH,Mpe=ai.Event=Na,pG=ai.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xpe=ai.FetchXmlHttpFactory=Uh,V_=ai.WebChannel=DH,Npe=ai.XhrIo=Vt,Rpe=ai.Md5=ui,kc=ai.Integer=Ze;const gG="@firebase/firestore";class yn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let Pc="9.23.0";const vo=new va("@firebase/firestore");function oA(){return vo.logLevel}function z(t,...e){if(vo.logLevel<=Fe.DEBUG){const n=e.map(aA);vo.debug(`Firestore (${Pc}): ${t}`,...n)}}function Wt(t,...e){if(vo.logLevel<=Fe.ERROR){const n=e.map(aA);vo.error(`Firestore (${Pc}): ${t}`,...n)}}function ci(t,...e){if(vo.logLevel<=Fe.WARN){const n=e.map(aA);vo.warn(`Firestore (${Pc}): ${t}`,...n)}}function aA(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ne(t="Unexpected state"){const e=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: `+t;throw Wt(e),new Error(e)}function oe(t,e){t||ne()}function X(t,e){return t}const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class an{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class mG{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ope{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yn.UNAUTHENTICATED))}shutdown(){}}class kpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ppe{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new an;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new an,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(w(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new an)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe("string"==typeof r.accessToken),new mG(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return oe(null===e||"string"==typeof e),new yn(e)}}class Fpe{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Lpe{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Fpe(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _G{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vpe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe("string"==typeof n.token),this.T=n.token,new _G(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Upe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class yG{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Upe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Fc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Rt(0,0))}static max(){return new ae(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zh{constructor(e,n,r){void 0===n?n=0:n>e.length&&ne(),void 0===r?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===zh.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends zh{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const Bpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends zh{construct(e,n,r){return new qt(e,n,r)}static isValidIdentifier(e){return Bpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new H(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new H(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new H(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Le.fromString(e))}static fromName(e){return new Q(Le.fromString(e).popFirst(5))}static empty(){return new Q(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Le.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Le(e.slice()))}}function EG(t){return new Nr(t.readTime,t.key,-1)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(ae.min(),Q.empty(),-1)}static max(){return new Nr(ae.max(),Q.empty(),-1)}}function cA(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Q.comparator(t.documentKey,e.documentKey),0!==n?n:_e(t.largestBatchId,e.largestBatchId))}const IG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hpe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wo(t){return lA.apply(this,arguments)}function lA(){return lA=w(function*(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==IG)throw t;z("LocalStore","Unexpectedly lost primary lease")}),lA.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Eo(t){return"IndexedDbTransactionError"===t.name}let Rr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function Kh(t){return null==t}function Qh(t){return 0===t&&1/t==-1/0}function NG(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Io(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ft{constructor(e,n){this.comparator=e,this.root=n||On.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new H_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new H_(this.root,e,this.comparator,!1)}getReverseIterator(){return new H_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new H_(this.root,e,this.comparator,!0)}}class H_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??On.RED,this.left=i??On.EMPTY,this.right=s??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new On(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return On.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1,On.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(t,e,n,r,i){return this}insert(t,e,n){return new On(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new OG(this.data.getIterator())}getIteratorFrom(e){return new OG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class OG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yr{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new yr([])}unionWith(e){let n=new yt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class kG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kG("Invalid base64 string: "+i):i}}(e);return new un(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const hge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(t){if(oe(!!t),"string"==typeof t){let e=0;const n=hge.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function As(t){return"string"==typeof t?un.fromBase64String(t):un.fromUint8Array(t)}function G_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function z_(t){const e=t.mapValue.fields.__previous_value__;return G_(e)?z_(e):e}function Yh(t){const e=Co(t.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}class fge{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class La{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new La("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}const bo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Do(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G_(t)?4:VG(t)?9007199254740991:10:ne()}function ji(t,e){if(t===e)return!0;const n=Do(t);if(n!==Do(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yh(t).isEqual(Yh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Co(r.timestampValue),o=Co(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,As(t.bytesValue).isEqual(As(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ut(r.geoPointValue.latitude)===Ut(i.geoPointValue.latitude)&&Ut(r.geoPointValue.longitude)===Ut(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ut(r.integerValue)===Ut(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Ut(r.doubleValue),o=Ut(i.doubleValue);return s===o?Qh(s)===Qh(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Fc(t.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(NG(s)!==NG(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!ji(s[a],o[a])))return!1;return!0}(t,e);default:return ne()}var i}function Xh(t,e){return void 0!==(t.values||[]).find(n=>ji(n,e))}function To(t,e){if(t===e)return 0;const n=Do(t),r=Do(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Ut(i.integerValue||i.doubleValue),a=Ut(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return PG(t.timestampValue,e.timestampValue);case 4:return PG(Yh(t),Yh(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,s){const o=As(i),a=As(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=_e(o[u],a[u]);if(0!==c)return c}return _e(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=_e(Ut(i.latitude),Ut(s.latitude));return 0!==o?o:_e(Ut(i.longitude),Ut(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=To(o[u],a[u]);if(c)return c}return _e(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===bo.mapValue&&s===bo.mapValue)return 0;if(i===bo.mapValue)return 1;if(s===bo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=_e(a[l],c[l]);if(0!==d)return d;const h=To(o[a[l]],u[c[l]]);if(0!==h)return h}return _e(a.length,c.length)}(t.mapValue,e.mapValue);default:throw ne()}}function PG(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _e(t,e);const n=Co(t),r=Co(e),i=_e(n.seconds,r.seconds);return 0!==i?i:_e(n.nanos,r.nanos)}function Vc(t){return fA(t)}function fA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Co(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?As(t.bytesValue).toBase64():"referenceValue"in t?Q.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=fA(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${fA(r.fields[a])}`;return s+"}"}(t.mapValue):ne();var e}function pA(t){return!!t&&"integerValue"in t}function Jh(t){return!!t&&"arrayValue"in t}function FG(t){return!!t&&"nullValue"in t}function LG(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function K_(t){return!!t&&"mapValue"in t}function Zh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Io(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VG(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!K_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zh(n)}setAll(e){let n=qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Zh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());K_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];K_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Io(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new kn(Zh(this.value))}}function $G(t){const e=[];return Io(t.fields,(n,r)=>{const i=new qt([n]);if(K_(r)){const s=$G(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new yr(e)}class vt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,ae.min(),ae.min(),ae.min(),kn.empty(),0)}static newFoundDocument(e,n,r,i){return new vt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new vt(e,2,n,ae.min(),ae.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,ae.min(),ae.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class So{constructor(e,n){this.position=e,this.inclusive=n}}function jG(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Q.comparator(Q.fromName(o.referenceValue),n.key):To(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function HG(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ji(t.position[n],e.position[n]))return!1;return!0}class Uc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mge(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class GG{}class Oe extends GG{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new _ge(e,n,r):"array-contains"===n?new wge(e,r):"in"===n?new YG(e,r):"not-in"===n?new Ege(e,r):"array-contains-any"===n?new Ige(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new yge(e,r):new vge(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(To(n,this.value)):null!==n&&Do(this.value)===Do(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class et extends GG{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new et(e,n)}matches(e){return Bc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Bc(t){return"and"===t.op}function mA(t){return function zG(t){for(const e of t.filters)if(e instanceof et)return!1;return!0}(t)&&Bc(t)}function _A(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Vc(t.value);if(mA(t))return t.filters.map(e=>_A(e)).join(",");{const e=t.filters.map(n=>_A(n)).join(",");return`${t.op}(${e})`}}function WG(t,e){return t instanceof Oe?(n=t,(r=e)instanceof Oe&&n.op===r.op&&n.field.isEqual(r.field)&&ji(n.value,r.value)):t instanceof et?function(n,r){return r instanceof et&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&WG(s,r.filters[o]),!0)}(t,e):void ne();var n,r}function KG(t){return t instanceof Oe?`${(e=t).field.canonicalString()} ${e.op} ${Vc(e.value)}`:t instanceof et?function(e){return e.op.toString()+" {"+e.getFilters().map(KG).join(" ,")+"}"}(t):"Filter";var e}class _ge extends Oe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class yge extends Oe{constructor(e,n){super(e,"in",n),this.keys=QG(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vge extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=QG(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QG(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class wge extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jh(n)&&Xh(n.arrayValue,this.value)}}class YG extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Xh(this.value.arrayValue,n)}}class Ege extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Xh(this.value.arrayValue,n)}}class Ige extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xh(this.value.arrayValue,r))}}class Cge{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function yA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Cge(t,e,n,r,i,s,o)}function Ua(t){const e=X(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_A(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),e.dt=n}return e.dt}function ef(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mge(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HG(t.startAt,e.startAt)&&HG(t.endAt,e.endAt)}function Q_(t){return Q.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ms{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function $c(t){return new Ms(t)}function ez(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ba(t){const e=X(t);if(null===e.wt){e.wt=[];const n=function X_(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function vA(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new Uc(n)),e.wt.push(new Uc(qt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Uc(qt.keyField(),s))}}}return e.wt}function sr(t){const e=X(t);if(!e._t)if("F"===e.limitType)e._t=yA(e.path,e.collectionGroup,Ba(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ba(e))n.push(new Uc(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new So(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new So(e.startAt.position,e.startAt.inclusive):null;e._t=yA(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function J_(t,e,n){return new Ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tf(t,e){return ef(sr(t),sr(e))&&t.limitType===e.limitType}function tz(t){return`${Ua(sr(t))}|lt:${t.limitType}`}function IA(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>KG(r)).join(", ")}]`),Kh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),`Target(${n})`}(sr(t))}; limitType=${t.limitType})`}function nf(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Q.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ba(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=jG(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ba(n),r)||n.endAt&&!function(i,s,o){const a=jG(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ba(n),r)));var n,r}function rz(t){return(e,n)=>{let r=!1;for(const i of Ba(t)){const s=bge(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function bge(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?To(a,u):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return RG(this.inner)}size(){return this.innerSize}}const Dge=new ft(Q.comparator);function vr(){return Dge}const iz=new ft(Q.comparator);function rf(...t){let e=iz;for(const n of t)e=e.insert(n.key,n);return e}function sz(t){let e=iz;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return sf()}function oz(){return sf()}function sf(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tge=new ft(Q.comparator),Sge=new yt(Q.comparator);function Te(...t){let e=Sge;for(const n of t)e=e.add(n);return e}const Age=new yt(_e);function az(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function uz(t){return{integerValue:""+t}}function cz(t,e){return function bG(t){return"number"==typeof t&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?uz(e):az(t,e)}class Z_{constructor(){this._=void 0}}function Mge(t,e,n){return t instanceof jc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&G_(i)&&(i=z_(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof $a?dz(t,e):t instanceof ja?hz(t,e):function(r,i){const s=lz(r,i),o=fz(s)+fz(r.gt);return pA(s)&&pA(r.gt)?uz(o):az(r.serializer,o)}(t,e)}function xge(t,e,n){return t instanceof $a?dz(t,e):t instanceof ja?hz(t,e):n}function lz(t,e){return t instanceof Hc?pA(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class jc extends Z_{}class $a extends Z_{constructor(e){super(),this.elements=e}}function dz(t,e){const n=pz(e);for(const r of t.elements)n.some(i=>ji(i,r))||n.push(r);return{arrayValue:{values:n}}}class ja extends Z_{constructor(e){super(),this.elements=e}}function hz(t,e){let n=pz(e);for(const r of t.elements)n=n.filter(i=>!ji(i,r));return{arrayValue:{values:n}}}class Hc extends Z_{constructor(e,n){super(),this.serializer=e,this.gt=n}}function fz(t){return Ut(t.integerValue||t.doubleValue)}function pz(t){return Jh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Rge{constructor(e,n){this.version=e,this.transformResults=n}}class bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ey(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ty{}function gz(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new zc(t.key,bt.none()):new Gc(t.key,t.data,bt.none());{const n=t.data,r=kn.empty();let i=new yt(qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ns(t.key,r,new yr(i.toArray()),bt.none())}}function Oge(t,e,n){t instanceof Gc?function(r,i,s){const o=r.value.clone(),a=yz(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(r,i,s){if(!ey(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=yz(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(_z(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function uf(t,e,n,r){return t instanceof Gc?function(i,s,o,a){if(!ey(i.precondition,s))return o;const u=i.value.clone(),c=vz(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ns?function(i,s,o,a){if(!ey(i.precondition,s))return o;const u=vz(i.fieldTransforms,a,s),c=s.data;return c.setAll(_z(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,ey(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function kge(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=lz(r.transform,i||null);null!=s&&(null===n&&(n=kn.empty()),n.set(r.field,s))}return n||null}function mz(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Fc(n,r,(i,s)=>function Nge(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof $a&&r instanceof $a||n instanceof ja&&r instanceof ja?Fc(n.elements,r.elements,ji):n instanceof Hc&&r instanceof Hc?ji(n.gt,r.gt):n instanceof jc&&r instanceof jc);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Gc extends ty{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ns extends ty{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _z(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yz(t,e,n){const r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xge(o,a,n[i]))}return r}function vz(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Mge(s,o,e))}return r}class zc extends ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bA extends ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class DA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Oge(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oz();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=gz(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Fc(this.mutations,e.mutations,(n,r)=>mz(n,r))&&Fc(this.baseMutations,e.baseMutations,(n,r)=>mz(n,r))}}class TA{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=Tge;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new TA(e,n,r,i)}}class SA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fge{constructor(e,n){this.count=e,this.unchangedNames=n}}var Zt,Ve;function Ez(t){if(void 0===t)return Wt("GRPC error has no .code"),k.UNKNOWN;switch(t){case Zt.OK:return k.OK;case Zt.CANCELLED:return k.CANCELLED;case Zt.UNKNOWN:return k.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return k.INTERNAL;case Zt.UNAVAILABLE:return k.UNAVAILABLE;case Zt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Zt.NOT_FOUND:return k.NOT_FOUND;case Zt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Zt.ABORTED:return k.ABORTED;case Zt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Zt.DATA_LOSS:return k.DATA_LOSS;default:return ne()}}(Ve=Zt||(Zt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";class AA{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ny}static getOrCreateInstance(){return null===ny&&(ny=new AA),ny}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let ny=null;const Lge=new kc([4294967295,4294967295],0);function Cz(t){const e=function Iz(){return new TextEncoder}().encode(t),n=new Rpe;return n.update(e),new Uint8Array(n.digest())}function bz(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new kc([n,r],0),new kc([i,s],0)]}class MA{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cf(`Invalid padding: ${n}`);if(r<0)throw new cf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new cf(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new cf(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=kc.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(kc.fromNumber(r)));return 1===i.compare(Lge)&&(i=new kc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=Cz(e),[r,i]=bz(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new MA(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const n=Cz(e),[r,i]=bz(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class cf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,df.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lf(ae.min(),i,new ft(_e),vr(),Te())}}class df{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new df(r,n,Te(),Te(),Te())}}class ry{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class Dz{constructor(e,n){this.targetId=e,this.Vt=n}}class Tz{constructor(e,n,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Sz{constructor(){this.St=0,this.Dt=Mz(),this.Ct=un.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Te(),n=Te(),r=Te();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new df(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=Mz()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Vge{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=vr(),this.zt=Az(),this.Wt=new ft(_e)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Q_(o))if(0===i){const a=new Q(o.path);this.Yt(r,a,vt.newNoDocument(a,ae.min()))}else oe(1===i);else{const a=this.ie(r);if(a!==i){const u=this.re(e,a);0!==u&&(this.ee(r),this.Wt=this.Wt.insert(r,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=AA.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(c,l,d){var h,g,y,E,D,R;const S={localCacheCount:l,existenceFilterCount:d.count},G=d.unchangedNames;return G&&(S.bloomFilter={applied:0===c,hashCount:null!==(h=G?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(E=null===(y=null===(g=G?.bits)||void 0===g?void 0:g.bitmap)||void 0===y?void 0:y.length)&&void 0!==E?E:0,padding:null!==(R=null===(D=G?.bits)||void 0===D?void 0:D.padding)&&void 0!==R?R:0}),S}(u,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,c;try{u=As(s).toUint8Array()}catch(l){if(l instanceof kG)return ci("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{c=new MA(u,o,a)}catch(l){return ci(l instanceof cf?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===c.It?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Q_(a.target)){const u=new Q(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,vt.newNoDocument(u,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=Te();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.se(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new lf(e,n,this.Wt,this.jt,r);return this.jt=vr(),this.zt=Az(),this.Wt=new ft(_e),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Sz,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new yt(_e),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||z("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Sz),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Az(){return new ft(Q.comparator)}function Mz(){return new ft(Q.comparator)}const Uge={asc:"ASCENDING",desc:"DESCENDING"},Bge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$ge={and:"AND",or:"OR"};class jge{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xA(t,e){return t.useProto3Json||Kh(e)?e:{value:e}}function Wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hge(t,e){return Wc(t,e.toTimestamp())}function Kt(t){return oe(!!t),ae.fromTimestamp(function(e){const n=Co(e);return new Rt(n.seconds,n.nanos)}(t))}function NA(t,e){return(n=t,new Le(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Nz(t){const e=Le.fromString(t);return oe(Bz(e)),e}function hf(t,e){return NA(t.databaseId,e.path)}function Gi(t,e){const n=Nz(e);if(n.get(1)!==t.databaseId.projectId)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(Oz(n))}function RA(t,e){return NA(t.databaseId,e)}function ff(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Oz(t){return oe(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function kz(t,e,n){return{name:hf(t,e),fields:n.value.mapValue.fields}}function Fz(t,e){return{documents:[RA(t,e.path)]}}function kA(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=RA(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=RA(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return Uz(et.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:Ao((l=c).field),direction:Kge(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=xA(t,e.limit);var a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function Lz(t){let e=function Rz(t){const e=Nz(t);return 4===e.length?Le.emptyPath():Oz(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=Vz(l);return d instanceof et&&mA(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new Uc(qc((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,Kh(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new So((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new So(l.values||[],!l.before)}(n.endAt)),function ZG(t,e,n,r,i,s,o,a){return new Ms(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function Vz(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=qc(e.unaryFilter.field);return Oe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=qc(e.unaryFilter.field);return Oe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qc(e.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qc(e.unaryFilter.field);return Oe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):void 0!==t.fieldFilter?Oe.create(qc((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return et.create(e.compositeFilter.filters.map(n=>Vz(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ne()}}(e.compositeFilter.op))}(t):ne();var e}function Kge(t){return Uge[t]}function Qge(t){return Bge[t]}function Yge(t){return $ge[t]}function Ao(t){return{fieldPath:t.canonicalString()}}function qc(t){return qt.fromServerFormat(t.fieldPath)}function Uz(t){return t instanceof Oe?function(e){if("=="===e.op){if(LG(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NAN"}};if(FG(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(LG(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NOT_NAN"}};if(FG(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(e.field),op:Qge(e.op),value:e.value}}}(t):t instanceof et?function(e){const n=e.getFilters().map(r=>Uz(r));return 1===n.length?n[0]:{compositeFilter:{op:Yge(e.op),filters:n}}}(t):ne()}function Xge(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bz(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Rs{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=un.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $z{constructor(e){this.fe=e}}function PA(t){const e=Lz({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?J_(e,e.limit,"L"):e}class Wa{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Ut(e.integerValue));else if("doubleValue"in e){const r=Ut(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Qh(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(As(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?VG(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):ne()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),Q.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Wa.Ve=new Wa;class ome{constructor(){this.rn=new $A}addToCollectionParentIndex(e,n){return this.rn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Nr.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class $A{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yt(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(Le.comparator)).toArray()}}new Uint8Array(0);class qn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(41943040,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class Ka{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ka(0)}static Mn(){return new Ka(-1)}}class hme{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gme{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class f4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&uf(r.mutation,i,yr.empty(),Rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const i=Hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=rf();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=vr();const o=sf(),a=sf();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ns)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),uf(l.mutation,c,l.mutation.getFieldMask(),Rt.now())):o.set(c.key,yr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new gme(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sf();let i=new ft((o,a)=>o-a),s=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||yr.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||Te()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=oz();l.forEach(h=>{if(!s.has(h)){const g=gz(n.get(h),r.get(h));null!==g&&d.set(h,g),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return Q.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function wA(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(Hi());let a=-1,u=s;return o.next(c=>N.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?N.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Te())).next(l=>({batchId:a,changes:sz(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=rf();return this.indexManager.getCollectionParents(e,i).next(o=>N.forEach(o,a=>{const u=(c=n,l=a.child(i),new Ms(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,vt.newInvalidDocument(c)))});let o=rf();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&uf(c.mutation,u,yr.empty(),Rt.now()),nf(n,u)&&(o=o.insert(a,u))}),o})}}class mme{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return N.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Kt(r.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:PA(r.bundledQuery),readTime:Kt(r.readTime)}),N.resolve();var r}}class _me{constructor(){this.overlays=new ft(Q.comparator),this.ls=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=Hi(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ft((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=Hi(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=Hi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return N.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SA(n,r));let s=this.ls.get(n);void 0===s&&(s=Te(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class jA{constructor(){this.fs=new yt(wn.ds),this.ws=new yt(wn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new wn(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new wn(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new Q(new Le([])),r=new wn(n,e),i=new wn(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new Q(new Le([])),r=new wn(n,e),i=new wn(n,e+1);let s=Te();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new wn(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class wn{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return Q.comparator(e.key,n.key)||_e(e.As,n.As)}static _s(e,n){return _e(e.As,n.As)||Q.comparator(e.key,n.key)}}class yme{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new yt(wn.ds)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new DA(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new wn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wn(n,0),i=new wn(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(_e);return n.forEach(i=>{const s=new wn(i,0),o=new wn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),N.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new wn(new Q(s),0);let a=new yt(_e);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),N.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){oe(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return N.forEach(n.mutations,i=>{const s=new wn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new wn(n,0),i=this.Rs.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class vme{constructor(e){this.Ds=e,this.docs=new ft(Q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=vr();const o=n.path,a=new Q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cA(EG(l),r)<=0||(i.has(l.key)||nf(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Cs(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wme(this)}getSize(e){return N.resolve(this.size)}}class wme extends hme{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class Eme{constructor(e){this.persistence=e,this.xs=new xs(n=>Ua(n),ef),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Ns=0,this.ks=new jA,this.targetCount=0,this.Ms=Ka.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),N.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Ka(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Fn(n),N.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.ks.containsKey(n))}}class HA{constructor(e,n){this.$s={},this.overlays={},this.Os=new Rr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Eme(this),this.indexManager=new ome,this.remoteDocumentCache=new vme(r=>this.referenceDelegate.Ls(r)),this.serializer=new $z(n),this.qs=new mme(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _me,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new yme(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const i=new Ime(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return N.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class Ime extends Hpe{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Qs=new jA,this.js=null}static zs(e){return new hy(e)}get Ws(){if(this.js)return this.js;throw ne()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),N.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ws,r=>{const i=Q.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return N.or([()=>N.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class qA{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=Te(),i=Te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qA(e,n.fromCache,r,i)}}class g4{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(ez(n))return N.resolve(null);let r=sr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=J_(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Te(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,J_(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return ez(n)||i.isEqual(ae.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(oA()<=Fe.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),IA(n)),this.Wi(e,o,n,function wG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(1e9===r?new Rt(n+1,0):new Rt(n,r));return new Nr(i,Q.empty(),e)}(i,-1)))})}ji(e,n){let r=new yt(rz(e));return n.forEach((i,s)=>{nf(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return oA()<=Fe.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",IA(n)),this.Ui.getDocumentsMatchingQuery(e,n,Nr.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class bme{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new ft(_e),this.Yi=new xs(s=>Ua(s),ef),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f4(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function _4(t,e){return KA.apply(this,arguments)}function KA(){return KA=w(function*(t,e){const n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Te();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),KA.apply(this,arguments)}function y4(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function Sme(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xc(t,e,n){return QA.apply(this,arguments)}function QA(){return QA=w(function*(t,e,n){const r=X(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Eo(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),QA.apply(this,arguments)}function gy(t,e,n){const r=X(t);let i=ae.min(),s=Te();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=X(a),d=l.Yi.get(c);return void 0!==d?N.resolve(l.Ji.get(d)):l.Bs.getTargetData(u,c)}(r,o,sr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:Te())).next(a=>(function I4(t,e,n){let r=t.Xi.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}(r,function nz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ir:s})))}class e1{constructor(){this.activeTargetIds=function CA(){return Age}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D4{constructor(){this.Hr=new e1,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new e1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xme{Yr(e){}shutdown(){}}class T4{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yy=null;function n1(){return null===yy?yy=268435456+Math.round(2147483648*Math.random()):yy++,"0x"+yy.toString(16)}const Nme={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rme{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Kn="WebChannelConnection";class Ome extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=n1(),a=this.To(e,n);z("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(z("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw ci("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${Nme[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=n1();return new Promise((o,a)=>{const u=new Npe;u.setWithCredentials(!0),u.listenOnce(Ape.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sA.NO_ERROR:const l=u.getResponseJson();z(Kn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case sA.TIMEOUT:z(Kn,`RPC '${e}' ${s} timed out`),a(new H(k.DEADLINE_EXCEEDED,"Request time out"));break;case sA.HTTP_ERROR:const d=u.getStatus();if(z(Kn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const g=h?.error;if(g&&g.status&&g.message){const y=function(E){const D=E.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(D)>=0?D:k.UNKNOWN}(g.status);a(new H(y,g.message))}else a(new H(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(k.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{z(Kn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);z(Kn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=n1(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Tpe(),a=Spe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new xpe({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");z(Kn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,g=!1;const y=new Rme({ro:D=>{g?z(Kn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(h||(z(Kn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),z(Kn,`RPC '${e}' stream ${i} sending:`,D),d.send(D))},oo:()=>d.close()}),E=(D,R,S)=>{D.listen(R,G=>{try{S(G)}catch(ee){setTimeout(()=>{throw ee},0)}})};return E(d,V_.EventType.OPEN,()=>{g||z(Kn,`RPC '${e}' stream ${i} transport opened.`)}),E(d,V_.EventType.CLOSE,()=>{g||(g=!0,z(Kn,`RPC '${e}' stream ${i} transport closed`),y.wo())}),E(d,V_.EventType.ERROR,D=>{g||(g=!0,ci(Kn,`RPC '${e}' stream ${i} transport errored:`,D),y.wo(new H(k.UNAVAILABLE,"The operation could not be completed")))}),E(d,V_.EventType.MESSAGE,D=>{var R;if(!g){const S=D.data[0];oe(!!S);const ee=S.error||(null===(R=S[0])||void 0===R?void 0:R.error);if(ee){z(Kn,`RPC '${e}' stream ${i} received error:`,ee);const ie=ee.status;let ye=function(gi){const zo=Zt[gi];if(void 0!==zo)return Ez(zo)}(ie),Bt=ee.message;void 0===ye&&(ye=k.INTERNAL,Bt="Unknown error status: "+ie+" with message "+ee.message),g=!0,y.wo(new H(ye,Bt)),d.close()}else z(Kn,`RPC '${e}' stream ${i} received:`,S),y._o(S)}}),E(a,Mpe.STAT_EVENT,D=>{D.stat===pG.PROXY?z(Kn,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===pG.NOPROXY&&z(Kn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function vy(){return typeof document<"u"?document:null}function Cf(t){return new jge(t,!0)}class r1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class A4{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new r1(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return w(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return w(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return w(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Wt(n.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===k.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new H(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(w(function*(){e.state=0,e.start()}))}tu(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kme extends A4{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function zge(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:ne(),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(oe(void 0===c||"string"==typeof c),un.fromBase64String(c||"")):(oe(void 0===c||c instanceof Uint8Array),un.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?k.UNKNOWN:Ez(u.code);return new H(c,u.message||"")}(o);n=new Tz(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Gi(t,r.document.name),s=Kt(r.document.updateTime),o=r.document.createTime?Kt(r.document.createTime):ae.min(),a=new kn({mapValue:{fields:r.document.fields}}),u=vt.newFoundDocument(i,s,o,a);n=new ry(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Gi(t,r.document),s=r.readTime?Kt(r.readTime):ae.min(),o=vt.newNoDocument(i,s);n=new ry([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Gi(t,r.document);n=new ry([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ne();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Fge(i,s);n=new Dz(r.targetId,o)}}var u;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?Kt(s.readTime):ae.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=ff(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Q_(a)?{documents:Fz(i,a)}:{query:kA(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=xz(i,s.resumeToken);const u=xA(i,s.expectedCount);null!==u&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(ae.min())>0){o.readTime=Wc(i,s.snapshotVersion.toTimestamp());const u=xA(i,s.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const r=function qge(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=ff(this.serializer),n.removeTarget=e,this.Wo(n)}}class Pme extends A4{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function Wge(t,e){return t&&t.length>0?(oe(void 0!==e),t.map(n=>function(r,i){let s=Kt(r.updateTime?r.updateTime:i);return s.isEqual(ae.min())&&(s=Kt(i)),new Rge(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Kt(e.commitTime);return this.listener.cu(r,n)}return oe(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ff(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function pf(t,e){let n;if(e instanceof Gc)n={update:kz(t,e.key,e.value)};else if(e instanceof zc)n={delete:hf(t,e.key)};else if(e instanceof Ns)n={update:kz(t,e.key,e.data),updateMask:Xge(e.fieldMask)};else{if(!(e instanceof bA))return ne();n={verify:hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof jc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $a)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ja)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hc)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Hge(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ne()),n;var i}(this.serializer,r))};this.Wo(n)}}class Fme extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(k.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(k.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Vme{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Wt(n),this.mu=!1):z("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ume{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(w(function*(){var u;Ro(o)&&(z("RemoteStore","Restarting streams for network reachability change."),yield(u=w(function*(c){const l=X(c);l.vu.add(4),yield Jc(l),l.bu.set("Unknown"),l.vu.delete(4),yield bf(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new Vme(r,i)}}function bf(t){return s1.apply(this,arguments)}function s1(){return s1=w(function*(t){if(Ro(t))for(const e of t.Ru)yield e(!0)}),s1.apply(this,arguments)}function Jc(t){return o1.apply(this,arguments)}function o1(){return o1=w(function*(t){for(const e of t.Ru)yield e(!1)}),o1.apply(this,arguments)}function wy(t,e){const n=X(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),c1(n)?u1(n):el(n).Ko()&&a1(n,e))}function Df(t,e){const n=X(t),r=el(n);n.Au.delete(e),r.Ko()&&M4(n,e),0===n.Au.size&&(r.Ko()?r.jo():Ro(n)&&n.bu.set("Unknown"))}function a1(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(t).su(e)}function M4(t,e){t.Vu.qt(e),el(t).iu(e)}function u1(t){t.Vu=new Vge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),el(t).start(),t.bu.gu()}function c1(t){return Ro(t)&&!el(t).Uo()&&t.Au.size>0}function Ro(t){return 0===X(t).vu.size}function x4(t){t.Vu=void 0}function Bme(t){return l1.apply(this,arguments)}function l1(){return l1=w(function*(t){t.Au.forEach((e,n)=>{a1(t,e)})}),l1.apply(this,arguments)}function $me(t,e){return d1.apply(this,arguments)}function d1(){return d1=w(function*(t,e){x4(t),c1(t)?(t.bu.Iu(e),u1(t)):t.bu.set("Unknown")}),d1.apply(this,arguments)}function jme(t,e,n){return h1.apply(this,arguments)}function h1(){return h1=w(function*(t,e,n){if(t.bu.set("Online"),e instanceof Tz&&2===e.state&&e.cause)try{yield(r=w(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ey(t,r)}else if(e instanceof ry?t.Vu.Ht(e):e instanceof Dz?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ae.min()))try{const r=yield y4(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(u);c&&i.Au.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,u)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(un.EMPTY_BYTE_STRING,c.snapshotVersion)),M4(i,a);const l=new Rs(c.target,a,u,c.sequenceNumber);a1(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Ey(t,r)}var r}),h1.apply(this,arguments)}function Ey(t,e,n){return f1.apply(this,arguments)}function f1(){return f1=w(function*(t,e,n){if(!Eo(e))throw e;t.vu.add(1),yield Jc(t),t.bu.set("Offline"),n||(n=()=>y4(t.localStore)),t.asyncQueue.enqueueRetryable(w(function*(){z("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield bf(t)}))}),f1.apply(this,arguments)}function N4(t,e){return e().catch(n=>Ey(t,n,e))}function Zc(t){return p1.apply(this,arguments)}function p1(){return p1=w(function*(t){const e=X(t),n=Oo(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Hme(e);)try{const i=yield Sme(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,Gme(e,i)}catch(i){yield Ey(e,i)}R4(e)&&O4(e)}),p1.apply(this,arguments)}function Hme(t){return Ro(t)&&t.Eu.length<10}function Gme(t,e){t.Eu.push(e);const n=Oo(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function R4(t){return Ro(t)&&!Oo(t).Uo()&&t.Eu.length>0}function O4(t){Oo(t).start()}function zme(t){return g1.apply(this,arguments)}function g1(){return g1=w(function*(t){Oo(t).hu()}),g1.apply(this,arguments)}function Wme(t){return m1.apply(this,arguments)}function m1(){return m1=w(function*(t){const e=Oo(t);for(const n of t.Eu)e.uu(n.mutations)}),m1.apply(this,arguments)}function qme(t,e,n){return _1.apply(this,arguments)}function _1(){return _1=w(function*(t,e,n){const r=t.Eu.shift(),i=TA.from(r,e,n);yield N4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Zc(t)}),_1.apply(this,arguments)}function Kme(t,e){return y1.apply(this,arguments)}function y1(){return y1=w(function*(t,e){var n;e&&Oo(t).ou&&(yield(n=w(function*(r,i){if(function wz(t){switch(t){default:return ne();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}(s=i.code)&&s!==k.ABORTED){const o=r.Eu.shift();Oo(r).Qo(),yield N4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Zc(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),R4(t)&&O4(t)}),y1.apply(this,arguments)}function k4(t,e){return v1.apply(this,arguments)}function v1(){return v1=w(function*(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Ro(n);n.vu.add(3),yield Jc(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield bf(n)}),v1.apply(this,arguments)}function E1(){return E1=w(function*(t,e){const n=X(t);e?(n.vu.delete(2),yield bf(n)):e||(n.vu.add(2),yield Jc(n),n.bu.set("Unknown"))}),E1.apply(this,arguments)}function el(t){return t.Su||(t.Su=function(e,n,r){const i=X(e);return i.fu(),new kme(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Bme.bind(null,t),ao:$me.bind(null,t),nu:jme.bind(null,t)}),t.Ru.push(function(){var e=w(function*(n){n?(t.Su.Qo(),c1(t)?u1(t):t.bu.set("Unknown")):(yield t.Su.stop(),x4(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function Oo(t){return t.Du||(t.Du=function(e,n,r){const i=X(e);return i.fu(),new Pme(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:zme.bind(null,t),ao:Kme.bind(null,t),au:Wme.bind(null,t),cu:qme.bind(null,t)}),t.Ru.push(function(){var e=w(function*(n){n?(t.Du.Qo(),yield Zc(t)):(yield t.Du.stop(),t.Eu.length>0&&(z("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class I1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new I1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new H(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tl(t,e){if(Wt("AsyncQueue",`${e}: ${t}`),Eo(t))return new H(k.UNAVAILABLE,`${e}: ${t}`);throw t}class nl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=rf(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new nl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class P4{constructor(){this.Cu=new ft(Q.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):ne():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class rl{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new rl(e,n,nl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Qme{constructor(){this.Nu=void 0,this.listeners=[]}}class Yme{constructor(){this.queries=new xs(e=>tz(e),tf),this.onlineState="Unknown",this.ku=new Set}}function b1(){return b1=w(function*(t,e){const n=X(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Qme),i)try{s.Nu=yield n.onListen(r)}catch(o){const a=tl(o,`Initialization of query '${IA(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&S1(n)}),b1.apply(this,arguments)}function T1(){return T1=w(function*(t,e){const n=X(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),T1.apply(this,arguments)}function Xme(t,e){const n=X(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&S1(n)}function Jme(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function S1(t){t.ku.forEach(e=>{e.next()})}class A1{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class V4{constructor(e){this.key=e}}class U4{constructor(e){this.key=e}}class B4{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Te(),this.mutatedKeys=Te(),this.tc=rz(e),this.ec=new nl(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new P4,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),g=nf(this.query,d)?d:null,y=!!h&&this.mutatedKeys.has(h.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let D=!1;h&&g?h.data.isEqual(g.data)?y!==E&&(r.track({type:3,doc:g}),D=!0):this.rc(h,g)||(r.track({type:2,doc:g}),D=!0,(u&&this.tc(g,u)>0||c&&this.tc(g,c)<0)&&(a=!0)):!h&&g?(r.track({type:0,doc:g}),D=!0):h&&!g&&(r.track({type:1,doc:h}),D=!0,(u||c)&&(a=!0)),D&&(g?(o=o.add(g),s=E?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,l)=>function(d,h){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return g(d)-g(h)}(c.type,l.type)||this.tc(c.doc,l.doc)),this.oc(r);const o=n?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==s.length||u?{snapshot:new rl(this.query,e.ec,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new P4,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Te(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new U4(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new V4(r))}),n}hc(e){this.Yu=e.ir,this.Zu=Te();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return rl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class t_e{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class n_e{constructor(e){this.key=e,this.fc=!1}}class r_e{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new xs(a=>tz(a),tf),this._c=new Map,this.mc=new Set,this.gc=new ft(Q.comparator),this.yc=new Map,this.Ic=new jA,this.Tc={},this.Ec=new Map,this.Ac=Ka.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function i_e(t,e){return M1.apply(this,arguments)}function M1(){return M1=w(function*(t,e){const n=function J1(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a_e.bind(null,e),e.dc.nu=Xme.bind(null,e.eventManager),e.dc.Pc=Jme.bind(null,e.eventManager),e}(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function Yc(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}(n.localStore,sr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function x1(t,e,n,r,i){return N1.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&wy(n.remoteStore,o)}return i}),M1.apply(this,arguments)}function N1(){return N1=w(function*(t,e,n,r,i){t.Rc=(d,h,g)=>{return(y=w(function*(E,D,R,S){let G=D.view.sc(R);G.zi&&(G=yield gy(E.localStore,D.query,!1).then(({documents:ye})=>D.view.sc(ye,G)));const ee=S&&S.targetChanges.get(D.targetId),ie=D.view.applyChanges(G,E.isPrimaryClient,ee);return $1(E,D.targetId,ie.cc),ie.snapshot}),function(E,D,R,S){return y.apply(this,arguments)})(t,d,h,g);var y};const s=yield gy(t.localStore,e,!0),o=new B4(e,s.ir),a=o.sc(s.documents),u=df.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);$1(t,n,c.cc);const l=new t_e(e,n,o);return t.wc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}),N1.apply(this,arguments)}function s_e(t,e){return R1.apply(this,arguments)}function R1(){return R1=w(function*(t,e){const n=X(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!tf(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Df(n.remoteStore,r.targetId),il(n,r.targetId)}).catch(wo))):(il(n,r.targetId),yield Xc(n.localStore,r.targetId,!0))}),R1.apply(this,arguments)}function O1(){return O1=w(function*(t,e,n){const r=function Z1(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u_e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c_e.bind(null,e),e}(t);try{const i=yield function(s,o){const a=X(s),u=Rt.now(),c=o.reduce((h,g)=>h.add(g.key),Te());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let g=vr(),y=Te();return a.Zi.getEntries(h,c).next(E=>{g=E,g.forEach((D,R)=>{R.isValidDocument()||(y=y.add(D))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,g)).next(E=>{l=E;const D=[];for(const R of o){const S=kge(R,l.get(R.key).overlayedDocument);null!=S&&D.push(new Ns(R.key,S,$G(S.value.mapValue),bt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,D,o)}).next(E=>{d=E;const D=E.applyToLocalDocumentSet(l,y);return a.documentOverlayCache.saveOverlays(h,E.batchId,D)})}).then(()=>({batchId:d.batchId,changes:sz(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new ft(_e)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Os(r,i.changes),yield Zc(r.remoteStore)}catch(i){const s=tl(i,"Failed to persist write");n.reject(s)}}),O1.apply(this,arguments)}function $4(t,e){return k1.apply(this,arguments)}function k1(){return k1=w(function*(t,e){const n=X(t);try{const r=yield function Tme(t,e){const n=X(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,l.addedDocuments,d)));let g=h.withSequenceNumber(s.currentSequenceNumber);var y,E,D;null!==e.targetMismatches.get(d)?g=g.withResumeToken(un.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):l.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(l.resumeToken,r)),i=i.insert(d,g),E=g,D=l,(0===(y=h).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(s,g))});let u=vr(),c=Te();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function v4(t,e,n){let r=Te(),i=Te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=vr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(l=>{u=l.nr,c=l.sr})),!r.isEqual(ae.min())){const l=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ji=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?oe(o.fc):i.removedDocuments.size>0&&(oe(o.fc),o.fc=!1))}),yield Os(n,r,e)}catch(r){yield wo(r)}}),k1.apply(this,arguments)}function j4(t,e,n){const r=X(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=X(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&S1(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a_e(t,e,n){return P1.apply(this,arguments)}function P1(){return P1=w(function*(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new ft(Q.comparator);o=o.insert(s,vt.newNoDocument(s,ae.min()));const a=Te().add(s),u=new lf(ae.min(),new Map,new ft(_e),o,a);yield $4(r,u),r.gc=r.gc.remove(s),r.yc.delete(e),j1(r)}else yield Xc(r.localStore,e,!1).then(()=>il(r,e,n)).catch(wo)}),P1.apply(this,arguments)}function u_e(t,e){return F1.apply(this,arguments)}function F1(){return F1=w(function*(t,e){const n=X(t),r=e.batch.batchId;try{const i=yield function Dme(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=N.resolve();return d.forEach(g=>{h=h.next(()=>c.getEntry(a,g)).next(y=>{const E=u.docVersions.get(g);oe(null!==E),y.version.compareTo(E)<0&&(l.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),c.addEntry(y)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Te();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);B1(n,r,null),U1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Os(n,i)}catch(i){yield wo(i)}}),F1.apply(this,arguments)}function c_e(t,e,n){return L1.apply(this,arguments)}function L1(){return L1=w(function*(t,e,n){const r=X(t);try{const i=yield function(s,o){const a=X(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(oe(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);B1(r,e,n),U1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Os(r,i)}catch(i){yield wo(i)}}),L1.apply(this,arguments)}function U1(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function B1(t,e,n){const r=X(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function il(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||H4(t,r)})}function H4(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Df(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),j1(t))}function $1(t,e,n){for(const r of n)r instanceof V4?(t.Ic.addReference(r.key,e),d_e(t,r)):r instanceof U4?(z("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||H4(t,r.key)):ne()}function d_e(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(z("SyncEngine","New document in limbo: "+n),t.mc.add(r),j1(t))}function j1(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Q(Le.fromString(e)),r=t.Ac.next();t.yc.set(r,new n_e(n)),t.gc=t.gc.insert(n,r),wy(t.remoteStore,new Rs(sr($c(n.path)),r,"TargetPurposeLimboResolution",Rr.ct))}}function Os(t,e,n){return H1.apply(this,arguments)}function H1(){return H1=w(function*(t,e,n){const r=X(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=qA.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=w(function*(u,c){const l=X(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(c,h=>N.forEach(h.Fi,g=>l.persistence.referenceDelegate.addReference(d,h.targetId,g)).next(()=>N.forEach(h.Bi,g=>l.persistence.referenceDelegate.removeReference(d,h.targetId,g)))))}catch(d){if(!Eo(d))throw d;z("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const g=l.Ji.get(h),E=g.withLastLimboFreeSnapshotVersion(g.snapshotVersion);l.Ji=l.Ji.insert(h,E)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),H1.apply(this,arguments)}function h_e(t,e){return G1.apply(this,arguments)}function G1(){return G1=w(function*(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=yield _4(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new H(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Os(n,r.er)}var i}),G1.apply(this,arguments)}function f_e(t,e){const n=X(t),r=n.yc.get(e);if(r&&r.fc)return Te().add(r.key);{let i=Te();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class Iy{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return w(function*(){n.serializer=Cf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function m4(t,e,n,r){return new bme(t,e,n,r)}(this.persistence,new g4,e.initialUser,this.serializer)}createPersistence(e){return new HA(hy.zs,this.serializer)}createSharedClientState(e){return new D4}terminate(){var e=this;return w(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sl{initialize(e,n){var r=this;return w(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>j4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=h_e.bind(null,r.syncEngine),yield function w1(t,e){return E1.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Yme}createDatastore(e){const n=Cf(e.databaseInfo.databaseId),r=new Ome(e.databaseInfo);return new Fme(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>j4(this.syncEngine,a,0),o=T4.D()?new T4:new xme,new Ume(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new r_e(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=w(function*(n){const r=X(n);z("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Jc(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class Cy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class T_e{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yn.UNAUTHENTICATED,this.clientId=yG.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=w(function*(a){z("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return w(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(w(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=tl(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function by(t,e){return eM.apply(this,arguments)}function eM(){return eM=w(function*(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=w(function*(s){r.isEqual(s)||(yield _4(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),eM.apply(this,arguments)}function tM(t,e){return nM.apply(this,arguments)}function nM(){return nM=w(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function rM(t){return iM.apply(this,arguments)}(t);z("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>k4(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>k4(e.remoteStore,s)),t._onlineComponents=e}),nM.apply(this,arguments)}function iM(){return iM=w(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield by(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function Q4(t){return"FirebaseError"===t.name?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;ci("Error using user provided cache. Falling back to memory cache: "+n),yield by(t,new Iy)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield by(t,new Iy);return t._offlineComponents}),iM.apply(this,arguments)}function Dy(t){return sM.apply(this,arguments)}function sM(){return sM=w(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield tM(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield tM(t,new sl))),t._onlineComponents}),sM.apply(this,arguments)}function aM(){return aM=w(function*(t){const e=yield Dy(t),n=e.eventManager;return n.onListen=i_e.bind(null,e.syncEngine),n.onUnlisten=s_e.bind(null,e.syncEngine),n}),aM.apply(this,arguments)}function e3(t,e,n={}){const r=new an;return t.asyncQueue.enqueueAndForget(w(function*(){return function(i,s,o,a,u){const c=new Cy({next:d=>{s.enqueueAndForget(()=>function D1(t,e){return T1.apply(this,arguments)}(i,l)),d.fromCache&&"server"===a.source?u.reject(new H(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),l=new A1(o,c,{includeMetadataChanges:!0,Ku:!0});return function C1(t,e){return b1.apply(this,arguments)}(i,l)}(yield function ol(t){return aM.apply(this,arguments)}(t),t.asyncQueue,e,n,r)})),r.promise}function t3(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const n3=new Map;function uM(t,e,n){if(!n)throw new H(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function r3(t){if(!Q.isDocumentKey(t))throw new H(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function i3(t){if(Q.isDocumentKey(t))throw new H(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":ne()}function ke(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sy(t);throw new H(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class o3{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new H(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new H(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function P_e(t,e,n,r){if(!0===e&&!0===r)throw new H(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=t3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new H(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o3(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Ope;switch(n.type){case"firstParty":return new Lpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new H(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=n3.get(e);n&&(z("ComponentProvider","Removing Datastore"),n3.delete(e),n.terminate())}(this),Promise.resolve()}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Pn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pn(this.firestore,e,this._query)}}class zi extends Pn{constructor(e,n,r){super(e,n,$c(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Q(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function L_e(t,e,...n){if(t=Pt(t),uM("collection","path",e),t instanceof Tf){const r=Le.fromString(e,...n);return i3(r),new zi(t,null,r)}{if(!(t instanceof Qt||t instanceof zi))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return i3(r),new zi(t.firestore,null,r)}}function a3(t,e,...n){if(t=Pt(t),1===arguments.length&&(e=yG.A()),uM("doc","path",e),t instanceof Tf){const r=Le.fromString(e,...n);return r3(r),new Qt(t,null,new Q(r))}{if(!(t instanceof Qt||t instanceof zi))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return r3(r),new Qt(t.firestore,t instanceof zi?t.converter:null,new Q(r))}}class V_e{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new r1(this,"async_queue_retry"),this.Xc=()=>{const n=vy();n&&z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=vy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=vy();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new an;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return w(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Eo(n))throw n;z("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Wt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=I1.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&ne()}verifyOperationInProgress(){}sa(){var e=this;return w(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class wt extends Tf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new V_e,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||c3(this),this._firestoreClient.terminate()}}function B_e(t,e){const r="string"==typeof t?t:e||"(default)",i=uo("object"==typeof t?t:Zd(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xI("firestore");s&&function F_e(t,e,n,r={}){var i;const s=(t=ke(t,Tf))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=yn.MOCK_USER;else{a=eB(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yn(c)}t._authCredentials=new kpe(new mG(a,u))}}(i,...s)}return i}function en(t){return t._firestoreClient||c3(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function c3(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new fge(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,t3(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new T_e(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ya(un.fromBase64String(e))}catch(n){throw new H(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ya(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class al{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new H(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lM{constructor(e){this._methodName=e}}class dM{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}const j_e=/^__.*__$/;class H_e{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}class h3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function f3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Ay{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return xy(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(f3(this.ca)&&j_e.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class G_e{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cf(e)}ya(e,n,r,i=!1){return new Ay({ca:e,methodName:n,ga:r,path:qt.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ul(t){const e=t._freezeSettings(),n=Cf(t._databaseId);return new G_e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hM(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);pM("Data must be an object, but it was:",o,r);const a=y3(r,o);let u,c;if(s.merge)u=new yr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=Mf(e,d,n);if(!o.contains(h))throw new H(k.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);w3(l,h)||l.push(h)}u=new yr(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new H_e(new kn(a),u,c)}class Af extends lM{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}function Xa(t,e){if(v3(t=Pt(t)))return pM("Unsupported field value:",e,t),y3(t,e);if(t instanceof lM)return function(n,r){if(!f3(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Xa(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Pt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return cz(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Rt.fromDate(n);return{timestampValue:Wc(r.serializer,i)}}if(n instanceof Rt){const i=new Rt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wc(r.serializer,i)}}if(n instanceof dM)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ya)return{bytesValue:xz(r.serializer,n._byteString)};if(n instanceof Qt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:NA(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Sy(n)}`)}(t,e)}function y3(t,e){const n={};return RG(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(t,(r,i)=>{const s=Xa(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function v3(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof dM||t instanceof Ya||t instanceof Qt||t instanceof lM)}function pM(t,e,n){if(!v3(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Sy(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function Mf(t,e,n){if((e=Pt(e))instanceof al)return e._internalPath;if("string"==typeof e)return My(t,e);throw xy("Field path arguments must be of type string or ",t,!1,void 0,n)}const K_e=new RegExp("[~\\*/\\[\\]]");function My(t,e,n){if(e.search(K_e)>=0)throw xy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new al(...e.split("."))._internalPath}catch{throw xy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xy(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(k.INVALID_ARGUMENT,a+t+u)}function w3(t,e){return t.some(n=>n.isEqual(e))}class gM{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Q_e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ny("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Q_e extends gM{data(){return super.data()}}function Ny(t,e){return"string"==typeof e?My(t,e):e instanceof al?e._internalPath:e._delegate._internalPath}class X_e{convertValue(e,n="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Io(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new dM(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=z_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yh(e));default:return null}}convertTimestamp(e){const n=Co(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);oe(Bz(r));const i=new La(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||Wt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ll extends gM{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Py(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ny("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Py extends ll{data(e={}){return super.data(e)}}class dl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ja(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Py(this._firestore,this._userDataWriter,r.key,r,new Ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Py(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ja(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Py(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ja(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:Z_e(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Z_e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}class ko extends X_e{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function eye(t){t=ke(t,Pn);const e=ke(t.firestore,wt),n=en(e),r=new ko(e);return function E3(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new H(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),e3(n,t._query).then(i=>new dl(e,r,t,i))}function tye(t,e,n){t=ke(t,Qt);const r=ke(t.firestore,wt),i=function _M(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e,n);return Nf(r,[hM(ul(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,bt.none())])}function nye(t,e,n,...r){t=ke(t,Qt);const i=ke(t.firestore,wt),s=ul(i);let o;return o="string"==typeof(e=Pt(e))||e instanceof al?function m3(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[Mf(e,r,n)],u=[i];if(s.length%2!=0)throw new H(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Mf(e,s[h])),u.push(s[h+1]);const c=[],l=kn.empty();for(let h=a.length-1;h>=0;--h)if(!w3(c,a[h])){const g=a[h];let y=u[h];y=Pt(y);const E=o.da(g);if(y instanceof Af)c.push(g);else{const D=Xa(y,E);null!=D&&(c.push(g),l.set(g,D))}}const d=new yr(c);return new h3(l,d,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function g3(t,e,n,r){const i=t.ya(1,e,n);pM("Data must be an object, but it was:",i,r);const s=[],o=kn.empty();Io(r,(u,c)=>{const l=My(e,u,n);c=Pt(c);const d=i.da(l);if(c instanceof Af)s.push(l);else{const h=Xa(c,d);null!=h&&(s.push(l),o.set(l,h))}});const a=new yr(s);return new h3(o,a,i.fieldTransforms)}(s,"updateDoc",t._key,e),Nf(i,[o.toMutation(t._key,bt.exists(!0))])}function rye(t){return Nf(ke(t.firestore,wt),[new zc(t._key,bt.none())])}function Nf(t,e){return function(n,r){const i=new an;return n.asyncQueue.enqueueAndForget(w(function*(){return function o_e(t,e,n){return O1.apply(this,arguments)}(yield function oM(t){return Dy(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(en(t),e)}!function(t,e=!0){Pc=co,An(new fn("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new wt(new Ppe(n.getProvider("auth-internal")),new Vpe(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new H(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),rt(gG,"3.13.0",t),rt(gG,"3.13.0","esm2017")}();class di{constructor(e){return e}}const M3="firestore",vM=new re("angularfire2.firestore-instances");function _ye(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new di(r)}}const yye={provide:class gye{constructor(){return ih(M3)}},deps:[[new Mt,vM]]},vye={provide:di,useFactory:function mye(t,e){const n=rh(M3,t,e);return n&&new di(n)},deps:[[new Mt,vM],ho]};let wye=(()=>{class t{constructor(){rt("angularfire",Ic.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({providers:[vye,yye]}),t})();function Eye(t,...e){return{ngModule:wye,providers:[{provide:vM,useFactory:_ye(t),multi:!0,deps:[Xe,Jn,sh,oh,[new Mt,d_],[new Mt,ch],...e]}]}}const hl=mr(L_e,!0),wM=mr(rye,!0),ks=mr(a3,!0),fl=mr(eye,!0),Iye=mr(B_e,!0),EM=mr(tye,!0),IM=mr(nye,!0),Cye=[{path:"auth",component:Jj,children:[{path:"login",component:Dfe},{path:"signup",component:(()=>{class t{constructor(n,r,i){this.auth=n,this.firestore=r,this.router=i,this.title="gestion-de-muestras-de-campo",this.data=[],this.getData()}Login(){this.router.navigate(["/auth/login"])}handleRegister(n){Efe(this.auth,n.email,n.password).then(r=>{console.log(r.user)}).catch(r=>{alert(r.message)}),this.addData(n)}addData(n){const r=ks(this.firestore,"users",n.email);n.password==n.confirmpassword?EM(r,{email:n.email,role:n.role,password:n.password}).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)}):alert("No Iguales")}getData(){const n=hl(this.firestore,"users");fl(n).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(di),V(xt))},t.\u0275cmp=bn({type:t,selectors:[["app-signup"]],decls:21,vars:0,consts:[["id","login",3,"click"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","email","ngModel","","placeholder","Email","id","email","type","email",1,"input-field"],["list","roles","name","role","ngModel","","placeholder","Role","id","role","type","role",1,"input-field"],["id","roles"],["value","Investigador"],["value","Cliente"],["name","password","ngModel","","placeholder","Password","id","password","type","password",1,"input-field"],["name","confirmpassword","ngModel","","placeholder","Confirm Password","id","confirmpassword","type","password",1,"input-field"]],template:function(n,r){if(1&n){const i=ia();ue(0,"p"),Ge(1,"signup works!"),he(),ue(2,"div")(3,"button",0),It("click",function(){return r.Login()}),Ge(4,"Log In"),he()(),ue(5,"form",1,2),It("ngSubmit",function(){Hs(i);const o=Ku(6);return Gs(r.handleRegister(o.value))}),ue(7,"div",3)(8,"div",4),nt(9,"input",5),he(),ue(10,"div",4),nt(11,"input",6),ue(12,"datalist",7),nt(13,"option",8)(14,"option",9),he()(),ue(15,"div",4),nt(16,"input",10),he(),ue(17,"div",4),nt(18,"input",11),he(),ue(19,"button"),Ge(20,"Sign Up"),he()()()}},dependencies:[uc,NV,OV,eo,ic,sc,ca,io],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})()},{path:"select",component:(()=>{class t{constructor(n,r){this.auth=n,this.router=r}Login(){this.router.navigate(["/auth/login"])}Signup(){this.router.navigate(["/auth/signup"])}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(xt))},t.\u0275cmp=bn({type:t,selectors:[["app-select"]],decls:8,vars:0,consts:[[1,"base"],["id","login",3,"click"],["id","signup",3,"click"]],template:function(n,r){1&n&&(ue(0,"div",0)(1,"div")(2,"button",1),It("click",function(){return r.Login()}),Ge(3,"Log In"),he()(),nt(4,"div"),ue(5,"div")(6,"button",2),It("click",function(){return r.Signup()}),Ge(7,"Sign Up"),he()()())},styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})()}]}];let bye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[ma.forChild(Cye),ma]}),t})(),Dye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[qg,nI,ma,bye]}),t})(),Tye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=bn({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(n,r){1&n&&(ue(0,"p"),Ge(1,"home works!"),he())}}),t})();function Sye(t,e){if(1&t){const n=ia();ue(0,"li")(1,"p",1),Ge(2),he(),ue(3,"button",2),It("click",function(){const s=Hs(n).$implicit;return Gs(gE().updateData(s.id))}),Ge(4," Update "),he(),ue(5,"button",2),It("click",function(){const s=Hs(n).$implicit;return Gs(gE().deleteData(s.id))}),Ge(6," Delete "),he()()}if(2&t){const n=e.$implicit;na(2),Ig(" ",n.email," ",n.name," ",n.password," ")}}let Aye=(()=>{class t{constructor(n,r,i,s){this.router=n,this.route=r,this.auth=i,this.firestore=s,this.data=[],this.getData()}ngOnInit(){}getData(){const n=hl(this.firestore,"users");fl(n).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(n){const r=ks(this.firestore,"users",n);IM(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(n){const r=ks(this.firestore,"users",n);wM(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return t.\u0275fac=function(n){return new(n||t)(V(xt),V(si),V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-admin"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["contenteditable","true"],[3,"click"]],template:function(n,r){1&n&&(ue(0,"p"),Ge(1,"admin works!"),he(),ue(2,"ul"),yg(3,Sye,7,3,"li",0),he()),2&n&&(na(3),ld("ngForOf",r.data))},dependencies:[Wg]}),t})(),Mye=(()=>{class t{constructor(n,r){this.auth=n,this.router=r}canActivate(n,r){return this.checkLogin(r.url)}checkLogin(n){return!!this.auth.currentUser||(this.router.navigate(["/"]),!1)}}return t.\u0275fac=function(n){return new(n||t)(le(Hn),le(xt))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x3=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=bn({type:t,selectors:[["app-user"]],decls:3,vars:0,template:function(n,r){1&n&&(ue(0,"p"),Ge(1,"user works!"),he(),nt(2,"router-outlet"))},dependencies:[$d]}),t})();var N3=M(6387);const xye=[{path:"",redirectTo:"auth/select",pathMatch:"full"},{path:"home",component:Tye},{path:"admin",component:Aye,canActivate:[Mye]},{path:"auth",component:Jj},{path:"user",component:x3},{path:"print/:id",component:(()=>{class t{constructor(n,r,i,s){this.router=n,this.route=r,this.auth=i,this.firestore=s}ngOnInit(){this.route.params.subscribe(n=>{this.item=n,console.log(n),this.generateBarcode(n)})}generateBarcode(n){N3("#barcode",n.id,{format:"CODE128"}),window.print()}}return t.\u0275fac=function(n){return new(n||t)(V(xt),V(si),V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-print"]],decls:1,vars:0,consts:[["id","barcode"]],template:function(n,r){1&n&&(Yv(),nt(0,"svg",0))}}),t})()}];let Nye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[ma.forRoot(xye),ma]}),t})(),Rye=(()=>{class t{constructor(n,r){this.auth=n,this.router=r,this.title="gestion-muestras"}handleSignOut(){bfe(this.auth).then(()=>{}).catch(n=>{console.log("here")})}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(xt))},t.\u0275cmp=bn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&nt(0,"router-outlet")},dependencies:[$d],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:center;align-items:center;flex-direction:column}.input-fields[_ngcontent-%COMP%]{margin:10px}.input-field[_ngcontent-%COMP%]{width:300px;height:20px}button[_ngcontent-%COMP%]{width:100px;height:40px;margin:10px;cursor:pointer}"]}),t})();const Oye_firebase={projectId:"gestion-de-muestras-de-campo",appId:"1:956362829056:web:235ab7e9c2cbd05ffe97e5",databaseURL:"https://gestion-de-muestras-de-campo-default-rtdb.firebaseio.com",storageBucket:"gestion-de-muestras-de-campo.appspot.com",apiKey:"AIzaSyDeImqmNn3CZpIAB1A9_q78bnqPVNM1ji8",authDomain:"gestion-de-muestras-de-campo.firebaseapp.com",messagingSenderId:"956362829056",measurementId:"G-T5SRLVHLR3"},R3="@firebase/database";let CM="";class Pye{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Sn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:Qd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Fye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return _s(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const k3=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Pye(e)}}catch{}return new Fye},Za=k3("localStorage"),bM=k3("sessionStorage"),pl=new va("@firebase/database"),P3=function(){let t=1;return function(){return t++}}(),F3=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Y(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new sse;n.update(e);const r=n.digest();return bm.encodeByteArray(r)},Rf=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Rf.apply(null,r):e+="object"==typeof r?Sn(r):r,e+=" "}return e};let eu=null,L3=!0;const En=function(...t){if(!0===L3&&(L3=!1,null===eu&&!0===bM.get("logging_enabled")&&function(t,e){Y(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(pl.logLevel=Fe.VERBOSE,eu=pl.log.bind(pl),e&&bM.set("logging_enabled",!0)):"function"==typeof t?eu=t:(eu=null,bM.remove("logging_enabled"))}(!0)),eu){const e=Rf.apply(null,t);eu(e)}},Of=function(t){return function(...e){En(t,...e)}},DM=function(...t){const e="FIREBASE INTERNAL ERROR: "+Rf(...t);pl.error(e)},Wi=function(...t){const e=`FIREBASE FATAL ERROR: ${Rf(...t)}`;throw pl.error(e),new Error(e)},Qn=function(...t){const e="FIREBASE WARNING: "+Rf(...t);pl.warn(e)},Ly=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Po="[MIN_NAME]",Ps="[MAX_NAME]",tu=function(t,e){if(t===e)return 0;if(t===Po||e===Ps)return-1;if(e===Po||t===Ps)return 1;{const n=$3(t),r=$3(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},Uye=function(t,e){return t===e?0:t<e?-1:1},kf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Sn(e))},TM=function(t){if("object"!=typeof t||null===t)return Sn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=Sn(e[r]),n+=":",n+=TM(t[e[r]]);return n+="}",n},U3=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function In(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const B3=function(t){Y(!Ly(t),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(u=52;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const l=c.join("");let d="";for(u=0;u<64;u+=8){let h=parseInt(l.substr(u,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Hye=new RegExp("^-?(0*)\\d{1,10}$"),$3=function(t){if(Hye.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},gl=function(t){try{t()}catch(e){setTimeout(()=>{throw Qn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Pf=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class qye{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Kye{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(En("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qn(e)}}let Ff=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const W3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Q3="websocket",Y3="long_polling";class AM{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Za.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Za.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function X3(t,e,n){let r;if(Y("string"==typeof e,"typeof type must == string"),Y("object"==typeof n,"typeof params must == object"),e===Q3)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Y3)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function Qye(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return In(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Yye{constructor(){this.counters_={}}incrementCounter(e,n=1){_s(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Wie(this.counters_)}}const MM={},xM={};function NM(t){const e=t.toString();return MM[e]||(MM[e]=new Yye),MM[e]}class Jye{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&gl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Of(e),this.stats_=NM(n),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),X3(n,Y3,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Jye(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new RM((...s)=>{const[o,a,u,c,l]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&W3.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fo.forceAllow_=!0}static forceDisallow(){Fo.forceDisallow_=!0}static isAvailable(){return!(!Fo.forceAllow_&&(Fo.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Sn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=QU(n),i=U3(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Sn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class RM{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=P3(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=RM.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){En("frame writing exception"),a.stack&&En(a.stack),En(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||En("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{En("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Uy=null;typeof MozWebSocket<"u"?Uy=MozWebSocket:typeof WebSocket<"u"&&(Uy=WebSocket);let ml=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Of(this.connId),this.stats_=NM(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&W3.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),X3(n,Q3,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Za.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Uy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Uy&&!t.forceDisallow_}static previouslyFailed(){return Za.isInMemoryStorage||!0===Za.get("previous_websocket_failure")}markConnectionHealthy(){Za.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Qd(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Y(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Sn(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=U3(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),iW=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Fo,ml]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=ml&&ml.isAvailable();let i=r&&!ml.previouslyFailed();if(n.webSocketOnly&&(r||Qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ml];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class dW{constructor(e,n,r,i,s,o,a,u,c,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Of("c:"+this.id+":"),this.transportManager_=new iW(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Pf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=kf("t",e),r=kf("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=kf("t",e),r=kf("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=kf("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?DM("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DM("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&Qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Pf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Za.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hW{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class fW{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){Y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class By extends fW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!NI()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new By}getInitialEvent(e){return Y("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ke{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function $e(){return new Ke("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Lo(t){return t.pieces_.length-t.pieceNum_}function ct(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ke(t.pieces_,e)}function kM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Lf(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function mW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ke(e,0)}function Dt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ke(n,0)}function Me(t){return t.pieceNum_>=t.pieces_.length}function or(t,e){const n=Ae(t),r=Ae(e);if(null===n)return e;if(n===r)return or(ct(t),ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function PM(t,e){if(Lo(t)!==Lo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Kr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Lo(t)>Lo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Eve{constructor(e,n){this.errorPrefix_=n,this.parts_=Lf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Rm(this.parts_[r]);_W(this)}}function _W(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nu(t))}function nu(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class FM extends fW{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new FM}getInitialEvent(e){return Y("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Vf=1e3;let jy,ru=(()=>{class t extends hW{constructor(n,r,i,s,o,a,u,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Of("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FM.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&By.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Sn(o)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new yc,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,u=>{const c=u.d,l=u.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),"ok"!==l&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&_s(n,"w")){const i=vc(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=Am(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=Am(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Sn(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):DM("Unrecognized action received from server: "+Sn(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vf,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Vf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Vf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return w(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let u=!1,c=null;const l=function(){c?c.close():(u=!0,s())};n.realtime_={close:l,sendRequest:function(g){Y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[g,y]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);u?En("getToken() completed but was canceled"):(En("getToken() completed. Creating connection."),n.authToken_=g&&g.accessToken,n.appCheckToken_=y&&y.token,c=new dW(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,E=>{Qn(E+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(g){n.log_("Failed to get token: "+g),u||(n.repoInfo_.nodeAdmin&&Qn(g),l())}}})()}interrupt(n){En("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){En("Resuming connection for reason: "+n),delete this.interruptReasons_[n],kI(this.interruptReasons_)&&(this.reconnectDelay_=Vf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>TM(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Ke(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){En("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){En("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+CM.replace(/\./g,"-")]=1,NI()?n["framework.cordova"]=1:tB()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=By.getInstance().currentlyOnline();return kI(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xe(e,n)}}class $y{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new xe(Po,e),i=new xe(Po,n);return 0!==this.compare(r,i)}minPost(){return xe.MIN}}class wW extends $y{static get __EMPTY_NODE(){return jy}static set __EMPTY_NODE(e){jy=e}compare(e,n){return tu(e.name,n.name)}isDefinedOn(e){throw _c("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xe.MIN}maxPost(){return new xe(Ps,jy)}makePost(e,n){return Y("string"==typeof e,"KeyIndex indexValue must always be a string."),new xe(e,jy)}toString(){return".key"}}const qi=new wW;class Hy{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let VM,hi=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??wr.EMPTY_NODE,this.right=o??wr.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return wr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class wr{constructor(e,n=wr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,hi.BLACK,null,null))}remove(e){return new wr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hi.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Hy(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Hy(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Hy(this.root_,null,this.comparator_,!0,e)}}function Mve(t,e){return tu(t.name,e.name)}function LM(t,e){return tu(t,e)}wr.EMPTY_NODE=new class Ave{copy(e,n,r,i,s){return this}insert(e,n,r){return new hi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const EW=function(t){return"number"==typeof t?"number:"+B3(t):"string:"+t},IW=function(t){if(t.isLeafNode()){const e=t.val();Y("string"==typeof e||"number"==typeof e||"object"==typeof e&&_s(e,".sv"),"Priority must be a string or number.")}else Y(t===VM||t.isEmpty(),"priority of unexpected type.");Y(t===VM||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let CW,bW,DW,_l=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,Y(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IW(this.priorityNode_)}static set __childrenNodeConstructor(n){CW=n}static get __childrenNodeConstructor(){return CW}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Me(n)?this:".priority"===Ae(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=Ae(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(Y(".priority"!==i||1===Lo(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ct(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+EW(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?B3(this.value_):this.value_,this.lazyHash_=F3(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(Y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return Y(s>=0,"Unknown leaf type: "+r),Y(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const pt=new class Ove extends $y{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?tu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xe.MIN}maxPost(){return new xe(Ps,new _l("[PRIORITY-POST]",DW))}makePost(e,n){const r=bW(e);return new xe(n,new _l("[PRIORITY-POST]",r))}toString(){return".priority"}},kve=Math.log(2);class Pve{constructor(e){this.count=parseInt(Math.log(e+1)/kve,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gy=function(t,e,n,r){t.sort(e);const i=function(u,c){const l=c-u;let d,h;if(0===l)return null;if(1===l)return d=t[u],h=n?n(d):d,new hi(h,d.node,hi.BLACK,null,null);{const g=parseInt(l/2,10)+u,y=i(u,g),E=i(g+1,c);return d=t[g],h=n?n(d):d,new hi(h,d.node,hi.BLACK,y,E)}},a=function(u){let c=null,l=null,d=t.length;const h=function(y,E){const D=d-y,R=d;d-=y;const S=i(D+1,R),G=t[D],ee=n?n(G):G;g(new hi(ee,G.node,E,null,S))},g=function(y){c?(c.left=y,c=y):(l=y,c=y)};for(let y=0;y<u.count;++y){const E=u.nextBitIsOne(),D=Math.pow(2,u.count-(y+1));E?h(D,hi.BLACK):(h(D,hi.BLACK),h(D,hi.RED))}return l}(new Pve(t.length));return new wr(r||e,a)};let UM;const yl={};class Fs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Y(yl&&pt,"ChildrenNode.ts has not been loaded"),UM=UM||new Fs({".priority":yl},{".priority":pt}),UM}get(e){const n=vc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wr?n:null}hasIndex(e){return _s(this.indexSet_,e.toString())}addIndex(e,n){Y(e!==qi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(xe.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Gy(r,e.getCompare()):yl;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const l=Object.assign({},this.indexes_);return l[u]=a,new Fs(l,c)}addToIndexes(e,n){const r=Mm(this.indexes_,(i,s)=>{const o=vc(this.indexSet_,s);if(Y(o,"Missing index implementation for "+s),i===yl){if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(xe.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Gy(a,o.getCompare())}return yl}{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new xe(e.name,a))),u.insert(e,e.node)}});return new Fs(r,this.indexSet_)}removeFromIndexes(e,n){const r=Mm(this.indexes_,i=>{if(i===yl)return i;{const s=n.get(e.name);return s?i.remove(new xe(e.name,s)):i}});return new Fs(r,this.indexSet_)}}let Uf,be=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&IW(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uf||(Uf=new t(new wr(LM),null,Fs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uf}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Uf:r}}getChild(n){const r=Ae(n);return null===r?this:this.getImmediateChild(r).getChild(ct(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(Y(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new xe(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Uf:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=Ae(n);if(null===i)return r;{Y(".priority"!==Ae(n)||1===Lo(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ct(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(pt,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+EW(this.getPriority().val())+":"),this.forEachChild(pt,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":F3(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new xe(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new xe(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new xe(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,xe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,xe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Bf?-1:0}withIndex(n){if(n===qi||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===qi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(pt),s=r.getIterator(pt);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===qi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Bf=new class Fve extends be{constructor(){super(new wr(LM),be.EMPTY_NODE,Fs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(xe,{MIN:{value:new xe(Po,be.EMPTY_NODE)},MAX:{value:new xe(Ps,Bf)}}),wW.__EMPTY_NODE=be.EMPTY_NODE,_l.__childrenNodeConstructor=be,function xve(t){VM=t}(Bf),function Rve(t){DW=t}(Bf);const Lve=!0;function Ot(t,e=null){if(null===t)return be.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Y(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new _l(t,Ot(e));if(t instanceof Array||!Lve){let n=be.EMPTY_NODE;return In(t,(r,i)=>{if(_s(t,r)&&"."!==r.substring(0,1)){const s=Ot(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ot(e))}{const n=[];let r=!1;if(In(t,(o,a)=>{if("."!==o.substring(0,1)){const u=Ot(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new xe(o,u)))}}),0===n.length)return be.EMPTY_NODE;const s=Gy(n,Mve,o=>o.name,LM);if(r){const o=Gy(n,pt.getCompare());return new be(s,Ot(e),new Fs({".priority":o},{".priority":pt}))}return new be(s,Ot(e),Fs.Default)}}!function Nve(t){bW=t}(Ot);class BM extends $y{constructor(e){super(),this.indexPath_=e,Y(!Me(e)&&".priority"!==Ae(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?tu(e.name,n.name):s}makePost(e,n){const r=Ot(e),i=be.EMPTY_NODE.updateChild(this.indexPath_,r);return new xe(n,i)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,Bf);return new xe(Ps,e)}toString(){return Lf(this.indexPath_,0).join("/")}}const $M=new class Vve extends $y{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?tu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xe.MIN}maxPost(){return xe.MAX}makePost(e,n){const r=Ot(e);return new xe(n,r)}toString(){return".value"}};function jf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class HM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Po}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ps}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pt}copy(){const e=new HM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function SW(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pt?n="$priority":t.index_===$M?n="$value":t.index_===qi?n="$key":(Y(t.index_ instanceof BM,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Sn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Sn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Sn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Sn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Sn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function AW(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==pt&&(e.i=t.index_.toString()),e}class Wy extends hW{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Of("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Wy.getListenId_(e,r),a={};this.listens_[o]=a;const u=SW(e._queryParams);this.restRequest_(s+".json",u,(c,l)=>{let d=l;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),vc(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,n){const r=Wy.getListenId_(e,n);delete this.listens_[r]}get(e){const n=SW(e._queryParams),r=e._path.toString(),i=new yc;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yd(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Qd(a.responseText)}catch{Qn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&Qn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Wve{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function qy(){return{value:null,children:new Map}}function wl(t,e,n){if(Me(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=Ae(e);t.children.has(r)||t.children.set(r,qy()),wl(t.children.get(r),e=ct(e),n)}}function qM(t,e,n){null!==t.value?n(e,t.value):function qve(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{qM(i,new Ke(e.toString()+"/"+r),n)})}class Kve{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&In(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class Xve{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Kve(e);const r=1e4+2e4*Math.random();Pf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;In(e,(i,s)=>{s>0&&_s(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Pf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ki=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ki||{});function YM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Ky{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ki.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Me(this.path)){if(null!=this.affectedTree.value)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ke(e));return new Ky($e(),n,this.revert)}}return Y(Ae(this.path)===e,"operationForChild called for unrelated child."),new Ky(ct(this.path),this.affectedTree,this.revert)}}class iu{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ki.OVERWRITE}operationForChild(e){return Me(this.path)?new iu(this.source,$e(),this.snap.getImmediateChild(e)):new iu(this.source,ct(this.path),this.snap)}}class El{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ki.MERGE}operationForChild(e){if(Me(this.path)){const n=this.children.subtree(new Ke(e));return n.isEmpty()?null:n.value?new iu(this.source,$e(),n.value):new El(this.source,$e(),n)}return Y(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new El(this.source,ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Me(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function zf(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>function twe(t,e,n){if(null==e.childName||null==n.childName)throw _c("Should only compare child_ events.");const r=new xe(e.childName,e.snapshotNode),i=new xe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,u)),o.forEach(a=>{const u=function ewe(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function Qy(t,e){return{eventCache:t,serverCache:e}}function Wf(t,e,n,r){return Qy(new Vo(e,n,r),t.serverCache)}function xW(t,e,n,r){return Qy(t.eventCache,new Vo(e,n,r))}function Yy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function su(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let XM;class gt{constructor(e,n=(()=>(XM||(XM=new wr(Uye)),XM))()){this.value=e,this.children=n}static fromObject(e){let n=new gt(null);return In(e,(r,i)=>{n=n.set(new Ke(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:$e(),value:this.value};if(Me(e))return null;{const r=Ae(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ct(e),n);return null!=s?{path:Dt(new Ke(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Me(e))return this;{const n=Ae(e),r=this.children.get(n);return null!==r?r.subtree(ct(e)):new gt(null)}}set(e,n){if(Me(e))return new gt(n,this.children);{const r=Ae(e),s=(this.children.get(r)||new gt(null)).set(ct(e),n),o=this.children.insert(r,s);return new gt(this.value,o)}}remove(e){if(Me(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const n=Ae(e),r=this.children.get(n);if(r){const i=r.remove(ct(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new gt(null):new gt(this.value,s)}return this}}get(e){if(Me(e))return this.value;{const n=Ae(e),r=this.children.get(n);return r?r.get(ct(e)):null}}setTree(e,n){if(Me(e))return n;{const r=Ae(e),s=(this.children.get(r)||new gt(null)).setTree(ct(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new gt(this.value,o)}}fold(e){return this.fold_($e(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Dt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,$e(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(Me(e))return null;{const s=Ae(e),o=this.children.get(s);return o?o.findOnPath_(ct(e),Dt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$e(),n)}foreachOnPath_(e,n,r){if(Me(e))return this;{this.value&&r(n,this.value);const i=Ae(e),s=this.children.get(i);return s?s.foreachOnPath_(ct(e),Dt(n,i),r):new gt(null)}}foreach(e){this.foreach_($e(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Dt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class fi{constructor(e){this.writeTree_=e}static empty(){return new fi(new gt(null))}}function qf(t,e,n){if(Me(e))return new fi(new gt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=or(i,e);return s=s.updateChild(o,n),new fi(t.writeTree_.set(i,s))}{const i=new gt(n),s=t.writeTree_.setTree(e,i);return new fi(s)}}}function JM(t,e,n){let r=t;return In(n,(i,s)=>{r=qf(r,Dt(e,i),s)}),r}function NW(t,e){if(Me(e))return fi.empty();{const n=t.writeTree_.setTree(e,new gt(null));return new fi(n)}}function ZM(t,e){return null!=ou(t,e)}function ou(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(or(n.path,e)):null}function RW(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(pt,(r,i)=>{e.push(new xe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new xe(r,i.value))}),e}function Uo(t,e){if(Me(e))return t;{const n=ou(t,e);return new fi(null!=n?new gt(n):t.writeTree_.subtree(e))}}function ex(t){return t.writeTree_.isEmpty()}function Il(t,e){return OW($e(),t.writeTree_,e)}function OW(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(Y(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=OW(Dt(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(Dt(t,".priority"),r)),n}}function Xy(t,e){return VW(e,t)}function awe(t,e){if(t.snap)return Kr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Kr(Dt(t.path,n),e))return!0;return!1}function cwe(t){return t.visible}function kW(t,e,n){let r=fi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Kr(n,o)?(a=or(n,o),r=qf(r,a,s.snap)):Kr(o,n)&&(a=or(o,n),r=qf(r,$e(),s.snap.getChild(a)));else{if(!s.children)throw _c("WriteRecord should have .snap or .children");if(Kr(n,o))a=or(n,o),r=JM(r,a,s.children);else if(Kr(o,n))if(a=or(o,n),Me(a))r=JM(r,$e(),s.children);else{const u=vc(s.children,Ae(a));if(u){const c=u.getChild(ct(a));r=qf(r,$e(),c)}}}}}return r}function PW(t,e,n,r,i){if(r||i){const s=Uo(t.visibleWrites,e);return!i&&ex(s)?n:i||null!=n||ZM(s,$e())?Il(kW(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Kr(c.path,e)||Kr(e,c.path))},e),n||be.EMPTY_NODE):null}{const s=ou(t.visibleWrites,e);if(null!=s)return s;{const o=Uo(t.visibleWrites,e);return ex(o)?n:null!=n||ZM(o,$e())?Il(o,n||be.EMPTY_NODE):null}}}function Jy(t,e,n,r){return PW(t.writeTree,t.treePath,e,n,r)}function tx(t,e){return function lwe(t,e,n){let r=be.EMPTY_NODE;const i=ou(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Uo(t.visibleWrites,e);return n.forEachChild(pt,(o,a)=>{const u=Il(Uo(s,new Ke(o)),a);r=r.updateImmediateChild(o,u)}),RW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return RW(Uo(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function FW(t,e,n,r){return function dwe(t,e,n,r,i){Y(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Dt(e,n);if(ZM(t.visibleWrites,s))return null;{const o=Uo(t.visibleWrites,s);return ex(o)?i.getChild(n):Il(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function Zy(t,e){return function fwe(t,e){return ou(t.visibleWrites,e)}(t.writeTree,Dt(t.treePath,e))}function nx(t,e,n){return function hwe(t,e,n,r){const i=Dt(e,n),s=ou(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Il(Uo(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function LW(t,e){return VW(Dt(t.treePath,e),t.writeTree)}function VW(t,e){return{treePath:t,writeTree:e}}class _we{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Y("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),Y(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,jf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,function $f(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,function vl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw _c("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,jf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UW=new class ywe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class rx{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Vo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:su(this.viewCache_),s=function mwe(t,e,n,r,i,s){return function pwe(t,e,n,r,i,s,o){let a;const u=Uo(t.visibleWrites,e),c=ou(u,$e());if(null!=c)a=c;else{if(null==n)return[];a=Il(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=h.getNext();for(;g&&l.length<i;)0!==d(g,r)&&l.push(g),g=h.getNext();return l}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function BW(t,e,n,r,i,s){const o=e.eventCache;if(null!=Zy(r,n))return e;{let a,u;if(Me(n))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=su(e),d=tx(r,c instanceof be?c:be.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Jy(r,su(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ae(n);if(".priority"===c){Y(1===Lo(n),"Can't have a priority with additional path components");const l=o.getNode();u=e.serverCache.getNode();const d=FW(r,n,l,u);a=null!=d?t.filter.updatePriority(l,d):o.getNode()}else{const l=ct(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const h=FW(r,n,o.getNode(),u);d=null!=h?o.getNode().getImmediateChild(c).updateChild(l,h):o.getNode().getImmediateChild(c)}else d=nx(r,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,l,i,s):o.getNode()}}return Wf(e,a,o.isFullyInitialized()||Me(n),t.filter.filtersNodes())}}function ev(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const l=o?t.filter:t.filter.getIndexedFilter();if(Me(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){const g=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),g,null)}else{const g=Ae(n);if(!u.isCompleteForPath(n)&&Lo(n)>1)return e;const y=ct(n),D=u.getNode().getImmediateChild(g).updateChild(y,r);c=".priority"===g?l.updatePriority(u.getNode(),D):l.updateChild(u.getNode(),g,D,y,UW,null)}const d=xW(e,c,u.isFullyInitialized()||Me(n),l.filtersNodes());return BW(t,d,n,i,new rx(i,d,s),a)}function ix(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const l=new rx(i,e,s);if(Me(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Wf(e,c,!0,t.filter.filtersNodes());else{const d=Ae(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),r),u=Wf(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=ct(n),g=a.getNode().getImmediateChild(d);let y;if(Me(h))y=r;else{const E=l.getCompleteChild(d);y=null!=E?".priority"===kM(h)&&E.getChild(mW(h)).isEmpty()?E:E.updateChild(h,r):be.EMPTY_NODE}u=g.equals(y)?e:Wf(e,t.filter.updateChild(a.getNode(),d,y,h,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function $W(t,e){return t.eventCache.isCompleteForChild(e)}function jW(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function sx(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=Me(n)?r:new gt(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const y=jW(0,e.serverCache.getNode().getImmediateChild(d),h);u=ev(t,u,new Ke(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const g=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!l.hasChild(d)&&!g){const E=jW(0,e.serverCache.getNode().getImmediateChild(d),h);u=ev(t,u,new Ke(d),E,i,s,o,a)}}),u}function xwe(t,e){const n=su(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Me(e)&&!n.getImmediateChild(Ae(e)).isEmpty())?n.getChild(e):null}function zW(t,e,n,r){e.type===Ki.MERGE&&null!==e.source.queryId&&(Y(su(t.viewCache_),"We should always have a full cache before handling merges"),Y(Yy(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function Ewe(t,e,n,r,i){const s=new _we;let o,a;if(n.type===Ki.OVERWRITE){const c=n;c.source.fromUser?o=ix(t,e,c.path,c.snap,r,i,s):(Y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Me(c.path),o=ev(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Ki.MERGE){const c=n;c.source.fromUser?o=function Cwe(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const l=Dt(n,u);$W(e,Ae(l))&&(a=ix(t,a,l,c,i,s,o))}),r.foreach((u,c)=>{const l=Dt(n,u);$W(e,Ae(l))||(a=ix(t,a,l,c,i,s,o))}),a}(t,e,c.path,c.children,r,i,s):(Y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=sx(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Ki.ACK_USER_WRITE){const c=n;o=c.revert?function Twe(t,e,n,r,i,s){let o;if(null!=Zy(r,n))return e;{const a=new rx(r,e,i),u=e.eventCache.getNode();let c;if(Me(n)||".priority"===Ae(n)){let l;if(e.serverCache.isFullyInitialized())l=Jy(r,su(e));else{const d=e.serverCache.getNode();Y(d instanceof be,"serverChildren would be complete if leaf node"),l=tx(r,d)}c=t.filter.updateFullNode(u,l,s)}else{const l=Ae(n);let d=nx(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=u.getImmediateChild(l)),c=null!=d?t.filter.updateChild(u,l,d,ct(n),a,s):e.eventCache.getNode().hasChild(l)?t.filter.updateChild(u,l,be.EMPTY_NODE,ct(n),a,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Jy(r,su(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Zy(r,$e()),Wf(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,r,i,s):function bwe(t,e,n,r,i,s,o){if(null!=Zy(i,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Me(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ev(t,e,n,u.getNode().getChild(n),i,s,a,o);if(Me(n)){let c=new gt(null);return u.getNode().forEachChild(qi,(l,d)=>{c=c.set(new Ke(l),d)}),sx(t,e,n,c,i,s,a,o)}return e}{let c=new gt(null);return r.foreach((l,d)=>{const h=Dt(n,l);u.isCompleteForPath(h)&&(c=c.set(l,u.getNode().getChild(h)))}),sx(t,e,n,c,i,s,a,o)}}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Ki.LISTEN_COMPLETE)throw _c("Unknown operation type: "+n.type);o=function Dwe(t,e,n,r,i){const s=e.serverCache;return BW(t,xW(e,s.getNode(),s.isFullyInitialized()||Me(n),s.isFiltered()),n,r,UW,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function Iwe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Yy(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function TW(t){return{type:"value",snapshotNode:t}}(Yy(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,i,e,n,r);return function wwe(t,e){Y(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),Y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,function WW(t,e,n,r){return function Zve(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Uve(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),zf(t,i,"child_removed",e,r,n),zf(t,i,"child_added",e,r,n),zf(t,i,"child_moved",s,r,n),zf(t,i,"child_changed",e,r,n),zf(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,s.changes,s.viewCache.eventCache.getNode(),null)}let tv,rv;function ox(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return Y(null!=s,"SyncTree gave us an op for an invalid query."),zW(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(zW(o,e,n,r));return s}}function Bo(t,e){let n=null;for(const r of t.views.values())n=n||xwe(r,e);return n}class JW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=function gwe(){return{visibleWrites:fi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ax(t,e,n,r,i){return function rwe(t,e,n,r,i){Y(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=qf(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Cl(t,new iu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function jo(t,e,n=!1){const r=function swe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function owe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Y(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&awe(a,r.path)?i=!1:Kr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function uwe(t){t.visibleWrites=kW(t.allWrites,cwe,$e()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=NW(t.visibleWrites,r.path):In(r.children,u=>{t.visibleWrites=NW(t.visibleWrites,Dt(r.path,u))}),!0))}(t.pendingWriteTree_,e)){let s=new gt(null);return null!=r.snap?s=s.set($e(),!0):In(r.children,o=>{s=s.set(new Ke(o),!0)}),Cl(t,new Ky(r.path,s,n))}return[]}function Kf(t,e,n){return Cl(t,new iu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function sv(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Bo(a,or(o,e));if(c)return c});return PW(i,e,s,n,!0)}function Cl(t,e){return eq(e,t.syncPointTree_,null,Xy(t.pendingWriteTree_,$e()))}function eq(t,e,n,r){if(Me(t.path))return tq(t,e,n,r);{const i=e.get($e());null==n&&null!=i&&(n=Bo(i,$e()));let s=[];const o=Ae(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,l=LW(r,o);s=s.concat(eq(a,u,c,l))}return i&&(s=s.concat(ox(i,t,r,n))),s}}function tq(t,e,n,r){const i=e.get($e());null==n&&null!=i&&(n=Bo(i,$e()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=LW(r,o),l=t.operationForChild(o);l&&(s=s.concat(tq(l,a,u,c)))}),i&&(s=s.concat(ox(i,t,r,n))),s}function cx(t,e){return t.tagToQueryMap.get(e)}function lx(t){const e=t.indexOf("$");return Y(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ke(t.substr(0,e))}}function dx(t,e,n){const r=t.syncPointTree_.get(e);return Y(r,"Missing sync point for query tag that we're tracking"),ox(r,n,Xy(t.pendingWriteTree_,e),null)}class hx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new hx(n)}node(){return this.node_}}class fx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Dt(this.path_,e);return new fx(this.syncTree_,n)}node(){return sv(this.syncTree_,this.path_)}}const Xwe=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},rq=function(t,e,n){return t&&"object"==typeof t?(Y(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Jwe(t[".sv"],e,n):"object"==typeof t[".sv"]?Zwe(t[".sv"],e):void Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Jwe=function(t,e,n){if("timestamp"===t)return n.timestamp;Y(!1,"Unexpected server value: "+t)},Zwe=function(t,e,n){t.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&Y(!1,"Unexpected increment value: "+r);const i=e.node();if(Y(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},iq=function(t,e,n,r){return gx(e,new fx(n,t),r)},px=function(t,e,n){return gx(t,new hx(e),n)};function gx(t,e,n){const r=t.getPriority().val(),i=rq(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=rq(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new _l(a,Ot(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new _l(i))),o.forEachChild(pt,(a,u)=>{const c=gx(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}class mx{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function av(t,e){let n=e instanceof Ke?e:new Ke(e),r=t,i=Ae(n);for(;null!==i;){const s=vc(r.node.children,i)||{children:{},childCount:0};r=new mx(i,r,s),n=ct(n),i=Ae(n)}return r}function au(t){return t.node.value}function _x(t,e){t.node.value=e,yx(t)}function sq(t){return t.node.childCount>0}function uv(t,e){In(t.node.children,(n,r)=>{e(new mx(n,t,r))})}function oq(t,e,n,r){n&&!r&&e(t),uv(t,i=>{oq(i,e,!0,r)}),n&&r&&e(t)}function Xf(t){return new Ke(null===t.parent?t.name:Xf(t.parent)+"/"+t.name)}function yx(t){null!==t.parent&&function nEe(t,e,n){const r=function eEe(t){return void 0===au(t)&&!sq(t)}(n),i=_s(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,yx(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,yx(t))}(t.parent,t.name,t)}const rEe=/[\[\].#$\/\u0000-\u001F\u007F]/,iEe=/[\[\].#$\u0000-\u001F\u007F]/,vx=10485760,cv=function(t){return"string"==typeof t&&0!==t.length&&!rEe.test(t)},Zf=function(t,e,n){const r=n instanceof Ke?new Eve(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nu(r));if("function"==typeof e)throw new Error(t+"contains a function "+nu(r)+" with contents = "+e.toString());if(Ly(e))throw new Error(t+"contains "+e.toString()+" "+nu(r));if("string"==typeof e&&e.length>vx/3&&Rm(e)>vx)throw new Error(t+"contains a string greater than "+vx+" utf8 bytes "+nu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(In(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!cv(o)))throw new Error(t+" contains an invalid key ("+o+") "+nu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ive(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Rm(e),_W(t)})(r,o),Zf(t,a,r),function Cve(t){const e=t.parts_.pop();t.byteLength_-=Rm(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nu(r)+" in addition to actual children.")}},cq=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!iEe.test(t)}(t)}(n))throw new Error(function Nm(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class uEe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Or(t,e,n){(function lv(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!PM(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function dq(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(cEe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>Kr(r,e)||Kr(e,r))}function cEe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();eu&&En("event: "+n.toString()),gl(r)}}}const lEe=25;class dEe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uEe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qy(),this.transactionQueueTree_=new mx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fq(t){const n=t.infoData_.getNode(new Ke(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function tp(t){return Xwe({timestamp:fq(t)})}function pq(t,e,n,r,i){t.dataUpdateCount++;const s=new Ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Mm(n,c=>Ot(c));o=function zwe(t,e,n,r){const i=cx(t,r);if(i){const s=lx(i),o=s.path,a=s.queryId,u=or(o,e),c=gt.fromObject(n);return dx(t,o,new El(YM(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{const u=Ot(n);o=function ZW(t,e,n,r){const i=cx(t,r);if(null!=i){const s=lx(i),o=s.path,a=s.queryId,u=or(o,e);return dx(t,o,new iu(YM(a),u,n))}return[]}(t.serverSyncTree_,s,u,i)}else if(r){const u=Mm(n,c=>Ot(c));o=function jwe(t,e,n){const r=gt.fromObject(n);return Cl(t,new El({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,u)}else{const u=Ot(n);o=Kf(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Dl(t,s)),Or(t.eventQueue_,a,o)}function gq(t,e){Ix(t,"connected",e),!1===e&&function mEe(t){bl(t,"onDisconnectEvents");const e=tp(t),n=qy();qM(t.onDisconnect_,$e(),(i,s)=>{const o=iq(i,s,t.serverSyncTree_,e);wl(n,i,o)});let r=[];qM(n,$e(),(i,s)=>{r=r.concat(Kf(t.serverSyncTree_,i,s));const o=function Tx(t,e){const n=Xf(yq(t,e)),r=av(t.transactionQueueTree_,e);return function tEe(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Sx(t,i)}),Sx(t,r),oq(r,i=>{Sx(t,i)}),n}(t,i);Dl(t,o)}),t.onDisconnect_=qy(),Or(t.eventQueue_,$e(),r)}(t)}function Ix(t,e,n){const r=new Ke("/.info/"+e),i=Ot(n);t.infoData_.updateSnapshot(r,i);const s=Kf(t.infoSyncTree_,r,i);Or(t.eventQueue_,r,s)}function dv(t){return t.nextWriteId_++}function bl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),En(n,...e)}function Dx(t,e,n){return sv(t.serverSyncTree_,e,n)||be.EMPTY_NODE}function hv(t,e=t.transactionQueueTree_){if(e||fv(t,e),au(e)){const n=vq(t,e);Y(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function CEe(t,e,n){const r=n.map(c=>c.currentWriteId),i=Dx(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const l=n[c];Y(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=or(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{bl(t,"transaction put response",{path:u.toString(),status:c});let l=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(jo(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();fv(t,av(t.transactionQueueTree_,e)),hv(t,t.transactionQueueTree_),Or(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)gl(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{Qn("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Dl(t,e)}},o)}(t,Xf(e),n)}else sq(e)&&uv(e,n=>{hv(t,n)})}function Dl(t,e){const n=yq(t,e),r=Xf(n);return function bEe(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=or(n,u.path);let d,l=!1;if(Y(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,d=u.abortReason,i=i.concat(jo(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=lEe)l=!0,d="maxretry",i=i.concat(jo(t.serverSyncTree_,u.currentWriteId,!0));else{const h=Dx(t,u.path,o);u.currentInputSnapshot=h;const g=e[a].update(h.val());if(void 0!==g){Zf("transaction failed: Data returned ",g,u.path);let y=Ot(g);"object"==typeof g&&null!=g&&_s(g,".priority")||(y=y.updatePriority(h.getPriority()));const D=u.currentWriteId,R=tp(t),S=px(y,h,R);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=S,u.currentWriteId=dv(t),o.splice(o.indexOf(D),1),i=i.concat(ax(t.serverSyncTree_,u.path,S,u.currentWriteId,u.applyLocally)),i=i.concat(jo(t.serverSyncTree_,D,!0))}else l=!0,d="nodata",i=i.concat(jo(t.serverSyncTree_,u.currentWriteId,!0))}Or(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}fv(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)gl(r[a]);hv(t,t.transactionQueueTree_)}(t,vq(t,n),r),r}function yq(t,e){let n,r=t.transactionQueueTree_;for(n=Ae(e);null!==n&&void 0===au(r);)r=av(r,n),n=Ae(e=ct(e));return r}function vq(t,e){const n=[];return wq(t,e,n),n.sort((r,i)=>r.order-i.order),n}function wq(t,e,n){const r=au(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);uv(e,i=>{wq(t,i,n)})}function fv(t,e){const n=au(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,_x(e,n.length>0?n:void 0)}uv(e,r=>{fv(t,r)})}function Sx(t,e){const n=au(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Y(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Y(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(jo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_x(e,void 0):n.length=s+1,Or(t.eventQueue_,Xf(e),i);for(let o=0;o<r.length;o++)gl(r[o])}}const Ax=function(t,e){const n=SEe(t),r=n.namespace;return"firebase.com"===n.domain&&Wi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Wi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new AM(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Ke(n.pathString)}},SEe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=function DEe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(l,d)));const h=function TEe(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qn(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if("localhost"===g.toLowerCase())n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class kr{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Me(this._path)?null:kM(this._path)}get ref(){return new pi(this._repo,this._path)}get _queryIdentifier(){const e=AW(this._queryParams),n=TM(e);return"{}"===n?"default":n}get _queryObject(){return AW(this._queryParams)}isEqual(e){if(!((e=Pt(e))instanceof kr))return!1;const n=this._repo===e._repo,r=PM(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vve(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class pi extends kr{constructor(e,n){super(e,n,new HM,!1)}get parent(){const e=mW(this._path);return null===e?null:new pi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Owe(t){Y(!tv,"__referenceConstructor has already been defined"),tv=t})(pi),function Vwe(t){Y(!rv,"__referenceConstructor has already been defined"),rv=t}(pi);const xx={};class qEe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function hEe(t,e,n){if(t.stats_=NM(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Wy(t.repoInfo_,(r,i,s,o)=>{pq(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>gq(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Sn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ru(t.repoInfo_,e,(r,i,s,o)=>{pq(t,r,i,s,o)},r=>{gq(t,r)},r=>{!function fEe(t,e){In(e,(n,r)=>{Ix(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function Xye(t,e){const n=t.toString();return xM[n]||(xM[n]=e()),xM[n]}(t.repoInfo_,()=>new Xve(t.stats_,t.server_)),t.infoData_=new Wve,t.infoSyncTree_=new JW({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Kf(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ix(t,"connected",!1),t.serverSyncTree_=new JW({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);Or(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pi(this._repo,$e())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function GEe(t,e){const n=xx[e];(!n||n[t.key]!==t)&&Wi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function _q(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Wi("Cannot call "+e+" on a deleted database.")}}function KEe(t=Zd(),e){const n=uo(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=xI("database");r&&function QEe(t,e,n,r={}){(t=Pt(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Wi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Wi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ff(Ff.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:eB(r.mockUserToken,t.app.options.projectId);s=new Ff(o)}!function jEe(t,e,n,r){t.repoInfo_=new AM(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(n,...r)}return n}ru.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ru.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function YEe(t){(function kye(t){CM=t})(co),An(new fn("database",(e,{instanceIdentifier:n})=>function HEe(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Wi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),En("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u,c,o=Ax(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=Ax(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const l=i&&u?new Ff(Ff.OWNER):new Kye(t.name,t.options,e);cq("Invalid Firebase Database URL",o),Me(o.path)||Wi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function zEe(t,e,n,r){let i=xx[e.name];i||(i={},xx[e.name]=i);let s=i[t.toURLString()];return s&&Wi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new dEe(t,!1,n,r),i[t.toURLString()]=s,s}(a,t,l,new qye(t.name,n));return new qEe(d,t)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),rt(R3,"0.14.4",t),rt(R3,"0.14.4","esm2017")}();class Nx{constructor(e){return e}}const Mq="database",Rx=new re("angularfire2.database-instances");function t0e(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Nx(r)}}const n0e={provide:class ZEe{constructor(){return ih(Mq)}},deps:[[new Mt,Rx]]},r0e={provide:Nx,useFactory:function e0e(t,e){const n=rh(Mq,t,e);return n&&new Nx(n)},deps:[[new Mt,Rx],ho]};let i0e=(()=>{class t{constructor(){rt("angularfire",Ic.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({providers:[r0e,n0e]}),t})();function s0e(t,...e){return{ngModule:i0e,providers:[{provide:Rx,useFactory:t0e(t),multi:!0,deps:[Xe,Jn,sh,oh,[new Mt,d_],[new Mt,ch],...e]}]}}const o0e=mr(KEe,!0),kx="functions";class d0e{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return w(function*(){if(e.auth)try{const n=yield e.auth.getToken();return n?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return w(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var n=this;return w(function*(){if(n.appCheck){const r=e?yield n.appCheck.getLimitedUseToken():yield n.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var n=this;return w(function*(){return{authToken:yield n.getAuthToken(),messagingToken:yield n.getMessagingToken(),appCheckToken:yield n.getAppCheckToken(e)}})()}}const Px="us-central1";class f0e{constructor(e,n,r,i,s=Px,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new d0e(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=Px}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}const Oq="@firebase/functions";function C0e(t=Zd(),e=Px){const r=uo(Pt(t),kx).getImmediate({identifier:e}),i=xI("functions");return i&&function b0e(t,e,n){!function p0e(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}(Pt(t),e,n)}(r,...i),r}!function I0e(t,e){An(new fn(kx,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),u=r.getProvider("app-check-internal");return new f0e(s,o,a,u,i,t)},"PUBLIC").setMultipleInstances(!0)),rt(Oq,"0.10.0",e),rt(Oq,"0.10.0","esm2017")}(fetch.bind(self));class Vx{constructor(e){return e}}const Pq="functions",Ux=new re("angularfire2.functions-instances");function S0e(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Vx(r)}}const A0e={provide:class D0e{constructor(){return ih(Pq)}},deps:[[new Mt,Ux]]},M0e={provide:Vx,useFactory:function T0e(t,e){const n=rh(Pq,t,e);return n&&new Vx(n)},deps:[[new Mt,Ux],ho]};let x0e=(()=>{class t{constructor(){rt("angularfire",Ic.full,"fn")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({providers:[M0e,A0e]}),t})();function N0e(t,...e){return{ngModule:x0e,providers:[{provide:Ux,useFactory:S0e(t),multi:!0,deps:[Xe,Jn,sh,oh,[new Mt,d_],[new Mt,ch],...e]}]}}const R0e=mr(C0e,!0);function O0e(t,e){if(1&t&&(ue(0,"li")(1,"p",1),Ge(2),he(),ue(3,"button"),Ge(4," Update "),he(),ue(5,"button"),Ge(6," Delete "),he()()),2&t){const n=e.$implicit;na(2),IE(" ",n.name," ",n.owner," ",n.integrantes," ",n.client," ")}}let k0e=(()=>{class t{constructor(n,r,i,s){this.router=n,this.route=r,this.auth=i,this.firestore=s,this.data=[],this.getData()}getData(){const n=hl(this.firestore,"projects");fl(n).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(n){const r=ks(this.firestore,"projects",n);IM(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(n){const r=ks(this.firestore,"projects",n);wM(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return t.\u0275fac=function(n){return new(n||t)(V(xt),V(si),V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-projects"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["contenteditable","true"]],template:function(n,r){1&n&&(ue(0,"p"),Ge(1,"projects works!"),he(),ue(2,"ul"),yg(3,O0e,7,4,"li",0),he()),2&n&&(na(3),ld("ngForOf",r.data))},dependencies:[Wg]}),t})();function P0e(t,e){if(1&t&&(ue(0,"li")(1,"p",1),Ge(2),he(),ue(3,"button"),Ge(4," Update "),he(),ue(5,"button"),Ge(6," Delete "),he()()),2&t){const n=e.$implicit;na(2),Ig(" ",n.name," ",n.owner," ",n.integrantes," ")}}const F0e=[{path:"user",component:x3,children:[{path:"projects",component:k0e},{path:"projects-new",component:(()=>{class t{constructor(n,r){this.auth=n,this.firestore=r,this.title="gestion-de-muestras-de-campo",this.data=[],this.getData()}handleRegister(n){this.addData(n)}addData(n){const r=ks(this.firestore,"projects",n.name);EM(r,n).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)})}getData(){const n=hl(this.firestore,"projects");fl(n).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-project-new"]],decls:15,vars:0,consts:[[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","name","ngModel","","placeholder","Name","id","name","type","name",1,"input-field"],["name","owner","ngModel","","placeholder","Owner","id","owner","type","owner",1,"input-field"],["name","integrantes","ngModel","","placeholder","Integrantes","id","integrantes","type","integrantes",1,"input-field"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field"]],template:function(n,r){if(1&n){const i=ia();ue(0,"p"),Ge(1,"project-new works!"),he(),ue(2,"form",0,1),It("ngSubmit",function(){Hs(i);const o=Ku(3);return Gs(r.handleRegister(o.value))}),ue(4,"div",2)(5,"div",3),nt(6,"input",4),he(),ue(7,"div",3),nt(8,"input",5),he(),ue(9,"div",3),nt(10,"input",6),he(),ue(11,"div",3),nt(12,"input",7),he(),ue(13,"button"),Ge(14,"Sign Up"),he()()()}},dependencies:[uc,eo,ic,sc,ca,io]}),t})()},{path:"barcode",component:(()=>{class t{constructor(n,r,i,s){this.router=n,this.route=r,this.auth=i,this.firestore=s,this.data=[]}generateBarcode(n){var r=n.txt_input;this.res=r,N3("#barcode",r,{format:"CODE128"})}toPrint(){this.router.navigate(["/print/"+this.res])}}return t.\u0275fac=function(n){return new(n||t)(V(xt),V(si),V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-barcode"]],decls:16,vars:0,consts:[[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","txt_input","ngModel","","placeholder"," ","id","txt_input","type","text",1,"input-field"],["id","btn_generate"],["onclick","window.print(this)","id","barcode"],[3,"click"]],template:function(n,r){if(1&n){const i=ia();ue(0,"p"),Ge(1,"barcode works!"),he(),nt(2,"br"),ue(3,"form",0,1),It("ngSubmit",function(){Hs(i);const o=Ku(4);return Gs(r.generateBarcode(o.value))}),ue(5,"div",2)(6,"div",3),nt(7,"input",4),he(),nt(8,"br"),ue(9,"button",5),Ge(10,"Generate Barcode"),he()()(),nt(11,"br")(12,"br"),Yv(),nt(13,"svg",6),function oR(){!function W9(){fe.lFrame.currentNamespace=null}()}(),ue(14,"button",7),It("click",function(){return r.toPrint()}),Ge(15,"Print"),he()}},dependencies:[uc,eo,ic,sc,ca,io]}),t})()},{path:"muestras",component:(()=>{class t{constructor(n,r,i,s){this.router=n,this.route=r,this.auth=i,this.firestore=s,this.data=[],this.getData()}getData(){const n=hl(this.firestore,"muestras");fl(n).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}updateData(n){const r=ks(this.firestore,"muestras",n);IM(r,{}).then(()=>{alert("Data updated"),this.getData()}).catch(i=>{alert(i.message)})}deleteData(n){const r=ks(this.firestore,"muestras",n);wM(r).then(()=>{alert("Data Deleted"),this.getData()}).catch(i=>{alert(i.message)})}}return t.\u0275fac=function(n){return new(n||t)(V(xt),V(si),V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-muestras"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["contenteditable","true"]],template:function(n,r){1&n&&(ue(0,"p"),Ge(1,"muestras works!"),he(),ue(2,"ul"),yg(3,P0e,7,3,"li",0),he()),2&n&&(na(3),ld("ngForOf",r.data))},dependencies:[Wg]}),t})()},{path:"muestras-new",component:(()=>{class t{constructor(n,r){this.auth=n,this.firestore=r,this.title="gestion-de-muestras-de-campo",this.data=[],this.getData()}handleRegister(n){this.addData(n)}addData(n){const r=ks(this.firestore,"muestras",n.name);EM(r,n).then(()=>{alert("Data Sent")}).catch(i=>{alert(i.message)})}getData(){const n=hl(this.firestore,"muestras");fl(n).then(r=>{this.data=[...r.docs.map(i=>({...i.data(),id:i.id}))]})}}return t.\u0275fac=function(n){return new(n||t)(V(Hn),V(di))},t.\u0275cmp=bn({type:t,selectors:[["app-muestras-new"]],decls:15,vars:0,consts:[[3,"ngSubmit"],["loginForm","ngForm"],[1,"main"],[1,"input-fields"],["name","name","ngModel","","placeholder","Name","id","name","type","name",1,"input-field"],["name","owner","ngModel","","placeholder","Owner","id","owner","type","owner",1,"input-field"],["name","integrantes","ngModel","","placeholder","Integrantes","id","integrantes","type","integrantes",1,"input-field"],["name","cliente","ngModel","","placeholder","Cliente","id","cliente","type","cliente",1,"input-field"]],template:function(n,r){if(1&n){const i=ia();ue(0,"p"),Ge(1,"muestras-new works!"),he(),ue(2,"form",0,1),It("ngSubmit",function(){Hs(i);const o=Ku(3);return Gs(r.handleRegister(o.value))}),ue(4,"div",2)(5,"div",3),nt(6,"input",4),he(),ue(7,"div",3),nt(8,"input",5),he(),ue(9,"div",3),nt(10,"input",6),he(),ue(11,"div",3),nt(12,"input",7),he(),ue(13,"button"),Ge(14,"Sign Up"),he()()()}},dependencies:[uc,eo,ic,sc,ca,io]}),t})()},{path:"scan",component:(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=bn({type:t,selectors:[["app-scan"]],decls:2,vars:0,template:function(n,r){1&n&&(ue(0,"p"),Ge(1,"scan works!"),he())}}),t})()}]}];let L0e=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[ma.forChild(F0e),ma]}),t})(),V0e=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[qg,L0e,nI]}),t})(),U0e=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=$t({imports:[qg]}),t})(),B0e=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yt({type:t,bootstrap:[Rye]}),t.\u0275inj=$t({providers:[{provide:Js,useClass:QL}],imports:[fte,Nye,nI,Dye,Lce(()=>Vce(Oye_firebase)),wfe(()=>Ife()),s0e(()=>o0e()),Eye(()=>Iye()),N0e(()=>R0e()),V0e,U0e]}),t})();dte().bootstrapModule(B0e).catch(t=>console.error(t))},6387:(ce,C,M)=>{var F=K(M(4168)),x=K(M(6017)),B=K(M(1301)),U=K(M(7164)),f=K(M(8619)),_=K(M(4866)),v=K(M(3057)),b=M(723),j=K(M(530));function K(Re){return Re&&Re.__esModule?Re:{default:Re}}var te=function(){},it=function(st,Tt,tt){var Ue=new te;if(typeof st>"u")throw Error("No element to render on was provided.");return Ue._renderProperties=(0,f.default)(st),Ue._encodings=[],Ue._options=j.default,Ue._errorHandler=new v.default(Ue),typeof Tt<"u"&&((tt=tt||{}).format||(tt.format=Ls()),Ue.options(tt)[tt.format](Tt,tt).render()),Ue};for(var Er in it.getModule=function(Re){return F.default[Re]},F.default)F.default.hasOwnProperty(Er)&&Pr(F.default,Er);function Pr(Re,st){te.prototype[st]=te.prototype[st.toUpperCase()]=te.prototype[st.toLowerCase()]=function(Tt,tt){var Ue=this;return Ue._errorHandler.wrapBarcodeCall(function(){tt.text=typeof tt.text>"u"?void 0:""+tt.text;var ar=(0,x.default)(Ue._options,tt);ar=(0,_.default)(ar);var Et=Wo(Tt,Re[st],ar);return Ue._encodings.push(Et),Ue})}}function Wo(Re,st,Tt){var tt=new st(Re=""+Re,Tt);if(!tt.valid())throw new b.InvalidInputException(tt.constructor.name,Re);var Ue=tt.encode();Ue=(0,B.default)(Ue);for(var ar=0;ar<Ue.length;ar++)Ue[ar].options=(0,x.default)(Tt,Ue[ar].options);return Ue}function Ls(){return F.default.CODE128?"CODE128":Object.keys(F.default)[0]}function Vs(Re,st,Tt){st=(0,B.default)(st);for(var tt=0;tt<st.length;tt++)st[tt].options=(0,x.default)(Tt,st[tt].options),(0,U.default)(st[tt].options);(0,U.default)(Tt),new(0,Re.renderer)(Re.element,st,Tt).render(),Re.afterRender&&Re.afterRender()}te.prototype.options=function(Re){return this._options=(0,x.default)(this._options,Re),this},te.prototype.blank=function(Re){var st=new Array(Re+1).join("0");return this._encodings.push({data:st}),this},te.prototype.init=function(){var Re;if(this._renderProperties)for(var st in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var Tt=(0,x.default)(this._options,(Re=this._renderProperties[st]).options);"auto"==Tt.format&&(Tt.format=Ls()),this._errorHandler.wrapBarcodeCall(function(){var ar=Wo(Tt.value,F.default[Tt.format.toUpperCase()],Tt);Vs(Re,ar,Tt)})}},te.prototype.render=function(){if(!this._renderProperties)throw new b.NoElementException;if(Array.isArray(this._renderProperties))for(var Re=0;Re<this._renderProperties.length;Re++)Vs(this._renderProperties[Re],this._encodings,this._options);else Vs(this._renderProperties,this._encodings,this._options);return this},te.prototype._defaults=j.default,typeof window<"u"&&(window.JsBarcode=it),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(Re,st){var Tt=[];return jQuery(this).each(function(){Tt.push(this)}),it(Tt,Re,st)}),ce.exports=it},9418:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.default=function F(P,x){(function M(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")})(this,F),this.data=P,this.text=x.text||P,this.options=x}},8514:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),P=function L(f){return f&&f.__esModule?f:{default:f}}(M(9418)),x=M(9144),I=function(f){function p(_,m){!function B(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p);var v=function A(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,_.substring(1),m));return v.bytes=_.split("").map(function(b){return b.charCodeAt(0)}),v}return function U(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var m=this.bytes,v=m.shift()-105,b=x.SET_BY_CODE[v];if(void 0===b)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&m.unshift(x.FNC1);var T=p.next(m,1,b);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:p.getBar(v)+T.result+p.getBar((T.checksum+v)%x.MODULO)+p.getBar(x.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var m=this.options.ean128||!1;return"string"==typeof m&&(m="true"===m.toLowerCase()),m}}],[{key:"getBar",value:function(m){return x.BARS[m]?x.BARS[m].toString():""}},{key:"correctIndex",value:function(m,v){if(v===x.SET_A){var b=m.shift();return b<32?b+64:b-32}return v===x.SET_B?m.shift()-32:10*(m.shift()-48)+m.shift()-48}},{key:"next",value:function(m,v,b){if(!m.length)return{result:"",checksum:0};var T=void 0,j=void 0;if(m[0]>=200){j=m.shift()-105;var K=x.SWAP[j];void 0!==K?T=p.next(m,v+1,K):((b===x.SET_A||b===x.SET_B)&&j===x.SHIFT&&(m[0]=b===x.SET_A?m[0]>95?m[0]-96:m[0]:m[0]<32?m[0]+96:m[0]),T=p.next(m,v+1,b))}else j=p.correctIndex(m,b),T=p.next(m,v+1,b);return{result:p.getBar(j)+T.result,checksum:j*v+T.checksum}}}]),p}(P.default);C.default=I},2100:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),P=function L(f){return f&&f.__esModule?f:{default:f}}(M(8514)),x=M(9144),I=function(f){function p(_,m){return function B(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),function A(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,x.A_START_CHAR+_,m))}return function U(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"valid",value:function(){return new RegExp("^"+x.A_CHARS+"+$").test(this.data)}}]),p}(P.default);C.default=I},2943:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),P=function L(f){return f&&f.__esModule?f:{default:f}}(M(8514)),x=M(9144),I=function(f){function p(_,m){return function B(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),function A(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,x.B_START_CHAR+_,m))}return function U(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"valid",value:function(){return new RegExp("^"+x.B_CHARS+"+$").test(this.data)}}]),p}(P.default);C.default=I},5683:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),P=function L(f){return f&&f.__esModule?f:{default:f}}(M(8514)),x=M(9144),I=function(f){function p(_,m){return function B(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),function A(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,x.C_START_CHAR+_,m))}return function U(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"valid",value:function(){return new RegExp("^"+x.C_CHARS+"+$").test(this.data)}}]),p}(P.default);C.default=I},7737:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=L(M(8514)),x=L(M(4336));function L(f){return f&&f.__esModule?f:{default:f}}function A(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}var I=function(f){function p(_,m){if(function B(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),/^[\x00-\x7F\xC8-\xD3]+$/.test(_))var v=A(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,(0,x.default)(_),m));else v=A(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,_,m));return A(v)}return function U(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),p}(F.default);C.default=I},4336:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=M(9144),F=function(U){return U.match(new RegExp("^"+O.A_CHARS+"*"))[0].length},P=function(U){return U.match(new RegExp("^"+O.B_CHARS+"*"))[0].length},x=function(U){return U.match(new RegExp("^"+O.C_CHARS+"*"))[0]};function L(A,U){var I=U?O.A_CHARS:O.B_CHARS,f=A.match(new RegExp("^("+I+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(f)return f[1]+String.fromCharCode(204)+B(A.substring(f[1].length));var p=A.match(new RegExp("^"+I+"+"))[0];return p.length===A.length?A:p+String.fromCharCode(U?205:206)+L(A.substring(p.length),!U)}function B(A){var U=x(A),I=U.length;if(I===A.length)return A;A=A.substring(I);var f=F(A)>=P(A);return U+String.fromCharCode(f?206:205)+L(A,f)}C.default=function(A){var U=void 0;if(x(A).length>=2)U=O.C_START_CHAR+B(A);else{var f=F(A)>P(A);U=(f?O.A_START_CHAR:O.B_START_CHAR)+L(A,f)}return U.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(p,_){return String.fromCharCode(203)+_})}},9144:(ce,C)=>{var M;function O(Er,Pr,Wo){return Pr in Er?Object.defineProperty(Er,Pr,{value:Wo,enumerable:!0,configurable:!0,writable:!0}):Er[Pr]=Wo,Er}Object.defineProperty(C,"__esModule",{value:!0});var F=C.SET_A=0,P=C.SET_B=1,x=C.SET_C=2,B=(C.SHIFT=98,C.START_A=103),A=C.START_B=104,U=C.START_C=105;C.MODULO=103,C.STOP=106,C.FNC1=207,C.SET_BY_CODE=(O(M={},B,F),O(M,A,P),O(M,U,x),M),C.SWAP={101:F,100:P,99:x},C.A_START_CHAR=String.fromCharCode(208),C.B_START_CHAR=String.fromCharCode(209),C.C_START_CHAR=String.fromCharCode(210),C.A_CHARS="[\0-_\xc8-\xcf]",C.B_CHARS="[ -\x7f\xc8-\xcf]",C.C_CHARS="(\xcf*[0-9]{2}\xcf*)",C.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},8754:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.CODE128C=C.CODE128B=C.CODE128A=C.CODE128=void 0;var F=I(M(7737)),x=I(M(2100)),B=I(M(2943)),U=I(M(5683));function I(f){return f&&f.__esModule?f:{default:f}}C.CODE128=F.default,C.CODE128A=x.default,C.CODE128B=B.default,C.CODE128C=U.default},6602:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.CODE39=void 0;var O=function(){function T(j,K){for(var te=0;te<K.length;te++){var it=K[te];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(j,it.key,it)}}return function(j,K,te){return K&&T(j.prototype,K),te&&T(j,te),j}}(),U=function(T){function j(K,te){return function L(T,j){if(!(T instanceof j))throw new TypeError("Cannot call a class as a function")}(this,j),K=K.toUpperCase(),te.mod43&&(K+=function m(T){return I[T]}(function b(T){for(var j=0,K=0;K<T.length;K++)j+=v(T[K]);return j%=43}(K))),function B(T,j){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?T:j}(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,K,te))}return function A(T,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);T.prototype=Object.create(j&&j.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(T,j):T.__proto__=j)}(j,T),O(j,[{key:"encode",value:function(){for(var te=p("*"),it=0;it<this.data.length;it++)te+=p(this.data[it])+"0";return{data:te+=p("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),j}(function x(T){return T&&T.__esModule?T:{default:T}}(M(9418)).default),I=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],f=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function p(T){return function _(T){return f[T].toString(2)}(v(T))}function v(T){return I.indexOf(T)}C.CODE39=U},4079:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function _(m,v){for(var b=0;b<v.length;b++){var T=v[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,v,b){return v&&_(m.prototype,v),b&&_(m,b),m}}(),F=M(1392),x=A(M(2651));function A(_){return _&&_.__esModule?_:{default:_}}var p=function(_){function m(v,b){!function U(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}(this,m);var T=function I(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?_:m}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v,b));return T.fontSize=!b.flat&&b.fontSize>10*b.width?10*b.width:b.fontSize,T.guardHeight=b.height+T.fontSize/2+b.textMargin,T}return function f(_,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}(m,_),O(m,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(b,T){return this.text.substr(b,T)}},{key:"leftEncode",value:function(b,T){return(0,x.default)(b,T)}},{key:"rightText",value:function(b,T){return this.text.substr(b,T)}},{key:"rightEncode",value:function(b,T){return(0,x.default)(b,T)}},{key:"encodeGuarded",value:function(){var b={fontSize:this.fontSize},T={height:this.guardHeight};return[{data:F.SIDE_BIN,options:T},{data:this.leftEncode(),text:this.leftText(),options:b},{data:F.MIDDLE_BIN,options:T},{data:this.rightEncode(),text:this.rightText(),options:b},{data:F.SIDE_BIN,options:T}]}},{key:"encodeFlat",value:function(){return{data:[F.SIDE_BIN,this.leftEncode(),F.MIDDLE_BIN,this.rightEncode(),F.SIDE_BIN].join(""),text:this.text}}}]),m}(A(M(9418)).default);C.default=p},9619:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function _(m,v){for(var b=0;b<v.length;b++){var T=v[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,v,b){return v&&_(m.prototype,v),b&&_(m,b),m}}(),F=function _(m,v,b){null===m&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,v);if(void 0===T){var j=Object.getPrototypeOf(m);return null===j?void 0:_(j,v,b)}if("value"in T)return T.value;var K=T.get;return void 0===K?void 0:K.call(b)},P=M(1392),L=function B(_){return _&&_.__esModule?_:{default:_}}(M(4079)),f=function(m){return(10-m.substr(0,12).split("").map(function(b){return+b}).reduce(function(b,T,j){return j%2?b+3*T:b+T},0)%10)%10},p=function(_){function m(v,b){(function A(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")})(this,m),-1!==v.search(/^[0-9]{12}$/)&&(v+=f(v));var T=function U(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?_:m}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v,b));return T.lastChar=b.lastChar,T}return function I(_,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}(m,_),O(m,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===f(this.data)}},{key:"leftText",value:function(){return F(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var b=this.data.substr(1,6),T=P.EAN13_STRUCTURE[this.data[0]];return F(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"leftEncode",this).call(this,b,T)}},{key:"rightText",value:function(){return F(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var b=this.data.substr(7,6);return F(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"rightEncode",this).call(this,b,"RRRRRR")}},{key:"encodeGuarded",value:function(){var b=F(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(b.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(b.push({data:"00"}),b.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),b}}]),m}(L.default);C.default=p},5754:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function _(m,v){for(var b=0;b<v.length;b++){var T=v[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,v,b){return v&&_(m.prototype,v),b&&_(m,b),m}}(),F=M(1392),x=A(M(2651));function A(_){return _&&_.__esModule?_:{default:_}}var p=function(_){function m(v,b){return function U(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}(this,m),function I(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?_:m}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v,b))}return function f(_,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}(m,_),O(m,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var b=F.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,x.default)(this.data,b,"01"),text:this.text}}}]),m}(A(M(9418)).default);C.default=p},1931:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function m(v,b){for(var T=0;T<b.length;T++){var j=b[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(v,j.key,j)}}return function(v,b,T){return b&&m(v.prototype,b),T&&m(v,T),v}}(),F=M(1392),x=A(M(2651));function A(m){return m&&m.__esModule?m:{default:m}}var _=function(m){function v(b,T){return function U(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}(this,v),function I(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?m:v}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b,T))}return function f(m,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}(v,m),O(v,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var T=F.EAN5_STRUCTURE[function(v){return v.split("").map(function(T){return+T}).reduce(function(T,j,K){return K%2?T+9*j:T+3*j},0)%10}(this.data)];return{data:"1011"+(0,x.default)(this.data,T,"01"),text:this.text}}}]),v}(A(M(9418)).default);C.default=_},3372:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function p(_,m){for(var v=0;v<m.length;v++){var b=m[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,m,v){return m&&p(_.prototype,m),v&&p(_,v),_}}(),F=function p(_,m,v){null===_&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,m);if(void 0===b){var T=Object.getPrototypeOf(_);return null===T?void 0:p(T,m,v)}if("value"in b)return b.value;var j=b.get;return void 0===j?void 0:j.call(v)},x=function L(p){return p&&p.__esModule?p:{default:p}}(M(4079)),I=function(_){return(10-_.substr(0,7).split("").map(function(v){return+v}).reduce(function(v,b,T){return T%2?v+b:v+3*b},0)%10)%10},f=function(p){function _(m,v){return function B(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_),-1!==m.search(/^[0-9]{7}$/)&&(m+=I(m)),function A(p,_){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?p:_}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,m,v))}return function U(p,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(p,_):p.__proto__=_)}(_,p),O(_,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===I(this.data)}},{key:"leftText",value:function(){return F(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var v=this.data.substr(0,4);return F(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"leftEncode",this).call(this,v,"LLLL")}},{key:"rightText",value:function(){return F(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var v=this.data.substr(4,4);return F(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"rightEncode",this).call(this,v,"RRRR")}}]),_}(x.default);C.default=f},5821:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function _(m,v){for(var b=0;b<v.length;b++){var T=v[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,v,b){return v&&_(m.prototype,v),b&&_(m,b),m}}();C.checksum=p;var P=B(M(2651));function B(_){return _&&_.__esModule?_:{default:_}}var f=function(_){function m(v,b){(function A(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")})(this,m),-1!==v.search(/^[0-9]{11}$/)&&(v+=p(v));var T=function U(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?_:m}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v,b));return T.displayValue=b.displayValue,T.fontSize=b.fontSize>10*b.width?10*b.width:b.fontSize,T.guardHeight=b.height+T.fontSize/2+b.textMargin,T}return function I(_,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}(m,_),O(m,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==p(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var b="";return b+="101",b+=(0,P.default)(this.data.substr(0,6),"LLLLLL"),b+="01010",b+=(0,P.default)(this.data.substr(6,6),"RRRRRR"),{data:b+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var b=[];return this.displayValue&&b.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),b.push({data:"101"+(0,P.default)(this.data[0],"L"),options:{height:this.guardHeight}}),b.push({data:(0,P.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),b.push({data:"01010",options:{height:this.guardHeight}}),b.push({data:(0,P.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),b.push({data:(0,P.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&b.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),b}}]),m}(B(M(9418)).default);function p(_){var v,m=0;for(v=1;v<11;v+=2)m+=parseInt(_[v]);for(v=0;v<11;v+=2)m+=3*parseInt(_[v]);return(10-m%10)%10}C.default=f},1091:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function b(T,j){for(var K=0;K<j.length;K++){var te=j[K];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(T,te.key,te)}}return function(T,j,K){return j&&b(T.prototype,j),K&&b(T,K),T}}(),P=A(M(2651)),L=A(M(9418)),B=M(5821);function A(b){return b&&b.__esModule?b:{default:b}}function I(b,T){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||"object"!=typeof T&&"function"!=typeof T?b:T}var p=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],_=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],m=function(b){function T(j,K){!function U(b,T){if(!(b instanceof T))throw new TypeError("Cannot call a class as a function")}(this,T);var te=I(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,j,K));if(te.isValid=!1,-1!==j.search(/^[0-9]{6}$/))te.middleDigits=j,te.upcA=v(j,"0"),te.text=K.text||""+te.upcA[0]+j+te.upcA[te.upcA.length-1],te.isValid=!0;else{if(-1===j.search(/^[01][0-9]{7}$/))return I(te);if(te.middleDigits=j.substring(1,j.length-1),te.upcA=v(te.middleDigits,j[0]),te.upcA[te.upcA.length-1]!==j[j.length-1])return I(te);te.isValid=!0}return te.displayValue=K.displayValue,te.fontSize=K.fontSize>10*K.width?10*K.width:K.fontSize,te.guardHeight=K.height+te.fontSize/2+K.textMargin,te}return function f(b,T){if("function"!=typeof T&&null!==T)throw new TypeError("Super expression must either be null or a function, not "+typeof T);b.prototype=Object.create(T&&T.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(b,T):b.__proto__=T)}(T,b),O(T,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var K="";return K+="101",K+=this.encodeMiddleDigits(),{data:K+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var K=[];return this.displayValue&&K.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),K.push({data:"101",options:{height:this.guardHeight}}),K.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),K.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&K.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),K}},{key:"encodeMiddleDigits",value:function(){var K=this.upcA[0],it=_[parseInt(this.upcA[this.upcA.length-1])][parseInt(K)];return(0,P.default)(this.middleDigits,it)}}]),T}(L.default);function v(b,T){for(var j=parseInt(b[b.length-1]),K=p[j],te="",it=0,Er=0;Er<K.length;Er++){var Pr=K[Er];te+="X"===Pr?b[it++]:Pr}return(te=""+T+te)+(0,B.checksum)(te)}C.default=m},1392:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.SIDE_BIN="101",C.MIDDLE_BIN="01010",C.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},C.EAN2_STRUCTURE=["LL","LG","GL","GG"],C.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],C.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},2651:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=M(1392);C.default=function(x,L,B){var A=x.split("").map(function(I,f){return O.BINARIES[L[f]]}).map(function(I,f){return I?I[x[f]]:""});if(B){var U=x.length-1;A=A.map(function(I,f){return f<U?I+B:I})}return A.join("")}},2708:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.UPCE=C.UPC=C.EAN2=C.EAN5=C.EAN8=C.EAN13=void 0;var F=m(M(9619)),x=m(M(3372)),B=m(M(1931)),U=m(M(5754)),f=m(M(5821)),_=m(M(1091));function m(v){return v&&v.__esModule?v:{default:v}}C.EAN13=F.default,C.EAN8=x.default,C.EAN5=B.default,C.EAN2=U.default,C.UPC=f.default,C.UPCE=_.default},8817:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.GenericBarcode=void 0;var O=function(){function I(f,p){for(var _=0;_<p.length;_++){var m=p[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,p,_){return p&&I(f.prototype,p),_&&I(f,_),f}}(),U=function(I){function f(p,_){return function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,_))}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),O(f,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),f}(function x(I){return I&&I.__esModule?I:{default:I}}(M(9418)).default);C.GenericBarcode=U},6065:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),F=M(5168),I=function(f){function p(){return function B(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),function A(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return function U(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var m=this,v=this.data.match(/.{2}/g).map(function(b){return m.encodePair(b)}).join("");return{data:F.START_BIN+v+F.END_BIN,text:this.text}}},{key:"encodePair",value:function(m){var v=F.BINARIES[m[1]];return F.BINARIES[m[0]].split("").map(function(b,T){return("1"===b?"111":"1")+("1"===v[T]?"000":"0")}).join("")}}]),p}(function L(f){return f&&f.__esModule?f:{default:f}}(M(9418)).default);C.default=I},9643:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),P=function x(f){return f&&f.__esModule?f:{default:f}}(M(6065)),U=function(p){var _=p.substr(0,13).split("").map(function(m){return parseInt(m,10)}).reduce(function(m,v,b){return m+v*(3-b%2*2)},0);return 10*Math.ceil(_/10)-_},I=function(f){function p(_,m){return function L(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),-1!==_.search(/^[0-9]{13}$/)&&(_+=U(_)),function B(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,_,m))}return function A(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===U(this.data)}}]),p}(P.default);C.default=I},5168:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.START_BIN="1010",C.END_BIN="11101",C.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},8969:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.ITF14=C.ITF=void 0;var F=L(M(6065)),x=L(M(9643));function L(B){return B&&B.__esModule?B:{default:B}}C.ITF=F.default,C.ITF14=x.default},7037:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function f(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,_,m){return _&&f(p.prototype,_),m&&f(p,m),p}}(),U=function(f){function p(_,m){return function L(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),function B(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?f:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,_,m))}return function A(f,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}(p,f),O(p,[{key:"encode",value:function(){for(var m="110",v=0;v<this.data.length;v++){var T=parseInt(this.data[v]).toString(2);T=I(T,4-T.length);for(var j=0;j<T.length;j++)m+="0"==T[j]?"100":"110"}return{data:m+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),p}(function x(f){return f&&f.__esModule?f:{default:f}}(M(9418)).default);function I(f,p){for(var _=0;_<p;_++)f="0"+f;return f}C.default=U},3922:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=function x(I){return I&&I.__esModule?I:{default:I}}(M(7037)),P=M(6225),U=function(I){function f(p,_){return function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p+(0,P.mod10)(p),_))}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),f}(F.default);C.default=U},8742:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=function x(I){return I&&I.__esModule?I:{default:I}}(M(7037)),P=M(6225),U=function(I){function f(p,_){return function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),p+=(0,P.mod10)(p),p+=(0,P.mod10)(p),function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,_))}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),f}(F.default);C.default=U},1825:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=function x(I){return I&&I.__esModule?I:{default:I}}(M(7037)),P=M(6225),U=function(I){function f(p,_){return function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p+(0,P.mod11)(p),_))}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),f}(F.default);C.default=U},4455:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=function x(I){return I&&I.__esModule?I:{default:I}}(M(7037)),P=M(6225),U=function(I){function f(p,_){return function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f),p+=(0,P.mod11)(p),p+=(0,P.mod10)(p),function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,_))}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),f}(F.default);C.default=U},6225:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.mod10=function M(F){for(var P=0,x=0;x<F.length;x++){var L=parseInt(F[x]);P+=(x+F.length)%2==0?L:2*L%10+Math.floor(2*L/10)}return(10-P%10)%10},C.mod11=function O(F){for(var P=0,x=[2,3,4,5,6,7],L=0;L<F.length;L++){var B=parseInt(F[F.length-1-L]);P+=x[L%x.length]*B}return(11-P%11)%11}},1122:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.MSI1110=C.MSI1010=C.MSI11=C.MSI10=C.MSI=void 0;var F=p(M(7037)),x=p(M(3922)),B=p(M(1825)),U=p(M(8742)),f=p(M(4455));function p(_){return _&&_.__esModule?_:{default:_}}C.MSI=F.default,C.MSI10=x.default,C.MSI11=B.default,C.MSI1010=U.default,C.MSI1110=f.default},886:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.codabar=void 0;var O=function(){function I(f,p){for(var _=0;_<p.length;_++){var m=p[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,p,_){return p&&I(f.prototype,p),_&&I(f,_),f}}(),U=function(I){function f(p,_){(function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")})(this,f),0===p.search(/^[0-9\-\$\:\.\+\/]+$/)&&(p="A"+p+"A");var m=function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p.toUpperCase(),_));return m.text=m.options.text||m.text.replace(/[A-D]/g,""),m}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),O(f,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var _=[],m=this.getEncodings(),v=0;v<this.data.length;v++)_.push(m[this.data.charAt(v)]),v!==this.data.length-1&&_.push("0");return{text:this.text,data:_.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),f}(function x(I){return I&&I.__esModule?I:{default:I}}(M(9418)).default);C.codabar=U},4168:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=M(6602),F=M(8754),P=M(2708),x=M(8969),L=M(1122),B=M(8758),A=M(886),U=M(8817);C.default={CODE39:O.CODE39,CODE128:F.CODE128,CODE128A:F.CODE128A,CODE128B:F.CODE128B,CODE128C:F.CODE128C,EAN13:P.EAN13,EAN8:P.EAN8,EAN5:P.EAN5,EAN2:P.EAN2,UPC:P.UPC,UPCE:P.UPCE,ITF14:x.ITF14,ITF:x.ITF,MSI:L.MSI,MSI10:L.MSI10,MSI11:L.MSI11,MSI1010:L.MSI1010,MSI1110:L.MSI1110,pharmacode:B.pharmacode,codabar:A.codabar,GenericBarcode:U.GenericBarcode}},8758:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.pharmacode=void 0;var O=function(){function I(f,p){for(var _=0;_<p.length;_++){var m=p[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,p,_){return p&&I(f.prototype,p),_&&I(f,_),f}}(),U=function(I){function f(p,_){!function L(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")}(this,f);var m=function B(I,f){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?I:f}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,_));return m.number=parseInt(p,10),m}return function A(I,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);I.prototype=Object.create(f&&f.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(I,f):I.__proto__=f)}(f,I),O(f,[{key:"encode",value:function(){for(var _=this.number,m="";!isNaN(_)&&0!=_;)_%2==0?(m="11100"+m,_=(_-2)/2):(m="100"+m,_=(_-1)/2);return{data:m=m.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),f}(function x(I){return I&&I.__esModule?I:{default:I}}(M(9418)).default);C.pharmacode=U},3057:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var M=function(){function P(x,L){for(var B=0;B<L.length;B++){var A=L[B];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}return function(x,L,B){return L&&P(x.prototype,L),B&&P(x,B),x}}(),F=function(){function P(x){(function O(P,x){if(!(P instanceof x))throw new TypeError("Cannot call a class as a function")})(this,P),this.api=x}return M(P,[{key:"handleCatch",value:function(L){if("InvalidInputException"!==L.name)throw L;if(this.api._options.valid===this.api._defaults.valid)throw L.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(L){try{var B=L.apply(void 0,arguments);return this.api._options.valid(!0),B}catch(A){return this.handleCatch(A),this.api}}}]),P}();C.default=F},723:(ce,C)=>{function M(B,A){if(!(B instanceof A))throw new TypeError("Cannot call a class as a function")}function O(B,A){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?B:A}function F(B,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);B.prototype=Object.create(A&&A.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(B,A):B.__proto__=A)}Object.defineProperty(C,"__esModule",{value:!0});var P=function(B){function A(U,I){M(this,A);var f=O(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));return f.name="InvalidInputException",f.symbology=U,f.input=I,f.message='"'+f.input+'" is not a valid input for '+f.symbology,f}return F(A,Error),A}(),x=function(B){function A(){M(this,A);var U=O(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));return U.name="InvalidElementException",U.message="Not supported type to render on",U}return F(A,Error),A}(),L=function(B){function A(){M(this,A);var U=O(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));return U.name="NoElementException",U.message="No element to render on.",U}return F(A,Error),A}();C.InvalidInputException=P,C.InvalidElementException=x,C.NoElementException=L},7164:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.default=function M(O){return O.marginTop=O.marginTop||O.margin,O.marginBottom=O.marginBottom||O.margin,O.marginRight=O.marginRight||O.margin,O.marginLeft=O.marginLeft||O.margin,O}},7020:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=L(M(4866)),x=L(M(530));function L(A){return A&&A.__esModule?A:{default:A}}C.default=function B(A){var U={};for(var I in x.default)x.default.hasOwnProperty(I)&&(A.hasAttribute("jsbarcode-"+I.toLowerCase())&&(U[I]=A.getAttribute("jsbarcode-"+I.toLowerCase())),A.hasAttribute("data-"+I.toLowerCase())&&(U[I]=A.getAttribute("data-"+I.toLowerCase())));return U.value=A.getAttribute("jsbarcode-value")||A.getAttribute("data-value"),(0,F.default)(U)}},8619:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},P=A(M(7020)),L=A(M(2233)),B=M(723);function A(p){return p&&p.__esModule?p:{default:p}}C.default=function U(p){if("string"==typeof p)return function I(p){var _=document.querySelectorAll(p);if(0!==_.length){for(var m=[],v=0;v<_.length;v++)m.push(U(_[v]));return m}}(p);if(Array.isArray(p)){for(var _=[],m=0;m<p.length;m++)_.push(U(p[m]));return _}if(typeof HTMLCanvasElement<"u"&&p instanceof HTMLImageElement)return function f(p){var _=document.createElement("canvas");return{element:_,options:(0,P.default)(p),renderer:L.default.CanvasRenderer,afterRender:function(){p.setAttribute("src",_.toDataURL())}}}(p);if(p&&p.nodeName&&"svg"===p.nodeName.toLowerCase()||typeof SVGElement<"u"&&p instanceof SVGElement)return{element:p,options:(0,P.default)(p),renderer:L.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement)return{element:p,options:(0,P.default)(p),renderer:L.default.CanvasRenderer};if(p&&p.getContext)return{element:p,renderer:L.default.CanvasRenderer};if(p&&"object"===(typeof p>"u"?"undefined":O(p))&&!p.nodeName)return{element:p,renderer:L.default.ObjectRenderer};throw new B.InvalidElementException}},1301:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.default=function M(O){var F=[];return function P(x){if(Array.isArray(x))for(var L=0;L<x.length;L++)P(x[L]);else x.text=x.text||"",x.data=x.data||"",F.push(x)}(O),F}},6017:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var M=Object.assign||function(O){for(var F=1;F<arguments.length;F++){var P=arguments[F];for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])}return O};C.default=function(O,F){return M({},O,F)}},4866:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.default=function M(O){var F=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var P in F)F.hasOwnProperty(P)&&"string"==typeof O[P=F[P]]&&(O[P]=parseInt(O[P],10));return"string"==typeof O.displayValue&&(O.displayValue="false"!=O.displayValue),O}},530:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},1799:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function U(I,f){for(var p=0;p<f.length;p++){var _=f[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(I,_.key,_)}}return function(I,f,p){return f&&U(I.prototype,f),p&&U(I,p),I}}(),P=function L(U){return U&&U.__esModule?U:{default:U}}(M(6017)),x=M(4358),A=function(){function U(I,f,p){(function B(U,I){if(!(U instanceof I))throw new TypeError("Cannot call a class as a function")})(this,U),this.canvas=I,this.encodings=f,this.options=p}return O(U,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var f=0;f<this.encodings.length;f++){var p=(0,P.default)(this.options,this.encodings[f].options);this.drawCanvasBarcode(p,this.encodings[f]),this.drawCanvasText(p,this.encodings[f]),this.moveCanvasDrawing(this.encodings[f])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var f=this.canvas.getContext("2d");f.save(),(0,x.calculateEncodingAttributes)(this.encodings,this.options,f);var p=(0,x.getTotalWidthOfEncodings)(this.encodings),_=(0,x.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=p+this.options.marginLeft+this.options.marginRight,this.canvas.height=_,f.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(f.fillStyle=this.options.background,f.fillRect(0,0,this.canvas.width,this.canvas.height)),f.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(f,p){var v,_=this.canvas.getContext("2d"),m=p.data;v="top"==f.textPosition?f.marginTop+f.fontSize+f.textMargin:f.marginTop,_.fillStyle=f.lineColor;for(var b=0;b<m.length;b++){var T=b*f.width+p.barcodePadding;"1"===m[b]?_.fillRect(T,v,f.width,f.height):m[b]&&_.fillRect(T,v,f.width,f.height*m[b])}}},{key:"drawCanvasText",value:function(f,p){var v,b,_=this.canvas.getContext("2d");f.displayValue&&(b="top"==f.textPosition?f.marginTop+f.fontSize-f.textMargin:f.height+f.textMargin+f.marginTop+f.fontSize,_.font=f.fontOptions+" "+f.fontSize+"px "+f.font,"left"==f.textAlign||p.barcodePadding>0?(v=0,_.textAlign="left"):"right"==f.textAlign?(v=p.width-1,_.textAlign="right"):(v=p.width/2,_.textAlign="center"),_.fillText(p.text,v,b))}},{key:"moveCanvasDrawing",value:function(f){this.canvas.getContext("2d").translate(f.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),U}();C.default=A},2233:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var F=A(M(1799)),x=A(M(5794)),B=A(M(1138));function A(U){return U&&U.__esModule?U:{default:U}}C.default={CanvasRenderer:F.default,SVGRenderer:x.default,ObjectRenderer:B.default}},1138:(ce,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var M=function(){function P(x,L){for(var B=0;B<L.length;B++){var A=L[B];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}return function(x,L,B){return L&&P(x.prototype,L),B&&P(x,B),x}}(),F=function(){function P(x,L,B){(function O(P,x){if(!(P instanceof x))throw new TypeError("Cannot call a class as a function")})(this,P),this.object=x,this.encodings=L,this.options=B}return M(P,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),P}();C.default=F},4358:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.getTotalWidthOfEncodings=C.calculateEncodingAttributes=C.getBarcodePadding=C.getEncodingHeight=C.getMaximumHeightOfEncodings=void 0;var F=function P(f){return f&&f.__esModule?f:{default:f}}(M(6017));function x(f,p){return p.height+(p.displayValue&&f.text.length>0?p.fontSize+p.textMargin:0)+p.marginTop+p.marginBottom}function L(f,p,_){if(_.displayValue&&p<f){if("center"==_.textAlign)return Math.floor((f-p)/2);if("left"==_.textAlign)return 0;if("right"==_.textAlign)return Math.floor(f-p)}return 0}function I(f,p,_){var m;if(_)m=_;else{if(!(typeof document<"u"))return 0;m=document.createElement("canvas").getContext("2d")}m.font=p.fontOptions+" "+p.fontSize+"px "+p.font;var v=m.measureText(f);return v?v.width:0}C.getMaximumHeightOfEncodings=function U(f){for(var p=0,_=0;_<f.length;_++)f[_].height>p&&(p=f[_].height);return p},C.getEncodingHeight=x,C.getBarcodePadding=L,C.calculateEncodingAttributes=function B(f,p,_){for(var m=0;m<f.length;m++){var T,v=f[m],b=(0,F.default)(p,v.options);T=b.displayValue?I(v.text,b,_):0;var j=v.data.length*b.width;v.width=Math.ceil(Math.max(T,j)),v.height=x(v,b),v.barcodePadding=L(T,j,b)}},C.getTotalWidthOfEncodings=function A(f){for(var p=0,_=0;_<f.length;_++)p+=f[_].width;return p}},5794:(ce,C,M)=>{Object.defineProperty(C,"__esModule",{value:!0});var O=function(){function I(f,p){for(var _=0;_<p.length;_++){var m=p[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,p,_){return p&&I(f.prototype,p),_&&I(f,_),f}}(),P=function L(I){return I&&I.__esModule?I:{default:I}}(M(6017)),x=M(4358),A="http://www.w3.org/2000/svg",U=function(){function I(f,p,_){(function B(I,f){if(!(I instanceof f))throw new TypeError("Cannot call a class as a function")})(this,I),this.svg=f,this.encodings=p,this.options=_,this.document=_.xmlDocument||document}return O(I,[{key:"render",value:function(){var p=this.options.marginLeft;this.prepareSVG();for(var _=0;_<this.encodings.length;_++){var m=this.encodings[_],v=(0,P.default)(this.options,m.options),b=this.createGroup(p,v.marginTop,this.svg);this.setGroupOptions(b,v),this.drawSvgBarcode(b,v,m),this.drawSVGText(b,v,m),p+=m.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,x.calculateEncodingAttributes)(this.encodings,this.options);var p=(0,x.getTotalWidthOfEncodings)(this.encodings),_=(0,x.getMaximumHeightOfEncodings)(this.encodings),m=p+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(m,_),this.options.background&&this.drawRect(0,0,m,_,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(p,_,m){var b,v=m.data;b="top"==_.textPosition?_.fontSize+_.textMargin:0;for(var T=0,j=0,K=0;K<v.length;K++)j=K*_.width+m.barcodePadding,"1"===v[K]?T++:T>0&&(this.drawRect(j-_.width*T,b,_.width*T,_.height,p),T=0);T>0&&this.drawRect(j-_.width*(T-1),b,_.width*T,_.height,p)}},{key:"drawSVGText",value:function(p,_,m){var b,T,v=this.document.createElementNS(A,"text");_.displayValue&&(v.setAttribute("style","font:"+_.fontOptions+" "+_.fontSize+"px "+_.font),T="top"==_.textPosition?_.fontSize-_.textMargin:_.height+_.textMargin+_.fontSize,"left"==_.textAlign||m.barcodePadding>0?(b=0,v.setAttribute("text-anchor","start")):"right"==_.textAlign?(b=m.width-1,v.setAttribute("text-anchor","end")):(b=m.width/2,v.setAttribute("text-anchor","middle")),v.setAttribute("x",b),v.setAttribute("y",T),v.appendChild(this.document.createTextNode(m.text)),p.appendChild(v))}},{key:"setSvgAttributes",value:function(p,_){var m=this.svg;m.setAttribute("width",p+"px"),m.setAttribute("height",_+"px"),m.setAttribute("x","0px"),m.setAttribute("y","0px"),m.setAttribute("viewBox","0 0 "+p+" "+_),m.setAttribute("xmlns",A),m.setAttribute("version","1.1"),m.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(p,_,m){var v=this.document.createElementNS(A,"g");return v.setAttribute("transform","translate("+p+", "+_+")"),m.appendChild(v),v}},{key:"setGroupOptions",value:function(p,_){p.setAttribute("style","fill:"+_.lineColor+";")}},{key:"drawRect",value:function(p,_,m,v,b){var T=this.document.createElementNS(A,"rect");return T.setAttribute("x",p),T.setAttribute("y",_),T.setAttribute("width",m),T.setAttribute("height",v),b.appendChild(T),T}}]),I}();C.default=U}},ce=>{ce(ce.s=1187)}]);